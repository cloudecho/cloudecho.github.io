{"config":{"indexing":"full","lang":["ja"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"HOME \u00b6 OPENSOURCE DATABASE FRONTEND UTILITIES BOOKS","title":"HOME"},{"location":"#home","text":"OPENSOURCE DATABASE FRONTEND UTILITIES BOOKS","title":"HOME"},{"location":"BOOKS/2016-02-27-%25e6%2595%258f%25e6%258d%25b7%25e8%25bd%25af%25e4%25bb%25b6%25e5%25bc%2580%25e5%258f%2591%25ef%25bc%259a%25e5%258e%259f%25e5%2588%2599%25e3%2580%2581%25e6%25a8%25a1%25e5%25bc%258f%25e4%25b8%258e%25e5%25ae%259e%25e8%25b7%25b5.html/","tags":["\u654f\u6377","\u56fe\u4e66","\u5b9e\u8df5","\u539f\u5219","\u6a21\u5f0f"],"text":"# Book Author Format 1 \u654f\u6377\u8f6f\u4ef6\u5f00\u53d1\uff1a\u539f\u5219\u3001\u6a21\u5f0f\u4e0e\u5b9e\u8df5 Robert C. Martin & Micah Martin epub","title":"\u654f\u6377\u8f6f\u4ef6\u5f00\u53d1\uff1a\u539f\u5219\u3001\u6a21\u5f0f\u4e0e\u5b9e\u8df5"},{"location":"BOOKS/2017-05-07-echo-chenping-sanmao-articles/","tags":["\u4e09\u6bdb","sanmao","Echo Chen Ping","\u6587\u96c6","\u4f5c\u54c1\u96c6"],"text":"\u6587\u96c6 \u00b6 \u300a\u54ed\u6ce3\u7684\u9a86\u9a7c\u300b \u00b6 \u5728\u300a\u54ed\u6ce3\u7684\u9a86\u9a7c\u300b\u4e2d\uff0c\u4e09\u6bdb\u4f9d\u7136\u604b\u604b\u7740\u58a8\u6c99\u6f20\u751f\u6d3b\u5468\u906d\u7684\u4eba\u4e0e\u4e8b\uff0c\u300a\u6536\u9b42\u8bb0\u300b\u3001\u300a\u642d\u8f66\u5ba2\u300b\u3001\u300a\u900d\u9065\u4e03\u5c9b\u6e38\u300b\u3001\u300a\u4e00\u4e2a\u964c\u751f\u4eba\u7684\u6b7b\u300b\u3001\u300a\u5927\u80e1\u5b50\u4e0e\u6211\u300b\u7b49\u7bc7\uff0c\u60c5\u8da3\u76ce\u7136\uff1b\u300a\u6c99\u5df4\u519b\u66f9\u300b\u4e0e\u300a\u54d1\u5974\u300b\u6240\u523b\u753b\u7684\u4e3b\u89d2\uff0c\u7ed9\u4eba\u7559\u4e0b\u4e86\u96be\u4ee5\u78e8\u706d\u7684\u5370\u8c61\uff1b\u800c\u538b\u8f74\u7684\u300a\u54ed\u6ce3\u7684\u9a86\u9a7c\u300b\uff0c\u4ee5\u6e38\u51fb\u6218\u4e8b\u4e3a\u80cc\u666f\uff0c\u7ec6\u7ec6\u94fa\u5199\u4e00\u5bf9\u6c99\u6f20\u60c5\u9e33\u7684\u751f\u6b7b\u76df\uff0c\u7adf\u72b9\u5982\u53f2\u8bd7\u822c\u7684\u78c5\u7934\u3002\u4e09\u6bdb\u4e3a\u8bfb\u8005\u6784\u7b51\u4e86\u4e00\u4e2a\u6709\u6cea\u6709\u7b11\u3001\u6b32\u7f62\u4e0d\u80fd\u7684\u6587\u5b66\u4e16\u754c\u3002 \u5c18\u7f18 \u2014\u2014\u91cd\u65b0\u7684\u7236\u4eb2\u8282\uff08\u4ee3\u5e8f\uff09 \u6536\u9b42\u8bb0 \u6c99\u5df4\u519b\u66f9 \u642d\u8f66\u5ba2 \u54ed\u6ce3\u7684\u9a86\u9a7c(1) \u54ed\u6ce3\u7684\u9a86\u9a7c(2) \u900d\u9065\u4e03\u5c9b\u6e38 \u4e00\u4e2a\u964c\u751f\u4eba\u7684\u6b7b \u5927\u80e1\u5b50\u4e0e\u6211 \u54d1 \u5974 \u300a\u95f9\u5b66\u8bb0\u300b \u00b6 \u5982\u679c\u4f60\u770b\u8fc7\u300a\u96e8\u5b63\u4e0d\u518d\u6765\u300b\u3001\u300a\u6492\u54c8\u62c9\u7684\u6545\u4e8b\u300b\uff0c\u4ee5\u53ca\u300a\u80cc\u5f71\u300b\u8fd9\u4e09\u4e2a\u9636\u6bb5\u7684\u4e09\u6bdb\uff0c\u4f60\u5fc5\u987b\u518d\u770b\u4e00\u672c\u5c5e\u4e8e\u540e\u4e09\u6bdb\u65f6\u671f\u7684\u300a\u95f9\u5b66\u8bb0\u300b\uff0c\u4e09\u6bdb\u4ee5\u6700\u65b0\u7684\u6587\u98ce\u4e0e\u5bf9\u771f\u5b9e\u751f\u6d3b\u7684\u89c1\u8bc1\uff0c\u5411\u4f60\u5c55\u73b0\u4e86\u4e00\u4e2a\u5fc3\u795e\u6cbb\u6109\u7684\u7f8e\u4e3d\u65b0\u4e16\u754c\u3002\u8bfb\u4e66\u548c\u65c5\u884c\uff0c\u662f\u6211\u4e2a\u4eba\u751f\u547d\u4e2d\u7684\u4e24\u9897\u4e00\u7ea7\u661f\uff0c\u5feb\u4e50\u6700\u6df1\u7684\u65f6\u5149\uff0c\u5927\u534a\u90fd\u7531\u8fd9\u4e24\u4ef6\u4e8b\u60c5\u4e2d\u5f97\u6765\u3002 \u5e8f\u4e00\uff1a\u6211\u5bb6\u8001\u4e8c\u2014\u2014\u4e09\u5c0f\u59d0 \u5e8f\u4e8c\uff1a\u6211\u6709\u8bdd\u8981\u8bf4 \u4f60\u4ece\u54ea\u91cc\u6765 \u5982\u679c\u6559\u5ba4\u50cf\u6e38\u4e50\u573a \u6625\u5929\u4e0d\u662f\u8bfb\u4e66\u5929 \u6211\u5148\u8d70\u4e86 \u8001\u5144\uff0c\u6211\u9192\u7740 \u7231\u9a6c\u843d\u6c34\u4e4b\u591c \u6211\u8981\u56de\u5bb6 \u6c42 \u5a5a \u5b64\u72ec\u7684\u957f\u8dd1\u8005 \u6768\u67f3\u9752\u9752 \u7f6a\u5728\u90a3\u91cc \u661f \u77f3 \u5409\u5c4b\u51fa\u552e \u968f\u98ce\u800c\u53bb E\u00b7T\u56de\u5bb6 \u91cd\u5efa\u5bb6\u56ed \u540e \u8bb0 \u300a\u503e\u57ce\u300b \u00b6 \u5f20\u7231\u73b2\u7684\u503e\u57ce\u4e4b\u604b\u53d1\u751f\u5728\u9999\u6e2f\uff0c\u4e09\u6bdb\u7684\u503e\u57ce\u4e4b\u604b\u5728\u4e1c\u67cf\u6797\u2014\u2014 \u5973\u513f \u963f\u59e8 \u6211\u7684\u5c0f\u59d1 \u5c0f\u59d1 \u6211\u7684\u5c0f\u59d1 \u6211\u4e5f\u53eb\u5979\u5c0f\u59d1 \u4e00\u5343\u96f6\u4e00\u591c\u7684\u963f\u59e8 \u4e09\u6bdb\u2014\u4e00\u4f4d\u8ba4\u771f\u7684\u73a9\u7ae5 \u80c6\u5c0f\u9b3c \u5439\u5175 \u532a\u5175\u7532\u548c\u532a\u5175\u4e59 \u7ea6\u4f1a \u4e00\u751f\u7684\u7231 \u7d2b\u8863 \u8774\u8776\u7684\u989c\u8272 \u8bf4\u7ed9\u81ea\u5df1\u542c \u7231\u548c\u4fe1\u4efb \u7b80\u5355 \u4ec0\u4e48\u90fd\u5feb\u4e50 \u5929\u4e0b\u672c\u65e0\u4e8b \u8fd8\u7ed9\u8c01 \u8f68\u5916\u7684\u65f6\u95f4 \u72fc\u6765\u4e86 \u4ed6 \u4e0d\u8d1f\u6211\u5fc3 \u590f\u65e5\u70df\u6101 \u503e\u57ce \u8bc4\u300a\u80c6\u5c0f\u9b3c\u300b \u8bfb\u4e09\u6bdb\u7684\u300a\u503e\u57ce\u300b \u300a\u6492\u54c8\u62c9\u7684\u6545\u4e8b\u300b \u00b6 \u4e09\u6bdb\u4e00\u751f\u77ed\u6682\uff0c\u4f46\u7ecf\u5386\u4e0d\u51e1\u3002\u5728\u4e09\u6bdb\u8fd8\u662f\u4e8c\u6bdb\u7684\u65f6\u5019\uff0c\u8f8d\u5b66\u7684\u5979\u4e00\u5ea6\u81ea\u95ed\u3001\u53db\u9006\uff0c\u6e38\u5b66\u897f\u73ed\u7259\u3001\u5fb7\u56fd\u3001\u7f8e\u56fd\u540e\uff0c\u6e10\u6e10\u6210\u957f\u4e3a\u72ec\u7acb\u81ea\u4fe1\u7684\u9752\u5e74\uff1b\u4e00\u4e5d\u4e03\u56db\u5e74\uff0c\u4e09\u6bdb\u4e0e\u8377\u897f\u5728\u6492\u54c8\u62c9\u6c99\u6f20\u7ed3\u5a5a\uff0c\u767d\u624b\u6210\u5bb6\uff0c\u5979\u7684\u6587\u5b66\u521b\u4f5c\u751f\u6daf\u4ece\u6b64\u5f00\u542f\uff1b\u79fb\u5c45\u52a0\u7eb3\u5229\u7fa4\u5c9b\u540e\uff0c\u4e09\u6bdb\u7684\u751f\u6d3b\u6e10\u8d8b\u5b89\u5b9a\uff0c\u5979\u7684\u521b\u4f5c\u4e5f\u8fbe\u5230\u4e86\u9ad8\u5cf0\uff1b\u4e00\u4e5d\u4e03\u4e5d\u5e74\uff0c\u8377\u897f\u610f\u5916\u53bb\u4e16\uff0c\u4e09\u6bdb\u7684\u5fc3\u7075\u53d7\u5230\u5de8\u5927\u521b\u4f24\uff0c\u4eba\u751f\u9677\u5165\u4f4e\u8c37\uff1b\u8fd4\u53f0\u540e\uff0c\u4e09\u6bdb\u518d\u5ea6\u51fa\u8d70\uff0c\u6e38\u5386\u4e2d\u5357\u7f8e\u6d32\uff0c\u5f00\u59cb\u65b0\u7684\u751f\u6d3b\u3002 \u5988\u5988\u7684\u4e00\u5c01\u4fe1\uff08\u4ee3\u5e8f\uff09 \u56de\u4e61\u5c0f\u7b3a\uff08\u56db\u7248\u4ee3\u5e8f\uff09 \u6c99\u6f20\u4e2d\u7684\u996d\u5e97 \u7ed3\u5a5a\u8bb0 \u60ac\u58f6\u6d4e\u4e16 \u5a03\u5a03\u65b0\u5a18 \u8352\u5c71\u4e4b\u591c \u6c99\u6f20\u89c2\u6d74\u8bb0 \u7231\u7684\u5bfb\u6c42 \u82b3 \u90bb \u7d20\u4eba\u6e14\u592b \u6b7b\u679c \u5929 \u68af \u767d\u624b\u6210\u5bb6 \u300a\u968f\u60f3\u300b \u00b6 \u5728\u8fd9\u672c\u96c6\u4e09\u6bdb\u534a\u751f\u89c1\u89e3\u3001\u667a\u6167\u7684\u5c0f\u54c1\u91cc\uff0c\u4e09\u6bdb\u5c31\u300a\u5b69\u5b50\u300b\u3001\u300a\u5feb\u4e50\u300b\u3001\u300a\u5c81\u6708\u300b\u3001\u300a\u4f24\u300b\u3001\u300a\u81ea\u5df1\u300b\u3001\u300a\u4e50\u547d\u300b\u3001\u300a\u7537\u4e0e\u5973\u300b\u3001\u300a\u94b1\u94b1\u94b1\u300b\u3001\u300a\u7231\u60c5\u300b\u3001\u300a\u4eba\u300b\u3001\u300a\u65e0\u5fc3\u300b\u3001\u300a\u6709\u610f\u300b\u3001\u300a\u5982\u679c\u300b\u3001\u300a\u670b\u53cb\u300b\u5341\u56db\u9898\uff0c\u968f\u800c\u60f3\u8fd9\u4e86\u4e00\u756a\u3002\u5979\u4e00\u8d2f\u7684\u6587\u5b57\u9b45\u529b\u4e0d\u5728\u8bdd\u4e0b\uff0c\u518d\u63c9\u548c\u5979\u72ec\u5177\u7684\u7279\u6b8a\u5fc3\u7075\uff0c\u7535\u5149\u77f3\u706b\u8ff8\u73b0\u822c\u7684\u5947\u60f3\uff0c\u6bcf\u6bcf\u4e00\u8bfb\uff0c\u4fbf\u6709\u4e00\u79cd\u65b0\u8da3\uff0c\u4eff\u4f5b\u7a0d\u7a0d\u78b0\u89e6\u5230\u5979\u72ec\u7136\u4e16\u754c\u7684\u8fb9\u7f18\u3002 \u5b69\u5b50 \u5feb\u4e50 \u5c81\u6708 \u4f24 \u81ea\u5df1 \u4e50\u547d \u7537\u4e0e\u5973 \u94b1\u94b1\u94b1 \u7231\u60c5 \u4eba \u6709\u610f \u5982 \u679c \u670b\u53cb \u300a\u4e07\u6c34\u5343\u5c71\u8d70\u904d\u300b \u00b6 \u5927\u5730\u554a\uff0c\u6211\u6765\u5230\u4f60\u5cb8\u4e0a\u65f6\u539f\u662f\u4e00\u4e2a\u964c\u751f\u4eba\uff0c\u4f4f\u5728\u4f60\u623f\u5b50\u91cc\u65f6\u539f\u662f\u4e00\u4e2a\u65c5\u5ba2\uff0c\u800c\u4eca\u6211\u79bb\u5f00\u4f60\u7684\u95e8\u65f6\u5374\u662f\u4e00\u4e2a\u670b\u53cb\u4e86\u3002\u672c\u5377\u300a\u4e07\u6c34\u5343\u5c71\u8d70\u904d\u300b\u8bb0\u5f55\u4e86\u4e09\u6bdb\u8fd4\u53f0\u540e\uff0c\u518d\u5ea6\u51fa\u8d70\uff0c\u6e38\u5386\u4e2d\u5357\u7f8e\u6d32\u4ee5\u53ca\u9996\u6b21\u56de\u5f52\u6545\u571f\u7684\u65c5\u884c\u89c1\u95fb\uff0c\u5171\u5341\u516b\u7bc7\u3002\u5728\u8377\u897f\u53bb\u4e16\u4e4b\u540e\uff0c\u4e09\u6bdb\u9f13\u8d77\u751f\u6d3b\u7684\u52c7\u6c14\uff0c\u91cd\u65b0\u5f00\u59cb\u4e86\u65b0\u7684\u751f\u6d3b\u3002\u300a\u4e09\u6bdb\u96c6\u300b\u4ee5\u4e09\u6bdb\u7684\u751f\u547d\u5386\u7a0b\u4e3a\u4e3b\u9898\uff0c\u5206\u4e3a\u4e94\u5377\uff1a\u300a\u96e8\u5b63\u4e0d\u518d\u6765\u300b\u300a\u6492\u54c8\u62c9\u7684\u6545\u4e8b\u300b\u300a\u6e29\u67d4\u7684\u591c\u300b\u300a\u68a6\u91cc\u82b1\u843d\u77e5\u591a\u5c11\u300b\u53ca\u300a\u4e07\u6c34\u5343\u5c71\u8d70\u904d\u300b\u3002 \u5927\u8725\u8734\u4e4b\u591c \u8857\u5934\u5df7\u5c3e \u9752\u9e1f\u4e0d\u5230\u7684\u5730\u65b9 \u4e2d\u7f8e\u6d32\u7684\u82b1\u56ed \u7f8e\u59ae\u8868\u59b9 \u4e00\u4e2a\u4e0d\u6309\u724c\u7406\u51fa\u724c\u7684\u5730\u65b9 \u9644\u8bb0\uff1a\u4e00\u5c01\u7ed9\u9093\u5ff5\u6148\u795e\u7236\u7684\u4fe1 \u836f\u5e08\u7684\u5b59\u5973\u2014\u524d\u4e16 \u94f6\u6e56\u4e4b\u6ee8\u2014\u4eca\u751f \u7d22\u8bfa\u5947\u2014\u2014\u96e8\u539f\u4e4b\u4e00 \u591c\u620f\u2014\u96e8\u539f\u4e4b\u4e8c \u8ff7\u57ce\u2014\u96e8\u539f\u4e4b\u4e09 \u9003\u6c34\u2014\u96e8\u539f\u4e4b\u56db \u9644\u5f55\u3000\u98de\u8d8a\u7eb3\u65af\u52a0\u4e4b\u7ebf \u300a\u6e29\u67d4\u7684\u591c\u300b \u00b6 \u4ed6\u4eec\u8bf4\u4e09\u6bdb\uff08\u5e8f\uff09 \u5bc2 \u5730(1) \u5bc2 \u5730(2) \u4e94\u6708\u82b1(1) \u4e94\u6708\u82b1(2) \u739b\u9edb\u62c9\u6e38\u8bb0(1) \u739b\u9edb\u62c9\u6e38\u8bb0(2) \u6e29\u67d4\u7684\u591c \u77f3 \u5934 \u8bb0 \u76f8\u9022\u4f55\u5fc5\u66fe\u76f8\u8bc6 \u6c38\u8fdc\u7684\u9a6c\u5229\u4e9a \u9644\u5f55\uff1a\u6211\u4e0d\u662f\u4e09\u6bdb\u8ff7 \u300a\u8c08\u5fc3\u300b \u00b6 \u81ea\u7231\u800c\u4e0d\u81ea\u601c \u795d\u798f\u4e2d\u56fd \u4eba\u751f\u4f55\u5904\u4e0d\u76f8\u9022 \u9694\u79bb\u4e0e\u6c9f\u901a \u4e0d\u6ee1\u3001\u4e0d\u6ee1\u3001\u4e0d\u6ee1 \u771f\u806a\u660e\u7684\u597d\u5b69\u5b50 \u6ca1\u6709\u627e\u5440\uff01 \u6559\u4e66\u4e0d\u662f\u5854 \u6700\u91cd\u8981\u7684\u662f\u88ab\u7231\u5417\uff1f \u4e3a\u4ec0\u4e48\u3001\u4e3a\u4ec0\u4e48\uff1f \u8bfb\u4e66\u548c\u8ff7\u85cf \u4e0d \u5f03 \u4e0d \u9003 \u5176\u5b9e\u90fd\u4e0d\u662f\u95ee\u9898 \u4e0d\u80fd\u7ed9\u4f60\u5feb\u4e50 \u5199\u4f5c\u4e0d\u96be \u6211\u559c\u6b22\u628a\u5feb\u4e50\u5f53\u4f20\u67d3\u75c5 \u72f1\u5916\u7684\u5929\u7a7a\u4e5f\u662f\u4f60\u7684 \u662f\u7f8e\u5fb7\u8fd8\u662f\u61e6\u5f31 \u201c\u559c\u6b22\u201d\u6709\u5343\u4e07\u79cd\u98ce\u8c8c\u4e0e\u8be0\u91ca \u8bfb\u4e66\u4e0d\u80fd\u53ea\u8bfb\u4e00\u4e2a\u6708 \u4e94\u4e2a\u5bf9\u8bdd \u5982\u679c\u662f\u6211\u7684\u5973\u513f \u5199\u7ed9\u201c\u6cea\u7b11\u4e09\u5e74\u201d\u7684\u5c11\u5e74 \u5982\u679c\u6211\u662f\u4f60 \u4e0d\u8981\u4e5f\u7f62 \u56de\u4e0d\u51fa\u7684\u4e66\u4fe1 \u5c0f\u670b\u53cb\u597d \u4e0d\u4f1a\u5fd8\u8bb0\u4f60\u8981\u7684\u660e\u4fe1\u7247 \u5982\u4f55\u6b7b\u5f97\u5176\u6240 \u4e0d\u8bb2\u4e86 \u8bf4\u670b\u9053\u53cb \u6127\u759a\u611f \u5c11\u5e74\u6101 \u540e \u8bb0 \u300a\u6211\u7684\u5b9d\u8d1d\u300b \u00b6 \u770b\u5230\u8fd9\u672c\u4e66\u4e2d\u4e00\u7bc7\u7bc7\u7684\u77ed\u5c0f\u6587\u7ae0\uff0c\u5fc3\u4eff\u4f5b\u5728\u5608\u6742\u7684\u4e16\u754c\u4e2d\u6c89\u9759\u4e0b\u6765\u3002\u4e00\u76f4\u5f88\u8ba8\u538c\u77ed\u7684\u6587\u7ae0\uff0c\u89c9\u5f97\u7d22\u7136\u65e0\u5473\uff0c\u4f46\u5979\u7684\u4e00\u76f4\u662f\u4e2a\u4f8b\u5916\u3002\u770b\u7740\u5979\u7684\u90a3\u4e00\u4e2a\u4e2a\u5b9d\u8d1d\uff0c\u7adf\u6709\u4e00\u80a1\u51b2\u52a8\uff0c\u5e0c\u671b\u5750\u5728\u5979\u7684\u9762\u524d\uff0c\u548c\u5979\u4e00\u8d77\u628a\u73a9\uff0c\u542c\u4ed6\u8bc9\u8bf4\u4e00\u4e2a\u4e2a\u7684\u6545\u4e8b\u3002 \u7f18\u8d77 \u672c\u6765\u662f\u4e00\u53cc\u7684 \u7b2c\u4e00\u4e2a\u5f69\u9676 \u9152\u888b \u5341\u5b57\u67b6 \u624b\u4e0a\u7684\u5149\u73af \u7b2c\u4e00\u5f20\u5e8a\u7f69 \u5988\u5988\u7684\u5fc3 \u522b\u9488 \u5fc3\u7231\u7684 \u7b2c\u4e00\u4e32\u73ab\u7470\u5ff5\u73e0 \u4e0d\u5411\u624b\u5de5\u8bf4\u518d\u89c1 \u53cc\u9c7c \u523b\u8fdb\u53bb\u7684\u751f\u547d \u7b2c\u4e00\u6761\u9879\u94fe \u5929\u8863\u65e0\u7f1d \u8001\u522b\u9488 \u75f4\u5fc3\u77f3 \u7b2c\u4e00\u6b21\u505a\u5c0f\u5b66\u751f \u505c \u9879\u94fe \u7ed3\u5a5a\u793c\u7269 \u7b2c\u4e00\u4e2a\u5974\u96b6 \u4f60\u7684\u90a3\u53cc\u773c\u775b \u9501 \u7b3c\u5b50\u91cc\u7684\u5c0f\u4e11 \u7b2c\u4e00\u5339\u767d\u9a6c \u4e61\u6101 \u8fd8\u662f\u9501\u4f4f\u4e86 \u5c0f\u4e01\u795e\u7236\u7684\u5973\u4eba \u7b2c\u4e00\u5957\u767e\u79d1\u5168\u4e66 \u8840\u8c61\u7259 \u79cb\u6c34\u4f0a\u4eba \u871c\u6708\u9ebb\u5c06\u724c \u5a03\u5a03\u56fd\u5a03\u5a03\u5175 \u4e0d\u7ea6\u5927\u9189\u4fa0 \u4e94\u66f4\u706f \u5e7f\u4e1c\u6765\u7684\u8001\u8336\u58f6 \u897f\u96c5\u56fe\u7684\u51ac\u5929 \u534e\u9676\u7a91 \u6797\u59b9\u59b9\u7684\u88d9\u5b50 \u963f\u5bcc\u6c57\u4eba\u54c8\u654f\u59bb\u5b50\u7684\u9879\u94fe \u4e9a\u5f53\u548c\u590f\u5a03 \u77e5\u97f3 \u7172 \u5e78\u798f\u7684\u76d8\u5b50 \u6211\u8981\u5fc3\u5f62\u7684 \u94f6\u5668\u4e00\u5927\u628a \u5341\u4e09\u53ea\u9f99\u867e\u548c\u4f0a\u5730\u65af \u8153\u5c3c\u57fa\u4eba\u7684\u5b9d\u74f6 \u5370\u5730\u5b89\u4eba\u7684\u5a03\u5a03 \u9f13\u6905 \u5b88\u8d22\u5974 \u6ca7\u6851 \u518d\u770b\u4f60\u4e00\u773c \u963f\u6f58\u7684\u76d8\u5b50 \u4ec5\u5b58\u7684\u4e09\u4e2a\u77f3\u50cf \u836f \u74f6 \u9057\u7231 \u8ba9\u6211\u8bb2\u4e2a\u6545\u4e8b \u5927\u5730\u4e4b\u6bcd \u65e5\u5386\u65e5\u5386\u6302\u5728\u5899\u58c1 \u53d7\u96be\u7684\u57fa\u7763 \u7cef\u7c73\u6d46\u7897 \u725b\u7f8a\u6210\u7fa4 \u6211\u656c\u7231\u4f60 \u5c0f\u5077\uff0c\u5c0f\u5077 \u521d\u89c1\u8305\u5e90 \u7ec7\u5e03 \uff30\uff25\uff30\uff21\u60c5\u4eba \u6d17\u8138\u76c6 \u518d\u8d74\u8305\u5e90 \u4e0d\u6253\u53cc\u5934\u86c7 \u68a6\u5e7b\u9a91\u58eb \u7f8e\u6d53\u72d7\u7897 \u4e09\u987e\u8305\u5e90 \u95ea\u70c1\u7684\u5e76\u4e0d\u662f\u91d1\u5b50 \u6765\u751f\u518d\u89c1 \u64e6\u978b\u7ae5 \u5370\u5ea6\u624b\u7ee3 \u4e8c\u5341\u4e5d\u9897\u5f69\u77f3 \u6a44\u6984\u6811 \u5c0f\u8239\uff25\uff23\uff28\uff2f\u53f7 \u98de\u9556 \u7ea2\u5fc3\u662f\u6211\u7684 \u65f6\u95f4\u7684\u53bb\u5904 \u90bb\u5c45\u7684\u5f69\u5e03 \u540e\u8bb0 \u300a\u96e8\u5b63\u4e0d\u518d\u6765\u300b \u00b6 \u672c\u5377\u300a\u96e8\u5b63\u4e0d\u518d\u6765\u300b\u4ee5\u4e09\u6bdb\u7684\u751f\u547d\u5386\u7a0b\u4e3a\u4e3b\u9898\uff0c\u8bb0\u5f55\u4e86\u4e09\u6bdb17\u5c81\u523022\u5c81\u7684\u6210\u957f\u8fc7\u7a0b\uff0c\u771f\u5b9e\u5448\u73b0\u51fa\u4e09\u6bdb\u5c11\u5973\u65f6\u4ee3\u7684\u6210\u957f\u611f\u53d7\uff0c\u8f8d\u5b66\u3001\u81ea\u95ed\u3001\u53db\u9006\uff0c\u6e38\u5b66\u897f\u73ed\u7259\u3001\u5fb7\u56fd\u3001\u7f8e\u56fd\u540e\uff0c\u6e10\u6e10\u6210\u957f\u4e3a\u72ec\u7acb\u81ea\u4fe1\u7684\u9752\u5e74\uff0c\u672c\u4e66\u4e2d\u900f\u9732\u7684\u7eaf\u771f\u60c5\u6000\u548c\u5f02\u8d28\u7f8e\u611f\uff0c\u53ef\u4ee5\u6e05\u695a\u5730\u5370\u8bc1\u5979\u4f20\u5947\u6027\u683c\u7684\u75d5\u8ff9\u3002 \u5e8f\uff1a\u201c\u82cd\u5f31\u201d\u4e0e\u201c\u5065\u5eb7\u201d \u5f53\u4e09\u6bdb\u8fd8\u662f\u5728\u4e8c\u6bdb\u7684\u65f6\u5019\uff08\u81ea\u5e8f\uff09 \u60d1 \u79cb \u604b \u6708 \u6cb3 \u6781 \u4e50 \u9e1f \u96e8\u5b63\u4e0d\u518d\u6765 \u4e00\u4e2a\u661f\u671f\u4e00\u7684\u65e9\u6668 \u5b89\u4e1c\u5c3c\u00b7\u6211\u7684\u5b89\u4e1c\u5c3c \u8d74\u6b27\u65c5\u9014\u89c1\u95fb\u5f55 \u6211\u4ece\u53f0\u6e7e\u8d77\u98de \u7ffb\u8239\u4eba\u770b\u9ec4\u9e64\u697c \u5e73\u6c99\u6f20\u6f20\u591c\u5e26\u5200 \u53bb\u5e74\u7684\u51ac\u5929 \u9644\u5f55-\u4e09\u6bdb\u2014\u2014\u5f02\u4e61\u7684\u8d4c\u5f92(\u6842\u6587\u4e9a) \u8bbf\u4e09\u6bdb\u3001\u5199\u4e09\u6bdb \u98de\u2014\u2014\u4e09\u6bdb\u4f5c\u54c1\u7684\u4eca\u6614 \u300a\u68a6\u91cc\u82b1\u843d\u77e5\u591a\u5c11\u300b \u00b6 \u8bfb\u8fd9\u672c\u4e66\u7684\u4eba\uff0c\u4e00\u5b9a\u8981\u6709\u7231\u5fc3\uff0c\u4e00\u9897\u61c2\u611f\u6069\u7684\u5fc3\u3002\u7ffb\u5f00\u4e66\u7684\u6bcf\u4e00\u9875\uff0c\u53bb\u4f53\u4f1a\u4e09\u6bdb\u7684\u7231\u4e0e\u6cea\uff0c\u53bb\u5b66\u4f1a\u73cd\u60dc\u81ea\u5df1\u8eab\u8fb9\u7684\u4eba\u3002 \u4e0d\u6b7b\u9e1f \u660e\u65e5\u53c8\u5929\u6daf \u4e91\u5728\u9752\u5c71\u6708\u5728\u5929 \u5f52 \u68a6\u91cc\u68a6\u5916 \u4e0d\u98de\u7684\u5929\u4f7f \u4f3c\u66fe\u76f8\u8bc6\u71d5\u5f52\u6765 \u68a6\u91cc\u82b1\u843d\u77e5\u591a\u5c11 \u4e00\u4e2a\u7537\u5b69\u5b50\u7684\u7231\u60c5 \u6211\u7684\u5199\u4f5c\u751f\u6d3b \u9a86\u9a7c\u4e3a\u4ec0\u4e48\u8981\u54ed\u6ce3 \u5728\u98ce\u91cc\u98d8\u626c\u7684\u5f71\u5b50\u897f\u6c99 \u7ae5\u8bdd\u897f\u6c99 \u4e24\u6781\u5bf9\u8bdd\u2014\u2014\u6c88\u541b\u5c71\u548c\u4e09\u6bdb \u300a\u9001\u4f60\u4e00\u5339\u9a6c\u300b \u00b6 \u4e00\u751f\u7231\u9a6c\u75f4\u72c2\uff0c\u5bf9\u65bc\u6211\uff0c\u9a6c\u4ee3\u8868\u8457\u8bb8\u591a\u6df1\u8fdc\u7684\u610f\u4e49\u548c\u5883\u754c\uff0c\u800c\u7260\u53c8\u662f\u4e0d\u6613\u62e5\u6709\u7684\u3002\u9a6c\u7684\u5f62\u4f53\uff0c\u4ea4\u7ec7\u8457\u96c4\u58ee\u3001\u795e\u79d8\u53c8\u540c\u65f6\u6e05\u6717\u7684\u751f\u547d\u4e4b\u6781\u7f8e\u3002\u800c\u4e14\uff0c\u7260\u7684\u51fa\u73b0\u4e8b\u6709\u80cc\u666f\u505a\u886c\u7684\u3002\u6bcf\u60f3\u8d77\u4efb\u4f55\u4e00\u5339\u9a6c\uff0c\u4e00\u5339\u98de\u8dc3\u7684\u9a6c\uff0c\u90a3\u4efd\u6fc0\u8d8a\u7684\u72c2\u559c\uff0c\u662f\u6ca1\u6709\u53e6\u4e00\u79cd\u60c5\u6000\u53ef\u4ee5\u53d6\u4ee3\u7684\u3002\u5e76\u4e0d\u6267\u8457\u65bc\u62e5\u6709\u4e00\u5339\u6478\u7684\u8457\u7684\u9a8f\u9a6c\uff0c\u90a3\u6837\u4e5f\u53ea\u6709\u4e00\u5339\u4e86\uff0c\u8fd9\u4e2a\u4e0d\u591f\u3002\u6709\u4e86\u771f\u9a6c\uff0c\u843d\u4e86\u5b9e\u50cf\uff0c\u4e0d\u81ea\u7531\uff0c\u53cd\u800c\u60b5\u7136\u82e5\u5931\u3002\u5176\u5b9e\uff0c\u9a6c\u4e5f\u597d\uff0c\u8352\u539f\u4e5f\u597d\uff0c\u96e8\u5b63\u7684\u5c11\u5e74\u3001\u68a6\u88e1\u7684\u843d\u82b1\u3001\u6bcd\u4eb2\u7684\u80cc\u5f71\u3001\u4e07\u6c34\u5343\u5c71\u7684\u957f\u8def\uff0c\u90fd\u662f\u597d\u7684\uff0c\u6ca1\u6709\u4e00\u6837\u4e0d\u5408\u81ea\u7136\uff0c\u6ca1\u6709\u4e00\u6837\u4e0d\u80fd\u63a5\u53d7\uff0c\u865a\u5b9e\u4e4b\u95f4\uff0c\u5e84\u5468\u8774\u8776\u3002\u5e38\u5e38\uff0c\u4e0d\u60f3\u518d\u63e1\u7b14\u4e86\uff0c\u5f88\u591a\u6b21\uff0c\u771f\u6b63\u4e0d\u60f3\u518d\u5199\u4e86\u3002\u53ef\u662f\uff0c\u751f\u547d\u8ddf\u4eba\u6076\u4f5c\u5267\uff0c\u5b83\u9a97\u8457\u4eba\u5316\u8fdb\u6545\u4e8b\u88e1\u53bb\u6d3b\uff0c\u5b83\u7528\u79cd\u79cd\u7684\u60c5\u8282\u5f15\u8bf1\u8457\u4eba\u70ed\u70c8\u7684\u6295\u5165\uff0c\u4eba\uff0c\u5148\u88ab\u6545\u4e8b\u6349\u8fdb\u53bb\u4e86\uff0c\u7136\u540e\uff0c\u90a3\u4e2a\u5b88\u9ea6\u7530\u7684\u7a3b\u8349\u4eba\uff0c\u5c31\u4e0a\u5f53\u53c8\u4e0a\u5f53\u7684\u8bb2\u4e86\u53c8\u8bb2\u3002\u90a3\u4e2a\u7a3b\u8349\u4eba\uff0c\u4e0d\u662f\u5510\u5409\u67ef\u5fb7\uff0c\u5b83\u5374\u504f\u504f\u7231\u9a91\u9a6c\u3002\u8fd9\u79cd\u6253\u626e\u7684\u68a6\u5e7b\u9a91\u58eb\uff0c\u770b\u89c1\u4ed6\u90a3\u526f\u6837\u5b50\u4e0a\u8def\uff0c\u8c01\u90fd\u8981\u7b11\u6b7b\u7684\u3002\u5f88\u60f3\u5927\u5927\u65b9\u65b9\u7684\u9001\u7ed9\u4e16\u754c\u4e0a\u6bcf\u4e00\u4e2a\u4eba\u4e00\u5339\u9a6c\uff0c\u5f53\u7136\uff0c\u662f\u517b\u5728\u5fc3\u88e1\u3001\u68a6\u88e1\u3001\u5e7b\u60f3\u88e1\u7684\u90a3\u79cd\u9a6c\u3002\u6211\u6709\u8bb8\u591a\u5339\u597d\u9a6c\uff0c\u662f\u4e00\u4e2a\u9ad8\u539f\u7267\u573a\u7684\u4e3b\u4eba\u3002\u81f3\u65bc\u81ea\u5df1\uff0c\u90a3\u5339\u53ea\u5c5e\u65bc\u6211\u7684\u7231\u9a6c\uff0c\u4e00\u751f\u90fd\u5728\u7684\u3002\u5e38\u5e38\uff0c\u9a91\u8457\u7260\uff0c\u5728\u65e0\u4eba\u7684\u6d77\u8fb9\u5954\u9a70\uff0c\u9a6c\u7684\u6bdb\u8272\uff0c\u5373\u4f7f\u5728\u65e0\u661f\u65e0\u6708\u7684\u591c\u88e1\uff0c\u4e5f\u80fd\u53d1\u51fa\u4e00\u79cd\u6c89\u6f5c\u53c8\u51dd\u934a\u7684\u95ea\u5149\uff0c\u662f\u4e00\u5339\u795e\u9a79\u3002\u6211\u6709\u4e00\u5339\u9ed1\u9a6c\uff0c\u7260\u7684\u540d\u5b57\uff0c\u53eb\u505a\uff0d\uff0d\u6e90\u3002 \u6211\u7684\u5973\u513f\uff0c\u5927\u5bb6\u7684\u4e09\u6bdb \u7231\u9a6c\uff08\u81ea\u5e8f\uff09 \u84e6\u7136\u56de\u9996 \u60ca\u68a6\u4e09\u5341\u5e74 \u56de\u5a18\u5bb6 \u6545\u4e61\u4eba \u770b\u8fd9\u4e2a\u4eba \u6211\u6240\u77e5\u6240\u7231\u7684\u9a6c\u594e\u65af \u9003\u4ea1 \u5f80\u4e8b\u5982\u70df \u68a6\u91cc\u4e0d\u77e5\u8eab\u662f\u5ba2 \u91ce\u706b\u70e7\u4e0d\u5c3d \u4e0d\u89c9\u78a7\u5c71\u66ae\u3000\u4f46\u95fb\u4e07\u58d1\u677e \u5b66\u671f\u4f5c\u4e1a\u62a5\u544a \u4f60\u662f\u6211\u7279\u522b\u7684\u5929\u4f7f \u671d\u9633\u4e3a\u8c01\u5347\u8d77 \u4e00\u751f\u7684\u6218\u5f79 \u9001\u4f60\u4e00\u5339\u9a6c \u8863\u5e26\u6e10\u5bbd\u7ec8\u4e0d\u6094 \u9648\u8001\u5e08\uff08\u8dcb\uff09 \u300a\u80cc\u5f71\u300b \u00b6 \u5979\u66fe\u7ecf\u662f\uff0c\u96e8\u5b63\u4e2d\u5fe7\u90c1\u7684\u5c11\u5973\uff0c\u6492\u54c8\u62c9\u6c99\u6f20\u91cc\u5feb\u4e50\u7684\u5c0f\u5987\u4eba\uff0c\u7136\u540e\u53c8\u6210\u4e3a\u4e00\u4e2a\u5b88\u671b\u5728\u53f0\u6e7e\u5c9b\u4e0a\u7684\u5fe7\u4f24\u5be1\u5987\u3002\u5979\u7231\u6d41\u6d6a\uff0c\u7231\u6c99\u6f20\uff0c\u7231\u7f8e\u4e3d\u548c\u6d6a\u6f2b\uff0c\u7231\u90a3\u4e2a\u5e73\u539f\u5927\u91ce\u7684\u7537\u4eba\u3002\u7ecf\u5386\u4e86\u56db\u5341\u516b\u5e74\u5927\u8d77\u5927\u843d\uff0c\u5927\u60b2\u5927\u559c\uff0c\u8f70\u8f70\u70c8\u70c8\uff0c\u751f\u6b7b\u6b4c\u54ed\uff0c\u5728\u79bb\u5343\u4e07\u7231\u5979\u7684\u4eba\u800c\u53bb\u4e4b\u524d\uff0c\u5979\u8bf4\uff1a\u2018\u6211\u5df2\u7ecf\u5ea6\u8fc7\u4e86\u5f02\u5e38\u4e30\u5bcc\u7684\u4e00\u751f\u3002\u2019 \u9003\u5b66\u4e3a\u8bfb\u4e66\uff08\u4ee3\u5e8f\uff09 \u6c38\u8fdc\u7684\u590f\u5a03\u5f00\u573a\u767d \u62fe\u8352\u68a6\u2014\u2014\u6c38\u8fdc\u7684\u590f\u5a03 \u9ec4\u660f\u7684\u6545\u4e8b\u2014\u2014\u6c38\u8fdc\u7684\u590f\u5a03 \u5deb\u4eba\u8bb0\u2014\u2014\u6c38\u8fdc\u7684\u590f\u5a03 \u997a\u5b50\u5927\u738b \u8d64\u8db3\u5929\u4f7f\u2014\u2014\u978b\u5b50\u7684\u6545\u4e8b \u4eb2\u4e0d\u4eb2\uff0c\u6545\u4e61\u4eba \u6d6a\u8ff9\u5929\u6daf\u8bdd\u4e70\u5356 \u80cc\u5f71 \u8352\u5c71\u4e4b\u591c \u514b\u91cc\u65af \u79bb\u4e61\u56de\u4e61 \u96e8\u7985\u53f0\u5317 \u5468\u672b \u300a\u7a3b\u8349\u4eba\u624b\u8bb0\u300b \u00b6 \u4e09\u6bdb\u7684\u8db3\u8ff9\u904d\u53ca\u4e16\u754c\u5404\u5730\uff0c\u5e73\u751f\u8457\u4f5c\u3001\u8bd1\u4f5c\u5341\u5206\u4e30\u5bcc\uff0c\u5176\u4e2d\u300a\u6492\u54c8\u62c9\u7684\u6545\u4e8b\u300b\u3001\u300a\u96e8\u5b63\u4e0d\u518d\u6765\u300b\u3001\u300a\u54ed\u6ce3\u7684\u9a86\u9a7c\u300b\u3001\u300a\u6211\u7684\u5b9d\u8d1d\u300b\u3001\u300a\u95f9\u5b66\u8bb0\u300b\u3001\u300a\u6eda\u6eda\u7ea2\u5c18\u300b\u7b49\u6563\u6587\u3001\u5c0f\u8bf4\u3001\u5267\u672c\u66f4\u662f\u810d\u7099\u4eba\u53e3\uff0c\u5728\u5168\u7403\u534e\u4eba\u793e\u4f1a\u5e7f\u4e3a\u6d41\u4f20\uff0c\u5728\u5927\u9646\u98ce\u9761\u4e00\u65f6\uff0c\u5f71\u54cd\u4e86\u6574\u6574\u4e00\u4ee3\u4eba\u3002 \u5e8f\u8a00 \u6c5f\u6d0b\u5927\u76d7 \u4eb2\u7231\u7684\u5a46\u5a46\u5927\u4eba \u897f\u98ce\u4e0d\u8bc6\u76f8 \u8fd9\u6837\u7684\u4eba\u751f \u58eb\u4e3a\u77e5\u5df1\u8005\u6b7b \u8b66\u544a\u9003\u59bb \u8fd9\u79cd\u5bb6\u5ead\u751f\u6d3b \u5851\u6599\u513f\u7ae5 \u5356\u82b1\u5973 \u5b88\u671b\u7684\u5929\u4f7f \u76f8\u601d\u519c\u573a \u5de8\u4eba \u300a\u6eda\u6eda\u7ea2\u5c18\u300b \u00b6 \u300a\u6eda\u6eda\u7ea2\u5c18\u300b\u662f\u4e09\u6bdb\u7684\u7b2c\u4e00\u90e8\u4e2d\u6587\u7535\u5f71\u5267\u672c\uff0c\u4e5f\u662f\u552f\u4e00\u4e00\u90e8\u3002\u4ee5\u4e2d\u56fd\u8fd1\u4ee3\u53f2\u4e0a\u7684\u52a8\u4e71\u5e74\u4ee3\u4e3a\u80cc\u666f\uff0c\u7ecf\u7531\u65f6\u4ee3\u513f\u5973\u7684\u7231\u3001\u6068\u3001\u60c5\u3001\u4ec7\u51fa\u53d1\uff0c\u63cf\u7ed8\u4e00\u4e2a\u5168\u4e2d\u56fd\u4eba\u60b2\u3001\u6b22\u3001\u79bb\u3001\u5408\u7684\u6545\u4e8b\uff0c\u5b9e\u9645\u4e0a\uff0c\u5b83\u4e0d\u7ecf\u610f\u6d41\u9732\u51fa\u6765\u7684\u662f\u4e00\u5219\u51c4\u6006\u65e0\u6b62\u7684\u7231\u60c5\u6545\u4e8b\uff0c\u66f4\u662f\u4e09\u6bdb\u81ea\u8eab\u7075\u9b42\u7684\u544a\u767d\u3002\\ \u6545\u4e8b\u4ee5\u65e7\u4e0a\u6d77\u4e3a\u80cc\u666f\uff0c\u8bb2\u8ff0\u7684\u662f\u5728\u6218\u4e71\u4e2d\u80fd\u624d\u4e0e\u97f6\u534e\u3001\u6708\u51e4\u4e0e\u9769\u547d\u7537\u5973\u4e4b\u95f4\u7684\u7231\u60c5\u6545\u4e8b\u3002\u5185\u5bb9\u76f8\u4f20\u4e3a\u201c\u5f71\u5c04\u6c11\u56fd\u65f6\u671f\u5973\u4f5c\u5bb6\u5f20\u7231\u73b2\u4e0e\u80e1\u5170\u6210\u7684\u611f\u60c5\u7ea0\u845b\u201d\u3002\\ \u7535\u5f71\u300a\u6eda\u6eda\u7ea2\u5c18\u300b\u7531\u6797\u9752\u971e\u3001\u79e6\u6c49\u3001\u5f20\u66fc\u7389\u4e3b\u6f14\uff0c1990\u5e74\u516c\u6620\u3002\u8363\u83b7\u91d1\u9a6c\u5956\u516b\u9879\u5927\u5956\uff0c\u521b\u6700\u9ad8\u5f97\u5956\u7eaa\u5f55\u3002\\ \u300a\u6eda\u6eda\u7ea2\u5c18\u300b\u4e3b\u9898\u66f2\u7531\u7f57\u5927\u4f51\u586b\u8bcd\u8c31\u66f2\uff0c\u7f57\u5927\u4f51\u3001\u9648\u6dd1\u6866\u5408\u5531\u3002\u81f3\u4eca\u4f20\u4e3a\u7ecf\u5178\u3002 \u6954\u5b50 \u4eba\u7269\u4ecb\u7ecd \u7b2c\u4e00\u7ae0 \u697c\u9ad8\u65e5\u5c3d \u7b2c1\u573a \u7b2c2\u573a \u7b2c3\u573a \u7b2c\u4e8c\u7ae0 \u671b\u65ad\u5929\u6daf\u8def \u7b2c4\u573a \u7b2c5\u573a \u7b2c6\u573a \u7b2c7\u573a \u7b2c\u4e09\u7ae0 \u6765\u65f6\u964c\u4e0a\u521d\u718f \u7b2c8\u573a \u7b2c9\u573a \u7b2c10\u573a \u7b2c11\u573a \u7b2c12\u573a \u7b2c13\u573a \u7b2c\u56db\u7ae0 \u6709\u60c5\u98ce\u4e07\u91cc\u5377\u6f6e\u6765 \u7b2c14\u573a \u7b2c15\u573a \u7b2c16\u573a \u7b2c17\u573a \u7b2c18\u573a \u7b2c19\u573a \u7b2c\u4e94\u7ae0 \u63a8\u6795\u60d8\u7136\u4e0d\u89c1 \u7b2c20\u573a \u7b2c21\u573a \u7b2c22\u573a \u7b2c\u516d\u7ae0 \u5206\u643a\u5982\u6628 \u5230\u5904\u840d\u98d8\u6cca \u7b2c23\u573a \u7b2c24\u573a \u7b2c25\u573a \u7b2c26\u573a \u7b2c27\u573a \u7b2c28\u573a \u7b2c\u4e03\u7ae0 \u6d69\u7136\u76f8\u5bf9 \u4eca\u5915\u4f55\u5e74 \u7b2c29\u573a \u7b2c30\u573a \u7b2c31\u573a \u7b2c\u516b\u7ae0 \u8c01\u9053\u4eba\u751f\u65e0\u518d\u5c11 \u7b2c32\u573a \u7b2c33\u573a \u7b2c34\u573a \u7b2c\u4e5d\u7ae0 \u4f9d\u65e7\u68a6\u9b42\u4e2d \u7b2c35\u573a \u7b2c36\u573a \u7b2c37\u573a \u7b2c38\u573a \u7b2c\u5341\u7ae0 \u4f46\u6709\u65e7\u6b22\u65b0\u6028 \u7b2c39\u573a \u7b2c40\u573a \u7b2c41\u573a \u7b2c42\u573a \u7b2c43\u573a \u7b2c44\u573a \u7b2c\u5341\u4e00\u7ae0 \u4eba\u751f\u5e95\u4e8b \u5f80\u6765\u5982\u68ad \u7b2c45\u573a \u7b2c46\u573a \u7b2c47\u573a \u7b2c48\u573a \u7b2c49\u573a \u7b2c50\u573a \u7b2c51\u573a \u7b2c\u5341\u4e8c\u7ae0 \u9189\u7b11\u966a\u541b\u4e09\u4e07\u573a \u4e0d\u8bc9\u79bb\u4f24 \u7b2c52\u573a \u7b2c53\u573a \u7b2c54\u573a \u7b2c55\u573a \u7b2c56\u573a \u7b2c\u5341\u4e09\u7ae0 \u7985\u5fc3\u5df2\u5931\u4eba\u95f4\u7231 \u7b2c57\u573a \u7b2c58\u573a \u7b2c59\u573a \u7b2c60\u573a \u7b2c61\u573a \u7b2c62\u573a \u7b2c\u5341\u56db\u7ae0 \u53c8\u4f55\u66fe\u68a6\u89c9 \u7b2c63\u573a \u7b2c64\u573a \u7b2c65\u573a \u7b2c66\u573a \u7b2c67\u573a \u7b2c\u5341\u4e94\u7ae0 \u8e0f\u5c3d\u7ea2\u5c18 \u4f55\u5904\u662f\u543e\u4e61 \u7b2c68\u573a \u5176\u4ed6 \u00b6 \u300a\u9ad8\u539f\u7684\u767e\u5408\u82b1: \u73bb\u5229\u7ef4\u4e9a\u8bb0\u884c\u300b \u300a\u8d74\u6b27\u65c5\u9014\u89c1\u95fb\u5f55\u300b \u300a\u897f\u5317\u6c11\u6b4c\u5927\u5e08\u738b\u6d1b\u5bbe\u300b \u6458\u81ea \u00b6 http://www.kanunu8.com/files/writer/248.html http://www.my285.com/gt/sanmao/gghc/index.htm","title":"\u4e09\u6bdb\u4f5c\u54c1\u96c6"},{"location":"BOOKS/2017-05-07-echo-chenping-sanmao-articles/#_1","text":"","title":"\u6587\u96c6"},{"location":"BOOKS/2017-05-07-echo-chenping-sanmao-articles/#_2","text":"\u5728\u300a\u54ed\u6ce3\u7684\u9a86\u9a7c\u300b\u4e2d\uff0c\u4e09\u6bdb\u4f9d\u7136\u604b\u604b\u7740\u58a8\u6c99\u6f20\u751f\u6d3b\u5468\u906d\u7684\u4eba\u4e0e\u4e8b\uff0c\u300a\u6536\u9b42\u8bb0\u300b\u3001\u300a\u642d\u8f66\u5ba2\u300b\u3001\u300a\u900d\u9065\u4e03\u5c9b\u6e38\u300b\u3001\u300a\u4e00\u4e2a\u964c\u751f\u4eba\u7684\u6b7b\u300b\u3001\u300a\u5927\u80e1\u5b50\u4e0e\u6211\u300b\u7b49\u7bc7\uff0c\u60c5\u8da3\u76ce\u7136\uff1b\u300a\u6c99\u5df4\u519b\u66f9\u300b\u4e0e\u300a\u54d1\u5974\u300b\u6240\u523b\u753b\u7684\u4e3b\u89d2\uff0c\u7ed9\u4eba\u7559\u4e0b\u4e86\u96be\u4ee5\u78e8\u706d\u7684\u5370\u8c61\uff1b\u800c\u538b\u8f74\u7684\u300a\u54ed\u6ce3\u7684\u9a86\u9a7c\u300b\uff0c\u4ee5\u6e38\u51fb\u6218\u4e8b\u4e3a\u80cc\u666f\uff0c\u7ec6\u7ec6\u94fa\u5199\u4e00\u5bf9\u6c99\u6f20\u60c5\u9e33\u7684\u751f\u6b7b\u76df\uff0c\u7adf\u72b9\u5982\u53f2\u8bd7\u822c\u7684\u78c5\u7934\u3002\u4e09\u6bdb\u4e3a\u8bfb\u8005\u6784\u7b51\u4e86\u4e00\u4e2a\u6709\u6cea\u6709\u7b11\u3001\u6b32\u7f62\u4e0d\u80fd\u7684\u6587\u5b66\u4e16\u754c\u3002 \u5c18\u7f18 \u2014\u2014\u91cd\u65b0\u7684\u7236\u4eb2\u8282\uff08\u4ee3\u5e8f\uff09 \u6536\u9b42\u8bb0 \u6c99\u5df4\u519b\u66f9 \u642d\u8f66\u5ba2 \u54ed\u6ce3\u7684\u9a86\u9a7c(1) \u54ed\u6ce3\u7684\u9a86\u9a7c(2) \u900d\u9065\u4e03\u5c9b\u6e38 \u4e00\u4e2a\u964c\u751f\u4eba\u7684\u6b7b \u5927\u80e1\u5b50\u4e0e\u6211 \u54d1 \u5974","title":"\u300a\u54ed\u6ce3\u7684\u9a86\u9a7c\u300b"},{"location":"BOOKS/2017-05-07-echo-chenping-sanmao-articles/#_3","text":"\u5982\u679c\u4f60\u770b\u8fc7\u300a\u96e8\u5b63\u4e0d\u518d\u6765\u300b\u3001\u300a\u6492\u54c8\u62c9\u7684\u6545\u4e8b\u300b\uff0c\u4ee5\u53ca\u300a\u80cc\u5f71\u300b\u8fd9\u4e09\u4e2a\u9636\u6bb5\u7684\u4e09\u6bdb\uff0c\u4f60\u5fc5\u987b\u518d\u770b\u4e00\u672c\u5c5e\u4e8e\u540e\u4e09\u6bdb\u65f6\u671f\u7684\u300a\u95f9\u5b66\u8bb0\u300b\uff0c\u4e09\u6bdb\u4ee5\u6700\u65b0\u7684\u6587\u98ce\u4e0e\u5bf9\u771f\u5b9e\u751f\u6d3b\u7684\u89c1\u8bc1\uff0c\u5411\u4f60\u5c55\u73b0\u4e86\u4e00\u4e2a\u5fc3\u795e\u6cbb\u6109\u7684\u7f8e\u4e3d\u65b0\u4e16\u754c\u3002\u8bfb\u4e66\u548c\u65c5\u884c\uff0c\u662f\u6211\u4e2a\u4eba\u751f\u547d\u4e2d\u7684\u4e24\u9897\u4e00\u7ea7\u661f\uff0c\u5feb\u4e50\u6700\u6df1\u7684\u65f6\u5149\uff0c\u5927\u534a\u90fd\u7531\u8fd9\u4e24\u4ef6\u4e8b\u60c5\u4e2d\u5f97\u6765\u3002 \u5e8f\u4e00\uff1a\u6211\u5bb6\u8001\u4e8c\u2014\u2014\u4e09\u5c0f\u59d0 \u5e8f\u4e8c\uff1a\u6211\u6709\u8bdd\u8981\u8bf4 \u4f60\u4ece\u54ea\u91cc\u6765 \u5982\u679c\u6559\u5ba4\u50cf\u6e38\u4e50\u573a \u6625\u5929\u4e0d\u662f\u8bfb\u4e66\u5929 \u6211\u5148\u8d70\u4e86 \u8001\u5144\uff0c\u6211\u9192\u7740 \u7231\u9a6c\u843d\u6c34\u4e4b\u591c \u6211\u8981\u56de\u5bb6 \u6c42 \u5a5a \u5b64\u72ec\u7684\u957f\u8dd1\u8005 \u6768\u67f3\u9752\u9752 \u7f6a\u5728\u90a3\u91cc \u661f \u77f3 \u5409\u5c4b\u51fa\u552e \u968f\u98ce\u800c\u53bb E\u00b7T\u56de\u5bb6 \u91cd\u5efa\u5bb6\u56ed \u540e \u8bb0","title":"\u300a\u95f9\u5b66\u8bb0\u300b"},{"location":"BOOKS/2017-05-07-echo-chenping-sanmao-articles/#_4","text":"\u5f20\u7231\u73b2\u7684\u503e\u57ce\u4e4b\u604b\u53d1\u751f\u5728\u9999\u6e2f\uff0c\u4e09\u6bdb\u7684\u503e\u57ce\u4e4b\u604b\u5728\u4e1c\u67cf\u6797\u2014\u2014 \u5973\u513f \u963f\u59e8 \u6211\u7684\u5c0f\u59d1 \u5c0f\u59d1 \u6211\u7684\u5c0f\u59d1 \u6211\u4e5f\u53eb\u5979\u5c0f\u59d1 \u4e00\u5343\u96f6\u4e00\u591c\u7684\u963f\u59e8 \u4e09\u6bdb\u2014\u4e00\u4f4d\u8ba4\u771f\u7684\u73a9\u7ae5 \u80c6\u5c0f\u9b3c \u5439\u5175 \u532a\u5175\u7532\u548c\u532a\u5175\u4e59 \u7ea6\u4f1a \u4e00\u751f\u7684\u7231 \u7d2b\u8863 \u8774\u8776\u7684\u989c\u8272 \u8bf4\u7ed9\u81ea\u5df1\u542c \u7231\u548c\u4fe1\u4efb \u7b80\u5355 \u4ec0\u4e48\u90fd\u5feb\u4e50 \u5929\u4e0b\u672c\u65e0\u4e8b \u8fd8\u7ed9\u8c01 \u8f68\u5916\u7684\u65f6\u95f4 \u72fc\u6765\u4e86 \u4ed6 \u4e0d\u8d1f\u6211\u5fc3 \u590f\u65e5\u70df\u6101 \u503e\u57ce \u8bc4\u300a\u80c6\u5c0f\u9b3c\u300b \u8bfb\u4e09\u6bdb\u7684\u300a\u503e\u57ce\u300b","title":"\u300a\u503e\u57ce\u300b"},{"location":"BOOKS/2017-05-07-echo-chenping-sanmao-articles/#_5","text":"\u4e09\u6bdb\u4e00\u751f\u77ed\u6682\uff0c\u4f46\u7ecf\u5386\u4e0d\u51e1\u3002\u5728\u4e09\u6bdb\u8fd8\u662f\u4e8c\u6bdb\u7684\u65f6\u5019\uff0c\u8f8d\u5b66\u7684\u5979\u4e00\u5ea6\u81ea\u95ed\u3001\u53db\u9006\uff0c\u6e38\u5b66\u897f\u73ed\u7259\u3001\u5fb7\u56fd\u3001\u7f8e\u56fd\u540e\uff0c\u6e10\u6e10\u6210\u957f\u4e3a\u72ec\u7acb\u81ea\u4fe1\u7684\u9752\u5e74\uff1b\u4e00\u4e5d\u4e03\u56db\u5e74\uff0c\u4e09\u6bdb\u4e0e\u8377\u897f\u5728\u6492\u54c8\u62c9\u6c99\u6f20\u7ed3\u5a5a\uff0c\u767d\u624b\u6210\u5bb6\uff0c\u5979\u7684\u6587\u5b66\u521b\u4f5c\u751f\u6daf\u4ece\u6b64\u5f00\u542f\uff1b\u79fb\u5c45\u52a0\u7eb3\u5229\u7fa4\u5c9b\u540e\uff0c\u4e09\u6bdb\u7684\u751f\u6d3b\u6e10\u8d8b\u5b89\u5b9a\uff0c\u5979\u7684\u521b\u4f5c\u4e5f\u8fbe\u5230\u4e86\u9ad8\u5cf0\uff1b\u4e00\u4e5d\u4e03\u4e5d\u5e74\uff0c\u8377\u897f\u610f\u5916\u53bb\u4e16\uff0c\u4e09\u6bdb\u7684\u5fc3\u7075\u53d7\u5230\u5de8\u5927\u521b\u4f24\uff0c\u4eba\u751f\u9677\u5165\u4f4e\u8c37\uff1b\u8fd4\u53f0\u540e\uff0c\u4e09\u6bdb\u518d\u5ea6\u51fa\u8d70\uff0c\u6e38\u5386\u4e2d\u5357\u7f8e\u6d32\uff0c\u5f00\u59cb\u65b0\u7684\u751f\u6d3b\u3002 \u5988\u5988\u7684\u4e00\u5c01\u4fe1\uff08\u4ee3\u5e8f\uff09 \u56de\u4e61\u5c0f\u7b3a\uff08\u56db\u7248\u4ee3\u5e8f\uff09 \u6c99\u6f20\u4e2d\u7684\u996d\u5e97 \u7ed3\u5a5a\u8bb0 \u60ac\u58f6\u6d4e\u4e16 \u5a03\u5a03\u65b0\u5a18 \u8352\u5c71\u4e4b\u591c \u6c99\u6f20\u89c2\u6d74\u8bb0 \u7231\u7684\u5bfb\u6c42 \u82b3 \u90bb \u7d20\u4eba\u6e14\u592b \u6b7b\u679c \u5929 \u68af \u767d\u624b\u6210\u5bb6","title":"\u300a\u6492\u54c8\u62c9\u7684\u6545\u4e8b\u300b"},{"location":"BOOKS/2017-05-07-echo-chenping-sanmao-articles/#_6","text":"\u5728\u8fd9\u672c\u96c6\u4e09\u6bdb\u534a\u751f\u89c1\u89e3\u3001\u667a\u6167\u7684\u5c0f\u54c1\u91cc\uff0c\u4e09\u6bdb\u5c31\u300a\u5b69\u5b50\u300b\u3001\u300a\u5feb\u4e50\u300b\u3001\u300a\u5c81\u6708\u300b\u3001\u300a\u4f24\u300b\u3001\u300a\u81ea\u5df1\u300b\u3001\u300a\u4e50\u547d\u300b\u3001\u300a\u7537\u4e0e\u5973\u300b\u3001\u300a\u94b1\u94b1\u94b1\u300b\u3001\u300a\u7231\u60c5\u300b\u3001\u300a\u4eba\u300b\u3001\u300a\u65e0\u5fc3\u300b\u3001\u300a\u6709\u610f\u300b\u3001\u300a\u5982\u679c\u300b\u3001\u300a\u670b\u53cb\u300b\u5341\u56db\u9898\uff0c\u968f\u800c\u60f3\u8fd9\u4e86\u4e00\u756a\u3002\u5979\u4e00\u8d2f\u7684\u6587\u5b57\u9b45\u529b\u4e0d\u5728\u8bdd\u4e0b\uff0c\u518d\u63c9\u548c\u5979\u72ec\u5177\u7684\u7279\u6b8a\u5fc3\u7075\uff0c\u7535\u5149\u77f3\u706b\u8ff8\u73b0\u822c\u7684\u5947\u60f3\uff0c\u6bcf\u6bcf\u4e00\u8bfb\uff0c\u4fbf\u6709\u4e00\u79cd\u65b0\u8da3\uff0c\u4eff\u4f5b\u7a0d\u7a0d\u78b0\u89e6\u5230\u5979\u72ec\u7136\u4e16\u754c\u7684\u8fb9\u7f18\u3002 \u5b69\u5b50 \u5feb\u4e50 \u5c81\u6708 \u4f24 \u81ea\u5df1 \u4e50\u547d \u7537\u4e0e\u5973 \u94b1\u94b1\u94b1 \u7231\u60c5 \u4eba \u6709\u610f \u5982 \u679c \u670b\u53cb","title":"\u300a\u968f\u60f3\u300b"},{"location":"BOOKS/2017-05-07-echo-chenping-sanmao-articles/#_7","text":"\u5927\u5730\u554a\uff0c\u6211\u6765\u5230\u4f60\u5cb8\u4e0a\u65f6\u539f\u662f\u4e00\u4e2a\u964c\u751f\u4eba\uff0c\u4f4f\u5728\u4f60\u623f\u5b50\u91cc\u65f6\u539f\u662f\u4e00\u4e2a\u65c5\u5ba2\uff0c\u800c\u4eca\u6211\u79bb\u5f00\u4f60\u7684\u95e8\u65f6\u5374\u662f\u4e00\u4e2a\u670b\u53cb\u4e86\u3002\u672c\u5377\u300a\u4e07\u6c34\u5343\u5c71\u8d70\u904d\u300b\u8bb0\u5f55\u4e86\u4e09\u6bdb\u8fd4\u53f0\u540e\uff0c\u518d\u5ea6\u51fa\u8d70\uff0c\u6e38\u5386\u4e2d\u5357\u7f8e\u6d32\u4ee5\u53ca\u9996\u6b21\u56de\u5f52\u6545\u571f\u7684\u65c5\u884c\u89c1\u95fb\uff0c\u5171\u5341\u516b\u7bc7\u3002\u5728\u8377\u897f\u53bb\u4e16\u4e4b\u540e\uff0c\u4e09\u6bdb\u9f13\u8d77\u751f\u6d3b\u7684\u52c7\u6c14\uff0c\u91cd\u65b0\u5f00\u59cb\u4e86\u65b0\u7684\u751f\u6d3b\u3002\u300a\u4e09\u6bdb\u96c6\u300b\u4ee5\u4e09\u6bdb\u7684\u751f\u547d\u5386\u7a0b\u4e3a\u4e3b\u9898\uff0c\u5206\u4e3a\u4e94\u5377\uff1a\u300a\u96e8\u5b63\u4e0d\u518d\u6765\u300b\u300a\u6492\u54c8\u62c9\u7684\u6545\u4e8b\u300b\u300a\u6e29\u67d4\u7684\u591c\u300b\u300a\u68a6\u91cc\u82b1\u843d\u77e5\u591a\u5c11\u300b\u53ca\u300a\u4e07\u6c34\u5343\u5c71\u8d70\u904d\u300b\u3002 \u5927\u8725\u8734\u4e4b\u591c \u8857\u5934\u5df7\u5c3e \u9752\u9e1f\u4e0d\u5230\u7684\u5730\u65b9 \u4e2d\u7f8e\u6d32\u7684\u82b1\u56ed \u7f8e\u59ae\u8868\u59b9 \u4e00\u4e2a\u4e0d\u6309\u724c\u7406\u51fa\u724c\u7684\u5730\u65b9 \u9644\u8bb0\uff1a\u4e00\u5c01\u7ed9\u9093\u5ff5\u6148\u795e\u7236\u7684\u4fe1 \u836f\u5e08\u7684\u5b59\u5973\u2014\u524d\u4e16 \u94f6\u6e56\u4e4b\u6ee8\u2014\u4eca\u751f \u7d22\u8bfa\u5947\u2014\u2014\u96e8\u539f\u4e4b\u4e00 \u591c\u620f\u2014\u96e8\u539f\u4e4b\u4e8c \u8ff7\u57ce\u2014\u96e8\u539f\u4e4b\u4e09 \u9003\u6c34\u2014\u96e8\u539f\u4e4b\u56db \u9644\u5f55\u3000\u98de\u8d8a\u7eb3\u65af\u52a0\u4e4b\u7ebf","title":"\u300a\u4e07\u6c34\u5343\u5c71\u8d70\u904d\u300b"},{"location":"BOOKS/2017-05-07-echo-chenping-sanmao-articles/#_8","text":"\u4ed6\u4eec\u8bf4\u4e09\u6bdb\uff08\u5e8f\uff09 \u5bc2 \u5730(1) \u5bc2 \u5730(2) \u4e94\u6708\u82b1(1) \u4e94\u6708\u82b1(2) \u739b\u9edb\u62c9\u6e38\u8bb0(1) \u739b\u9edb\u62c9\u6e38\u8bb0(2) \u6e29\u67d4\u7684\u591c \u77f3 \u5934 \u8bb0 \u76f8\u9022\u4f55\u5fc5\u66fe\u76f8\u8bc6 \u6c38\u8fdc\u7684\u9a6c\u5229\u4e9a \u9644\u5f55\uff1a\u6211\u4e0d\u662f\u4e09\u6bdb\u8ff7","title":"\u300a\u6e29\u67d4\u7684\u591c\u300b"},{"location":"BOOKS/2017-05-07-echo-chenping-sanmao-articles/#_9","text":"\u81ea\u7231\u800c\u4e0d\u81ea\u601c \u795d\u798f\u4e2d\u56fd \u4eba\u751f\u4f55\u5904\u4e0d\u76f8\u9022 \u9694\u79bb\u4e0e\u6c9f\u901a \u4e0d\u6ee1\u3001\u4e0d\u6ee1\u3001\u4e0d\u6ee1 \u771f\u806a\u660e\u7684\u597d\u5b69\u5b50 \u6ca1\u6709\u627e\u5440\uff01 \u6559\u4e66\u4e0d\u662f\u5854 \u6700\u91cd\u8981\u7684\u662f\u88ab\u7231\u5417\uff1f \u4e3a\u4ec0\u4e48\u3001\u4e3a\u4ec0\u4e48\uff1f \u8bfb\u4e66\u548c\u8ff7\u85cf \u4e0d \u5f03 \u4e0d \u9003 \u5176\u5b9e\u90fd\u4e0d\u662f\u95ee\u9898 \u4e0d\u80fd\u7ed9\u4f60\u5feb\u4e50 \u5199\u4f5c\u4e0d\u96be \u6211\u559c\u6b22\u628a\u5feb\u4e50\u5f53\u4f20\u67d3\u75c5 \u72f1\u5916\u7684\u5929\u7a7a\u4e5f\u662f\u4f60\u7684 \u662f\u7f8e\u5fb7\u8fd8\u662f\u61e6\u5f31 \u201c\u559c\u6b22\u201d\u6709\u5343\u4e07\u79cd\u98ce\u8c8c\u4e0e\u8be0\u91ca \u8bfb\u4e66\u4e0d\u80fd\u53ea\u8bfb\u4e00\u4e2a\u6708 \u4e94\u4e2a\u5bf9\u8bdd \u5982\u679c\u662f\u6211\u7684\u5973\u513f \u5199\u7ed9\u201c\u6cea\u7b11\u4e09\u5e74\u201d\u7684\u5c11\u5e74 \u5982\u679c\u6211\u662f\u4f60 \u4e0d\u8981\u4e5f\u7f62 \u56de\u4e0d\u51fa\u7684\u4e66\u4fe1 \u5c0f\u670b\u53cb\u597d \u4e0d\u4f1a\u5fd8\u8bb0\u4f60\u8981\u7684\u660e\u4fe1\u7247 \u5982\u4f55\u6b7b\u5f97\u5176\u6240 \u4e0d\u8bb2\u4e86 \u8bf4\u670b\u9053\u53cb \u6127\u759a\u611f \u5c11\u5e74\u6101 \u540e \u8bb0","title":"\u300a\u8c08\u5fc3\u300b"},{"location":"BOOKS/2017-05-07-echo-chenping-sanmao-articles/#_10","text":"\u770b\u5230\u8fd9\u672c\u4e66\u4e2d\u4e00\u7bc7\u7bc7\u7684\u77ed\u5c0f\u6587\u7ae0\uff0c\u5fc3\u4eff\u4f5b\u5728\u5608\u6742\u7684\u4e16\u754c\u4e2d\u6c89\u9759\u4e0b\u6765\u3002\u4e00\u76f4\u5f88\u8ba8\u538c\u77ed\u7684\u6587\u7ae0\uff0c\u89c9\u5f97\u7d22\u7136\u65e0\u5473\uff0c\u4f46\u5979\u7684\u4e00\u76f4\u662f\u4e2a\u4f8b\u5916\u3002\u770b\u7740\u5979\u7684\u90a3\u4e00\u4e2a\u4e2a\u5b9d\u8d1d\uff0c\u7adf\u6709\u4e00\u80a1\u51b2\u52a8\uff0c\u5e0c\u671b\u5750\u5728\u5979\u7684\u9762\u524d\uff0c\u548c\u5979\u4e00\u8d77\u628a\u73a9\uff0c\u542c\u4ed6\u8bc9\u8bf4\u4e00\u4e2a\u4e2a\u7684\u6545\u4e8b\u3002 \u7f18\u8d77 \u672c\u6765\u662f\u4e00\u53cc\u7684 \u7b2c\u4e00\u4e2a\u5f69\u9676 \u9152\u888b \u5341\u5b57\u67b6 \u624b\u4e0a\u7684\u5149\u73af \u7b2c\u4e00\u5f20\u5e8a\u7f69 \u5988\u5988\u7684\u5fc3 \u522b\u9488 \u5fc3\u7231\u7684 \u7b2c\u4e00\u4e32\u73ab\u7470\u5ff5\u73e0 \u4e0d\u5411\u624b\u5de5\u8bf4\u518d\u89c1 \u53cc\u9c7c \u523b\u8fdb\u53bb\u7684\u751f\u547d \u7b2c\u4e00\u6761\u9879\u94fe \u5929\u8863\u65e0\u7f1d \u8001\u522b\u9488 \u75f4\u5fc3\u77f3 \u7b2c\u4e00\u6b21\u505a\u5c0f\u5b66\u751f \u505c \u9879\u94fe \u7ed3\u5a5a\u793c\u7269 \u7b2c\u4e00\u4e2a\u5974\u96b6 \u4f60\u7684\u90a3\u53cc\u773c\u775b \u9501 \u7b3c\u5b50\u91cc\u7684\u5c0f\u4e11 \u7b2c\u4e00\u5339\u767d\u9a6c \u4e61\u6101 \u8fd8\u662f\u9501\u4f4f\u4e86 \u5c0f\u4e01\u795e\u7236\u7684\u5973\u4eba \u7b2c\u4e00\u5957\u767e\u79d1\u5168\u4e66 \u8840\u8c61\u7259 \u79cb\u6c34\u4f0a\u4eba \u871c\u6708\u9ebb\u5c06\u724c \u5a03\u5a03\u56fd\u5a03\u5a03\u5175 \u4e0d\u7ea6\u5927\u9189\u4fa0 \u4e94\u66f4\u706f \u5e7f\u4e1c\u6765\u7684\u8001\u8336\u58f6 \u897f\u96c5\u56fe\u7684\u51ac\u5929 \u534e\u9676\u7a91 \u6797\u59b9\u59b9\u7684\u88d9\u5b50 \u963f\u5bcc\u6c57\u4eba\u54c8\u654f\u59bb\u5b50\u7684\u9879\u94fe \u4e9a\u5f53\u548c\u590f\u5a03 \u77e5\u97f3 \u7172 \u5e78\u798f\u7684\u76d8\u5b50 \u6211\u8981\u5fc3\u5f62\u7684 \u94f6\u5668\u4e00\u5927\u628a \u5341\u4e09\u53ea\u9f99\u867e\u548c\u4f0a\u5730\u65af \u8153\u5c3c\u57fa\u4eba\u7684\u5b9d\u74f6 \u5370\u5730\u5b89\u4eba\u7684\u5a03\u5a03 \u9f13\u6905 \u5b88\u8d22\u5974 \u6ca7\u6851 \u518d\u770b\u4f60\u4e00\u773c \u963f\u6f58\u7684\u76d8\u5b50 \u4ec5\u5b58\u7684\u4e09\u4e2a\u77f3\u50cf \u836f \u74f6 \u9057\u7231 \u8ba9\u6211\u8bb2\u4e2a\u6545\u4e8b \u5927\u5730\u4e4b\u6bcd \u65e5\u5386\u65e5\u5386\u6302\u5728\u5899\u58c1 \u53d7\u96be\u7684\u57fa\u7763 \u7cef\u7c73\u6d46\u7897 \u725b\u7f8a\u6210\u7fa4 \u6211\u656c\u7231\u4f60 \u5c0f\u5077\uff0c\u5c0f\u5077 \u521d\u89c1\u8305\u5e90 \u7ec7\u5e03 \uff30\uff25\uff30\uff21\u60c5\u4eba \u6d17\u8138\u76c6 \u518d\u8d74\u8305\u5e90 \u4e0d\u6253\u53cc\u5934\u86c7 \u68a6\u5e7b\u9a91\u58eb \u7f8e\u6d53\u72d7\u7897 \u4e09\u987e\u8305\u5e90 \u95ea\u70c1\u7684\u5e76\u4e0d\u662f\u91d1\u5b50 \u6765\u751f\u518d\u89c1 \u64e6\u978b\u7ae5 \u5370\u5ea6\u624b\u7ee3 \u4e8c\u5341\u4e5d\u9897\u5f69\u77f3 \u6a44\u6984\u6811 \u5c0f\u8239\uff25\uff23\uff28\uff2f\u53f7 \u98de\u9556 \u7ea2\u5fc3\u662f\u6211\u7684 \u65f6\u95f4\u7684\u53bb\u5904 \u90bb\u5c45\u7684\u5f69\u5e03 \u540e\u8bb0","title":"\u300a\u6211\u7684\u5b9d\u8d1d\u300b"},{"location":"BOOKS/2017-05-07-echo-chenping-sanmao-articles/#_11","text":"\u672c\u5377\u300a\u96e8\u5b63\u4e0d\u518d\u6765\u300b\u4ee5\u4e09\u6bdb\u7684\u751f\u547d\u5386\u7a0b\u4e3a\u4e3b\u9898\uff0c\u8bb0\u5f55\u4e86\u4e09\u6bdb17\u5c81\u523022\u5c81\u7684\u6210\u957f\u8fc7\u7a0b\uff0c\u771f\u5b9e\u5448\u73b0\u51fa\u4e09\u6bdb\u5c11\u5973\u65f6\u4ee3\u7684\u6210\u957f\u611f\u53d7\uff0c\u8f8d\u5b66\u3001\u81ea\u95ed\u3001\u53db\u9006\uff0c\u6e38\u5b66\u897f\u73ed\u7259\u3001\u5fb7\u56fd\u3001\u7f8e\u56fd\u540e\uff0c\u6e10\u6e10\u6210\u957f\u4e3a\u72ec\u7acb\u81ea\u4fe1\u7684\u9752\u5e74\uff0c\u672c\u4e66\u4e2d\u900f\u9732\u7684\u7eaf\u771f\u60c5\u6000\u548c\u5f02\u8d28\u7f8e\u611f\uff0c\u53ef\u4ee5\u6e05\u695a\u5730\u5370\u8bc1\u5979\u4f20\u5947\u6027\u683c\u7684\u75d5\u8ff9\u3002 \u5e8f\uff1a\u201c\u82cd\u5f31\u201d\u4e0e\u201c\u5065\u5eb7\u201d \u5f53\u4e09\u6bdb\u8fd8\u662f\u5728\u4e8c\u6bdb\u7684\u65f6\u5019\uff08\u81ea\u5e8f\uff09 \u60d1 \u79cb \u604b \u6708 \u6cb3 \u6781 \u4e50 \u9e1f \u96e8\u5b63\u4e0d\u518d\u6765 \u4e00\u4e2a\u661f\u671f\u4e00\u7684\u65e9\u6668 \u5b89\u4e1c\u5c3c\u00b7\u6211\u7684\u5b89\u4e1c\u5c3c \u8d74\u6b27\u65c5\u9014\u89c1\u95fb\u5f55 \u6211\u4ece\u53f0\u6e7e\u8d77\u98de \u7ffb\u8239\u4eba\u770b\u9ec4\u9e64\u697c \u5e73\u6c99\u6f20\u6f20\u591c\u5e26\u5200 \u53bb\u5e74\u7684\u51ac\u5929 \u9644\u5f55-\u4e09\u6bdb\u2014\u2014\u5f02\u4e61\u7684\u8d4c\u5f92(\u6842\u6587\u4e9a) \u8bbf\u4e09\u6bdb\u3001\u5199\u4e09\u6bdb \u98de\u2014\u2014\u4e09\u6bdb\u4f5c\u54c1\u7684\u4eca\u6614","title":"\u300a\u96e8\u5b63\u4e0d\u518d\u6765\u300b"},{"location":"BOOKS/2017-05-07-echo-chenping-sanmao-articles/#_12","text":"\u8bfb\u8fd9\u672c\u4e66\u7684\u4eba\uff0c\u4e00\u5b9a\u8981\u6709\u7231\u5fc3\uff0c\u4e00\u9897\u61c2\u611f\u6069\u7684\u5fc3\u3002\u7ffb\u5f00\u4e66\u7684\u6bcf\u4e00\u9875\uff0c\u53bb\u4f53\u4f1a\u4e09\u6bdb\u7684\u7231\u4e0e\u6cea\uff0c\u53bb\u5b66\u4f1a\u73cd\u60dc\u81ea\u5df1\u8eab\u8fb9\u7684\u4eba\u3002 \u4e0d\u6b7b\u9e1f \u660e\u65e5\u53c8\u5929\u6daf \u4e91\u5728\u9752\u5c71\u6708\u5728\u5929 \u5f52 \u68a6\u91cc\u68a6\u5916 \u4e0d\u98de\u7684\u5929\u4f7f \u4f3c\u66fe\u76f8\u8bc6\u71d5\u5f52\u6765 \u68a6\u91cc\u82b1\u843d\u77e5\u591a\u5c11 \u4e00\u4e2a\u7537\u5b69\u5b50\u7684\u7231\u60c5 \u6211\u7684\u5199\u4f5c\u751f\u6d3b \u9a86\u9a7c\u4e3a\u4ec0\u4e48\u8981\u54ed\u6ce3 \u5728\u98ce\u91cc\u98d8\u626c\u7684\u5f71\u5b50\u897f\u6c99 \u7ae5\u8bdd\u897f\u6c99 \u4e24\u6781\u5bf9\u8bdd\u2014\u2014\u6c88\u541b\u5c71\u548c\u4e09\u6bdb","title":"\u300a\u68a6\u91cc\u82b1\u843d\u77e5\u591a\u5c11\u300b"},{"location":"BOOKS/2017-05-07-echo-chenping-sanmao-articles/#_13","text":"\u4e00\u751f\u7231\u9a6c\u75f4\u72c2\uff0c\u5bf9\u65bc\u6211\uff0c\u9a6c\u4ee3\u8868\u8457\u8bb8\u591a\u6df1\u8fdc\u7684\u610f\u4e49\u548c\u5883\u754c\uff0c\u800c\u7260\u53c8\u662f\u4e0d\u6613\u62e5\u6709\u7684\u3002\u9a6c\u7684\u5f62\u4f53\uff0c\u4ea4\u7ec7\u8457\u96c4\u58ee\u3001\u795e\u79d8\u53c8\u540c\u65f6\u6e05\u6717\u7684\u751f\u547d\u4e4b\u6781\u7f8e\u3002\u800c\u4e14\uff0c\u7260\u7684\u51fa\u73b0\u4e8b\u6709\u80cc\u666f\u505a\u886c\u7684\u3002\u6bcf\u60f3\u8d77\u4efb\u4f55\u4e00\u5339\u9a6c\uff0c\u4e00\u5339\u98de\u8dc3\u7684\u9a6c\uff0c\u90a3\u4efd\u6fc0\u8d8a\u7684\u72c2\u559c\uff0c\u662f\u6ca1\u6709\u53e6\u4e00\u79cd\u60c5\u6000\u53ef\u4ee5\u53d6\u4ee3\u7684\u3002\u5e76\u4e0d\u6267\u8457\u65bc\u62e5\u6709\u4e00\u5339\u6478\u7684\u8457\u7684\u9a8f\u9a6c\uff0c\u90a3\u6837\u4e5f\u53ea\u6709\u4e00\u5339\u4e86\uff0c\u8fd9\u4e2a\u4e0d\u591f\u3002\u6709\u4e86\u771f\u9a6c\uff0c\u843d\u4e86\u5b9e\u50cf\uff0c\u4e0d\u81ea\u7531\uff0c\u53cd\u800c\u60b5\u7136\u82e5\u5931\u3002\u5176\u5b9e\uff0c\u9a6c\u4e5f\u597d\uff0c\u8352\u539f\u4e5f\u597d\uff0c\u96e8\u5b63\u7684\u5c11\u5e74\u3001\u68a6\u88e1\u7684\u843d\u82b1\u3001\u6bcd\u4eb2\u7684\u80cc\u5f71\u3001\u4e07\u6c34\u5343\u5c71\u7684\u957f\u8def\uff0c\u90fd\u662f\u597d\u7684\uff0c\u6ca1\u6709\u4e00\u6837\u4e0d\u5408\u81ea\u7136\uff0c\u6ca1\u6709\u4e00\u6837\u4e0d\u80fd\u63a5\u53d7\uff0c\u865a\u5b9e\u4e4b\u95f4\uff0c\u5e84\u5468\u8774\u8776\u3002\u5e38\u5e38\uff0c\u4e0d\u60f3\u518d\u63e1\u7b14\u4e86\uff0c\u5f88\u591a\u6b21\uff0c\u771f\u6b63\u4e0d\u60f3\u518d\u5199\u4e86\u3002\u53ef\u662f\uff0c\u751f\u547d\u8ddf\u4eba\u6076\u4f5c\u5267\uff0c\u5b83\u9a97\u8457\u4eba\u5316\u8fdb\u6545\u4e8b\u88e1\u53bb\u6d3b\uff0c\u5b83\u7528\u79cd\u79cd\u7684\u60c5\u8282\u5f15\u8bf1\u8457\u4eba\u70ed\u70c8\u7684\u6295\u5165\uff0c\u4eba\uff0c\u5148\u88ab\u6545\u4e8b\u6349\u8fdb\u53bb\u4e86\uff0c\u7136\u540e\uff0c\u90a3\u4e2a\u5b88\u9ea6\u7530\u7684\u7a3b\u8349\u4eba\uff0c\u5c31\u4e0a\u5f53\u53c8\u4e0a\u5f53\u7684\u8bb2\u4e86\u53c8\u8bb2\u3002\u90a3\u4e2a\u7a3b\u8349\u4eba\uff0c\u4e0d\u662f\u5510\u5409\u67ef\u5fb7\uff0c\u5b83\u5374\u504f\u504f\u7231\u9a91\u9a6c\u3002\u8fd9\u79cd\u6253\u626e\u7684\u68a6\u5e7b\u9a91\u58eb\uff0c\u770b\u89c1\u4ed6\u90a3\u526f\u6837\u5b50\u4e0a\u8def\uff0c\u8c01\u90fd\u8981\u7b11\u6b7b\u7684\u3002\u5f88\u60f3\u5927\u5927\u65b9\u65b9\u7684\u9001\u7ed9\u4e16\u754c\u4e0a\u6bcf\u4e00\u4e2a\u4eba\u4e00\u5339\u9a6c\uff0c\u5f53\u7136\uff0c\u662f\u517b\u5728\u5fc3\u88e1\u3001\u68a6\u88e1\u3001\u5e7b\u60f3\u88e1\u7684\u90a3\u79cd\u9a6c\u3002\u6211\u6709\u8bb8\u591a\u5339\u597d\u9a6c\uff0c\u662f\u4e00\u4e2a\u9ad8\u539f\u7267\u573a\u7684\u4e3b\u4eba\u3002\u81f3\u65bc\u81ea\u5df1\uff0c\u90a3\u5339\u53ea\u5c5e\u65bc\u6211\u7684\u7231\u9a6c\uff0c\u4e00\u751f\u90fd\u5728\u7684\u3002\u5e38\u5e38\uff0c\u9a91\u8457\u7260\uff0c\u5728\u65e0\u4eba\u7684\u6d77\u8fb9\u5954\u9a70\uff0c\u9a6c\u7684\u6bdb\u8272\uff0c\u5373\u4f7f\u5728\u65e0\u661f\u65e0\u6708\u7684\u591c\u88e1\uff0c\u4e5f\u80fd\u53d1\u51fa\u4e00\u79cd\u6c89\u6f5c\u53c8\u51dd\u934a\u7684\u95ea\u5149\uff0c\u662f\u4e00\u5339\u795e\u9a79\u3002\u6211\u6709\u4e00\u5339\u9ed1\u9a6c\uff0c\u7260\u7684\u540d\u5b57\uff0c\u53eb\u505a\uff0d\uff0d\u6e90\u3002 \u6211\u7684\u5973\u513f\uff0c\u5927\u5bb6\u7684\u4e09\u6bdb \u7231\u9a6c\uff08\u81ea\u5e8f\uff09 \u84e6\u7136\u56de\u9996 \u60ca\u68a6\u4e09\u5341\u5e74 \u56de\u5a18\u5bb6 \u6545\u4e61\u4eba \u770b\u8fd9\u4e2a\u4eba \u6211\u6240\u77e5\u6240\u7231\u7684\u9a6c\u594e\u65af \u9003\u4ea1 \u5f80\u4e8b\u5982\u70df \u68a6\u91cc\u4e0d\u77e5\u8eab\u662f\u5ba2 \u91ce\u706b\u70e7\u4e0d\u5c3d \u4e0d\u89c9\u78a7\u5c71\u66ae\u3000\u4f46\u95fb\u4e07\u58d1\u677e \u5b66\u671f\u4f5c\u4e1a\u62a5\u544a \u4f60\u662f\u6211\u7279\u522b\u7684\u5929\u4f7f \u671d\u9633\u4e3a\u8c01\u5347\u8d77 \u4e00\u751f\u7684\u6218\u5f79 \u9001\u4f60\u4e00\u5339\u9a6c \u8863\u5e26\u6e10\u5bbd\u7ec8\u4e0d\u6094 \u9648\u8001\u5e08\uff08\u8dcb\uff09","title":"\u300a\u9001\u4f60\u4e00\u5339\u9a6c\u300b"},{"location":"BOOKS/2017-05-07-echo-chenping-sanmao-articles/#_14","text":"\u5979\u66fe\u7ecf\u662f\uff0c\u96e8\u5b63\u4e2d\u5fe7\u90c1\u7684\u5c11\u5973\uff0c\u6492\u54c8\u62c9\u6c99\u6f20\u91cc\u5feb\u4e50\u7684\u5c0f\u5987\u4eba\uff0c\u7136\u540e\u53c8\u6210\u4e3a\u4e00\u4e2a\u5b88\u671b\u5728\u53f0\u6e7e\u5c9b\u4e0a\u7684\u5fe7\u4f24\u5be1\u5987\u3002\u5979\u7231\u6d41\u6d6a\uff0c\u7231\u6c99\u6f20\uff0c\u7231\u7f8e\u4e3d\u548c\u6d6a\u6f2b\uff0c\u7231\u90a3\u4e2a\u5e73\u539f\u5927\u91ce\u7684\u7537\u4eba\u3002\u7ecf\u5386\u4e86\u56db\u5341\u516b\u5e74\u5927\u8d77\u5927\u843d\uff0c\u5927\u60b2\u5927\u559c\uff0c\u8f70\u8f70\u70c8\u70c8\uff0c\u751f\u6b7b\u6b4c\u54ed\uff0c\u5728\u79bb\u5343\u4e07\u7231\u5979\u7684\u4eba\u800c\u53bb\u4e4b\u524d\uff0c\u5979\u8bf4\uff1a\u2018\u6211\u5df2\u7ecf\u5ea6\u8fc7\u4e86\u5f02\u5e38\u4e30\u5bcc\u7684\u4e00\u751f\u3002\u2019 \u9003\u5b66\u4e3a\u8bfb\u4e66\uff08\u4ee3\u5e8f\uff09 \u6c38\u8fdc\u7684\u590f\u5a03\u5f00\u573a\u767d \u62fe\u8352\u68a6\u2014\u2014\u6c38\u8fdc\u7684\u590f\u5a03 \u9ec4\u660f\u7684\u6545\u4e8b\u2014\u2014\u6c38\u8fdc\u7684\u590f\u5a03 \u5deb\u4eba\u8bb0\u2014\u2014\u6c38\u8fdc\u7684\u590f\u5a03 \u997a\u5b50\u5927\u738b \u8d64\u8db3\u5929\u4f7f\u2014\u2014\u978b\u5b50\u7684\u6545\u4e8b \u4eb2\u4e0d\u4eb2\uff0c\u6545\u4e61\u4eba \u6d6a\u8ff9\u5929\u6daf\u8bdd\u4e70\u5356 \u80cc\u5f71 \u8352\u5c71\u4e4b\u591c \u514b\u91cc\u65af \u79bb\u4e61\u56de\u4e61 \u96e8\u7985\u53f0\u5317 \u5468\u672b","title":"\u300a\u80cc\u5f71\u300b"},{"location":"BOOKS/2017-05-07-echo-chenping-sanmao-articles/#_15","text":"\u4e09\u6bdb\u7684\u8db3\u8ff9\u904d\u53ca\u4e16\u754c\u5404\u5730\uff0c\u5e73\u751f\u8457\u4f5c\u3001\u8bd1\u4f5c\u5341\u5206\u4e30\u5bcc\uff0c\u5176\u4e2d\u300a\u6492\u54c8\u62c9\u7684\u6545\u4e8b\u300b\u3001\u300a\u96e8\u5b63\u4e0d\u518d\u6765\u300b\u3001\u300a\u54ed\u6ce3\u7684\u9a86\u9a7c\u300b\u3001\u300a\u6211\u7684\u5b9d\u8d1d\u300b\u3001\u300a\u95f9\u5b66\u8bb0\u300b\u3001\u300a\u6eda\u6eda\u7ea2\u5c18\u300b\u7b49\u6563\u6587\u3001\u5c0f\u8bf4\u3001\u5267\u672c\u66f4\u662f\u810d\u7099\u4eba\u53e3\uff0c\u5728\u5168\u7403\u534e\u4eba\u793e\u4f1a\u5e7f\u4e3a\u6d41\u4f20\uff0c\u5728\u5927\u9646\u98ce\u9761\u4e00\u65f6\uff0c\u5f71\u54cd\u4e86\u6574\u6574\u4e00\u4ee3\u4eba\u3002 \u5e8f\u8a00 \u6c5f\u6d0b\u5927\u76d7 \u4eb2\u7231\u7684\u5a46\u5a46\u5927\u4eba \u897f\u98ce\u4e0d\u8bc6\u76f8 \u8fd9\u6837\u7684\u4eba\u751f \u58eb\u4e3a\u77e5\u5df1\u8005\u6b7b \u8b66\u544a\u9003\u59bb \u8fd9\u79cd\u5bb6\u5ead\u751f\u6d3b \u5851\u6599\u513f\u7ae5 \u5356\u82b1\u5973 \u5b88\u671b\u7684\u5929\u4f7f \u76f8\u601d\u519c\u573a \u5de8\u4eba","title":"\u300a\u7a3b\u8349\u4eba\u624b\u8bb0\u300b"},{"location":"BOOKS/2017-05-07-echo-chenping-sanmao-articles/#_16","text":"\u300a\u6eda\u6eda\u7ea2\u5c18\u300b\u662f\u4e09\u6bdb\u7684\u7b2c\u4e00\u90e8\u4e2d\u6587\u7535\u5f71\u5267\u672c\uff0c\u4e5f\u662f\u552f\u4e00\u4e00\u90e8\u3002\u4ee5\u4e2d\u56fd\u8fd1\u4ee3\u53f2\u4e0a\u7684\u52a8\u4e71\u5e74\u4ee3\u4e3a\u80cc\u666f\uff0c\u7ecf\u7531\u65f6\u4ee3\u513f\u5973\u7684\u7231\u3001\u6068\u3001\u60c5\u3001\u4ec7\u51fa\u53d1\uff0c\u63cf\u7ed8\u4e00\u4e2a\u5168\u4e2d\u56fd\u4eba\u60b2\u3001\u6b22\u3001\u79bb\u3001\u5408\u7684\u6545\u4e8b\uff0c\u5b9e\u9645\u4e0a\uff0c\u5b83\u4e0d\u7ecf\u610f\u6d41\u9732\u51fa\u6765\u7684\u662f\u4e00\u5219\u51c4\u6006\u65e0\u6b62\u7684\u7231\u60c5\u6545\u4e8b\uff0c\u66f4\u662f\u4e09\u6bdb\u81ea\u8eab\u7075\u9b42\u7684\u544a\u767d\u3002\\ \u6545\u4e8b\u4ee5\u65e7\u4e0a\u6d77\u4e3a\u80cc\u666f\uff0c\u8bb2\u8ff0\u7684\u662f\u5728\u6218\u4e71\u4e2d\u80fd\u624d\u4e0e\u97f6\u534e\u3001\u6708\u51e4\u4e0e\u9769\u547d\u7537\u5973\u4e4b\u95f4\u7684\u7231\u60c5\u6545\u4e8b\u3002\u5185\u5bb9\u76f8\u4f20\u4e3a\u201c\u5f71\u5c04\u6c11\u56fd\u65f6\u671f\u5973\u4f5c\u5bb6\u5f20\u7231\u73b2\u4e0e\u80e1\u5170\u6210\u7684\u611f\u60c5\u7ea0\u845b\u201d\u3002\\ \u7535\u5f71\u300a\u6eda\u6eda\u7ea2\u5c18\u300b\u7531\u6797\u9752\u971e\u3001\u79e6\u6c49\u3001\u5f20\u66fc\u7389\u4e3b\u6f14\uff0c1990\u5e74\u516c\u6620\u3002\u8363\u83b7\u91d1\u9a6c\u5956\u516b\u9879\u5927\u5956\uff0c\u521b\u6700\u9ad8\u5f97\u5956\u7eaa\u5f55\u3002\\ \u300a\u6eda\u6eda\u7ea2\u5c18\u300b\u4e3b\u9898\u66f2\u7531\u7f57\u5927\u4f51\u586b\u8bcd\u8c31\u66f2\uff0c\u7f57\u5927\u4f51\u3001\u9648\u6dd1\u6866\u5408\u5531\u3002\u81f3\u4eca\u4f20\u4e3a\u7ecf\u5178\u3002 \u6954\u5b50 \u4eba\u7269\u4ecb\u7ecd \u7b2c\u4e00\u7ae0 \u697c\u9ad8\u65e5\u5c3d \u7b2c1\u573a \u7b2c2\u573a \u7b2c3\u573a \u7b2c\u4e8c\u7ae0 \u671b\u65ad\u5929\u6daf\u8def \u7b2c4\u573a \u7b2c5\u573a \u7b2c6\u573a \u7b2c7\u573a \u7b2c\u4e09\u7ae0 \u6765\u65f6\u964c\u4e0a\u521d\u718f \u7b2c8\u573a \u7b2c9\u573a \u7b2c10\u573a \u7b2c11\u573a \u7b2c12\u573a \u7b2c13\u573a \u7b2c\u56db\u7ae0 \u6709\u60c5\u98ce\u4e07\u91cc\u5377\u6f6e\u6765 \u7b2c14\u573a \u7b2c15\u573a \u7b2c16\u573a \u7b2c17\u573a \u7b2c18\u573a \u7b2c19\u573a \u7b2c\u4e94\u7ae0 \u63a8\u6795\u60d8\u7136\u4e0d\u89c1 \u7b2c20\u573a \u7b2c21\u573a \u7b2c22\u573a \u7b2c\u516d\u7ae0 \u5206\u643a\u5982\u6628 \u5230\u5904\u840d\u98d8\u6cca \u7b2c23\u573a \u7b2c24\u573a \u7b2c25\u573a \u7b2c26\u573a \u7b2c27\u573a \u7b2c28\u573a \u7b2c\u4e03\u7ae0 \u6d69\u7136\u76f8\u5bf9 \u4eca\u5915\u4f55\u5e74 \u7b2c29\u573a \u7b2c30\u573a \u7b2c31\u573a \u7b2c\u516b\u7ae0 \u8c01\u9053\u4eba\u751f\u65e0\u518d\u5c11 \u7b2c32\u573a \u7b2c33\u573a \u7b2c34\u573a \u7b2c\u4e5d\u7ae0 \u4f9d\u65e7\u68a6\u9b42\u4e2d \u7b2c35\u573a \u7b2c36\u573a \u7b2c37\u573a \u7b2c38\u573a \u7b2c\u5341\u7ae0 \u4f46\u6709\u65e7\u6b22\u65b0\u6028 \u7b2c39\u573a \u7b2c40\u573a \u7b2c41\u573a \u7b2c42\u573a \u7b2c43\u573a \u7b2c44\u573a \u7b2c\u5341\u4e00\u7ae0 \u4eba\u751f\u5e95\u4e8b \u5f80\u6765\u5982\u68ad \u7b2c45\u573a \u7b2c46\u573a \u7b2c47\u573a \u7b2c48\u573a \u7b2c49\u573a \u7b2c50\u573a \u7b2c51\u573a \u7b2c\u5341\u4e8c\u7ae0 \u9189\u7b11\u966a\u541b\u4e09\u4e07\u573a \u4e0d\u8bc9\u79bb\u4f24 \u7b2c52\u573a \u7b2c53\u573a \u7b2c54\u573a \u7b2c55\u573a \u7b2c56\u573a \u7b2c\u5341\u4e09\u7ae0 \u7985\u5fc3\u5df2\u5931\u4eba\u95f4\u7231 \u7b2c57\u573a \u7b2c58\u573a \u7b2c59\u573a \u7b2c60\u573a \u7b2c61\u573a \u7b2c62\u573a \u7b2c\u5341\u56db\u7ae0 \u53c8\u4f55\u66fe\u68a6\u89c9 \u7b2c63\u573a \u7b2c64\u573a \u7b2c65\u573a \u7b2c66\u573a \u7b2c67\u573a \u7b2c\u5341\u4e94\u7ae0 \u8e0f\u5c3d\u7ea2\u5c18 \u4f55\u5904\u662f\u543e\u4e61 \u7b2c68\u573a","title":"\u300a\u6eda\u6eda\u7ea2\u5c18\u300b"},{"location":"BOOKS/2017-05-07-echo-chenping-sanmao-articles/#_17","text":"\u300a\u9ad8\u539f\u7684\u767e\u5408\u82b1: \u73bb\u5229\u7ef4\u4e9a\u8bb0\u884c\u300b \u300a\u8d74\u6b27\u65c5\u9014\u89c1\u95fb\u5f55\u300b \u300a\u897f\u5317\u6c11\u6b4c\u5927\u5e08\u738b\u6d1b\u5bbe\u300b","title":"\u5176\u4ed6"},{"location":"BOOKS/2017-05-07-echo-chenping-sanmao-articles/#_18","text":"http://www.kanunu8.com/files/writer/248.html http://www.my285.com/gt/sanmao/gghc/index.htm","title":"\u6458\u81ea"},{"location":"BOOKS/2018-05-23-%25e5%25bc%25a0%25e7%2588%25b1%25e7%258e%25b2%25e6%2596%2587%25e9%259b%2586/","tags":["\u5f20\u7231\u73b2","\u6587\u96c6","\u4f5c\u54c1\u96c6","Eileen Zhang"],"text":"\u6587\u96c6 \u00b6 \u503e\u57ce\u4e4b\u604b \u00b6 \u4e00\u4e2a\u52a8\u542c\u800c\u53c8\u8fd1\u4eba\u60c5\u7684\u6545\u4e8b\u3002\u2026\u2026\u6211\u559c\u6b22\u53c2\u5dee\u7684\u5bf9\u7167\u7684\u5199\u6cd5\uff0c\u56e0\u4e3a\u5b83\u662f\u8f83\u8fd1\u4e8b\u5b9e\u7684\u3002\u300a\u503e\u57ce\u4e4b\u604b\u300b\u91cc\uff0c\u4ece\u8150\u65e7\u7684\u5bb6\u5ead\u91cc\u8d70\u51fa\u6765\u7684\u6d41\u82cf\uff0c\u9999\u6e2f\u4e4b\u6218\u7684\u6d17\u793c\u5e76\u4e0d\u66fe\u5c06\u5979\u611f\u5316\u6210\u4e3a\u9769\u547d\u5973\u6027\uff1a\u9999\u6e2f\u4e4b\u6218\u5f71\u54cd\u8303\u67f3\u539f\uff0c\u4f7f\u5979\u8f6c\u5411\u5e73\u5b9e\u7684\u751f\u6d3b\uff0c\u7ec8\u4e8e\u7ed3\u5a5a\u4e86\uff0c\u4f46\u7ed3\u5a5a\u5e76\u4e0d\u4f7f\u4ed6\u53d8\u4e3a\u5723\u4eba\uff0c\u5b8c\u5168\u653e\u5f03\u5f80\u65e5\u7684\u751f\u6d3b\u4e60\u60ef\u4e0e\u4f5c\u98ce\u3002\u56e0\u4e4b\u67f3\u539f\u4e0e\u6d41\u82cf\u7684\u7ed3\u5c40\uff0c\u867d\u7136\u591a\u5c11\u662f\u5065\u5eb7\u7684\uff0c\u4ecd\u65e7\u662f\u5eb8\u4fd7\uff1b\u5c31\u4e8b\u8bba\u4e8b\uff0c\u4ed6\u4eec\u4e5f\u53ea\u80fd\u5982\u6b64\u3002 \u7b2c\u4e00\u7ae0 \u7b2c\u4e8c\u7ae0 \u7b2c\u4e09\u7ae0 \u7b2c\u56db\u7ae0 \u7b2c\u4e94\u7ae0 \u7b2c\u516d\u7ae0 \u7b2c\u4e03\u7ae0 \u7b2c\u516b\u7ae0 \u7b2c\u4e5d\u7ae0 \u7b2c\u5341\u7ae0 \u8d64\u5730\u4e4b\u604b \u00b6 \u300a\u8d64\u5730\u4e4b\u604b\u300b\u6240\u5199\u7684\u662f\u771f\u4eba\u5b9e\u4e8b\uff0c\u4f46\u662f\u5c0f\u8bf4\u7a76\u7adf\u4e0d\u662f\u62a5\u5bfc\u6587\u5b66\uff0c\u6211\u9664\u4e86\u628a\u771f\u6b63\u7684\u4eba\u540d\u4e0e\u4e00\u90e8\u4efd\u7684\u5730\u540d\u9690\u53bb\uff0c\u800c\u4e14\u9700\u8981\u628a\u8bb8\u591a\u5c0f\u6545\u4e8b\u53e0\u5370\u5728\u4e00\u8d77\uff0c\u518d\u7ecf\u8fc7\u526a\u88c1\u4e0e\u7ec4\u7ec7\u3002\u753b\u9762\u76f8\u5f53\u5e7f\u9614\uff0c\u4f46\u4e5f\u5e76\u4e0d\u80fd\u8868\u73b0\u4eca\u65e5\u7684\u5927\u9646\u5168\u8c8c\uff0c\u8b6c\u5982\u50cf\u201c\u4e94\u53cd\u201d\uff0c\u90a3\u662f\u6bd4\u201c\u4e09\u53cd\u201d\u66f4\u6df1\u5165\u5730\u5f71\u54cd\u5230\u4e00\u822c\u6c11\u4f17\u7684\uff0c\u5c31\u5b8c\u5168\u6ca1\u6709\u89e6\u53ca\u3002\u5f53\u7136\u4e5f\u662f\u4e3a\u672c\u4e66\u4e3b\u89d2\u7684\u89c6\u91ce\u6240\u9650\u5236\u3002\u540c\u65f6\u6211\u7684\u76ee\u7684\u4e5f\u5e76\u4e0d\u662f\u5305\u7f57\u4e07\u8c61\uff0c\u800c\u662f\u5c3d\u53ef\u80fd\u5730\u590d\u5236\u5f53\u65f6\u7684\u6c14\u6c1b\u3002\u8fd9\u91cc\u6ca1\u6709\u6982\u62ec\u6027\u7684\u62a5\u5bfc\u3002\u6211\u53ea\u5e0c\u671b\u8bfb\u8005\u4eec\u770b\u8fd9\u672c\u4e66\u7684\u65f6\u5019\uff0c\u80fd\u591f\u591a\u5c11\u55c5\u5230\u4e00\u70b9\u771f\u5b9e\u7684\u751f\u6d3b\u6c14\u606f\u3002 \u81ea \u5e8f \u7b2c\u4e00\u7ae0 \u7b2c\u4e8c\u7ae0 \u7b2c\u4e09\u7ae0 \u7b2c\u56db\u7ae0 \u7b2c\u4e94\u7ae0 \u7b2c\u516d\u7ae0 \u7b2c\u4e03\u7ae0 \u7b2c\u516b\u7ae0 \u7b2c\u4e5d\u7ae0 \u7b2c\u5341\u7ae0 \u7b2c\u5341\u4e00\u7ae0 \u534a\u751f\u7f18 \u00b6 \u300a\u534a\u751f\u7f18\u300b\u8bb2\u7684\u662f\u4e09\u5341\u5e74\u4ee3\u4e0a\u6d77\u7684\u4e00\u4e2a\u60b2\u60e8\u7684\u7231\u60c5\u6545\u4e8b\u3002\u5973\u4e3b\u4eba\u516c\u987e\u66fc\u6862\u5bb6\u5883\u8d2b\u5bd2\uff0c\u81ea\u5e7c\u4e27\u7236\uff0c\u8001\u5c0f\u4e03\u4eba\u5168\u9760\u59d0\u59d0\u66fc\u7490\u505a\u821e\u5973\u517b\u6d3b\u3002\u66fc\u6862\u6bd5\u4e1a\u540e\u5728\u4e00\u5bb6\u516c\u53f8\u5de5\u4f5c\uff0c\u4e0e\u6765\u81ea\u5357\u4eac\u7684\u8bb8\u4e16\u94a7\u76f8\u7231\uff0c\u4e16\u94a7\u6df1\u6df1\u540c\u60c5\u66fc\u6862\u7684\u5904\u5883\uff0c\u51b3\u5b9a\u4e0e\u4e4b\u7ed3\u5a5a\u3002\u66fc\u7490\u7ec8\u4e8e\u4e5f\u5ac1\u4eba\u4e86\uff0c\u59d0\u592b\u795d\u9e3f\u624d\u662f\u4e2a\u66b4\u53d1\u6237\uff0c\u5f53\u5f97\u77e5\u66fc\u7490\u4e0d\u80fd\u751f\u80b2\uff0c\u4fbf\u65e5\u751f\u538c\u5f03\u4e4b\u5fc3\uff0c\u66fc\u7490\u4e3a\u4e86\u6813\u4f4f\u795d\u751f\u51fa\u4e00\u6761\u6b8b\u8ba1\u2026\u2026\u5341\u516b\u5e74\u5728\u5929\u624d\u4f5c\u5bb6\u5f20\u7231\u73b2\u7684\u7b14\u4e0b\u4e00\u6643\u5c31\u8fc7\u53bb\u4e86\uff0c\u66fc\u6862\u548c\u4e16\u94a7\u53c8\u5728\u4e0a\u6d77\u76f8\u9047\uff0c\u800c\u5c81\u6708\u53d8\u8fc1\u7eff\u6811\u65e9\u5df2\u6210\u836b\u2026\u2026 \u7b2c\u4e00\u7ae0 \u7b2c\u4e8c\u7ae0 \u7b2c\u4e09\u7ae0 \u7b2c\u56db\u7ae0 \u7b2c\u4e94\u7ae0 \u7b2c\u516d\u7ae0 \u7b2c\u4e03\u7ae0 \u7b2c\u516b\u7ae0 \u7b2c\u4e5d\u7ae0 \u7b2c\u5341\u7ae0 \u7b2c\u5341\u4e00\u7ae0 \u7b2c\u5341\u4e8c\u7ae0 \u7b2c\u5341\u4e09\u7ae0 \u7b2c\u5341\u56db\u7ae0 \u7b2c\u5341\u4e94\u7ae0 \u7b2c\u5341\u516d\u7ae0 \u7b2c\u5341\u4e03\u7ae0 \u79e7\u6b4c \u00b6 \u4e00\u5230\u4e86\u8fd9\u4e2a\u5c0f\u9547\u4e0a,\u7b2c\u4e00\u5148\u770b\u89c1\u957f\u957f\u7684\u4e00\u6392\u8305\u5395\u3002\u90fd\u662f\u8fce\u9762\u4e00\u4e2a\u6728\u677f\u7167\u58c1\uff0c\u67b6\u5728\u5927\u77f3\u5934\u4e0a\uff0c\u534a\u906e\u7740\u91cc\u9762\u80cc\u5bf9\u80cc\u7684\u4e24\u4e2a\u5751\u4f4d\u3002\u63a5\u8fde\u4e0d\u65ad\u7684\u5341\u51e0\u4e2a\u5c0f\u8305\u68da\uff0c\u91cc\u9762\u4e00\u4e2a\u4eba\u4e5f\u6ca1\u6709\u3002\u4f46\u662f\u6709\u65f6\u5019\u4e00\u9635\u98ce\u5439\u8fc7\u6765\uff0c\u5fae\u5fae\u53d1\u51fa\u81ed\u6c14\u3002\u4e0b\u5348\u7684\u9633\u5149\u6de1\u6de1\u5730\u6652\u5728\u5c4b\u9876\u4e0a\u767d\u82cd\u82cd\u7684\u8305\u8349\u4e0a\u3002 \u7b2c\u4e00\u7ae0 \u7b2c\u4e8c\u7ae0 \u7b2c\u4e09\u7ae0 \u7b2c\u56db\u7ae0 \u7b2c\u4e94\u7ae0 \u7b2c\u516d\u7ae0 \u7b2c\u4e03\u7ae0 \u7b2c\u516b\u7ae0 \u7b2c\u4e5d\u7ae0 \u7b2c\u5341\u7ae0 \u7b2c\u5341\u4e00\u7ae0 \u7b2c\u5341\u4e8c\u7ae0 \u7b2c\u5341\u4e09\u7ae0 \u7b2c\u5341\u56db\u7ae0 \u7b2c\u5341\u4e94\u7ae0 \u7b2c\u5341\u516d\u7ae0 \u7b2c\u5341\u4e03\u7ae0 \u6028\u5973 \u00b6 \u5979\u4e0d\u7531\u5f97\u60f3\u8d77\u4ece\u524d\u62ff\u6cb9\u706f\u70e7\u4e00\u4e2a\u7537\u4eba\u7684\u624b\u3002\u5ffd\u7136\u4ece\u524d\u7684\u4e8b\u90fd\u56de\u6765\u4e86\uff0c\u7830\u7830\u7830\u7684\u6253\u95e8\u58f0\uff0c\u5979\u7ad9\u5728\u6392\u95e8\u80cc\u540e\uff0c\u5fc3\u8df3\u5f97\u6bd4\u6253\u95e8\u7684\u58f0\u97f3\u8fd8\u66f4\u54cd\uff0c\u6cb9\u706f\u70ed\u70d8\u70d8\u718f\u7740\u8138\uff0c\u989d\u4e0a\u524d\u5218\u6d77\u70ed\u70d8\u70d8\u7f69\u4e0b\u6765\uff0c\u6d51\u8eab\u5fae\u5fae\u523a\u75db\u7684\u6c57\u73e0\uff0c\u5728\u9ed1\u6697\u4e2d\u6233\u51fa\u4e00\u4e2a\u4e2a\u5c0f\u5b54\uff0c\u5212\u51fa\u4e2a\u82d7\u6761\u7684\u8f6e\u5ed3\u3002\u5979\u5f15\u4ee5\u81ea\u6170\u7684\u4e00\u5207\u7a81\u7136\u90fd\u6ca1\u6709\u4e86\uff0c\u6839\u672c\u6ca1\u6709\u8fd9\u4e9b\u4e8b\uff0c\u5979\u8fd9\u8f88\u5b50\u8fd8\u6ca1\u7ecf\u8fc7\u4ec0\u4e48\u4e8b\u3002\u5927\u59d1\u5a18\uff01\u5927\u59d1\u5a18\uff01\u5728\u53eb\u7740\u5979\u7684\u540d\u5b57\u3002\u4ed6\u5728\u95e8\u5916\u53eb\u5979\u3002 \u7b2c\u4e00\u7ae0 \u7b2c\u4e8c\u7ae0 \u7b2c\u4e09\u7ae0 \u7b2c\u56db\u7ae0 \u7b2c\u4e94\u7ae0 \u7b2c\u516d\u7ae0 \u7b2c\u4e03\u7ae0 \u7b2c\u516b\u7ae0 \u7b2c\u4e5d\u7ae0 \u7b2c\u5341\u7ae0 \u7b2c\u5341\u4e00\u7ae0 \u7b2c\u5341\u4e8c\u7ae0 \u7b2c\u5341\u4e09\u7ae0 \u7b2c\u5341\u56db\u7ae0 \u7b2c\u5341\u4e94\u7ae0 \u7ea2\u697c\u68a6\u9b47 \u00b6 \u90a3\u51e0\u5e74\u6211\u521a\u5de7\u6709\u673a\u4f1a\u5728\u54c8\u4f5b\u71d5\u4eac\u56fe\u4e66\u9986\u4e0e\u67cf\u514b\u83b1\u7684\u52a0\u5927\u56fe\u4e66\u9986\u501f\u4e66\uff0c\u770b\u5230\u8102\u672c\u7ea2\u697c\u68a6\u3002\u8fd1\u4eba\u7684\u8003\u636e\u90fd\u662f\u7ad9\u7740\u770b\u2500\u6765\u4e0d\u53ca\u5750\u4e0b\u3002\u81f3\u4e8e\u81ea\u5df1\u505a\uff0c\u6211\u552f\u4e00\u7684\u8d44\u683c\u662f\u5b9e\u5728\u719f\u8bfb\u7ea2\u697c\u68a6\uff0c\u4e0d\u540c\u7684\u672c\u5b50\u4e0d\u7528\u7559\u795e\u770b\uff0c\u7a0d\u5fae\u773c\u751f\u70b9\u7684\u5b57\u81ea\u4f1a\u8e66\u51fa\u6765\u3002\u4f46\u662f\u6ca1\u5199\u8fc7\u7406\u8bba\u6587\u5b57\uff0c\u5f53\u7136\u7b11\u8bdd\u4e00\u4e94\u4e00\u5341\u3002\u6211\u5927\u6982\u662f\u4e2d\u4e86\u53e4\u6587\u7684\u6bd2\uff0c\u57f9\u6839\u7684\u6563\u6587\u6700\u8bb0\u5f97\u8fd9\u4e00\u53e5\uff1a \u7b80\u77ed\u662f\u96bd\u8bed\u7684\u7075\u9b42\uff0c\u4e0d\u8fc7\u8ba4\u4e3a\u4e0d\u9650\u96bd\u8bed\uff0c\u6240\u4ee5\u4e00\u4e2a\u5b57\u770b\u5f97\u6709\u5df4\u6597\u5927\uff0c\u80fd\u7701\u4e00\u4e2a\u4e5f\u662f\u597d\u7684\u3002\u56e0\u4e3a\u6015\u5520\u53e8\uff0c\u8bf4\u7406\u5df2\u7ecf\u4e0d\u591f\u6e05\u695a\uff0c\u53c8\u628a\u5168\u6284\u672c\u2500\u5373\u6240\u8c13\u7ea2\u697c\u68a6\u7a3f\u2500 \u7b80\u79f0\u6284\u672c\u3002\u5176\u5b9e\u8fd9\u4e9b\u672c\u5b50\u90fd\u662f\u6284\u672c\u3002\u96be\u602a\u521d\u8be6\u7ea2\u697c\u68a6\u520a\u51fa\u540e\uff0c\u6709\u4e2a\u670b\u53cb\u544a\u8bc9\u6211\u770b\u4e0d\u61c2\u2500\u5f53\u7136\u8bf4\u5f97\u8f83\u5a49\u8f6c\u3002 \u7ea2\u697c\u68a6\u672a\u5b8c(1) \u7ea2\u697c\u68a6\u672a\u5b8c(2) \u7ea2\u697c\u68a6\u63d2\u66f2\u4e4b\u4e00 \u521d\u8be6\u7ea2\u697c\u68a6 \u4e8c\u8be6\u7ea2\u697c\u68a6(1) \u4e8c\u8be6\u7ea2\u697c\u68a6(2) \u4e09\u8be6\u7ea2\u697c\u68a6(1) \u4e09\u8be6\u7ea2\u697c\u68a6(2) \u56db\u8be6\u7ea2\u697c\u68a6(1) \u56db\u8be6\u7ea2\u697c\u68a6(2) \u4e94\u8be6\u7ea2\u697c\u68a6(1) \u4e94\u8be6\u7ea2\u697c\u68a6(2) \u90fd\u5e02\u7684\u4eba\u751f \u00b6 \u300a\u90fd\u5e02\u7684\u4eba\u751f\u300b\u6797\u6797\u603b\u603b\u4e94\u5341\u7bc7\u4ec0\uff0c\u5927\u591a\u9009\u81ea\u300a\u6d41\u8a00\u300b\u3001\u300a\u5f20\u770b\u300b\u7b49\u96c6\u5b50\uff0c\u6b64\u5916\u8fd8\u6536\u96c6\u4e86\u4e00\u4e9b\u6563\u843d\u5728\u4e66\u520a\u4e2d\u7684\u5355\u7bc7\uff0c\u8ba1\u4e09\u5341\u4e07\u8a00\uff0c\u5305\u7eb3\u4e86\u5f20\u7231\u73b2\u5404\u4e2a\u65f6\u671f\u7684\u6563\u6587\u529b\u4f5c\u3002 \u4e00\u3001\u7eb7\u7e41\u5bb6\u4e8b \u00b6 \u5230\u5e95\u662f\u4e0a\u6d77\u4eba\uff08\u4ee3\u5e8f\uff09 \u5fc3\u8179\u8bdd \u5929\u624d\u68a6 \u7ae5\u8a00\u65e0\u5fcc \u59d1\u59d1\u8bed\u5f55 \u8bf4\u80e1\u841d\u535c \u591c\u8425\u7684\u5587\u53ed \u516c\u5bd3\u751f\u6d3b\u8bb0\u8da3 \u4e8c\u3001\u5973\u6027\u98ce\u666f \u00b6 \u708e\u6a31\u8bed\u5f55 \u5409\u5229 \u53cc\u58f0 \u6211\u770b\u82cf\u9752 \u6c14\u77ed\u60c5\u957f\u53ca\u5176\u4ed6 \u201c\u5377\u9996\u7389\u7167\u201d\u53ca\u5176\u4ed6 \u8c08\u5973\u4eba \u6709\u5973\u540c\u8f66 \u7231 \u66f4\u8863\u8bb0 \u4e09\u3001\u708e\u51c9\u4e16\u6001 \u00b6 \u4e2d\u56fd\u7684\u65e5\u591c \u9053\u8def\u4ee5\u76ee \u6253\u4eba \u8349\u7089\u997c \u4e2d\u56fd\u4eba\u7684\u5b97\u6559 \u5fc5\u4e5f\u6b63\u540d\u4e4e \u9020\u4eba \u96e8\u4f1e\u4e0b \u79d8\u5bc6 \u70ec\u4f59\u5f55 \u8c08\u5403\u4e0e\u753b\u997c\u5145\u9965 \u8fdf\u66ae \u56db\u3001\u827a\u82d1\u4e00\u77a5 \u00b6 \u8c08\u8df3\u821e \u8c08\u97f3\u4e50 \u8c08\u753b \u5fd8\u4e0d\u4e86\u7684\u753b \u8bba\u5361\u901a\u753b\u4e4b\u524d\u9014 \u94f6\u5bab\u5c31\u5b66\u8bb0 \u6d0b\u4eba\u770b\u4eac\u620f\u53ca\u5176\u4ed6 \u501f\u94f6\u706f \u8d70\uff01\u8d70\u5230\u697c\u4e0a\u53bb \u4e94\u3001\u6587\u7ae0\u5bf8\u5fc3 \u00b6 \u6709\u51e0\u53e5\u8bdd\u540c\u8bfb\u8005\u8bf4 \u81ea\u5df1\u7684\u6587\u7ae0 \u5199\u4ec0\u4e48 \u5b58\u7a3f \u8bba\u5199\u4f5c \u8c08\u770b\u4e66 \u8c08\u770b\u4e66\u540e\u8bb0 \u4e08\u4eba\u7684\u5fc3 \u8bd7\u4e0e\u80e1\u8bf4 \u5fc6\u80e1\u9002\u4e4b \u7f16\u540e\u8bb0 \u5f20\u7231\u73b2\u6563\u6587 \u00b6 \u5979\u662f\u4e00\u4e2a\u5584\u4e8e\u5c06\u827a\u672f\u751f\u6d3b\u5316\uff0c\u751f\u6d3b\u827a\u672f\u5316\u7684\u4eab\u4e50\u4e3b\u4e49\u8005\uff0c\u53c8\u662f\u4e00\u4e2a\u5bf9\u751f\u6d3b\u5145\u6ee1\u60b2\u5267\u611f\u7684\u4eba\uff1b\u5979\u662f\u540d\u95e8\u4e4b\u540e\uff0c\u8d35\u5e9c\u5c0f\u59d0\uff0c\u5374\u9a84\u50b2\u7684\u5ba3\u79f0\u81ea\u5df1\u662f\u4e00\u4e2a\u81ea\u98df\u5176\u529b\u7684\u5c0f\u5e02\u6c11\u2026\u2026\u5979\u5c31\u662f\u4e2d\u56fd\u6587\u5b66\u53f2\u4e0a\u7684\u4e00\u4e2a\u80fd\u5c06\u624d\u4e0e\u60c5\u6253\u6210\u4e00\u7247\u7684\u5f02\u6570\u4f5c\u5bb6\u2014\u2014\u5f20\u7231\u73b2!\u5982\u679c\u4f60\u60f3\u4e00\u7779\u5979\u7684\u624d\u60c5\uff0c\u672c\u4e66\uff0c\u4f60\u600e\u80fd\u9519\u8fc7\uff01 \u8fdf\u66ae \u79cb\u96e8 \u8bfb\u4e66\u62a5\u544a\u56db\u5219 \u8bba\u5361\u901a\u753b\u4e4b\u524d\u9014 \u7267\u7f8a\u8005\u7d20\u63cf \u5fc3\u613f \u7231 \u5929\u624d\u68a6 \u7ae5\u8a00\u65e0\u5fcc \u9053\u8def\u4ee5\u76ee \u66f4\u8863\u8bb0 \u59d1\u59d1\u8bed\u5f55 \u6c14\u77ed\u60c5\u957f\u53ca\u5176\u4ed6 \u5409\u5229 \u501f\u94f6\u706f \u70ec\u4f59\u5f55 \u5230\u5e95\u662f\u4e0a\u6d77\u4eba \u6253\u4eba \u8bba\u5199\u4f5c \u79d8\u5bc6 \u8bd7\u4e0e\u80e1\u8bf4 \u53cc\u58f0 \u8bf4\u80e1\u841d\u535c \u79c1\u8bed \u5fc5\u4e5f\u6b63\u540d\u4e4e \u516c\u5bd3\u751f\u6d3b\u8bb0\u8da3 \u8c08\u5403\u4e0e\u753b\u997c\u5145\u9965 \u8868\u59e8\u7ec6\u59e8\u53ca\u5176\u4ed6 \u88ab \u7a9d \u8c08\u753b \u8c08\u5973\u4eba \u5b58\u7a3f \u8c08\u8df3\u821e \u8c08\u97f3\u4e50 \u5fd8\u4e0d\u4e86\u7684\u753b \u6211\u770b\u82cf\u9752 \u5199\u4ec0\u4e48 \u708e\u6a31\u8bed\u5f55 \u6d0b\u4eba\u770b\u4eac\u620f\u53ca\u5176\u4ed6 \u591c\u8425\u7684\u5587\u53ed \u5fc6\u80e1\u9002\u4e4b \u94f6\u5bab\u5c31\u5b66\u8bb0 \u6709\u51e0\u53e5\u8bdd\u540c\u8bfb\u8005\u8bf4 \u6709\u5973\u540c\u8f66 \u96e8\u4f1e\u4e0b \u8349\u7089\u997c \u9020\u4eba \u4e08\u4eba\u7684\u5fc3 \u4e2d\u56fd\u7684\u65e5\u591c \u4e2d\u56fd\u4eba\u7684\u5b97\u6559 \u81ea\u5df1\u7684\u6587\u7ae0 \u8d70\uff01\u8d70\u5230\u697c\u4e0a\u53bb \u8c08\u770b\u4e66(1) \u8c08\u770b\u4e66(2) \u8c08\u770b\u4e66\u540e\u8bb0 \u534e\u4e3d\u7f18 \u300a\u592a\u592a\u4e07\u5c81\u300b\u9898\u8bb0 \u300a\u7ea2\u697c\u68a6\u9b47\u300b\u81ea\u5e8f \u300a\u5f20\u770b\u300b\u81ea\u5e8f \u300a\u60d8\u7136\u8bb0\u300b\u5e8f \u56fd\u8bed\u672c\u300a\u6d77\u4e0a\u82b1\u300b\u8bd1\u540e\u8bb0 \u300a\u6d77\u4e0a\u82b1\u300b\u7684\u51e0\u4e2a\u95ee\u9898 \u6563 \u620f \u5f20\u7231\u73b2\u4e2d\u77ed\u7bc7\u5c0f\u8bf4 \u00b6 \u4e2d\u7bc7\u5c0f\u8bf4 \u00b6 \u6c89\u9999\u5c51 \u7b2c\u4e00\u7089\u9999 \u591a\u5c11\u6068 \u91d1\u9501\u8bb0 \u7ea2\u73ab\u7470\u4e0e\u767d\u73ab\u7470 \u5c0f\u827e \u8fde\u73af\u5957 \u521b\u4e16\u7eaa \u6d6e\u82b1\u6d6a\u854a \u540c\u5b66\u5c11\u5e74\u90fd\u4e0d\u8d31 \u77ed\u7bc7\u5c0f\u8bf4 \u00b6 \u725b \u6bb7\u5b9d\u6edf\u9001\u82b1\u697c\u4f1a\u2014\u5217\u5973\u4f20\u4e4b\u4e00 \u5c01\u9501 \u9738\u738b\u522b\u59ec \u7b49 \u7409\u7483\u74e6 \u6c89\u9999\u5c51\u7b2c\u4e8c\u7089\u9999 \u6842\u82b1\u84b8 \u963f\u5c0f\u60b2\u79cb \u5e74\u9752\u7684\u65f6\u5019 \u8309\u8389\u9999\u7247 \u7559\u60c5 \u82b1\u51cb \u5fc3\u7ecf \u9e3f\u9e3e\u79a7 \u8272\u6212 \u76f8\u89c1\u6b22 \u4e94\u56db\u9057\u4e8b \u91cd\u8bbf\u8fb9\u57ce \u4e0d\u5e78\u7684\u5979 \u5979\u4ece\u6d77\u4e0a\u6765\uff1a\u65f7\u4e16\u624d\u5973\u5f20\u7231\u73b2\u4f20\u5947 \u00b6 \u4f5c\u8005\uff1a[\u53f0]\u738b\u8559\u73b2 \u4e00\u4e5d\u4e94\u4e94\u5e74\u79cb\u5929\u7684\u65e7\u91d1\u5c71\u7801\u5934\u4e0a\uff0c\u6e05\u6668\u7684\u5929\u8272\u662f\u6c89\u90c1\u7684\u7070\u84dd\uff0c\u6d53\u5bc6\u7684\u5927\u96fe\u8986\u76d6\u5728\u6d77\u4e0a\uff0c\u706f\u5854\u5149\u675f\u56de\u65cb\u5728\u6d77\u5cb8\uff0c\u5149\u675f\u91cc\u98d8\u7740\u5343\u4e1d\u4e07\u7f15\u5bc6\u5bc6\u7684\u96e8\u4e1d\u3002\u6e2f\u53e3\u5916\u4f20\u6765\u60a0\u957f\u7684\u6c7d\u7b1b\u58f0\uff0c\u90a3\u662f\u5927\u8239\u5728\u7b49\u5f85\u8fdb\u6e2f\u3002\u5bf9\u65e7\u91d1\u5c71\u6765\u8bf4\uff0c\u8fd9\u7834\u6653\u7684\u4e00\u523b\u4e0e\u5e73\u65e5\u65e0\u5f02\u3002\u4f46\u5728\u8239\u4e0a\u7684\u5f20\u7231\u73b2\u773c\u4e2d\uff0c\u9690\u9690\u7ea6\u7ea6\u6d6e\u73b0\u7684\u91d1\u95e8\u5927\u6865\u7ea2\u8272\u7684\u6865\u8eab\uff0c\u4eff\u4f5b\u7ed9\u4e86\u5979\u4e00\u4e2a\u4fdd\u8bc1\u3002\u8fc7\u53bb\u5728\u832b\u832b\u4e00\u7247\u7684\u5927\u6d77\u548c\u96fe\u972d\u4e2d\u9690\u9000\u3002\u672a\u6765\u5c31\u5728\u5979\u7d27\u7d27\u63e1\u7740\u8239\u8237\u680f\u6746\u7684\u7ea4\u7626\u7684\u624b\u4e2d\u3002 \u7b2c\u4e00\u7ae0 \u7b2c\u4e8c\u7ae0 \u7b2c\u4e09\u7ae0 \u7b2c\u56db\u7ae0 \u7b2c\u4e94\u7ae0 \u7b2c\u516d\u7ae0 \u7b2c\u4e03\u7ae0 \u7b2c\u516b\u7ae0 \u7b2c\u4e5d\u7ae0 \u7b2c\u5341\u7ae0 \u7b2c\u5341\u4e00\u7ae0 \u7b2c\u5341\u4e8c\u7ae0 \u7b2c\u5341\u4e09\u7ae0 \u7b2c\u5341\u56db\u7ae0 \u7b2c\u5341\u4e94\u7ae0 \u7b2c\u5341\u516d\u7ae0 \u7b2c\u5341\u4e03\u7ae0 \u7b2c\u5341\u516b\u7ae0 \u7b2c\u5341\u4e5d\u7ae0 \u7b2c\u4e8c\u5341\u7ae0 \u6458\u81ea \u00b6 http://www.kanunu8.com/files/writer/95.html","title":"\u5f20\u7231\u73b2\u6587\u96c6"},{"location":"BOOKS/2018-05-23-%25e5%25bc%25a0%25e7%2588%25b1%25e7%258e%25b2%25e6%2596%2587%25e9%259b%2586/#_1","text":"","title":"\u6587\u96c6"},{"location":"BOOKS/2018-05-23-%25e5%25bc%25a0%25e7%2588%25b1%25e7%258e%25b2%25e6%2596%2587%25e9%259b%2586/#_2","text":"\u4e00\u4e2a\u52a8\u542c\u800c\u53c8\u8fd1\u4eba\u60c5\u7684\u6545\u4e8b\u3002\u2026\u2026\u6211\u559c\u6b22\u53c2\u5dee\u7684\u5bf9\u7167\u7684\u5199\u6cd5\uff0c\u56e0\u4e3a\u5b83\u662f\u8f83\u8fd1\u4e8b\u5b9e\u7684\u3002\u300a\u503e\u57ce\u4e4b\u604b\u300b\u91cc\uff0c\u4ece\u8150\u65e7\u7684\u5bb6\u5ead\u91cc\u8d70\u51fa\u6765\u7684\u6d41\u82cf\uff0c\u9999\u6e2f\u4e4b\u6218\u7684\u6d17\u793c\u5e76\u4e0d\u66fe\u5c06\u5979\u611f\u5316\u6210\u4e3a\u9769\u547d\u5973\u6027\uff1a\u9999\u6e2f\u4e4b\u6218\u5f71\u54cd\u8303\u67f3\u539f\uff0c\u4f7f\u5979\u8f6c\u5411\u5e73\u5b9e\u7684\u751f\u6d3b\uff0c\u7ec8\u4e8e\u7ed3\u5a5a\u4e86\uff0c\u4f46\u7ed3\u5a5a\u5e76\u4e0d\u4f7f\u4ed6\u53d8\u4e3a\u5723\u4eba\uff0c\u5b8c\u5168\u653e\u5f03\u5f80\u65e5\u7684\u751f\u6d3b\u4e60\u60ef\u4e0e\u4f5c\u98ce\u3002\u56e0\u4e4b\u67f3\u539f\u4e0e\u6d41\u82cf\u7684\u7ed3\u5c40\uff0c\u867d\u7136\u591a\u5c11\u662f\u5065\u5eb7\u7684\uff0c\u4ecd\u65e7\u662f\u5eb8\u4fd7\uff1b\u5c31\u4e8b\u8bba\u4e8b\uff0c\u4ed6\u4eec\u4e5f\u53ea\u80fd\u5982\u6b64\u3002 \u7b2c\u4e00\u7ae0 \u7b2c\u4e8c\u7ae0 \u7b2c\u4e09\u7ae0 \u7b2c\u56db\u7ae0 \u7b2c\u4e94\u7ae0 \u7b2c\u516d\u7ae0 \u7b2c\u4e03\u7ae0 \u7b2c\u516b\u7ae0 \u7b2c\u4e5d\u7ae0 \u7b2c\u5341\u7ae0","title":"\u503e\u57ce\u4e4b\u604b"},{"location":"BOOKS/2018-05-23-%25e5%25bc%25a0%25e7%2588%25b1%25e7%258e%25b2%25e6%2596%2587%25e9%259b%2586/#_3","text":"\u300a\u8d64\u5730\u4e4b\u604b\u300b\u6240\u5199\u7684\u662f\u771f\u4eba\u5b9e\u4e8b\uff0c\u4f46\u662f\u5c0f\u8bf4\u7a76\u7adf\u4e0d\u662f\u62a5\u5bfc\u6587\u5b66\uff0c\u6211\u9664\u4e86\u628a\u771f\u6b63\u7684\u4eba\u540d\u4e0e\u4e00\u90e8\u4efd\u7684\u5730\u540d\u9690\u53bb\uff0c\u800c\u4e14\u9700\u8981\u628a\u8bb8\u591a\u5c0f\u6545\u4e8b\u53e0\u5370\u5728\u4e00\u8d77\uff0c\u518d\u7ecf\u8fc7\u526a\u88c1\u4e0e\u7ec4\u7ec7\u3002\u753b\u9762\u76f8\u5f53\u5e7f\u9614\uff0c\u4f46\u4e5f\u5e76\u4e0d\u80fd\u8868\u73b0\u4eca\u65e5\u7684\u5927\u9646\u5168\u8c8c\uff0c\u8b6c\u5982\u50cf\u201c\u4e94\u53cd\u201d\uff0c\u90a3\u662f\u6bd4\u201c\u4e09\u53cd\u201d\u66f4\u6df1\u5165\u5730\u5f71\u54cd\u5230\u4e00\u822c\u6c11\u4f17\u7684\uff0c\u5c31\u5b8c\u5168\u6ca1\u6709\u89e6\u53ca\u3002\u5f53\u7136\u4e5f\u662f\u4e3a\u672c\u4e66\u4e3b\u89d2\u7684\u89c6\u91ce\u6240\u9650\u5236\u3002\u540c\u65f6\u6211\u7684\u76ee\u7684\u4e5f\u5e76\u4e0d\u662f\u5305\u7f57\u4e07\u8c61\uff0c\u800c\u662f\u5c3d\u53ef\u80fd\u5730\u590d\u5236\u5f53\u65f6\u7684\u6c14\u6c1b\u3002\u8fd9\u91cc\u6ca1\u6709\u6982\u62ec\u6027\u7684\u62a5\u5bfc\u3002\u6211\u53ea\u5e0c\u671b\u8bfb\u8005\u4eec\u770b\u8fd9\u672c\u4e66\u7684\u65f6\u5019\uff0c\u80fd\u591f\u591a\u5c11\u55c5\u5230\u4e00\u70b9\u771f\u5b9e\u7684\u751f\u6d3b\u6c14\u606f\u3002 \u81ea \u5e8f \u7b2c\u4e00\u7ae0 \u7b2c\u4e8c\u7ae0 \u7b2c\u4e09\u7ae0 \u7b2c\u56db\u7ae0 \u7b2c\u4e94\u7ae0 \u7b2c\u516d\u7ae0 \u7b2c\u4e03\u7ae0 \u7b2c\u516b\u7ae0 \u7b2c\u4e5d\u7ae0 \u7b2c\u5341\u7ae0 \u7b2c\u5341\u4e00\u7ae0","title":"\u8d64\u5730\u4e4b\u604b"},{"location":"BOOKS/2018-05-23-%25e5%25bc%25a0%25e7%2588%25b1%25e7%258e%25b2%25e6%2596%2587%25e9%259b%2586/#_4","text":"\u300a\u534a\u751f\u7f18\u300b\u8bb2\u7684\u662f\u4e09\u5341\u5e74\u4ee3\u4e0a\u6d77\u7684\u4e00\u4e2a\u60b2\u60e8\u7684\u7231\u60c5\u6545\u4e8b\u3002\u5973\u4e3b\u4eba\u516c\u987e\u66fc\u6862\u5bb6\u5883\u8d2b\u5bd2\uff0c\u81ea\u5e7c\u4e27\u7236\uff0c\u8001\u5c0f\u4e03\u4eba\u5168\u9760\u59d0\u59d0\u66fc\u7490\u505a\u821e\u5973\u517b\u6d3b\u3002\u66fc\u6862\u6bd5\u4e1a\u540e\u5728\u4e00\u5bb6\u516c\u53f8\u5de5\u4f5c\uff0c\u4e0e\u6765\u81ea\u5357\u4eac\u7684\u8bb8\u4e16\u94a7\u76f8\u7231\uff0c\u4e16\u94a7\u6df1\u6df1\u540c\u60c5\u66fc\u6862\u7684\u5904\u5883\uff0c\u51b3\u5b9a\u4e0e\u4e4b\u7ed3\u5a5a\u3002\u66fc\u7490\u7ec8\u4e8e\u4e5f\u5ac1\u4eba\u4e86\uff0c\u59d0\u592b\u795d\u9e3f\u624d\u662f\u4e2a\u66b4\u53d1\u6237\uff0c\u5f53\u5f97\u77e5\u66fc\u7490\u4e0d\u80fd\u751f\u80b2\uff0c\u4fbf\u65e5\u751f\u538c\u5f03\u4e4b\u5fc3\uff0c\u66fc\u7490\u4e3a\u4e86\u6813\u4f4f\u795d\u751f\u51fa\u4e00\u6761\u6b8b\u8ba1\u2026\u2026\u5341\u516b\u5e74\u5728\u5929\u624d\u4f5c\u5bb6\u5f20\u7231\u73b2\u7684\u7b14\u4e0b\u4e00\u6643\u5c31\u8fc7\u53bb\u4e86\uff0c\u66fc\u6862\u548c\u4e16\u94a7\u53c8\u5728\u4e0a\u6d77\u76f8\u9047\uff0c\u800c\u5c81\u6708\u53d8\u8fc1\u7eff\u6811\u65e9\u5df2\u6210\u836b\u2026\u2026 \u7b2c\u4e00\u7ae0 \u7b2c\u4e8c\u7ae0 \u7b2c\u4e09\u7ae0 \u7b2c\u56db\u7ae0 \u7b2c\u4e94\u7ae0 \u7b2c\u516d\u7ae0 \u7b2c\u4e03\u7ae0 \u7b2c\u516b\u7ae0 \u7b2c\u4e5d\u7ae0 \u7b2c\u5341\u7ae0 \u7b2c\u5341\u4e00\u7ae0 \u7b2c\u5341\u4e8c\u7ae0 \u7b2c\u5341\u4e09\u7ae0 \u7b2c\u5341\u56db\u7ae0 \u7b2c\u5341\u4e94\u7ae0 \u7b2c\u5341\u516d\u7ae0 \u7b2c\u5341\u4e03\u7ae0","title":"\u534a\u751f\u7f18"},{"location":"BOOKS/2018-05-23-%25e5%25bc%25a0%25e7%2588%25b1%25e7%258e%25b2%25e6%2596%2587%25e9%259b%2586/#_5","text":"\u4e00\u5230\u4e86\u8fd9\u4e2a\u5c0f\u9547\u4e0a,\u7b2c\u4e00\u5148\u770b\u89c1\u957f\u957f\u7684\u4e00\u6392\u8305\u5395\u3002\u90fd\u662f\u8fce\u9762\u4e00\u4e2a\u6728\u677f\u7167\u58c1\uff0c\u67b6\u5728\u5927\u77f3\u5934\u4e0a\uff0c\u534a\u906e\u7740\u91cc\u9762\u80cc\u5bf9\u80cc\u7684\u4e24\u4e2a\u5751\u4f4d\u3002\u63a5\u8fde\u4e0d\u65ad\u7684\u5341\u51e0\u4e2a\u5c0f\u8305\u68da\uff0c\u91cc\u9762\u4e00\u4e2a\u4eba\u4e5f\u6ca1\u6709\u3002\u4f46\u662f\u6709\u65f6\u5019\u4e00\u9635\u98ce\u5439\u8fc7\u6765\uff0c\u5fae\u5fae\u53d1\u51fa\u81ed\u6c14\u3002\u4e0b\u5348\u7684\u9633\u5149\u6de1\u6de1\u5730\u6652\u5728\u5c4b\u9876\u4e0a\u767d\u82cd\u82cd\u7684\u8305\u8349\u4e0a\u3002 \u7b2c\u4e00\u7ae0 \u7b2c\u4e8c\u7ae0 \u7b2c\u4e09\u7ae0 \u7b2c\u56db\u7ae0 \u7b2c\u4e94\u7ae0 \u7b2c\u516d\u7ae0 \u7b2c\u4e03\u7ae0 \u7b2c\u516b\u7ae0 \u7b2c\u4e5d\u7ae0 \u7b2c\u5341\u7ae0 \u7b2c\u5341\u4e00\u7ae0 \u7b2c\u5341\u4e8c\u7ae0 \u7b2c\u5341\u4e09\u7ae0 \u7b2c\u5341\u56db\u7ae0 \u7b2c\u5341\u4e94\u7ae0 \u7b2c\u5341\u516d\u7ae0 \u7b2c\u5341\u4e03\u7ae0","title":"\u79e7\u6b4c"},{"location":"BOOKS/2018-05-23-%25e5%25bc%25a0%25e7%2588%25b1%25e7%258e%25b2%25e6%2596%2587%25e9%259b%2586/#_6","text":"\u5979\u4e0d\u7531\u5f97\u60f3\u8d77\u4ece\u524d\u62ff\u6cb9\u706f\u70e7\u4e00\u4e2a\u7537\u4eba\u7684\u624b\u3002\u5ffd\u7136\u4ece\u524d\u7684\u4e8b\u90fd\u56de\u6765\u4e86\uff0c\u7830\u7830\u7830\u7684\u6253\u95e8\u58f0\uff0c\u5979\u7ad9\u5728\u6392\u95e8\u80cc\u540e\uff0c\u5fc3\u8df3\u5f97\u6bd4\u6253\u95e8\u7684\u58f0\u97f3\u8fd8\u66f4\u54cd\uff0c\u6cb9\u706f\u70ed\u70d8\u70d8\u718f\u7740\u8138\uff0c\u989d\u4e0a\u524d\u5218\u6d77\u70ed\u70d8\u70d8\u7f69\u4e0b\u6765\uff0c\u6d51\u8eab\u5fae\u5fae\u523a\u75db\u7684\u6c57\u73e0\uff0c\u5728\u9ed1\u6697\u4e2d\u6233\u51fa\u4e00\u4e2a\u4e2a\u5c0f\u5b54\uff0c\u5212\u51fa\u4e2a\u82d7\u6761\u7684\u8f6e\u5ed3\u3002\u5979\u5f15\u4ee5\u81ea\u6170\u7684\u4e00\u5207\u7a81\u7136\u90fd\u6ca1\u6709\u4e86\uff0c\u6839\u672c\u6ca1\u6709\u8fd9\u4e9b\u4e8b\uff0c\u5979\u8fd9\u8f88\u5b50\u8fd8\u6ca1\u7ecf\u8fc7\u4ec0\u4e48\u4e8b\u3002\u5927\u59d1\u5a18\uff01\u5927\u59d1\u5a18\uff01\u5728\u53eb\u7740\u5979\u7684\u540d\u5b57\u3002\u4ed6\u5728\u95e8\u5916\u53eb\u5979\u3002 \u7b2c\u4e00\u7ae0 \u7b2c\u4e8c\u7ae0 \u7b2c\u4e09\u7ae0 \u7b2c\u56db\u7ae0 \u7b2c\u4e94\u7ae0 \u7b2c\u516d\u7ae0 \u7b2c\u4e03\u7ae0 \u7b2c\u516b\u7ae0 \u7b2c\u4e5d\u7ae0 \u7b2c\u5341\u7ae0 \u7b2c\u5341\u4e00\u7ae0 \u7b2c\u5341\u4e8c\u7ae0 \u7b2c\u5341\u4e09\u7ae0 \u7b2c\u5341\u56db\u7ae0 \u7b2c\u5341\u4e94\u7ae0","title":"\u6028\u5973"},{"location":"BOOKS/2018-05-23-%25e5%25bc%25a0%25e7%2588%25b1%25e7%258e%25b2%25e6%2596%2587%25e9%259b%2586/#_7","text":"\u90a3\u51e0\u5e74\u6211\u521a\u5de7\u6709\u673a\u4f1a\u5728\u54c8\u4f5b\u71d5\u4eac\u56fe\u4e66\u9986\u4e0e\u67cf\u514b\u83b1\u7684\u52a0\u5927\u56fe\u4e66\u9986\u501f\u4e66\uff0c\u770b\u5230\u8102\u672c\u7ea2\u697c\u68a6\u3002\u8fd1\u4eba\u7684\u8003\u636e\u90fd\u662f\u7ad9\u7740\u770b\u2500\u6765\u4e0d\u53ca\u5750\u4e0b\u3002\u81f3\u4e8e\u81ea\u5df1\u505a\uff0c\u6211\u552f\u4e00\u7684\u8d44\u683c\u662f\u5b9e\u5728\u719f\u8bfb\u7ea2\u697c\u68a6\uff0c\u4e0d\u540c\u7684\u672c\u5b50\u4e0d\u7528\u7559\u795e\u770b\uff0c\u7a0d\u5fae\u773c\u751f\u70b9\u7684\u5b57\u81ea\u4f1a\u8e66\u51fa\u6765\u3002\u4f46\u662f\u6ca1\u5199\u8fc7\u7406\u8bba\u6587\u5b57\uff0c\u5f53\u7136\u7b11\u8bdd\u4e00\u4e94\u4e00\u5341\u3002\u6211\u5927\u6982\u662f\u4e2d\u4e86\u53e4\u6587\u7684\u6bd2\uff0c\u57f9\u6839\u7684\u6563\u6587\u6700\u8bb0\u5f97\u8fd9\u4e00\u53e5\uff1a \u7b80\u77ed\u662f\u96bd\u8bed\u7684\u7075\u9b42\uff0c\u4e0d\u8fc7\u8ba4\u4e3a\u4e0d\u9650\u96bd\u8bed\uff0c\u6240\u4ee5\u4e00\u4e2a\u5b57\u770b\u5f97\u6709\u5df4\u6597\u5927\uff0c\u80fd\u7701\u4e00\u4e2a\u4e5f\u662f\u597d\u7684\u3002\u56e0\u4e3a\u6015\u5520\u53e8\uff0c\u8bf4\u7406\u5df2\u7ecf\u4e0d\u591f\u6e05\u695a\uff0c\u53c8\u628a\u5168\u6284\u672c\u2500\u5373\u6240\u8c13\u7ea2\u697c\u68a6\u7a3f\u2500 \u7b80\u79f0\u6284\u672c\u3002\u5176\u5b9e\u8fd9\u4e9b\u672c\u5b50\u90fd\u662f\u6284\u672c\u3002\u96be\u602a\u521d\u8be6\u7ea2\u697c\u68a6\u520a\u51fa\u540e\uff0c\u6709\u4e2a\u670b\u53cb\u544a\u8bc9\u6211\u770b\u4e0d\u61c2\u2500\u5f53\u7136\u8bf4\u5f97\u8f83\u5a49\u8f6c\u3002 \u7ea2\u697c\u68a6\u672a\u5b8c(1) \u7ea2\u697c\u68a6\u672a\u5b8c(2) \u7ea2\u697c\u68a6\u63d2\u66f2\u4e4b\u4e00 \u521d\u8be6\u7ea2\u697c\u68a6 \u4e8c\u8be6\u7ea2\u697c\u68a6(1) \u4e8c\u8be6\u7ea2\u697c\u68a6(2) \u4e09\u8be6\u7ea2\u697c\u68a6(1) \u4e09\u8be6\u7ea2\u697c\u68a6(2) \u56db\u8be6\u7ea2\u697c\u68a6(1) \u56db\u8be6\u7ea2\u697c\u68a6(2) \u4e94\u8be6\u7ea2\u697c\u68a6(1) \u4e94\u8be6\u7ea2\u697c\u68a6(2)","title":"\u7ea2\u697c\u68a6\u9b47"},{"location":"BOOKS/2018-05-23-%25e5%25bc%25a0%25e7%2588%25b1%25e7%258e%25b2%25e6%2596%2587%25e9%259b%2586/#_8","text":"\u300a\u90fd\u5e02\u7684\u4eba\u751f\u300b\u6797\u6797\u603b\u603b\u4e94\u5341\u7bc7\u4ec0\uff0c\u5927\u591a\u9009\u81ea\u300a\u6d41\u8a00\u300b\u3001\u300a\u5f20\u770b\u300b\u7b49\u96c6\u5b50\uff0c\u6b64\u5916\u8fd8\u6536\u96c6\u4e86\u4e00\u4e9b\u6563\u843d\u5728\u4e66\u520a\u4e2d\u7684\u5355\u7bc7\uff0c\u8ba1\u4e09\u5341\u4e07\u8a00\uff0c\u5305\u7eb3\u4e86\u5f20\u7231\u73b2\u5404\u4e2a\u65f6\u671f\u7684\u6563\u6587\u529b\u4f5c\u3002","title":"\u90fd\u5e02\u7684\u4eba\u751f"},{"location":"BOOKS/2018-05-23-%25e5%25bc%25a0%25e7%2588%25b1%25e7%258e%25b2%25e6%2596%2587%25e9%259b%2586/#_9","text":"\u5230\u5e95\u662f\u4e0a\u6d77\u4eba\uff08\u4ee3\u5e8f\uff09 \u5fc3\u8179\u8bdd \u5929\u624d\u68a6 \u7ae5\u8a00\u65e0\u5fcc \u59d1\u59d1\u8bed\u5f55 \u8bf4\u80e1\u841d\u535c \u591c\u8425\u7684\u5587\u53ed \u516c\u5bd3\u751f\u6d3b\u8bb0\u8da3","title":"\u4e00\u3001\u7eb7\u7e41\u5bb6\u4e8b"},{"location":"BOOKS/2018-05-23-%25e5%25bc%25a0%25e7%2588%25b1%25e7%258e%25b2%25e6%2596%2587%25e9%259b%2586/#_10","text":"\u708e\u6a31\u8bed\u5f55 \u5409\u5229 \u53cc\u58f0 \u6211\u770b\u82cf\u9752 \u6c14\u77ed\u60c5\u957f\u53ca\u5176\u4ed6 \u201c\u5377\u9996\u7389\u7167\u201d\u53ca\u5176\u4ed6 \u8c08\u5973\u4eba \u6709\u5973\u540c\u8f66 \u7231 \u66f4\u8863\u8bb0","title":"\u4e8c\u3001\u5973\u6027\u98ce\u666f"},{"location":"BOOKS/2018-05-23-%25e5%25bc%25a0%25e7%2588%25b1%25e7%258e%25b2%25e6%2596%2587%25e9%259b%2586/#_11","text":"\u4e2d\u56fd\u7684\u65e5\u591c \u9053\u8def\u4ee5\u76ee \u6253\u4eba \u8349\u7089\u997c \u4e2d\u56fd\u4eba\u7684\u5b97\u6559 \u5fc5\u4e5f\u6b63\u540d\u4e4e \u9020\u4eba \u96e8\u4f1e\u4e0b \u79d8\u5bc6 \u70ec\u4f59\u5f55 \u8c08\u5403\u4e0e\u753b\u997c\u5145\u9965 \u8fdf\u66ae","title":"\u4e09\u3001\u708e\u51c9\u4e16\u6001"},{"location":"BOOKS/2018-05-23-%25e5%25bc%25a0%25e7%2588%25b1%25e7%258e%25b2%25e6%2596%2587%25e9%259b%2586/#_12","text":"\u8c08\u8df3\u821e \u8c08\u97f3\u4e50 \u8c08\u753b \u5fd8\u4e0d\u4e86\u7684\u753b \u8bba\u5361\u901a\u753b\u4e4b\u524d\u9014 \u94f6\u5bab\u5c31\u5b66\u8bb0 \u6d0b\u4eba\u770b\u4eac\u620f\u53ca\u5176\u4ed6 \u501f\u94f6\u706f \u8d70\uff01\u8d70\u5230\u697c\u4e0a\u53bb","title":"\u56db\u3001\u827a\u82d1\u4e00\u77a5"},{"location":"BOOKS/2018-05-23-%25e5%25bc%25a0%25e7%2588%25b1%25e7%258e%25b2%25e6%2596%2587%25e9%259b%2586/#_13","text":"\u6709\u51e0\u53e5\u8bdd\u540c\u8bfb\u8005\u8bf4 \u81ea\u5df1\u7684\u6587\u7ae0 \u5199\u4ec0\u4e48 \u5b58\u7a3f \u8bba\u5199\u4f5c \u8c08\u770b\u4e66 \u8c08\u770b\u4e66\u540e\u8bb0 \u4e08\u4eba\u7684\u5fc3 \u8bd7\u4e0e\u80e1\u8bf4 \u5fc6\u80e1\u9002\u4e4b \u7f16\u540e\u8bb0","title":"\u4e94\u3001\u6587\u7ae0\u5bf8\u5fc3"},{"location":"BOOKS/2018-05-23-%25e5%25bc%25a0%25e7%2588%25b1%25e7%258e%25b2%25e6%2596%2587%25e9%259b%2586/#_14","text":"\u5979\u662f\u4e00\u4e2a\u5584\u4e8e\u5c06\u827a\u672f\u751f\u6d3b\u5316\uff0c\u751f\u6d3b\u827a\u672f\u5316\u7684\u4eab\u4e50\u4e3b\u4e49\u8005\uff0c\u53c8\u662f\u4e00\u4e2a\u5bf9\u751f\u6d3b\u5145\u6ee1\u60b2\u5267\u611f\u7684\u4eba\uff1b\u5979\u662f\u540d\u95e8\u4e4b\u540e\uff0c\u8d35\u5e9c\u5c0f\u59d0\uff0c\u5374\u9a84\u50b2\u7684\u5ba3\u79f0\u81ea\u5df1\u662f\u4e00\u4e2a\u81ea\u98df\u5176\u529b\u7684\u5c0f\u5e02\u6c11\u2026\u2026\u5979\u5c31\u662f\u4e2d\u56fd\u6587\u5b66\u53f2\u4e0a\u7684\u4e00\u4e2a\u80fd\u5c06\u624d\u4e0e\u60c5\u6253\u6210\u4e00\u7247\u7684\u5f02\u6570\u4f5c\u5bb6\u2014\u2014\u5f20\u7231\u73b2!\u5982\u679c\u4f60\u60f3\u4e00\u7779\u5979\u7684\u624d\u60c5\uff0c\u672c\u4e66\uff0c\u4f60\u600e\u80fd\u9519\u8fc7\uff01 \u8fdf\u66ae \u79cb\u96e8 \u8bfb\u4e66\u62a5\u544a\u56db\u5219 \u8bba\u5361\u901a\u753b\u4e4b\u524d\u9014 \u7267\u7f8a\u8005\u7d20\u63cf \u5fc3\u613f \u7231 \u5929\u624d\u68a6 \u7ae5\u8a00\u65e0\u5fcc \u9053\u8def\u4ee5\u76ee \u66f4\u8863\u8bb0 \u59d1\u59d1\u8bed\u5f55 \u6c14\u77ed\u60c5\u957f\u53ca\u5176\u4ed6 \u5409\u5229 \u501f\u94f6\u706f \u70ec\u4f59\u5f55 \u5230\u5e95\u662f\u4e0a\u6d77\u4eba \u6253\u4eba \u8bba\u5199\u4f5c \u79d8\u5bc6 \u8bd7\u4e0e\u80e1\u8bf4 \u53cc\u58f0 \u8bf4\u80e1\u841d\u535c \u79c1\u8bed \u5fc5\u4e5f\u6b63\u540d\u4e4e \u516c\u5bd3\u751f\u6d3b\u8bb0\u8da3 \u8c08\u5403\u4e0e\u753b\u997c\u5145\u9965 \u8868\u59e8\u7ec6\u59e8\u53ca\u5176\u4ed6 \u88ab \u7a9d \u8c08\u753b \u8c08\u5973\u4eba \u5b58\u7a3f \u8c08\u8df3\u821e \u8c08\u97f3\u4e50 \u5fd8\u4e0d\u4e86\u7684\u753b \u6211\u770b\u82cf\u9752 \u5199\u4ec0\u4e48 \u708e\u6a31\u8bed\u5f55 \u6d0b\u4eba\u770b\u4eac\u620f\u53ca\u5176\u4ed6 \u591c\u8425\u7684\u5587\u53ed \u5fc6\u80e1\u9002\u4e4b \u94f6\u5bab\u5c31\u5b66\u8bb0 \u6709\u51e0\u53e5\u8bdd\u540c\u8bfb\u8005\u8bf4 \u6709\u5973\u540c\u8f66 \u96e8\u4f1e\u4e0b \u8349\u7089\u997c \u9020\u4eba \u4e08\u4eba\u7684\u5fc3 \u4e2d\u56fd\u7684\u65e5\u591c \u4e2d\u56fd\u4eba\u7684\u5b97\u6559 \u81ea\u5df1\u7684\u6587\u7ae0 \u8d70\uff01\u8d70\u5230\u697c\u4e0a\u53bb \u8c08\u770b\u4e66(1) \u8c08\u770b\u4e66(2) \u8c08\u770b\u4e66\u540e\u8bb0 \u534e\u4e3d\u7f18 \u300a\u592a\u592a\u4e07\u5c81\u300b\u9898\u8bb0 \u300a\u7ea2\u697c\u68a6\u9b47\u300b\u81ea\u5e8f \u300a\u5f20\u770b\u300b\u81ea\u5e8f \u300a\u60d8\u7136\u8bb0\u300b\u5e8f \u56fd\u8bed\u672c\u300a\u6d77\u4e0a\u82b1\u300b\u8bd1\u540e\u8bb0 \u300a\u6d77\u4e0a\u82b1\u300b\u7684\u51e0\u4e2a\u95ee\u9898 \u6563 \u620f","title":"\u5f20\u7231\u73b2\u6563\u6587"},{"location":"BOOKS/2018-05-23-%25e5%25bc%25a0%25e7%2588%25b1%25e7%258e%25b2%25e6%2596%2587%25e9%259b%2586/#_15","text":"","title":"\u5f20\u7231\u73b2\u4e2d\u77ed\u7bc7\u5c0f\u8bf4"},{"location":"BOOKS/2018-05-23-%25e5%25bc%25a0%25e7%2588%25b1%25e7%258e%25b2%25e6%2596%2587%25e9%259b%2586/#_16","text":"\u6c89\u9999\u5c51 \u7b2c\u4e00\u7089\u9999 \u591a\u5c11\u6068 \u91d1\u9501\u8bb0 \u7ea2\u73ab\u7470\u4e0e\u767d\u73ab\u7470 \u5c0f\u827e \u8fde\u73af\u5957 \u521b\u4e16\u7eaa \u6d6e\u82b1\u6d6a\u854a \u540c\u5b66\u5c11\u5e74\u90fd\u4e0d\u8d31","title":"\u4e2d\u7bc7\u5c0f\u8bf4"},{"location":"BOOKS/2018-05-23-%25e5%25bc%25a0%25e7%2588%25b1%25e7%258e%25b2%25e6%2596%2587%25e9%259b%2586/#_17","text":"\u725b \u6bb7\u5b9d\u6edf\u9001\u82b1\u697c\u4f1a\u2014\u5217\u5973\u4f20\u4e4b\u4e00 \u5c01\u9501 \u9738\u738b\u522b\u59ec \u7b49 \u7409\u7483\u74e6 \u6c89\u9999\u5c51\u7b2c\u4e8c\u7089\u9999 \u6842\u82b1\u84b8 \u963f\u5c0f\u60b2\u79cb \u5e74\u9752\u7684\u65f6\u5019 \u8309\u8389\u9999\u7247 \u7559\u60c5 \u82b1\u51cb \u5fc3\u7ecf \u9e3f\u9e3e\u79a7 \u8272\u6212 \u76f8\u89c1\u6b22 \u4e94\u56db\u9057\u4e8b \u91cd\u8bbf\u8fb9\u57ce \u4e0d\u5e78\u7684\u5979","title":"\u77ed\u7bc7\u5c0f\u8bf4"},{"location":"BOOKS/2018-05-23-%25e5%25bc%25a0%25e7%2588%25b1%25e7%258e%25b2%25e6%2596%2587%25e9%259b%2586/#_18","text":"\u4f5c\u8005\uff1a[\u53f0]\u738b\u8559\u73b2 \u4e00\u4e5d\u4e94\u4e94\u5e74\u79cb\u5929\u7684\u65e7\u91d1\u5c71\u7801\u5934\u4e0a\uff0c\u6e05\u6668\u7684\u5929\u8272\u662f\u6c89\u90c1\u7684\u7070\u84dd\uff0c\u6d53\u5bc6\u7684\u5927\u96fe\u8986\u76d6\u5728\u6d77\u4e0a\uff0c\u706f\u5854\u5149\u675f\u56de\u65cb\u5728\u6d77\u5cb8\uff0c\u5149\u675f\u91cc\u98d8\u7740\u5343\u4e1d\u4e07\u7f15\u5bc6\u5bc6\u7684\u96e8\u4e1d\u3002\u6e2f\u53e3\u5916\u4f20\u6765\u60a0\u957f\u7684\u6c7d\u7b1b\u58f0\uff0c\u90a3\u662f\u5927\u8239\u5728\u7b49\u5f85\u8fdb\u6e2f\u3002\u5bf9\u65e7\u91d1\u5c71\u6765\u8bf4\uff0c\u8fd9\u7834\u6653\u7684\u4e00\u523b\u4e0e\u5e73\u65e5\u65e0\u5f02\u3002\u4f46\u5728\u8239\u4e0a\u7684\u5f20\u7231\u73b2\u773c\u4e2d\uff0c\u9690\u9690\u7ea6\u7ea6\u6d6e\u73b0\u7684\u91d1\u95e8\u5927\u6865\u7ea2\u8272\u7684\u6865\u8eab\uff0c\u4eff\u4f5b\u7ed9\u4e86\u5979\u4e00\u4e2a\u4fdd\u8bc1\u3002\u8fc7\u53bb\u5728\u832b\u832b\u4e00\u7247\u7684\u5927\u6d77\u548c\u96fe\u972d\u4e2d\u9690\u9000\u3002\u672a\u6765\u5c31\u5728\u5979\u7d27\u7d27\u63e1\u7740\u8239\u8237\u680f\u6746\u7684\u7ea4\u7626\u7684\u624b\u4e2d\u3002 \u7b2c\u4e00\u7ae0 \u7b2c\u4e8c\u7ae0 \u7b2c\u4e09\u7ae0 \u7b2c\u56db\u7ae0 \u7b2c\u4e94\u7ae0 \u7b2c\u516d\u7ae0 \u7b2c\u4e03\u7ae0 \u7b2c\u516b\u7ae0 \u7b2c\u4e5d\u7ae0 \u7b2c\u5341\u7ae0 \u7b2c\u5341\u4e00\u7ae0 \u7b2c\u5341\u4e8c\u7ae0 \u7b2c\u5341\u4e09\u7ae0 \u7b2c\u5341\u56db\u7ae0 \u7b2c\u5341\u4e94\u7ae0 \u7b2c\u5341\u516d\u7ae0 \u7b2c\u5341\u4e03\u7ae0 \u7b2c\u5341\u516b\u7ae0 \u7b2c\u5341\u4e5d\u7ae0 \u7b2c\u4e8c\u5341\u7ae0","title":"\u5979\u4ece\u6d77\u4e0a\u6765\uff1a\u65f7\u4e16\u624d\u5973\u5f20\u7231\u73b2\u4f20\u5947"},{"location":"BOOKS/2018-05-23-%25e5%25bc%25a0%25e7%2588%25b1%25e7%258e%25b2%25e6%2596%2587%25e9%259b%2586/#_19","text":"http://www.kanunu8.com/files/writer/95.html","title":"\u6458\u81ea"},{"location":"BOOKS/2018-11-07-%25e4%25b8%2589%25e9%2598%25b6%25e9%25ad%2594%25e6%2596%25b9%25e5%25b1%2582%25e4%25bc%2598%25e5%2585%2588%25e7%258e%25a9%25e6%25b3%2595.html/","tags":[],"text":"\u5c42\u4f18\u5148\u73a9\u6cd5 \u5148\u5bf9\u597d\u5e95\u5c42\u548c\u4e2d\u95f4\u5c42\uff0c\u518d\u5bf9\u9876\u5c42\u3002 \u7b2c\u4e00\u5c42 \u5148\u5bf9\u9f50\u5341\u5b57\uff0c\u518d\u56db\u4e2a\u89d2\u3002 \u7b2c\u4e8c\u5c42 \u53e3\u8bc0\uff1a\u8fdc\u8fdc\u590d\u590d\uff0c\u8fd1\u8fd1\u590d\uff08\u4ee5\u5e95\u8272\u5757\u4e3a\u53c2\u8003\u70b9\uff09\u3002 \u4fa7\u9762\u8fdc\u79bb=>\u6b63\u9762\u8fdc\u79bb=>\u4fa7\u9762\u590d\u4f4d=>\u6b63\u9762\u590d\u4f4d\uff1b \u4fa7\u9762\u9760\u8fd1=>\u9876\u5c42\u9760\u8fd1=>\u4fa7\u9762\u590d\u4f4d\u3002 \u7b2c\u4e09\u5c42 [\u6b65\u9aa4] \u6b65\u9aa41\uff1a\u9876\u5c42\u5341\u5b57\uff08\u5341\u5b57\u7b97\u6cd5\uff09 \u53e3\u8bc0\uff1a\u53f3\u9876\u6b63\uff0c\u9876\u6b63\u53f3\u3002 \u7b97\u6cd5A\uff08Y+\u89c6\u89d2\uff09\uff1a \u2460\u65cb\u8f6c\uff1a\u53f3\u4fa7\u8fdc\u79bb=>\u9876\u5c42\u8fdc\u79bb\uff08\u4ee5\u80cc\u8272\u5757\u4e3a\u53c2\u8003\u70b9\uff09=>\u6b63\u9762\u9760\u8fd1 \u2461\u590d\u4f4d\uff1a\u9876\u5c42\u590d\u4f4d=>\u6b63\u9762\u590d\u4f4d=>\u53f3\u4fa7\u590d\u4f4d \u6b65\u9aa42\uff1a\u9876\u5c42\u540c\u8272\uff08\u9876\u5c42\u65cb\u8f6c\u7b97\u6cd5\uff09 4+1\u9876\u8272\u5757\u5168\u5de6\uff1a\u7b97\u6cd5B-\uff1b2\u540e4\u5de6\u53ca\u5176\u5b83\uff1a\u7b97\u6cd5B+\u3002 \u7b97\u6cd5B+\uff08Y+\u89c6\u89d2\uff0c\u9876\u5c42\u9006\u65f6\u9488\u65cb\u8f6c\uff09\uff1a \u2460\u65cb\u8f6c\uff1a\u53f3\u4fa7\u8fdc\u79bb=>\u9876\u5c42\u8fdc\u79bb \u246190\u00b0\u65cb\u8f6c\uff1a\u53f3\u4fa7\u590d\u4f4d=>\u9876\u5c42\u7ee7\u7eed\uff08\u9876\u5c4290\u00b0\uff09 \u2462180\u00b0\u65cb\u8f6c\uff1a\u53f3\u4fa7\u8fdc\u79bb=>\u9876\u5c42180\u00b0 \u2463\u590d\u4f4d\uff1a\u53f3\u4fa7\u590d\u4f4d \u7b97\u6cd5B-\uff08Y-\u89c6\u89d2\uff0c\u9876\u5c42\u987a\u65f6\u9488\u65cb\u8f6c\uff09\uff1a \u2460\u65cb\u8f6c\uff1a\u5de6\u4fa7\u8fdc\u79bb=>\u9876\u5c42\u8fdc\u79bb \u246190\u00b0\u65cb\u8f6c\uff1a\u5de6\u4fa7\u590d\u4f4d=>\u9876\u5c42\u7ee7\u7eed\uff08\u9876\u5c4290\u00b0\uff09 \u2462180\u00b0\u65cb\u8f6c\uff1a\u5de6\u4fa7\u8fdc\u79bb=>\u9876\u5c42180\u00b0 \u2463\u590d\u4f4d\uff1a\u5de6\u4fa7\u590d\u4f4d NOTE : 2\u540e4\u5de6\uff1a\u9876\u5c42 \u7f3a2\u5757 \uff0c\u5c06\u89d2\u8272\u5757\u7684\u9876\u8272 \u653e\u80cc\u9762 \uff1b\u9876\u5c42 \u7f3a4\u5757 \uff0c\u5c06\u89d2\u8272\u5757\u7684\u9876\u8272 \u653e\u5de6\u9762 \u3002 \u6b65\u9aa43\uff1a\u9876\u5c42\u89d2\u8272\u5757\u5f52\u4f4d\uff08L\u7b97\u6cd5\uff09 \u89c6\u89d2\uff1aY-\u89c6\u89d2\uff0c\u4e24\u70b9\u540c\u8272\u68f1\u8fb9\u653e\u80cc\u9762 \u7b97\u6cd5C\uff08L\u7b97\u6cd5\uff09\uff1a \u2460\u65cb\u8f6c\uff1a\u5de6\u4fa7\u8fdc\u79bb=>\u6b63\u9762\u8fdc\u79bb \u2461180\u00b0\u65cb\u8f6c\uff1a\u5de6\u4fa7\u7ee7\u7eed=>\u80cc\u9762180\u00b0\uff08\u9876\u5c42L\uff09 \u2462\u6b63\u9762\u590d\u4f4d\uff1a\u5de6\u4fa7\u8fd4\u56de90\u00b0=>\u6b63\u9762\u590d\u4f4d=>\u5de6\u4fa7\u7ee7\u7eed\uff08\u9876\u5c42L\uff09 \u2463180\u00b0\u590d\u4f4d\uff1a\u80cc\u9762180\u00b0\u590d\u4f4d=>\u5de6\u4fa7180\u00b0\u590d\u4f4d=>\u9876\u5c42\u5f52\u4f4d \u6b65\u9aa44\uff1a\u9876\u5c42\u5f52\u4f4d\uff082\u6b21\u9876\u5c42\u65cb\u8f6c\u7b97\u6cd5\uff09 \u89c6\u89d2\uff1aY\u5b57\u89c6\u89d2\uff0c\u5b8c\u6574\u7684\u9762\u4f5c\u4e3a\u6b63\u9762\uff0c\u770b\u9876\u5c42\u68f1\u4e2d\u8272\u5757\u65cb\u8f6c\u65b9\u5411\uff0c\u9009\u7528\u7b97\u6cd5D\u3002 \u7b97\u6cd5D+\uff1a\u7b97\u6cd5B+ => \u9b54\u65b9\u65cb\u8f6c180\u00b0 => \u7b97\u6cd5B- \u7b97\u6cd5D-\uff1a\u7b97\u6cd5B- => \u9b54\u65b9\u65cb\u8f6c180\u00b0 => \u7b97\u6cd5B+ [\u56fe\u4f8b] Y\u5b57\u89c6\u89d2\uff1a \u6b65\u9aa41\u56fe\u4f8b\uff1a\u9876\u5c424\u79cd\u60c5\u51b5\uff1a \u6b65\u9aa42\u56fe\u4f8b\uff1a\u9876\u5c423\u79cd\u60c5\u51b5\uff08\u9876\u5c42\u5341\u5b57\u60c5\u51b5\u4e0b\uff09\uff1a \u6b65\u9aa43\u56fe\u4f8b\uff1a\u9876\u5c42\u68f1\u8fb93\u79cd\u60c5\u51b5\uff08\u9876\u5c42\u540c\u8272\u60c5\u51b5\u4e0b\uff09\uff1a \u6b65\u9aa43\u56fe\u4f8b\uff1a\u9876\u5c42L","title":"\u4e09\u9636\u9b54\u65b9\u5c42\u4f18\u5148\u73a9\u6cd5"},{"location":"BOOKS/2019-10-09-mooc%25e7%25b4%25b0%25e8%25ae%2580%25e5%25bc%25b5%25e6%2584%259b%25e7%258e%25b2%25e5%259c%25a8%25e7%25ba%25bf%25e8%25af%25be%25e7%25a8%258b.html/","tags":["\u5f20\u7231\u73b2","\u6768\u4f73\u5a34","\u8bfe\u7a0b","MOOC"],"text":"\u5728\u7ebf\u8bfe\u7a0b https://courses.openedu.tw/courses/course-v1:SP+1040002091+105/course/","title":"[MOOC]\u7d30\u8b80\u5f35\u611b\u73b2\u5728\u7ebf\u8bfe\u7a0b"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/","tags":["CFOP","\u9b54\u65b9"],"text":"\u7b26\u53f7\u7ea6\u5b9a \u00b6 \u9b54\u65b9\u521d\u59cb\uff1a\u767d\u5bf9\u9ec4\uff0c\u6a59\u5bf9\u7ea2\uff0c\u84dd\u5bf9\u7eff W w\uff1a\u767d Y y\uff1a\u9ec4 O o\uff1a\u6a59 R r\uff1a\u7ea2 B b\uff1a\u84dd G g\uff1a\u7eff x: \u9876\u9762\u989c\u8272 (e.g. Y) < > ^ v (\u65b9\u5411\u7b26\u53f7): \u9876/\u5e95\u9762\u989c\u8272(e.g. Y/W) # \u5c0f\u5199\u5b57\u6bcd(x\u9664\u5916)\u548c\u65b9\u5411\u7b26\u53f7: \u770b\u4e0d\u89c1\u7684\u90a3\u4e00\u9762\u4e0a\u7684\u989c\u8272 L: \u5de6\u9762 R: \u53f3\u9762 U: \u9876\u9762 D: \u5e95\u9762 F: \u6b63\u9762 B: \u80cc\u9762 Fw: \u6b63\u9762\u4e24\u5c42 ML: \u4e0e\u5de6\u9762\u5e73\u884c\u7684\u4e2d\u95f4\u5c42 \u65cb\u8f6c\u6807\u8bb0\uff08\u9b54\u65b9\u516c\u5f0f\uff09, \u4ece\u6240\u5728\u9762\u6765\u770b\u65cb\u8f6c\u65b9\u5411 \u4e0d\u5e26\u6807\u8bb0 : e.g. R: \u53f3\u9762\u987a\u65f6\u9488\u65cb\u8f6c90\u00b0 ' : e.g. R': \u53f3\u9762\u9006\u65f6\u9488\u65cb\u8f6c90\u00b0 2 : \u987a\u65f6\u9488\u65cb\u8f6c180\u00b0 (i.e.\u8fde\u7eed\u65cb\u8f6c\u4e24\u6b21) 2' : \u9006\u65f6\u9488\u65cb\u8f6c180\u00b0 x/y/z : \u6574\u4e2a\u9b54\u65b9\u4ee5R/U/F\u7684\u65b9\u5411\u8f6c\u52a8 x'/y'/z\u2018: \u6574\u4e2a\u9b54\u65b9\u4ee5R'/U'/F'\u7684\u65b9\u5411\u8f6c\u52a8 CFOP: Cross \u2013 F2L \u2013 OLL \u2013 PLL Cross ( C ) First Two Layers ( F2L ) Orientation of the Last Layer ( OLL ) Permutation of the Last Layer ( PLL ) \u4e0b\u9762\u5047\u8bbe\u5e95\u9762\u767d\u8272(W)\uff0c\u9876\u9762\u9ec4\u8272(Y)\u3002 STEP1. Cross \u00b6 \u76ee\u6807\u662f\u5bf9\u597d\u5e95\u5c42\u76844\u4e2a\u68f1\u5757\u3002 CASE1.1. \u767d\u8272\u5728\u9876\u9762\uff0c\u65cb\u8f6c180\u00b0\u81f3\u5e95\u5c42 CASE1.2. \u767d\u8272\u5728\u5e95\u5c42\u4fa7\u9762\uff0c\u65cb\u8f6c180\u00b0\u81f3\u9876\u5c42\u4fa7\u9762 CASE1.3. \u767d\u8272\u5728\u9876\u5c42\u4fa7\u9762 \u65cb\u8f6c\u9876\u5c42\uff0c\u5c06\u767d\u8272\u653e\u5728\u76ee\u6807\u4f4d\u53f3\u9762 e.g. \u68f1\u5757\u989c\u8272\u4e3aRW\uff0c\u5c31\u4ee5R\u4e3a\u6b63\u9762\uff0c\u4f7f\u7528\u5982\u4e0b\u516c\u5f0f +----+----+----+ | | | | +----+----+----+ | | R | | +----+----+----+ | | | | +----+----+----+ R' F R STEP2. F2L \u00b6 CASE1-4\uff1a\u57fa\u672c\u60c5\u51b5 \u00b6 CASE2.1 \u00b6 e.g. \u9876\u9762Y \u6b63\u9762B \u53f3\u9762R\uff1b\u89d2\u5757\u767d\u8272\u4f4d\u4e8e\u53f3\u9762 +----+----+----+ | | Br | | +----+----+----+ | | Y | | +----+----+----+ | | | Rb>| +----+----+----+ R U R' CASE2.2 \u00b6 e.g. \u9876\u9762Y \u6b63\u9762B \u5de6\u9762O\uff1b\u89d2\u5757\u767d\u8272\u4f4d\u4e8e\u5de6\u9762 +----+----+----+ | | Bo | | +----+----+----+ | | Y | | +----+----+----+ |<Ob | | | +----+----+----+ L' U' L CASE2.3 \u00b6 e.g. \u9876\u9762Y \u6b63\u9762R \u53f3\u9762G\uff1b\u89d2\u5757\u767d\u8272\u4f4d\u4e8e\u6b63\u9762 +----+----+----+ | | | | +----+----+----+ | | Y | Rg | +----+----+----+ | | | Rgv| +----+----+----+ U R U' R' CASE2.4 \u00b6 e.g. \u9876\u9762Y \u6b63\u9762G \u5de6\u9762R\uff1b\u89d2\u5757\u767d\u8272\u4f4d\u4e8e\u6b63\u9762 +----+----+----+ | | | | +----+----+----+ | GR | Y | | +----+----+----+ | GRv| | | +----+----+----+ U' L' U L CASE2.5-9\uff1a\u53ef\u53d8\u6362\u4e3aCASE2.1-4 \u00b6 CASE2.5 \u00b6 e.g. \u6b63\u9762G \u5de6\u9762R \u5e95\u9762W\uff1b\u89d2\u5757\u767d\u8272\u4f4d\u4e8e\u5e95\u9762 \u7528CASE2.3\u516c\u5f0f. +----+----+----+ | | Rg | | +----+----+----+ | | G | | +----+----+----+ | | | Rgv| +----+----+----+ CASE2.6 \u00b6 e.g \u6b63\u9762O \u5de6\u9762G \u5e95\u9762W\uff1b\u89d2\u5757\u767d\u8272\u4f4d\u4e8e\u5e95\u9762 \u7528CASE4\u516c\u5f0f. +----+----+----+ | | Gr | | +----+----+----+ | | O | | +----+----+----+ | Grv| | | +----+----+----+ CASE2.7 \u00b6 \u767d\u8272\u5728\u4fa7\u9762\uff0c\u89d2\u5757\u4e0e\u68f1\u5757\u5728\u9876\u5c42\u5f02\u8272 \u85cf\u89d2\u53d8\u6362\u4e3aCASE2.1-2 CASE2.8 \u00b6 \u767d\u8272\u5728\u4fa7\u9762\uff0c\u89d2\u5757\u4e0e\u68f1\u5757\u5728\u9876\u5c42\u540c\u8272 \u5982\u679c\u53ea\u5dee\u4e00\u5bf9\u68f1\u89d2\u5757\uff0c\u85cf\u89d2\u53d8\u6362\u4e3aCASE2.7 \u5426\u5219\uff0c\u85cf\u89d2\u53d8\u6362\u4e3aCASE2.3-4 CASE2.9 \u00b6 \u767d\u8272\u5728\u9876\u5c42\uff0c\u89d2\u5757\u4e0e\u68f1\u5757\u5206\u79bb \u5148\u5bf9\u9f50\u68f1\u5757\u4fa7\u9762\u4e0e\u4e2d\u5fc3\u989c\u8272\uff1b \u85cf\u68f1\u4e8e\u76ee\u6807\u4f4d\u5bf9\u8fb9\uff0c\u53d8\u6362\u4e3aCASE2.3-4 CASE2.10 \u00b6 \u7b2c\u4e8c\u5c42\u53ea\u5dee\u4e00\u4e2a\u68f1\u5757 \u7528\u5c42\u5148\u6cd5\u8fd8\u539f. STEP3. OLL (10\u4e2a\u516c\u5f0f) \u00b6 FRU (3\u4e2a\u516c\u5f0f) \u00b6 CASE3.1 \u4e00\u5b57 \u00b6 FRU\u516c\u5f0f F R U R' U' F' \u6ce8: \u62c7\u6307\u6309\u4f4f\u5e95\u9762\u98df\u6307\u62e8F CASE3.2 L\u5f62\u72b6 \u00b6 FwRU\u516c\u5f0f Fw R U R' U' Fw' CASE3.3 \u4e00\u70b9 \u00b6 \u7528 FRU\u516c\u5f0f + FwRU\u516c\u5f0f CASE3.4 \u6a2a\u5411T\u5b57 \u00b6 \u5de6\u9762\u4e24\u5757\u9ec4\uff0c\u524d\u540e\u5404\u4e00\u5757\u9ec4. \u7528 FRU\u516c\u5f0f +----+----+----+ |< | ^ | x | +----+----+----+ | x | x | x | +----+----+----+ |< | v | x | +----+----+----+ CASE3.5 \u53f3\u62c7\u6307 \u00b6 \u5de6\u9762\u4e09\u5757\u9ec4 \u7528 FwRU\u516c\u5f0f +----+----+----+ |< | | x | +----+----+----+ |< | x | x | +----+----+----+ |< | x | x | +----+----+----+ CASE3.6 \u5de6\u62c7\u6307 \u00b6 \u53f3\u9762\u4e09\u5757\u9ec4\uff0cCASE3.5\u7684\u955c\u50cf. \u7528 FwRU\u955c\u50cf\u516c\u5f0f +----+----+----+ | x | | >| +----+----+----+ | x | x | >| +----+----+----+ | x | x | >| +----+----+----+ Fw' L' U' L U Fw \u5c0f\u9c7c+ (7\u4e2a\u516c\u5f0f) \u00b6 F3.1 \u5c0f\u9c7c1 \u00b6 \u9c7c\u5934\u5728\u53f3\u4e0a\u89d2\uff0c\u53f3\u97621\u9ec4 +----+----+----+ | | x | x | +----+----+----+ | x | x | x | +----+----+----+ | | x | >| +----+----+----+ R U2' R' U' R U' R' \u6ce8: \u9876\u5c42\u4e00\u76f4\u5728\u9006\u65f6\u9488\u65cb\u8f6c \u62c7\u6307\u6309\u4f4f\u5e95\u9762\u505a\u7b2c\u4e00\u4e2aR U2'\u7684\u7b2c\u4e00\u4e2aU\u7531\u62c7\u6307\u62e8\uff0c\u7b2c\u4e8c\u4e2aU\u7531\u5de6\u624b\u98df\u6307\u62e8 F3.2 \u5c0f\u9c7c2 \u00b6 \u9c7c\u5934\u5728\u53f3\u4e0b\u89d2\uff0c\u53f3\u97621\u9ec4 +----+----+----+ | | x | >| +----+----+----+ | x | x | x | +----+----+----+ | | x | x | +----+----+----+ R' U2 R U R' U R \u6ce8: \u9876\u5c42\u4e00\u76f4\u5728\u987a\u65f6\u9488\u65cb\u8f6c \u62c7\u6307\u6309\u4f4f\u9876\u9762\u505a\u7b2c\u4e00\u4e2aR' U2\u7684\u7b2c\u4e00\u4e2aU\u7531\u98df\u6307\u62e8\uff0c\u7b2c\u4e8c\u4e2aU\u7531\u4e2d\u6307\u62e8 \u62c7\u6307\u6309\u4f4f\u5e95\u9762\u505a\u7b2c\u4e00\u4e2aR \u6700\u540e\u4e00\u4e2aU\u7531\u65e0\u540d\u6307\u6216\u5c0f\u6307\u62e8 F3.3 \u53cc\u9c7c \u00b6 \u9876\u5c42\u7f3a2\u9ec4\uff0c\u6b63\u97621\u9ec4 +----+----+----+ |< | x | x | +----+----+----+ | x | x | x | +----+----+----+ | x | x | v | +----+----+----+ F' Rw U R' U' Rw' F R F3.4 \u897f\u9c7c \u00b6 \u9876\u5c42\u7f3a2\u9ec4\uff0c\u6b63\u97621\u9ec4\uff0c\u80cc\u97621\u9ec4 +----+----+----+ | ^ | x | x | +----+----+----+ | x | x | x | +----+----+----+ | v | x | x | +----+----+----+ Rw U R' U' Rw' F R F' \u6ce8: \u62c7\u6307\u6309\u4f4f\u5e95\u9762\u505aRw \u524d7\u6b65\u4e0eF3.3\u7684\u540e7\u6b65\u4e00\u6837 F3.5 \u5317\u9c7c \u00b6 \u9876\u5c42\u7f3a2\u9ec4\uff0c\u80cc\u97622\u9ec4 +----+----+----+ | ^ | x | ^ | +----+----+----+ | x | x | x | +----+----+----+ | x | x | x | +----+----+----+ R2' D' R U2' R' D R U2' R \u6ce8: \u62c7\u6307\u6309\u4f4f\u80cc\u9762\u505aR2' \u6700\u540e\u7684R\u7528\u65e0\u540d\u6307\u5e26\u56de F3.6 \u5341\u5b571 \u00b6 \u9876\u5c42\u7f3a4\u9ec4\uff0c\u6b63\u97622\u9ec4\uff0c\u80cc\u97622\u9ec4 +----+----+----+ | ^ | x | ^ | +----+----+----+ | x | x | x | +----+----+----+ | v | x | v | +----+----+----+ R U2 R' U' R U R' U' R U' R' \u6ce8: \u62c7\u6307\u6309\u4f4f\u5e95\u9762\u505a\u7b2c\u4e00\u4e2aR \u62c7\u6307\u6309\u4f4f\u6b63\u9762\u505a\u7b2c\u4e00\u4e2aR' F3.7 \u5341\u5b572 \u00b6 \u9876\u5c42\u7f3a4\u9ec4\uff0c\u6b63\u97621\u9ec4\uff0c\u80cc\u97621\u9ec4\uff0c\u5de6\u97622\u9ec4 +----+----+----+ |< | x | ^ | +----+----+----+ | x | x | x | +----+----+----+ |< | x | v | +----+----+----+ R U2' R2' U' R2 U' R2' U2 R \u6ce8: \u62c7\u6307\u6309\u4f4f\u6b63\u9762\u505a\u7b2c\u4e00\u4e2aR \u62c7\u6307\u6309\u4f4f\u80cc\u9762\u6765\u505a\u6700\u540e\u7684R2' STEP4. PLL (6\u4e2a\u516c\u5f0f) \u00b6 4.1 \u8fd8\u539f\u89d2\u5757 \u00b6 F4.1.1 \u627e\u5230\u4e24\u89d2\u540c\u8272\u7684\u8fb9 \u00b6 \u628a\u5b83\u653e\u5728\u53f3\u9762 e.g. +----+----+----+ | | | b | +----+----+----+ | | | | +----+----+----+ | | | b | +----+----+----+ x' R2 D2 R' U' R D2 R' U R' x F4.1.2 \u89d2\u5757\u5bf9\u6362 \u00b6 +----+----+----+ | <--|----|--> | +----+----+----+ | | | | +----+----+----+ | <--|----|--> | +----+----+----+ R2' U R' U' y (R U R' U')2 (R U R') y' R U' R2 4.2 \u8fd8\u539f\u68f1\u5757 \u00b6 F4.2.1 \u9876\u5c42\u9006\u65f6\u9488\u4e09\u8f6e\u6362 \u00b6 1-->2-->3-->1 +----+----+----+ | | | | +----+----+----+ |3<--|----|---2| +----+----+----+ | | 1 | | +----+----+----+ R U' (R U)2 R U' R' U' R2 F4.2.2 \u9876\u5c42\u987a\u65f6\u9488\u4e09\u8f6e\u6362 \u00b6 1-->2-->3-->1 +----+----+----+ | | | | +----+----+----+ |2---|----|-->3| +----+----+----+ | | 1 | | +----+----+----+ R2' U R U (R' U')2 R' U R' F4.2.3 \u5341\u5b57\u5bf9\u6362 \u00b6 +----+----+----+ | | \u2191 | | +----+----+----+ | <--|-+--|--> | +----+----+----+ | | \u2193 | | +----+----+----+ ML2 U ML2 U2 ML2 U ML2 F4.2.4 \u68f1\u5757\u5e73\u884c\u5bf9\u6362 \u00b6 1<-->2, 3<-->4 +----+----+----+ | | 4 | | +----+----+----+ | 3 | | 2 | +----+----+----+ | | 1 | | +----+----+----+ (ML2 U)2 ML' U2 ML2 U2 ML' U2 See: rubik.com.cn/simplecfop.htm","title":"\u4e09\u9636\u9b54\u65b9CFOP\u7b80\u7248 Rubik Simple CFOP method"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#_1","text":"\u9b54\u65b9\u521d\u59cb\uff1a\u767d\u5bf9\u9ec4\uff0c\u6a59\u5bf9\u7ea2\uff0c\u84dd\u5bf9\u7eff W w\uff1a\u767d Y y\uff1a\u9ec4 O o\uff1a\u6a59 R r\uff1a\u7ea2 B b\uff1a\u84dd G g\uff1a\u7eff x: \u9876\u9762\u989c\u8272 (e.g. Y) < > ^ v (\u65b9\u5411\u7b26\u53f7): \u9876/\u5e95\u9762\u989c\u8272(e.g. Y/W) # \u5c0f\u5199\u5b57\u6bcd(x\u9664\u5916)\u548c\u65b9\u5411\u7b26\u53f7: \u770b\u4e0d\u89c1\u7684\u90a3\u4e00\u9762\u4e0a\u7684\u989c\u8272 L: \u5de6\u9762 R: \u53f3\u9762 U: \u9876\u9762 D: \u5e95\u9762 F: \u6b63\u9762 B: \u80cc\u9762 Fw: \u6b63\u9762\u4e24\u5c42 ML: \u4e0e\u5de6\u9762\u5e73\u884c\u7684\u4e2d\u95f4\u5c42 \u65cb\u8f6c\u6807\u8bb0\uff08\u9b54\u65b9\u516c\u5f0f\uff09, \u4ece\u6240\u5728\u9762\u6765\u770b\u65cb\u8f6c\u65b9\u5411 \u4e0d\u5e26\u6807\u8bb0 : e.g. R: \u53f3\u9762\u987a\u65f6\u9488\u65cb\u8f6c90\u00b0 ' : e.g. R': \u53f3\u9762\u9006\u65f6\u9488\u65cb\u8f6c90\u00b0 2 : \u987a\u65f6\u9488\u65cb\u8f6c180\u00b0 (i.e.\u8fde\u7eed\u65cb\u8f6c\u4e24\u6b21) 2' : \u9006\u65f6\u9488\u65cb\u8f6c180\u00b0 x/y/z : \u6574\u4e2a\u9b54\u65b9\u4ee5R/U/F\u7684\u65b9\u5411\u8f6c\u52a8 x'/y'/z\u2018: \u6574\u4e2a\u9b54\u65b9\u4ee5R'/U'/F'\u7684\u65b9\u5411\u8f6c\u52a8 CFOP: Cross \u2013 F2L \u2013 OLL \u2013 PLL Cross ( C ) First Two Layers ( F2L ) Orientation of the Last Layer ( OLL ) Permutation of the Last Layer ( PLL ) \u4e0b\u9762\u5047\u8bbe\u5e95\u9762\u767d\u8272(W)\uff0c\u9876\u9762\u9ec4\u8272(Y)\u3002","title":"\u7b26\u53f7\u7ea6\u5b9a"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#step1-cross","text":"\u76ee\u6807\u662f\u5bf9\u597d\u5e95\u5c42\u76844\u4e2a\u68f1\u5757\u3002 CASE1.1. \u767d\u8272\u5728\u9876\u9762\uff0c\u65cb\u8f6c180\u00b0\u81f3\u5e95\u5c42 CASE1.2. \u767d\u8272\u5728\u5e95\u5c42\u4fa7\u9762\uff0c\u65cb\u8f6c180\u00b0\u81f3\u9876\u5c42\u4fa7\u9762 CASE1.3. \u767d\u8272\u5728\u9876\u5c42\u4fa7\u9762 \u65cb\u8f6c\u9876\u5c42\uff0c\u5c06\u767d\u8272\u653e\u5728\u76ee\u6807\u4f4d\u53f3\u9762 e.g. \u68f1\u5757\u989c\u8272\u4e3aRW\uff0c\u5c31\u4ee5R\u4e3a\u6b63\u9762\uff0c\u4f7f\u7528\u5982\u4e0b\u516c\u5f0f +----+----+----+ | | | | +----+----+----+ | | R | | +----+----+----+ | | | | +----+----+----+ R' F R","title":"STEP1. Cross"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#step2-f2l","text":"","title":"STEP2. F2L"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#case1-4","text":"","title":"CASE1-4\uff1a\u57fa\u672c\u60c5\u51b5"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#case21","text":"e.g. \u9876\u9762Y \u6b63\u9762B \u53f3\u9762R\uff1b\u89d2\u5757\u767d\u8272\u4f4d\u4e8e\u53f3\u9762 +----+----+----+ | | Br | | +----+----+----+ | | Y | | +----+----+----+ | | | Rb>| +----+----+----+ R U R'","title":"CASE2.1"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#case22","text":"e.g. \u9876\u9762Y \u6b63\u9762B \u5de6\u9762O\uff1b\u89d2\u5757\u767d\u8272\u4f4d\u4e8e\u5de6\u9762 +----+----+----+ | | Bo | | +----+----+----+ | | Y | | +----+----+----+ |<Ob | | | +----+----+----+ L' U' L","title":"CASE2.2"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#case23","text":"e.g. \u9876\u9762Y \u6b63\u9762R \u53f3\u9762G\uff1b\u89d2\u5757\u767d\u8272\u4f4d\u4e8e\u6b63\u9762 +----+----+----+ | | | | +----+----+----+ | | Y | Rg | +----+----+----+ | | | Rgv| +----+----+----+ U R U' R'","title":"CASE2.3"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#case24","text":"e.g. \u9876\u9762Y \u6b63\u9762G \u5de6\u9762R\uff1b\u89d2\u5757\u767d\u8272\u4f4d\u4e8e\u6b63\u9762 +----+----+----+ | | | | +----+----+----+ | GR | Y | | +----+----+----+ | GRv| | | +----+----+----+ U' L' U L","title":"CASE2.4"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#case25-9case21-4","text":"","title":"CASE2.5-9\uff1a\u53ef\u53d8\u6362\u4e3aCASE2.1-4"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#case25","text":"e.g. \u6b63\u9762G \u5de6\u9762R \u5e95\u9762W\uff1b\u89d2\u5757\u767d\u8272\u4f4d\u4e8e\u5e95\u9762 \u7528CASE2.3\u516c\u5f0f. +----+----+----+ | | Rg | | +----+----+----+ | | G | | +----+----+----+ | | | Rgv| +----+----+----+","title":"CASE2.5"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#case26","text":"e.g \u6b63\u9762O \u5de6\u9762G \u5e95\u9762W\uff1b\u89d2\u5757\u767d\u8272\u4f4d\u4e8e\u5e95\u9762 \u7528CASE4\u516c\u5f0f. +----+----+----+ | | Gr | | +----+----+----+ | | O | | +----+----+----+ | Grv| | | +----+----+----+","title":"CASE2.6"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#case27","text":"\u767d\u8272\u5728\u4fa7\u9762\uff0c\u89d2\u5757\u4e0e\u68f1\u5757\u5728\u9876\u5c42\u5f02\u8272 \u85cf\u89d2\u53d8\u6362\u4e3aCASE2.1-2","title":"CASE2.7"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#case28","text":"\u767d\u8272\u5728\u4fa7\u9762\uff0c\u89d2\u5757\u4e0e\u68f1\u5757\u5728\u9876\u5c42\u540c\u8272 \u5982\u679c\u53ea\u5dee\u4e00\u5bf9\u68f1\u89d2\u5757\uff0c\u85cf\u89d2\u53d8\u6362\u4e3aCASE2.7 \u5426\u5219\uff0c\u85cf\u89d2\u53d8\u6362\u4e3aCASE2.3-4","title":"CASE2.8"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#case29","text":"\u767d\u8272\u5728\u9876\u5c42\uff0c\u89d2\u5757\u4e0e\u68f1\u5757\u5206\u79bb \u5148\u5bf9\u9f50\u68f1\u5757\u4fa7\u9762\u4e0e\u4e2d\u5fc3\u989c\u8272\uff1b \u85cf\u68f1\u4e8e\u76ee\u6807\u4f4d\u5bf9\u8fb9\uff0c\u53d8\u6362\u4e3aCASE2.3-4","title":"CASE2.9"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#case210","text":"\u7b2c\u4e8c\u5c42\u53ea\u5dee\u4e00\u4e2a\u68f1\u5757 \u7528\u5c42\u5148\u6cd5\u8fd8\u539f.","title":"CASE2.10"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#step3-oll-10","text":"","title":"STEP3. OLL (10\u4e2a\u516c\u5f0f)"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#fru-3","text":"","title":"FRU (3\u4e2a\u516c\u5f0f)"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#case31","text":"FRU\u516c\u5f0f F R U R' U' F' \u6ce8: \u62c7\u6307\u6309\u4f4f\u5e95\u9762\u98df\u6307\u62e8F","title":"CASE3.1  \u4e00\u5b57"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#case32-l","text":"FwRU\u516c\u5f0f Fw R U R' U' Fw'","title":"CASE3.2  L\u5f62\u72b6"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#case33","text":"\u7528 FRU\u516c\u5f0f + FwRU\u516c\u5f0f","title":"CASE3.3  \u4e00\u70b9"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#case34-t","text":"\u5de6\u9762\u4e24\u5757\u9ec4\uff0c\u524d\u540e\u5404\u4e00\u5757\u9ec4. \u7528 FRU\u516c\u5f0f +----+----+----+ |< | ^ | x | +----+----+----+ | x | x | x | +----+----+----+ |< | v | x | +----+----+----+","title":"CASE3.4  \u6a2a\u5411T\u5b57"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#case35","text":"\u5de6\u9762\u4e09\u5757\u9ec4 \u7528 FwRU\u516c\u5f0f +----+----+----+ |< | | x | +----+----+----+ |< | x | x | +----+----+----+ |< | x | x | +----+----+----+","title":"CASE3.5  \u53f3\u62c7\u6307"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#case36","text":"\u53f3\u9762\u4e09\u5757\u9ec4\uff0cCASE3.5\u7684\u955c\u50cf. \u7528 FwRU\u955c\u50cf\u516c\u5f0f +----+----+----+ | x | | >| +----+----+----+ | x | x | >| +----+----+----+ | x | x | >| +----+----+----+ Fw' L' U' L U Fw","title":"CASE3.6  \u5de6\u62c7\u6307"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#7","text":"","title":"\u5c0f\u9c7c+ (7\u4e2a\u516c\u5f0f)"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#f31-1","text":"\u9c7c\u5934\u5728\u53f3\u4e0a\u89d2\uff0c\u53f3\u97621\u9ec4 +----+----+----+ | | x | x | +----+----+----+ | x | x | x | +----+----+----+ | | x | >| +----+----+----+ R U2' R' U' R U' R' \u6ce8: \u9876\u5c42\u4e00\u76f4\u5728\u9006\u65f6\u9488\u65cb\u8f6c \u62c7\u6307\u6309\u4f4f\u5e95\u9762\u505a\u7b2c\u4e00\u4e2aR U2'\u7684\u7b2c\u4e00\u4e2aU\u7531\u62c7\u6307\u62e8\uff0c\u7b2c\u4e8c\u4e2aU\u7531\u5de6\u624b\u98df\u6307\u62e8","title":"F3.1   \u5c0f\u9c7c1"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#f32-2","text":"\u9c7c\u5934\u5728\u53f3\u4e0b\u89d2\uff0c\u53f3\u97621\u9ec4 +----+----+----+ | | x | >| +----+----+----+ | x | x | x | +----+----+----+ | | x | x | +----+----+----+ R' U2 R U R' U R \u6ce8: \u9876\u5c42\u4e00\u76f4\u5728\u987a\u65f6\u9488\u65cb\u8f6c \u62c7\u6307\u6309\u4f4f\u9876\u9762\u505a\u7b2c\u4e00\u4e2aR' U2\u7684\u7b2c\u4e00\u4e2aU\u7531\u98df\u6307\u62e8\uff0c\u7b2c\u4e8c\u4e2aU\u7531\u4e2d\u6307\u62e8 \u62c7\u6307\u6309\u4f4f\u5e95\u9762\u505a\u7b2c\u4e00\u4e2aR \u6700\u540e\u4e00\u4e2aU\u7531\u65e0\u540d\u6307\u6216\u5c0f\u6307\u62e8","title":"F3.2   \u5c0f\u9c7c2"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#f33","text":"\u9876\u5c42\u7f3a2\u9ec4\uff0c\u6b63\u97621\u9ec4 +----+----+----+ |< | x | x | +----+----+----+ | x | x | x | +----+----+----+ | x | x | v | +----+----+----+ F' Rw U R' U' Rw' F R","title":"F3.3  \u53cc\u9c7c"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#f34","text":"\u9876\u5c42\u7f3a2\u9ec4\uff0c\u6b63\u97621\u9ec4\uff0c\u80cc\u97621\u9ec4 +----+----+----+ | ^ | x | x | +----+----+----+ | x | x | x | +----+----+----+ | v | x | x | +----+----+----+ Rw U R' U' Rw' F R F' \u6ce8: \u62c7\u6307\u6309\u4f4f\u5e95\u9762\u505aRw \u524d7\u6b65\u4e0eF3.3\u7684\u540e7\u6b65\u4e00\u6837","title":"F3.4  \u897f\u9c7c"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#f35","text":"\u9876\u5c42\u7f3a2\u9ec4\uff0c\u80cc\u97622\u9ec4 +----+----+----+ | ^ | x | ^ | +----+----+----+ | x | x | x | +----+----+----+ | x | x | x | +----+----+----+ R2' D' R U2' R' D R U2' R \u6ce8: \u62c7\u6307\u6309\u4f4f\u80cc\u9762\u505aR2' \u6700\u540e\u7684R\u7528\u65e0\u540d\u6307\u5e26\u56de","title":"F3.5  \u5317\u9c7c"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#f36-1","text":"\u9876\u5c42\u7f3a4\u9ec4\uff0c\u6b63\u97622\u9ec4\uff0c\u80cc\u97622\u9ec4 +----+----+----+ | ^ | x | ^ | +----+----+----+ | x | x | x | +----+----+----+ | v | x | v | +----+----+----+ R U2 R' U' R U R' U' R U' R' \u6ce8: \u62c7\u6307\u6309\u4f4f\u5e95\u9762\u505a\u7b2c\u4e00\u4e2aR \u62c7\u6307\u6309\u4f4f\u6b63\u9762\u505a\u7b2c\u4e00\u4e2aR'","title":"F3.6  \u5341\u5b571"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#f37-2","text":"\u9876\u5c42\u7f3a4\u9ec4\uff0c\u6b63\u97621\u9ec4\uff0c\u80cc\u97621\u9ec4\uff0c\u5de6\u97622\u9ec4 +----+----+----+ |< | x | ^ | +----+----+----+ | x | x | x | +----+----+----+ |< | x | v | +----+----+----+ R U2' R2' U' R2 U' R2' U2 R \u6ce8: \u62c7\u6307\u6309\u4f4f\u6b63\u9762\u505a\u7b2c\u4e00\u4e2aR \u62c7\u6307\u6309\u4f4f\u80cc\u9762\u6765\u505a\u6700\u540e\u7684R2'","title":"F3.7 \u5341\u5b572"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#step4-pll-6","text":"","title":"STEP4. PLL  (6\u4e2a\u516c\u5f0f)"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#41","text":"","title":"4.1  \u8fd8\u539f\u89d2\u5757"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#f411","text":"\u628a\u5b83\u653e\u5728\u53f3\u9762 e.g. +----+----+----+ | | | b | +----+----+----+ | | | | +----+----+----+ | | | b | +----+----+----+ x' R2 D2 R' U' R D2 R' U R' x","title":"F4.1.1  \u627e\u5230\u4e24\u89d2\u540c\u8272\u7684\u8fb9"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#f412","text":"+----+----+----+ | <--|----|--> | +----+----+----+ | | | | +----+----+----+ | <--|----|--> | +----+----+----+ R2' U R' U' y (R U R' U')2 (R U R') y' R U' R2","title":"F4.1.2  \u89d2\u5757\u5bf9\u6362"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#42","text":"","title":"4.2  \u8fd8\u539f\u68f1\u5757"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#f421","text":"1-->2-->3-->1 +----+----+----+ | | | | +----+----+----+ |3<--|----|---2| +----+----+----+ | | 1 | | +----+----+----+ R U' (R U)2 R U' R' U' R2","title":"F4.2.1  \u9876\u5c42\u9006\u65f6\u9488\u4e09\u8f6e\u6362"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#f422","text":"1-->2-->3-->1 +----+----+----+ | | | | +----+----+----+ |2---|----|-->3| +----+----+----+ | | 1 | | +----+----+----+ R2' U R U (R' U')2 R' U R'","title":"F4.2.2  \u9876\u5c42\u987a\u65f6\u9488\u4e09\u8f6e\u6362"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#f423","text":"+----+----+----+ | | \u2191 | | +----+----+----+ | <--|-+--|--> | +----+----+----+ | | \u2193 | | +----+----+----+ ML2 U ML2 U2 ML2 U ML2","title":"F4.2.3  \u5341\u5b57\u5bf9\u6362"},{"location":"BOOKS/2021-08-20-rubik-simplecfop/#f424","text":"1<-->2, 3<-->4 +----+----+----+ | | 4 | | +----+----+----+ | 3 | | 2 | +----+----+----+ | | 1 | | +----+----+----+ (ML2 U)2 ML' U2 ML2 U2 ML' U2 See: rubik.com.cn/simplecfop.htm","title":"F4.2.4  \u68f1\u5757\u5e73\u884c\u5bf9\u6362"},{"location":"BOOKS/2021-10-29-applied-mathematical-programming/","tags":["mathematical","programming"],"text":"Applied Mathematical Programming by Bradley, Hax, and Magnanti (Addison-Wesley, 1977) \u00b6 This book is a reference book for 15.053, Optimization Methods in Business Analytics, taught at MIT. To make the book available online, most chapters have been re-typeset. Chapters 6, 7 and 10 were not, but are still available (as direct scans of the original chapters). Downloads of the book and its chapters \u00b6 Entire Book minus Chapters 6, 7 and 10 Chapter 1. Mathematical Programming: An Overview Chapter 2. Solving Linear Programs Chapter 3. Sensitivity Analysis Chapter 4. Duality in Linear Programming Chapter 5. Mathematical Programming in Practice Chapter 6 (scanned). Integration of Strategic and Tactical Planning in the Aluminum Industry Chapter 7 (scanned). Planning the Mission and Composition of the U.S. Merchant Marine Fleet Chapter 8. Network Models Chapter 9. Integer Programming Chapter 10 (scanned). Design of a Naval Tender Job Shop Chapter 11. Dynamic Programming Chapter 12. Large-Scale Systems Chapter 13. Nonlinear Programming Chapter 14. A System for Bank Portfolio Planning Appendix A. Vectors and Matrices Appendix B. Linear Programming in Matrix Form Appendix C. A Labeling Algorithm for the Max Flow Problem Some Excel exercises. \u00b6 Remark: These exercises (and Excel) were developed after the book was published. Exercise 3.1 Exercise 3.2 Exercise 3.7 Exercise 3.9 Exercise 3.10 Exercise 3.11 Exercise 3.12 Exercise 3.14 Exercise 3.15 Exercise 3.16 Exercise 3.18 Exercise 3.19 Exercise 3.25 Exercise 3.28 Other spreadsheets \u00b6 Section 1.3. Blast furnace example Section 1.3. Portfolio selection example Section 1.4. Glass manufacturing example Section 2.3. A simple example Figure 2.4. Pivoting Figure 2.6. Pivoting. Section 3.1. Tableaus Section 3.6. Glasses (again) Section 3.6. Sensitivity tableaus Section 4.2. Primal-Dual Copied from http://web.mit.edu/15.053/www/AMP.htm","title":"Applied Mathematical Programming"},{"location":"BOOKS/2021-10-29-applied-mathematical-programming/#applied-mathematical-programming-by-bradley-hax-and-magnanti-addison-wesley-1977","text":"This book is a reference book for 15.053, Optimization Methods in Business Analytics, taught at MIT. To make the book available online, most chapters have been re-typeset. Chapters 6, 7 and 10 were not, but are still available (as direct scans of the original chapters).","title":"Applied Mathematical Programming  by Bradley, Hax, and Magnanti (Addison-Wesley, 1977)"},{"location":"BOOKS/2021-10-29-applied-mathematical-programming/#downloads-of-the-book-and-its-chapters","text":"Entire Book minus Chapters 6, 7 and 10 Chapter 1. Mathematical Programming: An Overview Chapter 2. Solving Linear Programs Chapter 3. Sensitivity Analysis Chapter 4. Duality in Linear Programming Chapter 5. Mathematical Programming in Practice Chapter 6 (scanned). Integration of Strategic and Tactical Planning in the Aluminum Industry Chapter 7 (scanned). Planning the Mission and Composition of the U.S. Merchant Marine Fleet Chapter 8. Network Models Chapter 9. Integer Programming Chapter 10 (scanned). Design of a Naval Tender Job Shop Chapter 11. Dynamic Programming Chapter 12. Large-Scale Systems Chapter 13. Nonlinear Programming Chapter 14. A System for Bank Portfolio Planning Appendix A. Vectors and Matrices Appendix B. Linear Programming in Matrix Form Appendix C. A Labeling Algorithm for the Max Flow Problem","title":"Downloads of the book and its chapters"},{"location":"BOOKS/2021-10-29-applied-mathematical-programming/#some-excel-exercises","text":"Remark: These exercises (and Excel) were developed after the book was published. Exercise 3.1 Exercise 3.2 Exercise 3.7 Exercise 3.9 Exercise 3.10 Exercise 3.11 Exercise 3.12 Exercise 3.14 Exercise 3.15 Exercise 3.16 Exercise 3.18 Exercise 3.19 Exercise 3.25 Exercise 3.28","title":"Some Excel exercises."},{"location":"BOOKS/2021-10-29-applied-mathematical-programming/#other-spreadsheets","text":"Section 1.3. Blast furnace example Section 1.3. Portfolio selection example Section 1.4. Glass manufacturing example Section 2.3. A simple example Figure 2.4. Pivoting Figure 2.6. Pivoting. Section 3.1. Tableaus Section 3.6. Glasses (again) Section 3.6. Sensitivity tableaus Section 4.2. Primal-Dual Copied from http://web.mit.edu/15.053/www/AMP.htm","title":"Other spreadsheets"},{"location":"BOOKS/2021-11-20-online-ebooks/","tags":null,"text":"# Book Author Format 1 \u4e11\u964b\u7684\u4e2d\u56fd\u4eba \u67cf\u6768 mobi 2 \u6211\u4eec\u8981\u6d3b\u7684\u6709\u5c0a\u4e25 \u67cf\u6768 epub 3 \u6c89\u9ed8\u7684\u5927\u591a\u6570 \u738b\u5c0f\u6ce2 mobi 4 \u4e30\u4e73\u80a5\u81c0 \u83ab\u8a00 mobi 5 \u7845\u8c37\u94a2\u94c1\u4fa0 \uff08\u7f8e\uff09\u963f\u4ec0\u5229\u00b7\u4e07\u65af mobi","title":"Online ebooks"},{"location":"BOOKS/2022-01-09-favourite-movies/","tags":null,"text":"Finch \u82ac\u5947 \u00b6 Release date: 5 November 2021 Starring: Tom Hanks Director: Miguel Sapochnik Language: English","title":"Favourite Movies"},{"location":"BOOKS/2022-01-09-favourite-movies/#finch","text":"Release date: 5 November 2021 Starring: Tom Hanks Director: Miguel Sapochnik Language: English","title":"Finch \u82ac\u5947"},{"location":"DATABASE/2015-07-30-centos7-%25e5%25ae%2589%25e8%25a3%2585-mariadb-mysql%25e7%25a4%25be%25e5%258c%25ba%25e7%2589%2588.html/","tags":["\u6570\u636e\u5e93","MySQL","MariaDB"],"text":"\u4e00\u3001\u5b89\u88c5 # yum install mariadb-server mariadb-client # systemctl start mariadb # systemctl enable mariadb \u4e8c\u3001\u914d\u7f6e 1\u3001\u4fee\u6539root\u7528\u6237\u5bc6\u7801 \u9ed8\u8ba4\u60c5\u51b5\u4e0b\u5b89\u88c5\u597dmysql\u6570\u636e\u5e93\u4e4b\u540eroot\u5bc6\u7801\u662f\u7a7a\u7684\uff0c\u4e3a\u4e86\u5b89\u5168\u8d77\u89c1\u9700\u8981\u4fee\u6539root\u7528\u6237\u5bc6\u7801 # mysqladmin -u root password 111111 //\u5c06root\u7528\u6237\u7684\u5bc6\u7801\u4fee\u6539\u4e3a111111 2\u3001\u8868\u540d\u5927\u5c0f\u5199\u4e0d\u654f\u611f \u7528root\u5e10\u53f7\u767b\u5f55\uff0c\u5728/etc/my.cnf \u6216 /etc/myql/my.cnf\u4e2d\u7684[mysqld]\u540e\u6dfb\u52a0 lower_case_table_names=1 \u4e09\u3001\u521b\u5efa\u6570\u636e\u5e93 1\u3001\u521b\u5efa\u6570\u636e\u5e93 # mysql -u root -p MariaDB [(none)]> CREATE DATABASE `malldb` DEFAULT CHARACTER SET utf8 COLLATE utf8_bin; 2\u3001\u8fdc\u7a0b\u8fde\u63a5malldb\u6570\u636e\u5e93 MariaDB [(none)]> grant all on malldb.* to root@'%' identified by '123456';","title":"centos7 \u5b89\u88c5 MariaDB - MySQL\u793e\u533a\u7248"},{"location":"DATABASE/2015-12-07-centos-6-4%25e7%25b3%25bb%25e7%25bb%259fmysql%25e4%25b8%25bb%25e4%25bb%258e%25e5%25a4%258d%25e5%2588%25b6%25e5%259f%25ba%25e6%259c%25ac%25e9%2585%258d%25e7%25bd%25ae%25e5%25ae%259e%25e8%25b7%25b5.html/","tags":[],"text":"\u4f5c\u8005\uff1a Yanjun \u5bf9\u4e8eMySQL\u6570\u636e\u5e93\u4e00\u822c\u7528\u9014\u7684\u4e3b\u4ece\u590d\u5236\uff0c\u53ef\u4ee5\u5b9e\u73b0\u6570\u636e\u7684\u5907\u4efd\uff08\u5982\u679c\u5e0c\u671b\u5728\u4e3b\u8282\u70b9\u5931\u6548\u540e\uff0c\u80fd\u591f\u4f7f\u4ece\u8282\u70b9\u81ea\u52a8\u63a5\u7ba1\uff0c\u5c31\u9700\u8981\u66f4\u52a0\u590d\u6742\u7684\u914d\u7f6e\uff0c\u8fd9\u91cc\u6682\u65f6\u5148\u4e0d\u8003\u8651\uff09\uff0c\u5982\u679c\u4e3b\u8282\u70b9\u51fa\u73b0\u786c\u4ef6\u6545\u969c\uff0c\u6570\u636e\u5e93\u670d\u52a1\u5668\u53ef\u4ee5\u76f4\u63a5\u624b\u52a8\u5207\u6362\u6210\u5907\u4efd\u8282\u70b9\uff08\u4ece\u8282\u70b9\uff09\uff0c\u7ee7\u7eed\u63d0\u4f9b\u670d\u52a1\u3002\u57fa\u672c\u7684\u4e3b\u4ece\u590d\u5236\u914d\u7f6e\u8d77\u6765\u975e\u5e38\u5bb9\u6613\uff0c\u8fd9\u91cc\u6211\u4eec\u505a\u4e2a\u7b80\u5355\u7684\u8bb0\u5f55\u603b\u7ed3\u3002 \u6211\u4eec\u9009\u62e9\u4e24\u53f0\u670d\u52a1\u5668\u6765\u8fdb\u884cMySQL\u7684\u4e3b\u4ece\u590d\u5236\u5b9e\u8df5\uff0c\u4e00\u53f0m1\u4f5c\u4e3a\u4e3b\u8282\u70b9\uff0c\u53e6\u4e00\u53f0nn\u4f5c\u4e3a\u4ece\u8282\u70b9\u3002 \u4e24\u53f0\u673a\u5668\u4e0a\u90fd\u9700\u8981\u5b89\u88c5MySQL\u6570\u636e\u5e93\uff0c\u5982\u679c\u60f3\u8981\u5378\u6389\u9ed8\u8ba4\u5b89\u88c5\u7684\uff0c\u53ef\u4ee5\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a 1 sudo rpm -e --nodeps mysql 2 yum list | grep mysql \u73b0\u5728\u53ef\u4ee5\u5728CentOS 6.4\u4e0a\u76f4\u63a5\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u8fdb\u884c\u5b89\u88c5\uff1a 1 sudo yum install -y mysql-server mysql mysql-deve \u4e3aroot\u7528\u6237\u8bbe\u7f6e\u5bc6\u7801\uff1a 1 mysqladmin -u root password 'shiyanjun' \u7136\u540e\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7MySQL\u5ba2\u6237\u7aef\u767b\u5f55\uff1a 1 mysql -u root -p \u4e3b\u8282\u70b9\u914d\u7f6e \u9996\u5148\uff0c\u8003\u8651\u5230\u6570\u636e\u5e93\u7684\u5b89\u5168\uff0c\u4ee5\u53ca\u4fbf\u4e8e\u7ba1\u7406\uff0c\u6211\u4eec\u9700\u8981\u5728\u4e3b\u8282\u70b9m1\u4e0a\u589e\u52a0\u4e00\u4e2a\u4e13\u7528\u7684\u590d\u5236\u7528\u6237\uff0c\u4f7f\u5f97\u4efb\u610f\u60f3\u8981\u4ece\u4e3b\u8282\u70b9\u8fdb\u884c\u590d\u5236\u4ece\u8282\u70b9\u90fd\u5fc5\u987b\u4f7f\u7528\u8fd9\u4e2a\u8d26\u53f7\uff1a 1 CREATE USER repli_user; 2 GRANT REPLICATION SLAVE ON *.* TO 'repli_user' @ '%' IDENTIFIED BY 'shiyanjun' ; \u8fd9\u91cc\u8fd8\u8fdb\u884c\u4e86\u64cd\u4f5c\u6388\u6743\uff0c\u4f7f\u7528\u8fd9\u4e2a\u6362\u7528\u8d26\u53f7\u6765\u6267\u884c\u96c6\u7fa4\u590d\u5236\u3002\u5982\u679c\u60f3\u8981\u9650\u5236IP\u7aef\u6bb5\uff0c\u4e5f\u53ef\u4ee5\u5728\u8fd9\u91cc\u8fdb\u884c\u914d\u7f6e\u6388\u6743\u3002 \u7136\u540e\uff0c\u5728\u4e3b\u8282\u70b9m1\u4e0a\uff0c\u4fee\u6539MySQL\u914d\u7f6e\u6587\u4ef6/etc/my.cnf\uff0c\u4f7f\u5176\u652f\u6301Master\u590d\u5236\u529f\u80fd\uff0c\u4fee\u6539\u540e\u7684\u5185\u5bb9\u5982\u4e0b\u6240\u793a\uff1a 01 [mysqld] 02 datadir=/var/lib/mysql 03 socket=/var/lib/mysql/mysql.sock 04 user=mysql 05 # Disabling symbolic-links is recommended to prevent assorted security risks 06 symbolic-links=0 07 server-id=1 08 log-bin=m-bin 09 log-bin-index=m-bin.index 10 11 [mysqld_safe] 12 log-error=/var/log/mysqld.log 13 pid-file=/var/run/mysqld/mysqld.pid server-id\u6307\u660e\u4e3b\u8282\u70b9\u7684\u8eab\u4efd\uff0c\u4ece\u8282\u70b9\u901a\u8fc7\u8fd9\u4e2aserver-id\u6765\u8bc6\u522b\u8be5\u8282\u70b9\u662fMaster\u8282\u70b9\uff08\u590d\u5236\u67b6\u6784\u4e2d\u7684\u6e90\u6570\u636e\u5e93\u670d\u52a1\u5668\u8282\u70b9\uff09\u3002 \u5982\u679cMySQL\u5f53\u524d\u5df2\u7ecf\u542f\u52a8\uff0c\u4fee\u6539\u5b8c\u96c6\u7fa4\u590d\u5236\u914d\u7f6e\u540e\u9700\u8981\u91cd\u542f\u670d\u52a1\u5668\uff1a 1 sudo service mysqld restart \u4ece\u8282\u70b9\u914d\u7f6e \u63a5\u7740\uff0c\u7c7b\u4f3c\u5730\u8fdb\u884c\u4ece\u8282\u70b9nn\u7684\u914d\u7f6e\uff0c\u540c\u6837\u4fee\u6539MySQL\u914d\u7f6e\u6587\u4ef6/etc/my.cnf\uff0c\u4f7f\u5176\u652f\u6301Slave\u7aef\u590d\u5236\u529f\u80fd\uff0c\u4fee\u6539\u540e\u7684\u5185\u5bb9\u5982\u4e0b\u6240\u793a\uff1a 01 [mysqld] 02 datadir=/var/lib/mysql 03 socket=/var/lib/mysql/mysql.sock 04 user=mysql 05 # Disabling symbolic-links is recommended to prevent assorted security risks 06 symbolic-links=0 07 server-id=2 08 relay-log=slave-relay-bin 09 relay-log-index=slave-relay-bin.index 10 11 [mysqld_safe] 12 log-error=/var/log/mysqld.log 13 pid-file=/var/run/mysqld/mysqld.pid \u540c\u6837\uff0c\u5982\u679cMySQL\u5f53\u524d\u5df2\u7ecf\u542f\u52a8\uff0c\u4fee\u6539\u5b8c\u96c6\u7fa4\u590d\u5236\u914d\u7f6e\u540e\u9700\u8981\u91cd\u542f\u670d\u52a1\u5668\uff1a 1 sudo service mysqld restart \u7136\u540e\uff0c\u9700\u8981\u4f7f\u4ece\u8282\u70b9nn\u6307\u5411\u4e3b\u8282\u70b9\uff0c\u5e76\u542f\u52a8Slave\u590d\u5236\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a 1 CHANGE MASTER TO MASTER_HOST= 'm1' , MASTER_PORT=3306, MASTER_USER= 'repli_user' , MASTER_PASSWORD= 'shiyanjun' ; 2 START SLAVE; \u9a8c\u8bc1\u96c6\u7fa4\u590d\u5236 \u8fd9\u65f6\uff0c\u53ef\u4ee5\u5728\u4e3b\u8282\u70b9m1\u4e0a\u6267\u884c\u76f8\u5173\u64cd\u4f5c\uff0c\u9a8c\u8bc1\u4ece\u8282\u70b9nn\u540c\u6b65\u590d\u5236\u4e86\u4e3b\u8282\u70b9\u7684\u6570\u636e\u5e93\u4e2d\u7684\u5185\u5bb9\u53d8\u66f4\u3002 \u5982\u679c\u6b64\u65f6\uff0c\u6211\u4eec\u5df2\u7ecf\u914d\u7f6e\u597d\u4e86\u4e3b\u4ece\u590d\u5236\uff0c\u90a3\u4e48\u5bf9\u4e8e\u4e3b\u8282\u70b9m1\u4e0aMysQL\u6570\u636e\u5e93\u7684\u4efb\u4f55\u53d8\u66f4\u90fd\u4f1a\u590d\u5236\u5230\u4ece\u8282\u70b9nn\u4e0a\uff0c\u5305\u62ec\u5efa\u5e93\u5efa\u8868\u3001\u63d2\u5165\u66f4\u65b0\u7b49\u64cd\u4f5c\uff0c\u4e0b\u9762\u6211\u4eec\u4ece\u5efa\u5e93\u5f00\u59cb\uff1a \u5728\u4e3b\u8282\u70b9m1\u4e0a\u5efa\u5e93\u5efa\u8868\uff1a 01 CREATE DATABASE workflow; 02 CREATE TABLE `workflow`.`project` ( 03 `id` int (11) NOT NULL AUTO_INCREMENT, 04 ` name ` varchar (100) NOT NULL , 05 `type` tinyint(4) NOT NULL DEFAULT '0' , 06 `description` varchar (500) DEFAULT NULL , 07 `create_at` date DEFAULT NULL , 08 `update_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP , 09 `status` tinyint(4) NOT NULL DEFAULT '0' , 10 PRIMARY KEY (`id`) 11 ) ENGINE=InnoDB DEFAULT CHARSET=utf8; \u5728m1\u4e0a\u67e5\u770bbinlog\u5185\u5bb9\uff0c\u6267\u884c\u547d\u4ee4\uff1a 1 SHOW BINLOG EVENTS\\G binlog\u5185\u5bb9\u5185\u5bb9\u5982\u4e0b\u6240\u793a\uff1a 01 *************************** 1. row *************************** 02 Log_name: m-bin.000001 03 Pos: 4 04 Event_type: Format_desc 05 Server_id: 1 06 End_log_pos: 106 07 Info: Server ver: 5.1.73-log, Binlog ver: 4 08 *************************** 2. row *************************** 09 Log_name: m-bin.000001 10 Pos: 106 11 Event_type: Query 12 Server_id: 1 13 End_log_pos: 197 14 Info: CREATE DATABASE workflow 15 *************************** 3. row *************************** 16 Log_name: m-bin.000001 17 Pos: 197 18 Event_type: Query 19 Server_id: 1 20 End_log_pos: 671 21 Info: CREATE TABLE `workflow`.`project` ( 22 `id` int(11) NOT NULL AUTO_INCREMENT, 23 `name` varchar(100) NOT NULL, 24 `type` tinyint(4) NOT NULL DEFAULT '0', 25 `description` varchar(500) DEFAULT NULL, 26 `create_at` date DEFAULT NULL, 27 `update_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, 28 `status` tinyint(4) NOT NULL DEFAULT '0', 29 PRIMARY KEY (`id`) 30 ) ENGINE=InnoDB DEFAULT CHARSET=utf8 31 3 rows in set (0.00 sec) \u901a\u8fc7\u4e0a\u8ff0binlog\u5185\u5bb9\uff0c\u6211\u4eec\u5927\u6982\u53ef\u4ee5\u770b\u5230MySQL\u7684binlog\u90fd\u8bb0\u5f55\u90a3\u4e9b\u4fe1\u606f\uff0c\u4e00\u4e2a\u4e8b\u4ef6\u5bf9\u5e94\u4e00\u884c\u8bb0\u5f55\u3002\u8fd9\u4e9b\u8bb0\u5f55\u4fe1\u606f\u7684\u7ec4\u7ec7\u7ed3\u6784\u5982\u4e0b\u6240\u793a\uff1a Log_name\uff1a\u65e5\u5fd7\u540d\u79f0\uff0c\u6307\u5b9a\u7684\u8bb0\u5f55\u64cd\u4f5c\u7684binlog\u65e5\u5fd7\u540d\u79f0\uff0c\u8fd9\u91cc\u662fm-bin.000001\uff0c\u4e0e\u6211\u4eec\u524d\u9762\u5728/etc/my.cnf\u4e2d\u914d\u7f6e\u7684\u76f8\u5bf9\u5e94 Pos\uff1a\u8bb0\u5f55\u4e8b\u4ef6\u7684\u8d77\u59cb\u4f4d\u7f6e Event_type\uff1a\u4e8b\u4ef6\u7c7b\u578b End_log_pos\uff1a\u8bb0\u5f55\u4e8b\u4ef6\u7684\u7ed3\u675f\u4f4d\u7f6e Server_id\uff1a\u670d\u52a1\u5668\u6807\u8bc6 Info\uff1a\u4e8b\u4ef6\u63cf\u8ff0\u4fe1\u606f \u7136\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u67e5\u770b\u5728\u4ece\u8282\u70b9nn\u4e0a\u590d\u5236\u7684\u60c5\u51b5\u3002\u901a\u8fc7\u5982\u4e0b\u547d\u4ee4\u67e5\u770b\u4ece\u8282\u70b9nn\u4e0a\u6570\u636e\u5e93\u548c\u8868\u7684\u4fe1\u606f\uff1a 1 SHOW DATABASES; 2 USE workflow; 3 SHOW TABLES; 4 DESC project; \u6211\u4eec\u518d\u770b\u4e00\u4e0b\u6267\u884c\u63d2\u5165\u8bed\u53e5\u7684\u60c5\u51b5\u3002\u5728\u4e3b\u8282\u70b9m1\u4e0a\u6267\u884c\u5982\u4e0bSQL\u8bed\u53e5\uff1a 1 INSERT INTO `workflow`.`project` VALUES (1, 'Avatar-II' , 1, 'Avatar-II project' , '2014-02-16' , '2014-02-16 11:09:54' , 0); \u53ef\u4ee5\u5728\u4ece\u8282\u70b9\u4e0a\u6267\u884c\u67e5\u8be2\uff0c\u770b\u5230\u4ece\u8282\u70b9nn\u4e0a\u590d\u5236\u4e86\u4e3b\u8282\u70b9m1\u4e0a\u6267\u884c\u7684INSERT\u8bed\u53e5\u7684\u8bb0\u5f55\uff1a 1 SELECT * FROM workflow.project; \u9a8c\u8bc1\u590d\u5236\u6210\u529f\u3002 \u590d\u5236\u5e38\u7528\u547d\u4ee4 \u4e0b\u9762\uff0c\u6211\u4eec\u603b\u7ed3\u4e86\u51e0\u4e2a\u5728MySQL\u4e3b\u4ece\u590d\u5236\u573a\u666f\u4e2d\u5e38\u7528\u5230\u7684\u51e0\u4e2a\u76f8\u5173\u547d\u4ee4\uff1a \u7ec8\u6b62\u4e3b\u8282\u70b9\u590d\u5236 1 STOP MASTER; \u6e05\u9664\u4e3b\u8282\u70b9\u590d\u5236\u6587\u4ef6 1 RESET MASTER; \u7ec8\u6b62\u4ece\u8282\u70b9\u590d\u5236 1 STOP SLAVE; \u6e05\u9664\u4ece\u8282\u70b9\u590d\u5236\u6587\u4ef6 1 RESET SLAVE; \u67e5\u770b\u4e3b\u8282\u70b9\u590d\u5236\u72b6\u6001 1 SHOW MASTER STATUS\\G; \u7ed3\u679c\u793a\u4f8b\uff1a 1 *************************** 1. row *************************** 2 File: m-bin.000001 3 Position: 956 4 Binlog_Do_DB: 5 Binlog_Ignore_DB: 6 1 row in set (0.00 sec) \u67e5\u770b\u4ece\u8282\u70b9\u590d\u5236\u72b6\u6001 1 SHOW SLAVE STATUS\\G; \u7ed3\u679c\u793a\u4f8b\uff1a 01 *************************** 1. row *************************** 02 Slave_IO_State: Waiting for master to send event 03 Master_Host: m1 04 Master_User: repli_user 05 Master_Port: 3306 06 Connect_Retry: 60 07 Master_Log_File: m-bin.000001 08 Read_Master_Log_Pos: 956 09 Relay_Log_File: slave-relay-bin.000002 10 Relay_Log_Pos: 1097 11 Relay_Master_Log_File: m-bin.000001 12 Slave_IO_Running: Yes 13 Slave_SQL_Running: Yes 14 Replicate_Do_DB: 15 Replicate_Ignore_DB: 16 Replicate_Do_Table: 17 Replicate_Ignore_Table: 18 Replicate_Wild_Do_Table: 19 Replicate_Wild_Ignore_Table: 20 Last_Errno: 0 21 Last_Error: 22 Skip_Counter: 0 23 Exec_Master_Log_Pos: 956 24 Relay_Log_Space: 1252 25 Until_Condition: None 26 Until_Log_File: 27 Until_Log_Pos: 0 28 Master_SSL_Allowed: No 29 Master_SSL_CA_File: 30 Master_SSL_CA_Path: 31 Master_SSL_Cert: 32 Master_SSL_Cipher: 33 Master_SSL_Key: 34 Seconds_Behind_Master: 0 35 Master_SSL_Verify_Server_Cert: No 36 Last_IO_Errno: 0 37 Last_IO_Error: 38 Last_SQL_Errno: 0 39 Last_SQL_Error: 40 1 row in set (0.00 sec) \u67e5\u770bBINLOG\u5217\u8868 1 SHOW BINARY LOGS\\G \u672c\u6587\u57fa\u4e8e \u7f72\u540d-\u975e\u5546\u4e1a\u6027\u4f7f\u7528-\u76f8\u540c\u65b9\u5f0f\u5171\u4eab 4.0 \u8bb8\u53ef\u534f\u8bae\u53d1\u5e03\uff0c\u6b22\u8fce\u8f6c\u8f7d\u3001\u4f7f\u7528\u3001\u91cd\u65b0\u53d1\u5e03\uff0c\u4f46\u52a1\u5fc5\u4fdd\u7559\u6587\u7ae0\u7f72\u540d \u65f6\u5ef6\u519b \uff08\u5305\u542b\u94fe\u63a5\uff09\uff0c\u4e0d\u5f97\u7528\u4e8e\u5546\u4e1a\u76ee\u7684\uff0c\u57fa\u4e8e\u672c\u6587\u4fee\u6539\u540e\u7684\u4f5c\u54c1\u52a1\u5fc5\u4ee5\u76f8\u540c\u7684\u8bb8\u53ef\u53d1\u5e03\u3002\u5982\u6709\u4efb\u4f55\u7591\u95ee\uff0c\u8bf7\u4e0e\u6211 \u8054\u7cfb \u3002","title":"CentOS 6.4\u7cfb\u7edfMySQL\u4e3b\u4ece\u590d\u5236\u57fa\u672c\u914d\u7f6e\u5b9e\u8df5"},{"location":"DATABASE/2015-12-07-mysql-%25e6%259f%25a5%25e8%25af%25a2%25e9%2594%2581%25e3%2580%2581%25e8%25a7%25a3%25e9%2594%2581%25e8%25af%25ad%25e5%258f%25a5.html/","tags":[],"text":"\u4e00\uff1a\u9501\u8868\uff1a \u9501\u5b9a\u6570\u636e\u8868\uff0c\u907f\u514d\u5728\u5907\u4efd\u8fc7\u7a0b\u4e2d\uff0c\u8868\u88ab\u66f4\u65b0 mysql>LOCK TABLES tbl_name READ; \u4e3a\u8868\u589e\u52a0\u4e00\u4e2a\u5199\u9501\u5b9a\uff1a mysql>LOCK TABLES tbl_name WRITE; \u4e8c\uff1a \u67e5\u8be2mysql \u54ea\u4e9b\u8868\u6b63\u5728\u88ab\u9501\u72b6\u6001 show OPEN TABLES where In_use > 0; \u4e09\uff1amysql\u89e3\u9501 \u7b2c\u4e00\u79cd show processlist; \u627e\u5230\u9501\u8fdb\u7a0b\uff0ckill id ; \u7b2c\u4e8c\u79cd mysql>UNLOCK TABLES; \u6458\u81ea\u300ehttp://www.cnblogs.com/Alight/p/4193439.html\u300f","title":"MySQL \u67e5\u8be2\u9501\u3001\u89e3\u9501\u8bed\u53e5"},{"location":"DATABASE/2015-12-16-mysql%25e4%25ba%258b%25e5%258a%25a1%25e4%25bb%25a5%25e5%258f%258a%25e5%258a%25a0%25e9%2594%2581%25e6%259c%25ba%25e5%2588%25b6.html/","tags":["MySQL","\u4e8b\u7269","\u9501\u673a\u5236"],"text":"\u4e8b\u52a1\u7684\u7279\u5f81ACID\uff0c\u5373\u539f\u5b50\u6027\u3001\u4e00\u81f4\u6027\u3001\u9694\u79bb\u6027\u3001\u6301\u4e45\u6027\u3002 \u539f\u5b50\u6027\u4fdd\u8bc1\u4e00\u4e2a\u4e8b\u52a1\u4e3a\u4e00\u4e2a\u6700\u5c0f\u7684\u5355\u5143\uff0c\u5185\u90e8\u4e0d\u53ef\u5206\u5272\uff1b \u4e00\u81f4\u6027\u4fdd\u8bc1\u4e8b\u52a1\u4e2d\u7684\u6bcf\u4e2a\u64cd\u4f5c\u7ebf\u7a0b\u4e0d\u53ef\u5355\u72ec\u63d0\u4ea4\uff0c\u6210\u529f\u5219\u4e00\u8d77\u63d0\u4ea4\uff0c\u4e0d\u6210\u529f\u5219\u4e8b\u52a1\u56de\u6eda\uff1b \u9694\u79bb\u6027\u4fdd\u8bc1\u4e0d\u540c\u4e8b\u52a1\u95f4\u770b\u5230\u7684\u6570\u636e\u89c6\u56fe\u76f8\u4e92\u72ec\u7acb\uff0c\u76f8\u4e92\u9694\u79bb\uff08\u9694\u79bb\u7ea7\u522b\u53ef\u8bbe\u7f6e\uff09\uff1b \u6301\u4e45\u6027\u4fdd\u8bc1\u4e8b\u52a1\u63d0\u4ea4\u540e\u6570\u636e\u4f1a\u6301\u4e45\u7684\u4fdd\u5b58\u4e0b\u6765\uff1b sql\u89c4\u8303\u5b9a\u4e49\u7684\u4e8b\u52a1\u7684\u9694\u79bb\u7ea7\u522b\uff1a 1.READ UNCOMMITTED(\u8bfb\u53d6\u672a\u63d0\u4ea4\u5185\u5bb9) \u6240\u6709\u4e8b\u52a1\u53ef\u4ee5\u770b\u5230\u672a\u63d0\u4ea4\u4e8b\u52a1\u7684\u6267\u884c\u7ed3\u679c\uff0c\u672c\u9694\u79bb\u7ea7\u522b\u5f88\u5c11\u7528\u5230\u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u8bfb\u53d6\u672a\u63d0\u4ea4\u7684\u6570\u636e\uff0c\u53c8\u79f0\u4e3a\u201c\u810f\u8bfb\u201d\u3002 2.READ COMMITTED\uff08\u8bfb\u53d6\u63d0\u4ea4\u5185\u5bb9\uff09 \u5927\u591a\u6570 \u6570\u636e\u5e93 \u7684\u9ed8\u8ba4\u9694\u79bb\u7ea7\u522b\u662f\u6b64\u7ea7\u522b\uff0c\u4f46\u4e0d\u662f mysql \u9ed8\u8ba4\u7684\u3002\u4e00\u4e2a\u4e8b\u52a1\u5728\u5f00\u59cb\u7684\u65f6\u5019\u53ea\u80fd\u770b\u89c1\u5df2\u63d0\u4ea4\u4e8b\u52a1\u6240\u505a\u7684\u6539\u53d8\u3002\u4e00\u4e2a\u4e8b\u52a1\u4ece\u5f00\u59cb\u5230\u63d0\u4ea4\u524d\u6240\u505a\u7684\u4efb\u4f55\u6539\u53d8\u90fd\u662f\u4e0d\u53ef\u89c1\u7684\uff0c\u9664\u975e\u63d0\u4ea4\u3002\u8fd9\u79cd\u9694\u79bb\u7ea7\u522b\u4e5f\u79f0\u4e3a\u4e0d\u53ef\u91cd\u590d\u8bfb\u3002 3.REPEATABLE READ(\u53ef\u91cd\u590d\u8bfb) \u6b64\u9694\u79bb\u7ea7\u522b\u662f\u4e3a\u4e86\u89e3\u51b3\u53ef\u91cd\u590d\u8bfb\u9694\u79bb\u7ea7\u522b\u5bfc\u81f4\u7684\u95ee\u9898\u5373\u4e00\u4e2a\u4e8b\u52a1\u591a\u4e2a\u5b9e\u4f8b\u5e76\u53d1\u8bfb\u53d6\u6570\u636e\u65f6\u4f1a\u770b\u5230\u4e0d\u540c\u7684\u7ed3\u679c\u3002\u6b64\u9694\u79bb\u7ea7\u522b\u4e0d\u4f1a\u770b\u5230\u5176\u4ed6\u4e8b\u52a1\u63d0\u4ea4\u540e\u7684\u7ed3\u679c\uff0c\u5373\u4e8b\u52a1\u5373\u4f7f\u63d0\u4ea4\u4e86\u6211\u4e5f\u770b\u4e0d\u5230\u3002\u6b64\u7ea7\u522b\u4e5f\u79f0\u4e3a\u201c\u5e7b\u8bfb\u201d\u3002 4.SERIALIZABLE(\u53ef\u4e32\u884c\u5316) \u53ef\u4e32\u884c\u5316\u662f\u6700\u9ad8\u7684\u9694\u79bb\u7ea7\u522b\uff0c\u5b83\u901a\u8fc7\u5f3a\u5236\u4e8b\u52a1\u6392\u5e8f\uff0c\u4f7f\u4e4b\u4e0d\u53ef\u91cd\u8bfb\uff0c\u89e3\u51b3\u4e86\u5e7b\u8bfb\u7684\u95ee\u9898\u3002\u6b64\u9694\u79bb\u7ea7\u522b\u4f1a\u5728\u6bcf\u4e2a\u8bfb\u7684\u6570\u636e\u884c\u4e0a\u52a0\u5171\u4eab\u9501\uff0c\u4f7f\u7528\u8fd9\u79cd\u9694\u79bb\u7ea7\u522b\u4f1a\u4ea7\u751f\u5927\u91cf\u7684\u8d85\u65f6\u73b0\u8c61\uff0c\u4e00\u822c\u5b9e\u9645\u5f00\u53d1\u4e2d\u4e0d\u4f1a\u7528\u5230\u3002 mysql\u52a0\u9501\u673a\u5236 : \u6839\u636e\u7c7b\u578b\u53ef\u5206\u4e3a\u5171\u4eab\u9501\uff08SHARED LOCK\uff09\u548c\u6392\u4ed6\u9501\uff08EXCLUSIVE LOCK\uff09\u6216\u8005\u53eb\u8bfb\u9501\uff08READ LOCK\uff09\u548c\u5199\u9501\uff08WRITE LOCK\uff09\u3002 \u6839\u636e\u7c92\u5ea6\u5212\u5206\u53c8\u5206\u8868\u9501\u548c\u884c\u9501\u3002\u8868\u9501\u7531\u6570\u636e\u5e93\u670d\u52a1\u5668\u5b9e\u73b0\uff0c\u884c\u9501\u7531\u5b58\u50a8\u5f15\u64ce\u5b9e\u73b0\u3002 mysql\u63d0\u4f9b\u4e863\u79cd\u4e8b\u52a1\u578b\u5b58\u50a8\u5f15\u64ce\uff0cInnDB\u3001NDB Cluster\u548cFalcon\u3002 \u4e00\u4e2a\u4e8b\u52a1\u6267\u884c\u7684\u4efb\u4f55\u8fc7\u7a0b\u4e2d\u90fd\u53ef\u4ee5\u83b7\u5f97\u9501\uff0c\u4f46\u662f\u53ea\u6709\u4e8b\u52a1\u63d0\u4ea4\u6216\u56de\u6eda\u7684\u65f6\u5019\u624d\u91ca\u653e\u8fd9\u4e9b\u9501\u3002\u8fd9\u4e9b\u90fd\u662f\u9690\u5f0f\u9501\u5b9a\uff0c\u4e5f\u53ef\u4ee5\u663e\u5f0f\u9501\u5b9a\uff0cInnoDB\u652f\u6301\u663e\u5f0f\u9501\u5b9a\uff0c\u4f8b\u5982\uff1a SELECT .... LOCK IN SHARE MODE (\u52a0\u5171\u4eab\u9501) SELECT .....FOR UPDATE(\u52a0\u6392\u4ed6\u9501) \u591a\u7248\u672c\u5e76\u53d1\u63a7\u5236\uff08\u91cd\u8981\uff09\uff1a Mysql\u7684\u4e8b\u52a1\u5b58\u50a8\u5f15\u64ce\u4e0d\u662f\u7b80\u5355\u5b9e\u7528\u884c\u52a0\u9501\u673a\u5236\uff0c\u800c\u662f\u53eb\u591a\u7248\u672c\u5e76\u53d1\u63a7\u5236\uff08MVCC\uff09\u6280\u672f\uff0c\u548c\u884c\u52a0\u9501\u673a\u5236\u5173\u8054\u5b9e\u7528\u3002\u4ee5\u4fbf\u5e94\u5bf9\u66f4\u9ad8\u7684\u5e76\u53d1\uff0c\u5f53\u7136\u662f\u4ee5\u6d88\u8017\u6027\u80fd\u4f5c\u4e3a\u4ee3\u4ef7\u3002 \u6bcf\u79cd\u5b58\u50a8\u5f15\u64ce\u5bf9MVCC\u7684\u5b9e\u73b0\u65b9\u5f0f\u4e0d\u540c\uff0cInnoDB\u5f15\u64ce\u7684\u7b80\u5355\u5b9e\u73b0\u65b9\u5f0f\u5982\u4e0b\uff1a InnoDB\u901a\u8fc7\u4e3a\u6bcf\u4e2a\u6570\u636e\u822a\u589e\u52a0\u4e24\u4e2a\u9690\u542b\u503c\u7684\u65b9\u5f0f\u6765\u5b9e\u73b0\u3002\u8fd9\u4e24\u4e2a\u9690\u542b\u503c\u8bb0\u5f55\u4e86\u884c\u7684\u521b\u5efa\u65f6\u95f4\uff0c\u4ee5\u53ca\u8fc7\u671f\u65f6\u95f4\u3002\u6bcf\u4e00\u884c\u5b58\u50a8\u4e8b\u4ef6\u53d1\u751f\u65f6\u7684 \u7cfb\u7edf \u7248\u672c\u53f7\u3002\u6bcf\u4e00\u6b21\u5f00\u59cb\u4e00\u4e2a\u65b0\u4e8b\u52a1\u65f6\u7248\u672c\u53f7\u4f1a\u81ea\u52a8\u52a01\uff0c\u6bcf\u4e2a\u4e8b\u52a1\u90fd\u4f1a\u4fdd\u5b58\u5f00\u59cb\u65f6\u7684\u7248\u672c\u53f7\uff0c\u6bcf\u4e2a\u67e5\u8be2\u6839\u636e\u4e8b\u52a1\u7684\u7248\u672c\u53f7\u6765\u67e5\u8be2\u7ed3\u679c\u3002 \u6458\u81ea\u300ehttp://www.php1.cn/Content/Mysql_ShiWuYiJiJiaSuoJiZhi.html\u300f","title":"MySQL \u4e8b\u52a1\u4ee5\u53ca\u52a0\u9501\u673a\u5236"},{"location":"DATABASE/2015-12-16-mysql-%25e5%2585%25a8%25e5%25b1%2580%25e7%25a6%2581%25e7%2594%25a8autocommit.html/","tags":["MySQL","autocommit"],"text":"mysql \u9ed8\u8ba4\u5f00\u542fauto commit\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u7cfb\u7edf\u53d8\u91cf\u63a7\u5236\u6765\u52a8\u6001\u63a7\u5236session\u7ea7\u522bautocommit\uff0c\u5982\u4f55\u4ece\u5168\u5c40\u7981\u7528autocommit\u5462\uff0c\u4e5f\u8bb8\u6709\u65f6\u5019\u6211\u4eec\u4e0d\u60f3\u8ba9mysql\u81ea\u52a8\u63d0\u4ea4\u3002 mysql\u6709\u4e00\u4e2aCmd-Line&Option file&System Var\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u5b9e\u73b0\u8fd9\u6837\u7684\u529f\u80fd\uff0c\u5b83\u5c31\u662finit_connect\u3002 \u8fd9\u4e2a\u53c2\u6570\u7528\u6765\u5b9a\u4e49\u6bcf\u4e2asession\u5efa\u7acb\u65f6\u81ea\u52a8\u6267\u884c\u7684query\u3002 A string to be executed by the server for each client that connects. The string consists of one or more SQL statements. To specify multiple statements, separate them by semicolon characters.A string to be executed by the server for each client that connects. The string consists of one or more SQL statements. To specify multiple statements, separate them by semicolon characters. \u5229\u7528\u8fd9\u4e2a\u53d8\u91cf\uff0c\u53ef\u4ee5\u901a\u8fc7\u5982\u4e0b\u65b9\u5f0f\u7981\u7528autocommit\uff1a way1\uff1amysql>SET GLOBAL init_connect=\u2019SET autocommit=0\u2032; way2\uff1a\u5728\u521d\u59cb\u5316\u53c2\u6570\u6587\u4ef6\u4e2d\u8bbe\u7f6e [mysqld] init_connect=\u2019SET autocommit=0\u2032 way3\uff1a \u542f\u52a8mysql\u65f6\u5e26\u4e0a\u547d\u4ee4\u884c\u53c2\u6570\u2013init_connect=\u2019SET autocommit=0\u2032 \u5f53\u7136\u8fd9\u4e2a\u53c2\u6570\u7684\u8bbe\u7f6e\u5bf9\u62e5\u6709super\u6743\u9650\u7684\u7528\u6237\u662f\u65e0\u6548\u7684\uff0c\u5177\u4f53\u8bf4\u660e Note that the content of init_connect is not executed for users that have the SUPER privilege. This is done so that an erroneous value for init_connect does not prevent all clients from connecting. For example, the value might contain a statement that has a syntax error, thus causing client connections to fail. Not executing init_connect for users that have the SUPER privilege enables them to open a connection and fix the init_connect value. \u53c2\u8003\uff1a http://dev.mysql.com/doc/refman/ ... sysvar_init_connect \u6458\u81ea\u300ehttp://www.itpub.net/thread-1205953-1-1.html\u300f","title":"MySQL \u5168\u5c40\u7981\u7528autocommit"},{"location":"DATABASE/2015-12-17-mysql-transaction-isolation%25e5%258f%2582%25e6%2595%25b0%25e7%259a%2584%25e8%25ae%25be%25e7%25bd%25ae.html/","tags":["MySQL","transaction","isolation"],"text":"1.\u5728 my.cnf\u4e2d\u7684\u3010mysqld \u3011\u90e8\u5206\u6dfb\u52a0\uff1a [mysqld] transaction-isolation = read-committed 2.\u91cd\u542fmysql\u6570\u636e\u5e93 mysql> show variables like \u2018tx%\u2019; +\u2014\u2014\u2014\u2014\u2014+\u2014\u2014\u2014\u2014\u2014-+ | Variable_name | Value | +\u2014\u2014\u2014\u2014\u2014+\u2014\u2014\u2014\u2014\u2014-+ | tx_isolation | READ-COMMITTED | +\u2014\u2014\u2014\u2014\u2014+\u2014\u2014\u2014\u2014\u2014-+ \u6458\u81ea\u300ehttps://anmh.wordpress.com/2010/06/30/mysql%EF%BC%9Atransaction-isolation%E5%8F%82%E6%95%B0%E7%9A%84%E8%AE%BE%E7%BD%AE/\u300f","title":"MySQL transaction-isolation\u53c2\u6570\u7684\u8bbe\u7f6e"},{"location":"DATABASE/2016-01-26-mysql%25e6%2595%25b0%25e6%258d%25ae%25e5%258e%25bb%25e9%2587%258d%25e7%25a4%25ba%25e4%25be%258b.html/","tags":["ETL"],"text":"-- ==== \u6570\u636e\u6e05\u6d17 ==== -- === \u88681\uff1aESB_ERP_BASIC_MODEL_PRICE === -- \u6839\u636eMODL_ST\u53bb\u91cd \u53d6\u6700\u65b0\u8bb0\u5f55 -- S1: \u8bbe\u7f6eROWNUM select @x:= 0; update ESB_ERP_BASIC_MODEL_PRICE t1 set t1.ATTRIBUTE10 = (select @x := @x+1); -- S2: \u6839\u636eROWNUM\u53bb\u91cd DELETE FROM ESB_ERP_BASIC_MODEL_PRICE WHERE ATTRIBUTE10 IN ( select ATTRIBUTE10 from ( select t1.* , if(@g1=t1.MODL_ST, @rank:=@rank+1, @rank:=1) as rank , (@g1:=t1.MODL_ST) as g1 from (select ATTRIBUTE10, MODL_ST, LAST_UPDATE_DATE from ESB_ERP_BASIC_MODEL_PRICE order by modl_st asc, LAST_UPDATE_DATE desc) t1 , (select @g1:=null, @rank:=0) t2 ) t where rank>1 ) ; -- === \u88682\uff1aESB_ERP_SPEC_PRICE === -- \u6839\u636eMODL_ST+SPEC_ITEM_CD+SPEC_DTL_CD\u53bb\u91cd \u53d6\u6700\u65b0\u8bb0\u5f55 -- S1: \u8bbe\u7f6eROWNUM select @x:= 0; update ESB_ERP_SPEC_PRICE t1 set t1.ATTRIBUTE10 = (select @x := @x+1); -- S2: \u6839\u636eROWNUM\u53bb\u91cd DELETE FROM ESB_ERP_SPEC_PRICE WHERE ATTRIBUTE10 IN ( select ATTRIBUTE10 from ( select t1.* , if(@g1=t1.group1, @rank:=@rank+1, @rank:=1) as rank , (@g1:=t1.group1) as g1 from (select ATTRIBUTE10, CONCAT(MODL_ST ,char(5), SPEC_ITEM_CD, char(5), SPEC_DTL_CD) group1, LAST_UPDATE_DATE from ESB_ERP_SPEC_PRICE order by MODL_ST, SPEC_ITEM_CD, SPEC_DTL_CD , LAST_UPDATE_DATE desc) t1 , (select @g1:=null, @rank:=0) t2 ) t where rank>1 ) ;","title":"MySQL\u6570\u636e\u53bb\u91cd\u793a\u4f8b"},{"location":"DATABASE/2016-11-08-mongodb-%25e5%258f%25af%25e8%25a7%2586%25e5%258c%2596%25e5%25b7%25a5%25e5%2585%25b7.html/","tags":["mongodb","mongo","GUI","\u5ba2\u6237\u7aef"],"text":"MongoChef \u4e2a\u4eba\u514d\u8d39\uff0c\u5546\u4e1a\u7528\u6237\u9700\u8981\u6388\u6743 \u4e0b\u8f7d\u5730\u5740\uff1ahttp://3t.io/mongochef/download","title":"Mongodb \u53ef\u89c6\u5316\u5de5\u5177/\u56fe\u5f62\u5ba2\u6237\u7aef"},{"location":"DATABASE/2016-11-08-mongodb-%25e6%259f%25a5%25e8%25af%25a2.html/","tags":["mongodb","mongo"],"text":"1. \u57fa\u672c\u67e5\u8be2\uff1a \u6784\u9020\u67e5\u8be2\u6570\u636e\u3002 > db.test.findOne() { \"_id\" : ObjectId(\"4fd58ecbb9ac507e96276f1a\"), \"name\" : \"stephen\", \"age\" : 35, \"genda\" : \"male\", \"email\" : \" stephen@hotmail.com \" } --\u591a\u6761\u4ef6\u67e5\u8be2\u3002\u4e0b\u9762\u7684\u793a\u4f8b\u7b49\u540c\u4e8eSQL\u8bed\u53e5\u7684where name = \"stephen\" and age = 35 > db.test.find({\"name\":\"stephen\",\"age\":35}) { \"_id\" : ObjectId(\"4fd58ecbb9ac507e96276f1a\"), \"name\" : \"stephen\", \"age\" : 35, \"genda\" : \"male\", \"email\" : \" stephen@hotmail.com \" } --\u8fd4\u56de\u6307\u5b9a\u7684\u6587\u6863\u952e\u503c\u5bf9\u3002\u4e0b\u9762\u7684\u793a\u4f8b\u5c06\u53ea\u662f\u8fd4\u56dename\u548cage\u952e\u503c\u5bf9\u3002 > db.test.find({}, {\"name\":1,\"age\":1}) { \"_id\" : ObjectId(\"4fd58ecbb9ac507e96276f1a\"), \"name\" : \"stephen\", \"age\" : 35 } --\u6307\u5b9a\u4e0d\u8fd4\u56de\u7684\u6587\u6863\u952e\u503c\u5bf9\u3002\u4e0b\u9762\u7684\u793a\u4f8b\u5c06\u8fd4\u56de\u9664name\u4e4b\u5916\u7684\u6240\u6709\u952e\u503c\u5bf9\u3002 > db.test.find({}, {\"name\":0}) { \"_id\" : ObjectId(\"4fd58ecbb9ac507e96276f1a\"), \"age\" : 35, \"genda\" : \"male\", \"email\" : \" stephen@hotmail.com \" } 2. \u67e5\u8be2\u6761\u4ef6\uff1a MongoDB\u63d0\u4f9b\u4e86\u4e00\u7ec4\u6bd4\u8f83\u64cd\u4f5c\u7b26\uff1a$lt/$lte/$gt/$gte/$ne\uff0c\u4f9d\u6b21\u7b49\u4ef7\u4e8e />=/!=\u3002 --\u4e0b\u9762\u7684\u793a\u4f8b\u8fd4\u56de\u7b26\u5408\u6761\u4ef6age >= 18 && age < = 40\u7684\u6587\u6863\u3002 > db.test.find({\"age\":{\"$gte\":18, \"$lte\":40}}) { \"_id\" : ObjectId(\"4fd58ecbb9ac507e96276f1a\"), \"name\" : \"stephen\", \"age\" : 35,\"genda\" : \"male\", \"email\" : \" stephen@hotmail.com \" } --\u4e0b\u9762\u7684\u793a\u4f8b\u8fd4\u56de\u6761\u4ef6\u7b26\u5408name != \"stephen1\" > db.test.find({\"name\":{\"$ne\":\"stephen1\"}}) { \"_id\" : ObjectId(\"4fd58ecbb9ac507e96276f1a\"), \"name\" : \"stephen\", \"age\" : 35,\"genda\" : \"male\", \"email\" : \" stephen@hotmail.com \" } --$in\u7b49\u540c\u4e8eSQL\u4e2d\u7684in\uff0c\u4e0b\u9762\u7684\u793a\u4f8b\u7b49\u540c\u4e8eSQL\u4e2d\u7684in (\"stephen\",\"stephen1\") > db.test.find({\"name\":{\"$in\":[\"stephen\",\"stephen1\"]}}) { \"_id\" : ObjectId(\"4fd58ecbb9ac507e96276f1a\"), \"name\" : \"stephen\", \"age\" : 35,\"genda\" : \"male\", \"email\" : \" stephen@hotmail.com \" } --\u548cSQL\u4e0d\u540c\u7684\u662f\uff0cMongoDB\u7684in list\u4e2d\u7684\u6570\u636e\u53ef\u4ee5\u662f\u4e0d\u540c\u7c7b\u578b\u3002\u8fd9\u79cd\u60c5\u51b5\u53ef\u7528\u4e8e\u4e0d\u540c\u7c7b\u578b\u7684\u522b\u540d\u573a\u666f\u3002 > db.test.find({\"name\":{\"$in\":[\"stephen\",123]}}) { \"_id\" : ObjectId(\"4fd58ecbb9ac507e96276f1a\"), \"name\" : \"stephen\", \"age\" : 35,\"genda\" : \"male\", \"email\" : \" stephen@hotmail.com \" } --$nin\u7b49\u540c\u4e8eSQL\u4e2d\u7684not in\uff0c\u540c\u65f6\u4e5f\u662f$in\u7684\u53d6\u53cd\u3002\u5982\uff1a > db.test.find({\"name\":{\"$nin\":[\"stephen2\",\"stephen1\"]}}) { \"_id\" : ObjectId(\"4fd58ecbb9ac507e96276f1a\"), \"name\" : \"stephen\", \"age\" : 35,\"genda\" : \"male\", \"email\" : \" stephen@hotmail.com \" } --$or\u7b49\u540c\u4e8eSQL\u4e2d\u7684or\uff0c$or\u6240\u9488\u5bf9\u7684\u6761\u4ef6\u88ab\u653e\u5230\u4e00\u4e2a\u6570\u7ec4\u4e2d\uff0c\u6bcf\u4e2a\u6570\u7ec4\u5143\u7d20\u8868\u793aor\u7684\u4e00\u4e2a\u6761\u4ef6\u3002 --\u4e0b\u9762\u7684\u793a\u4f8b\u7b49\u540c\u4e8ename = \"stephen1\" or age = 35 > db.test.find({\"$or\": [{\"name\":\"stephen1\"}, {\"age\":35}]}) { \"_id\" : ObjectId(\"4fd58ecbb9ac507e96276f1a\"), \"name\" : \"stephen\", \"age\" : 35,\"genda\" : \"male\", \"email\" : \" stephen@hotmail.com \" } --\u4e0b\u9762\u7684\u793a\u4f8b\u6f14\u793a\u4e86\u5982\u4f55\u6df7\u5408\u4f7f\u7528$or\u548c$in\u3002 > db.test.find({\"$or\": [{\"name\":{\"$in\":[\"stephen\",\"stephen1\"]}}, {\"age\":36}]}) { \"_id\" : ObjectId(\"4fd58ecbb9ac507e96276f1a\"), \"name\" : \"stephen\", \"age\" : 35,\"genda\" : \"male\", \"email\" : \" stephen@hotmail.com \" } --$not\u8868\u793a\u53d6\u53cd\uff0c\u7b49\u540c\u4e8eSQL\u4e2d\u7684not\u3002 > db.test.find({\"name\": {\"$not\": {\"$in\":[\"stephen2\",\"stephen1\"]}}}) { \"_id\" : ObjectId(\"4fd58ecbb9ac507e96276f1a\"), \"name\" : \"stephen\", \"age\" : 35,\"genda\" : \"male\", \"email\" : \" stephen@hotmail.com \" } 3. null\u6570\u636e\u7c7b\u578b\u7684\u67e5\u8be2\uff1a --\u5728\u8fdb\u884c\u503c\u4e3anull\u6570\u636e\u7684\u67e5\u8be2\u65f6\uff0c\u6240\u6709\u503c\u4e3anull\uff0c\u4ee5\u53ca\u4e0d\u5305\u542b\u6307\u5b9a\u952e\u7684\u6587\u6863\u5747\u4f1a\u88ab\u68c0\u7d22\u51fa\u6765\u3002 > db.test.find({\"x\":null}) { \"_id\" : ObjectId(\"4fd59d30b9ac507e96276f1b\"), \"x\" : null } { \"_id\" : ObjectId(\"4fd59d49b9ac507e96276f1c\"), \"y\" : 1 } --\u9700\u8981\u5c06null\u4f5c\u4e3a\u6570\u7ec4\u4e2d\u7684\u4e00\u4e2a\u5143\u7d20\u8fdb\u884c\u76f8\u7b49\u6027\u5224\u65ad\uff0c\u5373\u4fbf\u8fd9\u4e2a\u6570\u7ec4\u4e2d\u53ea\u6709\u4e00\u4e2a\u5143\u7d20\u3002 --\u518d\u6709\u5c31\u662f\u901a\u8fc7$exists\u5224\u65ad\u6307\u5b9a\u952e\u662f\u5426\u5b58\u5728\u3002 > db.test.find({\"x\": {\"$in\": [null], \"$exists\":true}}) { \"_id\" : ObjectId(\"4fd59d30b9ac507e96276f1b\"), \"x\" : null } 4. \u6b63\u5219\u67e5\u8be2\uff1a --MongoDB\u4e2d\u4f7f\u7528\u4e86Perl\u89c4\u5219\u7684\u6b63\u5219\u8bed\u6cd5\u3002\u5982\uff1a > db.test.find() { \"_id\" : ObjectId(\"4fd59ed7b9ac507e96276f1d\"), \"name\" : \"stephen\" } { \"_id\" : ObjectId(\"4fd59edbb9ac507e96276f1e\"), \"name\" : \"stephen1\" } --i\u8868\u793a\u5ffd\u7565\u5927\u5c0f\u5199 > db.test.find({\"name\":/stephen?/i}) { \"_id\" : ObjectId(\"4fd59ed7b9ac507e96276f1d\"), \"name\" : \"stephen\" } { \"_id\" : ObjectId(\"4fd59edbb9ac507e96276f1e\"), \"name\" : \"stephen1\" } 5. \u6570\u7ec4\u6570\u636e\u67e5\u8be2\uff1a --\u57fa\u4e8e\u6570\u7ec4\u7684\u67e5\u627e\u3002 > db.test.find() { \"_id\" : ObjectId(\"4fd5a177b9ac507e96276f1f\"), \"fruit\" : [ \"apple\", \"banana\", \"peach\" ] } { \"_id\" : ObjectId(\"4fd5a18cb9ac507e96276f20\"), \"fruit\" : [ \"apple\", \"kumquat\",\"orange\" ] } { \"_id\" : ObjectId(\"4fd5a1f0b9ac507e96276f21\"), \"fruit\" : [ \"cherry\", \"banana\",\"apple\" ] } --\u6570\u7ec4\u4e2d\u6240\u6709\u5305\u542bbanana\u7684\u6587\u6863\u90fd\u4f1a\u88ab\u68c0\u7d22\u51fa\u6765\u3002 > db.test.find({\"fruit\":\"banana\"}) { \"_id\" : ObjectId(\"4fd5a177b9ac507e96276f1f\"), \"fruit\" : [ \"apple\", \"banana\", \"peach\" ] } { \"_id\" : ObjectId(\"4fd5a1f0b9ac507e96276f21\"), \"fruit\" : [ \"cherry\", \"banana\",\"apple\" ] } --\u68c0\u7d22\u6570\u7ec4\u4e2d\u9700\u8981\u5305\u542b\u591a\u4e2a\u5143\u7d20\u7684\u60c5\u51b5\uff0c\u8fd9\u91cc\u4f7f\u7528$all\u3002\u4e0b\u9762\u7684\u793a\u4f8b\u4e2d\uff0c\u6570\u7ec4\u4e2d\u5fc5\u987b\u540c\u65f6\u5305\u542bapple\u548cbanana\uff0c \u4f46\u662f\u4ed6\u4eec\u7684\u987a\u5e8f\u65e0\u5173\u7d27\u8981\u3002 > db.test.find({\"fruit\": {\"$all\": [\"banana\",\"apple\"]}}) { \"_id\" : ObjectId(\"4fd5a177b9ac507e96276f1f\"), \"fruit\" : [ \"apple\", \"banana\", \"peach\" ] } { \"_id\" : ObjectId(\"4fd5a1f0b9ac507e96276f21\"), \"fruit\" : [ \"cherry\", \"banana\", \"apple\" ] } --\u4e0b\u9762\u7684\u793a\u4f8b\u8868\u793a\u7cbe\u786e\u5339\u914d\uff0c\u5373\u88ab\u68c0\u7d22\u51fa\u6765\u7684\u6587\u6863\uff0cfruit\u503c\u4e2d\u7684\u6570\u7ec4\u6570\u636e\u5fc5\u987b\u548c\u67e5\u8be2\u6761\u4ef6\u5b8c\u5168\u5339\u914d\uff0c\u5373\u4e0d\u80fd\u591a\uff0c\u4e5f\u4e0d\u80fd\u5c11\uff0c\u987a\u5e8f\u4e5f\u5fc5\u987b\u4fdd\u6301\u4e00\u81f4\u3002 > db.test.find({\"fruit\":[\"apple\",\"banana\",\"peach\"]}) { \"_id\" : ObjectId(\"4fd5a177b9ac507e96276f1f\"), \"fruit\" : [ \"apple\", \"banana\", peach\" ] } --\u4e0b\u9762\u7684\u793a\u4f8b\u5c06\u5339\u914d\u6570\u7ec4\u4e2d\u6307\u5b9a\u4e0b\u6807\u5143\u7d20\u7684\u503c\u3002\u6570\u7ec4\u7684\u8d77\u59cb\u4e0b\u6807\u662f0\u3002 > db.test.find({\"fruit.2\":\"peach\"}) { \"_id\" : ObjectId(\"4fd5a177b9ac507e96276f1f\"), \"fruit\" : [ \"apple\", \"banana\", peach\" ] } --\u53ef\u4ee5\u901a\u8fc7$size\u83b7\u53d6\u6570\u7ec4\u7684\u957f\u5ea6\uff0c\u4f46\u662f$size\u4e0d\u80fd\u548c\u6bd4\u8f83\u64cd\u4f5c\u7b26\u8054\u5408\u4f7f\u7528\u3002 > db.test.find({\"fruit\": {$size : 3}}) { \"_id\" : ObjectId(\"4fd5a177b9ac507e96276f1f\"), \"fruit\" : [ \"apple\", \"banana\", \"peach\" ] } { \"_id\" : ObjectId(\"4fd5a18cb9ac507e96276f20\"), \"fruit\" : [ \"apple\", \"kumquat\",\"orange\" ] } { \"_id\" : ObjectId(\"4fd5a1f0b9ac507e96276f21\"), \"fruit\" : [ \"cherry\", \"banana\",\"apple\" ] } --\u5982\u679c\u9700\u8981\u68c0\u7d22size > n\u7684\u7ed3\u679c\uff0c\u4e0d\u80fd\u76f4\u63a5\u4f7f\u7528$size\uff0c\u53ea\u80fd\u662f\u6dfb\u52a0\u4e00\u4e2a\u989d\u5916\u7684\u952e\u8868\u793a\u6570\u636e\u4e2d\u7684\u5143\u7d20\u6570\u636e\uff0c\u5728\u64cd\u4f5c\u6570\u636e\u4e2d\u7684\u5143\u7d20\u65f6\uff0c\u9700\u8981\u540c\u65f6\u66f4\u65b0size\u952e\u7684\u503c\u3002 --\u4e3a\u540e\u9762\u7684\u5b9e\u9a8c\u6784\u9020\u6570\u636e\u3002 > db.test.update({}, {\"$set\": {\"size\":3}},false,true) > db.test.find() { \"_id\" : ObjectId(\"4fd5a18cb9ac507e96276f20\"), \"fruit\" : [ \"apple\", \"kumquat\", \"orange\" ], \"size\" : 3 } { \"_id\" : ObjectId(\"4fd5a1f0b9ac507e96276f21\"), \"fruit\" : [ \"cherry\", \"banana\", \"apple\" ], \"size\" : 3 } --\u6bcf\u6b21\u6dfb\u52a0\u4e00\u4e2a\u65b0\u5143\u7d20\uff0c\u90fd\u8981\u539f\u5b50\u6027\u7684\u81ea\u589esize\u4e00\u6b21\u3002 > test.update({},{\"$push\": {\"fruit\":\"strawberry\"},\"$inc\":{\"size\":1}},false,true) > db.test.find() { \"_id\" : ObjectId(\"4fd5a18cb9ac507e96276f20\"), \"fruit\" : [ \"apple\", \"kumquat\", \"orange\", \"strawberry\" ], \"size\" : 4 } { \"_id\" : ObjectId(\"4fd5a1f0b9ac507e96276f21\"), \"fruit\" : [ \"cherry\", \"banana\", \"apple\", \"strawberry\" ], \"size\" : 4 } --\u901a\u8fc7$slice\u8fd4\u56de\u6570\u7ec4\u4e2d\u7684\u90e8\u5206\u6570\u636e\u3002\"$slice\":2\u8868\u793a\u6570\u7ec4\u4e2d\u7684\u524d\u4e24\u4e2a\u5143\u7d20\u3002 > db.test.find({},{\"fruit\": {\"$slice\":2}, \"size\":0}) { \"_id\" : ObjectId(\"4fd5a18cb9ac507e96276f20\"), \"fruit\" : [ \"apple\", \"kumquat\" ]} { \"_id\" : ObjectId(\"4fd5a1f0b9ac507e96276f21\"), \"fruit\" : [ \"cherry\", \"banana\" ]} --\u901a\u8fc7$slice\u8fd4\u56de\u6570\u7ec4\u4e2d\u7684\u90e8\u5206\u6570\u636e\u3002\"$slice\":-2\u8868\u793a\u6570\u7ec4\u4e2d\u7684\u540e\u4e24\u4e2a\u5143\u7d20\u3002 > db.test.find({},{\"fruit\": {\"$slice\":-2}, \"size\":0}) { \"_id\" : ObjectId(\"4fd5a18cb9ac507e96276f20\"), \"fruit\" : [ \"orange\", \"strawberry\" ] } { \"_id\" : ObjectId(\"4fd5a1f0b9ac507e96276f21\"), \"fruit\" : [ \"apple\", \"strawberry\" ] } --$slice : [2,1]\uff0c\u8868\u793a\u4ece\u7b2c\u4e8c\u4e2a2\u5143\u7d20\u5f00\u59cb\u53d61\u4e2a\uff0c\u5982\u679c\u83b7\u53d6\u6570\u91cf\u5927\u4e8e2\u540e\u9762\u7684\u5143\u7d20\u6570\u91cf\uff0c\u5219\u53d6\u540e\u9762\u7684\u5168\u90e8\u6570\u636e\u3002 > db.test.find({},{\"fruit\": {\"$slice\":[2,1]}, \"size\":0}) { \"_id\" : ObjectId(\"4fd5a18cb9ac507e96276f20\"), \"fruit\" : [ \"orange\" ] } { \"_id\" : ObjectId(\"4fd5a1f0b9ac507e96276f21\"), \"fruit\" : [ \"apple\" ] } 6. \u5185\u5d4c\u6587\u6863\u67e5\u8be2\uff1a --\u4e3a\u540e\u9762\u7684\u793a\u4f8b\u6784\u9020\u6d4b\u8bd5\u6570\u636e\u3002 > db.test.find() { \"_id\" : ObjectId(\"4fd5ada3b9ac507e96276f22\"), \"name\" : { \"first\" : \"Joe\", \"last\" : \"He\" }, \"age\" : 45 } --\u5f53\u5d4c\u5165\u5f0f\u6587\u6863\u4e3a\u6570\u7ec4\u65f6\uff0c\u9700\u8981$elemMatch\u64cd\u4f5c\u7b26\u6765\u5e2e\u52a9\u5b9a\u4f4d\u67d0\u4e00\u4e2a\u5143\u7d20\u5339\u914d\u7684\u60c5\u51b5\uff0c\u5426\u5219\u5d4c\u5165\u5f0f\u6587\u4ef6\u5c06\u8fdb\u884c\u5168\u90e8\u7684\u5339\u914d\u3002 --\u5373\u68c0\u7d22\u65f6\u9700\u8981\u5c06\u6240\u6709\u5143\u7d20\u90fd\u5217\u51fa\u6765\u4f5c\u4e3a\u67e5\u8be2\u6761\u4ef6\u65b9\u53ef\u3002 > db.test.findOne() { \"_id\" : ObjectId(\"4fd5af76b9ac507e96276f23\"), \"comments\" : [ { \"author\" : \"joe\", \"score\" : 3 }, { \"author\" : \"mary\", \"score\" : 6 } ] } > db.test.find({\"comments\": {\"$elemMatch\": {\"author\":\"joe\",\"score\":{\"$gte\":3}}}} { \"_id\" : ObjectId(\"4fd5af76b9ac507e96276f23\"), \"comments\" : [ { \"author\" : \"joe\", \"score\" : 3 }, { \"author\" : \"mary\", \"score\" : 6 } ] } 7. \u6e38\u6807\uff1a \u6570\u636e\u5e93\u4f7f\u7528\u6e38\u6807\u6765\u8fd4\u56defind()\u7684\u6267\u884c\u7ed3\u679c\uff0c\u5ba2\u6237\u7aef\u5bf9\u6e38\u6807\u53ef\u4ee5\u8fdb\u884c\u6709\u6548\u7684\u63a7\u5236\uff0c\u5982\uff1a\u9650\u5b9a\u7ed3\u679c\u96c6\u7684\u6570\u91cf\u3001\u8df3\u8fc7\u90e8\u5206\u7ed3\u679c\u3001\u57fa\u4e8e\u4efb\u610f\u952e\u7684\u4efb\u610f\u65b9\u5411\u7684\u6392\u5e8f\u7b49\u3002 \u4e0b\u9762\u7684\u4f8b\u5b50\u5c06\u7528\u4e8e\u51c6\u5907\u6d4b\u8bd5\u6570\u636e\u3002 > db.testtable.remove() > for (i = 0; i < 10; ++i) { ... db.testtable.insert({x:i}) ... } \u6211\u4eec\u53ef\u4ee5\u901a\u8fc7cursor\u63d0\u4f9b\u7684hasNext()\u65b9\u6cd5\u5224\u65ad\u662f\u5426\u8fd8\u6709\u672a\u8bfb\u53d6\u7684\u6570\u636e\uff0c\u518d\u901a\u8fc7next()\u65b9\u6cd5\u8bfb\u53d6\u7ed3\u679c\u96c6\u4e2d\u7684\u4e0b\u4e00\u4e2a\u6587\u6863\u3002\u5982\uff1a > var c = db.testtable.find() > while (c.hasNext()) { ... print(c.next().x) ... } 0 1 2 3 4 5 6 7 8 9 \u5f53\u8c03\u7528find()\u7684\u65f6\u5019\uff0cshell\u5e76\u4e0d\u7acb\u5373\u67e5\u8be2\u6570\u636e\u5e93\uff0c\u800c\u662f\u7b49\u5f85\u771f\u6b63\u5f00\u59cb\u8981\u6c42\u83b7\u5f97\u7ed3\u679c\u7684\u65f6\u5019\u624d\u53d1\u9001\u67e5\u8be2\uff0c\u8fd9\u6837\u5728\u6267\u884c\u4e4b\u524d\u53ef\u4ee5\u7ed9\u67e5\u8be2\u9644\u52a0\u989d\u5916\u7684\u9009\u9879\u3002\u51e0\u4e4e\u6240\u6709\u7684\u6e38\u6807\u65b9\u6cd5\u90fd\u8fd4\u56de\u672c\u8eab\uff0c\u56e0\u6b64\u53ef\u4ee5\u50cf\u4e0b\u9762\u8fd9\u6837\u5c06\u6e38\u6807\u7684\u65b9\u6cd5\u94fe\u5f0f\u7ec4\u5408\u8d77\u6765\u3002\u5982\uff1a > var c1 = db.testtable.find().sort({\"x\":1}).limit(1).skip(4); > var c2 = db.testtable.find().limit(1).sort({\"x\":1}).skip(4); > var c3 = db.testtable.find().skip(4).limit(1).sort({\"x\":1}); \u6b64\u65f6\uff0c\u67e5\u8be2\u5e76\u672a\u6267\u884c\uff0c\u6240\u6709\u8fd9\u4e9b\u51fd\u6570\u90fd\u662f\u5728\u6784\u9020\u67e5\u8be2\uff0c\u5f53\u6267\u884c\u4e0b\u9762\u7684\u8bed\u53e5\u65f6\uff0c\u67e5\u8be2\u5c06\u88ab\u771f\u6b63\u6267\u884c\uff0c > c.hasNext() \u67e5\u8be2\u88ab\u53d1\u9001\u5230\u670d\u52a1\u5668\uff0cMongoDB\u670d\u52a1\u5668\u6bcf\u6b21\u5c06\u8fd4\u56de\u4e00\u6279\u6570\u636e\uff0c\u5f53\u672c\u6279\u88ab\u5168\u90e8\u8fed\u4ee3\u540e\u518d\u4ece\u670d\u52a1\u5668\u8bfb\u53d6\u4e0b\u4e00\u6279\u6570\u636e\uff0c\u76f4\u81f3\u67e5\u8be2\u7ed3\u679c\u9700\u8981\u7684\u6570\u636e\u88ab\u5168\u90e8\u8fed\u4ee3\u3002 \u5bf9\u4e8e\u4e0a\u9762\u7684\u793a\u4f8b\uff0climit(1)\u8868\u793a\u8f93\u51fa\u7ed3\u679c\u4ec5\u4e3a\u4e00\u4e2a\uff0c\u5982\u679c\u5c0f\u4e8e1\uff0c\u5219\u4e0d\u8f93\u51fa\uff0c\u5373limit(n)\u51fd\u6570\u9650\u5b9a\u7684\u662f\u6700\u591a\u8f93\u51fa\u7ed3\u679c\u3002skip(4)\u8868\u793a\u8df3\u8fc7\u67e5\u8be2\u7ed3\u679c\u4e2d\u7684\u524d4\u4e2a\u6587\u6863\uff0c\u5982\u679c\u7ed3\u679c\u5c0f\u4e8e4\uff0c\u5219\u4e0d\u4f1a\u8fd4\u56de\u4efb\u4f55\u6587\u6863\u3002sort({\"x\":1})\u7528\u4e8e\u8bbe\u5b9a\u6392\u5e8f\u6761\u4ef6\uff0c\u5373\u6309\u7167x\u952e\u4ee5\u5347\u5e8f(1)\u7684\u65b9\u5f0f\u6392\u5e8f\uff0c\u5982\u679c\u9700\u8981\u964d\u5e8f\u6392\u5e8f\u53ef\u4ee5\u6539\u4e3a\uff1asort({\"x\":-1})\u3002sort\u4e5f\u53ef\u4ee5\u652f\u6301\u591a\u952e\u6392\u5e8f\uff0c\u5982\uff1asort({username:1, age:-1})\u5373\u5148\u6309\u7167username\u8fdb\u884c\u5347\u5e8f\u6392\u5e8f\uff0c\u5982\u679cusername\u7684\u503c\u76f8\u540c\uff0c\u518d\u4ee5age\u952e\u8fdb\u884c\u964d\u5e8f\u6392\u5e8f\u3002\u8fd9\u91cc\u9700\u8981\u6307\u51fa\u7684\u662f\uff0c\u5982\u679cskip\u8fc7\u591a\u7684\u6587\u6863\uff0c\u5c06\u4f1a\u5bfc\u81f4\u6027\u80fd\u95ee\u9898\u3002 \u6458\u81ea\u300chttp://www.cnblogs.com/stephen-liu74/archive/2012/08/03/2553803.html\u300d See more: MongoDB","title":"MongoDB \u67e5\u8be2"},{"location":"DATABASE/2016-12-06-centos-7-2-yum-%25e5%25ae%2589%25e8%25a3%2585-mysql-%25e7%25a4%25be%25e5%258c%25ba%25e7%2589%2588.html/","tags":[],"text":"1\u3001\u65b0\u5efayum\u6e90 [root@myhost yum.repos.d]# pwd /etc/yum.repos.d [root@myhost yum.repos.d]# cat mysql-community.repo # Enable to use MySQL 5.6 [mysql56-community] name=MySQL 5.6 Community Server baseurl=http://repo.mysql.com/yum/mysql-5.6-community/el/7/x86_64 enabled=1 gpgcheck=0 2\u3001yum \u5b89\u88c5MySQL\u793e\u533a\u7248 [root@myhost yum.repos.d]# yum install mysql-community-server [root@myhost yum.repos.d]# systemctl list-unit-files | grep mysql [root@myhost yum.repos.d]# service mysql start 3\u3001\u89e3\u51b3\u544a\u8b66 [root@myhost yum.repos.d]# cat /var/log/mysqld.log | grep Warning \u95ee\u9898 2016-12-05 15:13:29 9005 [Warning] Buffered warning: Changed limits: max_open_files: 1024 (requested 5000) 2016-12-05 15:13:29 9005 [Warning] Buffered warning: Changed limits: table_open_cache: 431 (requested 2000) \u89e3\u51b3 [root@myhost ~]# ulimit -a [root@myhost ~]# vi /etc/security/limits.conf \u8ffd\u52a0 mysql hard nofile 65535 mysql soft nofile 65535 [root@myhost ~]# vi /usr/lib/systemd/system/mysqld.service (in the [service] section) \u8ffd\u52a0 LimitNOFILE=65535 [root@myhost ~]# systemctl daemon-reload [root@myhost ~]# service mysql restart see more\uff1a http://stackoverflow.com/questions/32760202/buffered-warning-changed-limits-max-connections-214-requested-800 4\u3001\u91cd\u7f6eroot\u5bc6\u7801 # service mysql stop # mysqld_safe --user=mysql --skip-grant-tables --skip-networking & # mysql -u root mysql mysql>UPDATE user SET Password=PASSWORD('new_password') where USER='root'; mysql>FLUSH PRIVILEGES; mysql>quit # service mysql start","title":"centos 7.2 yum \u5b89\u88c5 MySQL \u793e\u533a\u7248"},{"location":"DATABASE/2017-05-07-oracle-9i-10g%25e7%25bc%2596%25e7%25a8%258b%25e8%2589%25ba%25e6%259c%25af-%25e6%25b7%25b1%25e5%2585%25a5%25e6%2595%25b0%25e6%258d%25ae%25e5%25ba%2593%25e4%25bd%2593%25e7%25b3%25bb%25e7%25bb%2593%25e6%259e%2584.html/","tags":["\u6570\u636e\u5e93","oracle","\u7f16\u7a0b"],"text":"\u76ee\u5f55 \u5e8f \u524d\u8a00 \u76ee\u5f55 \u914d\u7f6e\u73af\u5883 \u7b2c\u4e00\u7ae0 \u5f00\u53d1\u6210\u529f\u7684Oracle\u5e94\u7528\u7a0b\u5e8f \u7b2c2\u7ae0\uff1a\u4f53\u7cfb\u7ed3\u6784\u6982\u8ff0 \u7b2c3\u7ae0\uff1a\u6587\u4ef6 \u7b2c4\u7ae0\uff1a\u5185\u5b58\u7ed3\u6784 \u7b2c5\u7ae0\uff1aOracle\u8fdb\u7a0b \u7b2c6\u7ae0\uff1a\u9501 \u7b2c7\u7ae0\uff1a\u5e76\u53d1\u4e0e\u591a\u7248\u672c \u7b2c8\u7ae0\uff1a\u4e8b\u52a1 \u7b2c9\u7ae0\uff1aredo\u4e0eundo \u7b2c10\u7ae0\uff1a\u6570\u636e\u5e93\u8868 \u7b2c11\u7ae0\uff1a\u7d22\u5f15 \u7b2c12\u7ae0\uff1a\u6570\u636e\u7c7b\u578b \u7b2c13\u7ae0\uff1a\u5206\u533a \u7b2c14\u7ae0\uff1a\u5e76\u884c\u6267\u884c \u7b2c15\u7ae0\uff1a\u6570\u636e\u52a0\u8f7d\u548c\u5378\u8f7d \u539f\u6587 http://blog.csdn.net/knowhow?viewmode=contents","title":"Oracle 9i &10g\u7f16\u7a0b\u827a\u672f-\u6df1\u5165\u6570\u636e\u5e93\u4f53\u7cfb\u7ed3\u6784"},{"location":"FRONTEND/2015-12-20-jquery%25e8%25a1%25a8%25e5%258d%2595%25e9%25aa%258c%25e8%25af%2581validate%25e6%258f%2592%25e4%25bb%25b6%25e5%2585%25a8%25e6%2594%25bb%25e7%2595%25a5.html/","tags":["ui","jquery","validate"],"text":"\u4e00\u3001\u51c6\u5907\u5de5\u4f5c \u9700\u8981JQuery\u7248\u672c\uff1a1.2.6+, \u517c\u5bb9 1.3.2 \u4e8c\u3001\u9ed8\u8ba4\u6821\u9a8c\u89c4\u5219 (1)required:true \u5fc5\u8f93\u5b57\u6bb5 (2)remote:\"check.php\" \u4f7f\u7528ajax\u65b9\u6cd5\u8c03\u7528check.php\u9a8c\u8bc1\u8f93\u5165\u503c (3)email:true \u5fc5\u987b\u8f93\u5165\u6b63\u786e\u683c\u5f0f\u7684\u7535\u5b50\u90ae\u4ef6 (4)url:true \u5fc5\u987b\u8f93\u5165\u6b63\u786e\u683c\u5f0f\u7684\u7f51\u5740 (5)date:true \u5fc5\u987b\u8f93\u5165\u6b63\u786e\u683c\u5f0f\u7684\u65e5\u671f (6)dateISO:true \u5fc5\u987b\u8f93\u5165\u6b63\u786e\u683c\u5f0f\u7684\u65e5\u671f(ISO)\uff0c\u4f8b\u5982\uff1a2009-06-23\uff0c1998/01/22 \u53ea\u9a8c\u8bc1\u683c\u5f0f\uff0c\u4e0d\u9a8c\u8bc1\u6709\u6548\u6027 (7)number:true \u5fc5\u987b\u8f93\u5165\u5408\u6cd5\u7684\u6570\u5b57(\u8d1f\u6570\uff0c\u5c0f\u6570) (8)digits:true \u5fc5\u987b\u8f93\u5165\u6574\u6570 (9)creditcard: \u5fc5\u987b\u8f93\u5165\u5408\u6cd5\u7684\u4fe1\u7528\u5361\u53f7 (10)equalTo:\"#field\" \u8f93\u5165\u503c\u5fc5\u987b\u548c#field\u76f8\u540c (11)accept: \u8f93\u5165\u62e5\u6709\u5408\u6cd5\u540e\u7f00\u540d\u7684\u5b57\u7b26\u4e32\uff08\u4e0a\u4f20\u6587\u4ef6\u7684\u540e\u7f00\uff09 (12)maxlength:5 \u8f93\u5165\u957f\u5ea6\u6700\u591a\u662f5\u7684\u5b57\u7b26\u4e32(\u6c49\u5b57\u7b97\u4e00\u4e2a\u5b57\u7b26) (13)minlength:10 \u8f93\u5165\u957f\u5ea6\u6700\u5c0f\u662f10\u7684\u5b57\u7b26\u4e32(\u6c49\u5b57\u7b97\u4e00\u4e2a\u5b57\u7b26) (14)rangelength:[5,10] \u8f93\u5165\u957f\u5ea6\u5fc5\u987b\u4ecb\u4e8e 5 \u548c 10 \u4e4b\u95f4\u7684\u5b57\u7b26\u4e32\")(\u6c49\u5b57\u7b97\u4e00\u4e2a\u5b57\u7b26) (15)range:[5,10] \u8f93\u5165\u503c\u5fc5\u987b\u4ecb\u4e8e 5 \u548c 10 \u4e4b\u95f4 (16)max:5 \u8f93\u5165\u503c\u4e0d\u80fd\u5927\u4e8e5 (17)min:10 \u8f93\u5165\u503c\u4e0d\u80fd\u5c0f\u4e8e10 \u4e09\u3001\u9ed8\u8ba4\u7684\u63d0\u793a messages: { required: \"This field is required.\", remote: \"Please fix this field.\", email: \"Please enter a valid email address.\", url: \"Please enter a valid URL.\", date: \"Please enter a valid date.\", dateISO: \"Please enter a valid date (ISO).\", dateDE: \"Bitte geben Sie ein g\u7709ltiges Datum ein.\", number: \"Please enter a valid number.\", numberDE: \"Bitte geben Sie eine Nummer ein.\", digits: \"Please enter only digits\", creditcard: \"Please enter a valid credit card number.\", equalTo: \"Please enter the same value again.\", accept: \"Please enter a value with a valid extension.\", maxlength: $.validator.format(\"Please enter no more than {0} characters.\"), minlength: $.validator.format(\"Please enter at least {0} characters.\"), rangelength: $.validator.format(\"Please enter a value between {0} and {1} characters long.\"), range: $.validator.format(\"Please enter a value between {0} and {1}.\"), max: $.validator.format(\"Please enter a value less than or equal to {0}.\"), min: $.validator.format(\"Please enter a value greater than or equal to {0}.\") }, \u5982\u9700\u8981\u4fee\u6539\uff0c\u53ef\u5728js\u4ee3\u7801\u4e2d\u52a0\u5165\uff1a jQuery.extend(jQuery.validator.messages, { required: \"\u5fc5\u9009\u5b57\u6bb5\", remote: \"\u8bf7\u4fee\u6b63\u8be5\u5b57\u6bb5\", email: \"\u8bf7\u8f93\u5165\u6b63\u786e\u683c\u5f0f\u7684\u7535\u5b50\u90ae\u4ef6\", url: \"\u8bf7\u8f93\u5165\u5408\u6cd5\u7684\u7f51\u5740\", date: \"\u8bf7\u8f93\u5165\u5408\u6cd5\u7684\u65e5\u671f\", dateISO: \"\u8bf7\u8f93\u5165\u5408\u6cd5\u7684\u65e5\u671f (ISO).\", number: \"\u8bf7\u8f93\u5165\u5408\u6cd5\u7684\u6570\u5b57\", digits: \"\u53ea\u80fd\u8f93\u5165\u6574\u6570\", creditcard: \"\u8bf7\u8f93\u5165\u5408\u6cd5\u7684\u4fe1\u7528\u5361\u53f7\", equalTo: \"\u8bf7\u518d\u6b21\u8f93\u5165\u76f8\u540c\u7684\u503c\", accept: \"\u8bf7\u8f93\u5165\u62e5\u6709\u5408\u6cd5\u540e\u7f00\u540d\u7684\u5b57\u7b26\u4e32\", maxlength: jQuery.validator.format(\"\u8bf7\u8f93\u5165\u4e00\u4e2a\u957f\u5ea6\u6700\u591a\u662f {0} \u7684\u5b57\u7b26\u4e32\"), minlength: jQuery.validator.format(\"\u8bf7\u8f93\u5165\u4e00\u4e2a\u957f\u5ea6\u6700\u5c11\u662f {0} \u7684\u5b57\u7b26\u4e32\"), rangelength: jQuery.validator.format(\"\u8bf7\u8f93\u5165\u4e00\u4e2a\u957f\u5ea6\u4ecb\u4e8e {0} \u548c {1} \u4e4b\u95f4\u7684\u5b57\u7b26\u4e32\"), range: jQuery.validator.format(\"\u8bf7\u8f93\u5165\u4e00\u4e2a\u4ecb\u4e8e {0} \u548c {1} \u4e4b\u95f4\u7684\u503c\"), max: jQuery.validator.format(\"\u8bf7\u8f93\u5165\u4e00\u4e2a\u6700\u5927\u4e3a {0} \u7684\u503c\"), min: jQuery.validator.format(\"\u8bf7\u8f93\u5165\u4e00\u4e2a\u6700\u5c0f\u4e3a {0} \u7684\u503c\") }); \u63a8\u8350\u505a\u6cd5\uff0c\u5c06\u6b64\u6587\u4ef6\u653e\u5165messages_cn.js\u4e2d\uff0c\u5728\u9875\u9762\u4e2d\u5f15\u5165 \u56db\u3001\u4f7f\u7528\u65b9\u5f0f 1.\u5c06\u6821\u9a8c\u89c4\u5219\u5199\u5230\u63a7\u4ef6\u4e2d $().ready(function() { $(\"#signupForm\").validate(); }); Firstname E-Mail Password \u786e\u8ba4\u5bc6\u7801 \u4f7f\u7528class=\"{}\"\u7684\u65b9\u5f0f\uff0c\u5fc5\u987b\u5f15\u5165\u5305\uff1ajquery.metadata.js \u53ef\u4ee5\u4f7f\u7528\u5982\u4e0b\u7684\u65b9\u6cd5\uff0c\u4fee\u6539\u63d0\u793a\u5185\u5bb9\uff1a class=\"{required:true,minlength:5,messages:{required:'\u8bf7\u8f93\u5165\u5185\u5bb9'}}\" \u5728\u4f7f\u7528equalTo\u5173\u952e\u5b57\u65f6\uff0c\u540e\u9762\u7684\u5185\u5bb9\u5fc5\u987b\u52a0\u4e0a\u5f15\u53f7\uff0c\u5982\u4e0b\u4ee3\u7801\uff1a class=\"{required:true,minlength:5,equalTo:'#password'}\" \u53e6\u5916\u4e00\u4e2a\u65b9\u5f0f\uff0c\u4f7f\u7528\u5173\u952e\u5b57\uff1ameta\uff08\u4e3a\u4e86\u5143\u6570\u636e\u4f7f\u7528\u5176\u4ed6\u63d2\u4ef6\u4f60\u8981\u5305\u88c5 \u4f60\u7684\u9a8c\u8bc1\u89c4\u5219 \u5728\u4ed6\u4eec\u81ea\u5df1\u7684\u9879\u76ee\u4e2d\u53ef\u4ee5\u7528\u8fd9\u4e2a\u7279\u6b8a\u7684\u9009\u9879\uff09 Tell the validation plugin to look inside a validate-property in metadata for validation rules. \u4f8b\u5982\uff1a meta: \"validate\" \u518d\u6709\u4e00\u79cd\u65b9\u5f0f\uff1a $.metadata.setType(\"attr\", \"validate\"); \u8fd9\u6837\u53ef\u4ee5\u4f7f\u7528validate=\"{required:true}\"\u7684\u65b9\u5f0f\uff0c\u6216\u8005class=\"required\"\uff0c\u4f46class=\"{required:true,minlength:5}\"\u5c06\u4e0d\u8d77\u4f5c\u7528 2.\u5c06\u6821\u9a8c\u89c4\u5219\u5199\u5230\u4ee3\u7801\u4e2d $().ready(function() { $(\"#signupForm\").validate({ rules: { firstname: \"required\", email: { required: true, email: true }, password: { required: true, minlength: 5 }, confirm_password: { required: true, minlength: 5, equalTo: \"#password\" } }, messages: { firstname: \"\u8bf7\u8f93\u5165\u59d3\u540d\", email: { required: \"\u8bf7\u8f93\u5165Email\u5730\u5740\", email: \"\u8bf7\u8f93\u5165\u6b63\u786e\u7684email\u5730\u5740\" }, password: { required: \"\u8bf7\u8f93\u5165\u5bc6\u7801\", minlength: jQuery.format(\"\u5bc6\u7801\u4e0d\u80fd\u5c0f\u4e8e{0}\u4e2a\u5b57\u7b26\") }, confirm_password: { required: \"\u8bf7\u8f93\u5165\u786e\u8ba4\u5bc6\u7801\", minlength: \"\u786e\u8ba4\u5bc6\u7801\u4e0d\u80fd\u5c0f\u4e8e5\u4e2a\u5b57\u7b26\", equalTo: \"\u4e24\u6b21\u8f93\u5165\u5bc6\u7801\u4e0d\u4e00\u81f4\u4e0d\u4e00\u81f4\" } } }); }); //messages\u5904\uff0c\u5982\u679c\u67d0\u4e2a\u63a7\u4ef6\u6ca1\u6709message\uff0c\u5c06\u8c03\u7528\u9ed8\u8ba4\u7684\u4fe1\u606f Firstname E-Mail Password \u786e\u8ba4\u5bc6\u7801 required:true \u5fc5\u987b\u6709\u503c required:\"#aa:checked\"\u8868\u8fbe\u5f0f\u7684\u503c\u4e3a\u771f\uff0c\u5219\u9700\u8981\u9a8c\u8bc1 required:function(){}\u8fd4\u56de\u4e3a\u771f\uff0c\u8868\u65f6\u9700\u8981\u9a8c\u8bc1 \u540e\u8fb9\u4e24\u79cd\u5e38\u7528\u4e8e\uff0c\u8868\u5355\u4e2d\u9700\u8981\u540c\u65f6\u586b\u6216\u4e0d\u586b\u7684\u5143\u7d20 \u4e94\u3001\u5e38\u7528\u65b9\u6cd5\u53ca\u6ce8\u610f\u95ee\u9898 1.\u7528\u5176\u4ed6\u65b9\u5f0f\u66ff\u4ee3\u9ed8\u8ba4\u7684SUBMIT $().ready(function() { $(\"#signupForm\").validate({ submitHandler:function(form){ alert(\"submitted\"); form.submit(); } }); }); \u53ef\u4ee5\u8bbe\u7f6evalidate\u7684\u9ed8\u8ba4\u503c\uff0c\u5199\u6cd5\u5982\u4e0b\uff1a $.validator.setDefaults({ submitHandler: function(form) { alert(\"submitted!\");form.submit(); } }); \u5982\u679c\u60f3\u63d0\u4ea4\u8868\u5355, \u9700\u8981\u4f7f\u7528form.submit()\u800c\u4e0d\u8981\u4f7f\u7528$(form).submit() 2.debug\uff0c\u5982\u679c\u8fd9\u4e2a\u53c2\u6570\u4e3atrue\uff0c\u90a3\u4e48\u8868\u5355\u4e0d\u4f1a\u63d0\u4ea4\uff0c\u53ea\u8fdb\u884c\u68c0\u67e5\uff0c\u8c03\u8bd5\u65f6\u5341\u5206\u65b9\u4fbf $().ready(function() { $(\"#signupForm\").validate({ debug:true }); }); \u5982\u679c\u4e00\u4e2a\u9875\u9762\u4e2d\u6709\u591a\u4e2a\u8868\u5355\uff0c\u7528 $.validator.setDefaults({ debug: true }) 3.ignore\uff1a\u5ffd\u7565\u67d0\u4e9b\u5143\u7d20\u4e0d\u9a8c\u8bc1 ignore: \".ignore\" 4.errorPlacement\uff1aCallback Default: \u628a\u9519\u8bef\u4fe1\u606f\u653e\u5728\u9a8c\u8bc1\u7684\u5143\u7d20\u540e\u9762 \u6307\u660e\u9519\u8bef\u653e\u7f6e\u7684\u4f4d\u7f6e\uff0c\u9ed8\u8ba4\u60c5\u51b5\u662f\uff1aerror.appendTo(element.parent());\u5373\u628a\u9519\u8bef\u4fe1\u606f\u653e\u5728\u9a8c\u8bc1\u7684\u5143\u7d20\u540e\u9762 errorPlacement: function(error, element) { error.appendTo(element.parent()); } //\u793a\u4f8b\uff1a First Name 14/02/07 02/14/07 &nbsp; I have read and accept the Terms of Use. errorPlacement: function(error, element) { if ( element.is(\":radio\") ) error.appendTo( element.parent().next().next() ); else if ( element.is(\":checkbox\") ) error.appendTo ( element.next() ); else error.appendTo( element.parent().next() ); } \u4ee3\u7801\u7684\u4f5c\u7528\u662f\uff1a\u4e00\u822c\u60c5\u51b5\u4e0b\u628a\u9519\u8bef\u4fe1\u606f\u663e\u793a\u5728 \u4e2d\uff0c\u5982\u679c\u662fradio\u663e\u793a\u5728 \u4e2d\uff0c\u5982\u679c\u662fcheckbox\u663e\u793a\u5728\u5185\u5bb9\u7684\u540e\u9762 errorClass\uff1aString Default: \"error\" \u6307\u5b9a\u9519\u8bef\u63d0\u793a\u7684css\u7c7b\u540d\uff0c\u53ef\u4ee5\u81ea\u5b9a\u4e49\u9519\u8bef\u63d0\u793a\u7684\u6837\u5f0f errorElement\uff1aString Default: \"label\" \u7528\u4ec0\u4e48\u6807\u7b7e\u6807\u8bb0\u9519\u8bef\uff0c\u9ed8\u8ba4\u7684\u662flabel\u4f60\u53ef\u4ee5\u6539\u6210em errorContainer\uff1aSelector \u663e\u793a\u6216\u8005\u9690\u85cf\u9a8c\u8bc1\u4fe1\u606f\uff0c\u53ef\u4ee5\u81ea\u52a8\u5b9e\u73b0\u6709\u9519\u8bef\u4fe1\u606f\u51fa\u73b0\u65f6\u628a\u5bb9\u5668\u5c5e\u6027\u53d8\u4e3a\u663e\u793a\uff0c\u65e0\u9519\u8bef\u65f6\u9690\u85cf\uff0c\u7528\u5904\u4e0d\u5927 errorContainer: \"#messageBox1, #messageBox2\" errorLabelContainer\uff1aSelector \u628a\u9519\u8bef\u4fe1\u606f\u7edf\u4e00\u653e\u5728\u4e00\u4e2a\u5bb9\u5668\u91cc\u9762\u3002 wrapper\uff1aString \u7528\u4ec0\u4e48\u6807\u7b7e\u518d\u628a\u4e0a\u8fb9\u7684errorELement\u5305\u8d77\u6765 \u4e00\u822c\u8fd9\u4e09\u4e2a\u5c5e\u6027\u540c\u65f6\u4f7f\u7528\uff0c\u5b9e\u73b0\u5728\u4e00\u4e2a\u5bb9\u5668\u5185\u663e\u793a\u6240\u6709\u9519\u8bef\u63d0\u793a\u7684\u529f\u80fd\uff0c\u5e76\u4e14\u6ca1\u6709\u4fe1\u606f\u65f6\u81ea\u52a8\u9690\u85cf errorContainer: \"div.error\", errorLabelContainer: $(\"#signupForm div.error\"), wrapper: \"li\" \u8bbe\u7f6e\u9519\u8bef\u63d0\u793a\u7684\u6837\u5f0f\uff0c\u53ef\u4ee5\u589e\u52a0\u56fe\u6807\u663e\u793a input.error { border: 1px solid red; } label.error { background:url(\"./demo/images/unchecked.gif\") no-repeat 0px 0px; padding-left: 16px; padding-bottom: 2px; font-weight: bold; color: #EA5200; } label.checked { background:url(\"./demo/images/checked.gif\") no-repeat 0px 0px; } success\uff1aString,Callback \u8981\u9a8c\u8bc1\u7684\u5143\u7d20\u901a\u8fc7\u9a8c\u8bc1\u540e\u7684\u52a8\u4f5c\uff0c\u5982\u679c\u8ddf\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u4f1a\u5f53\u505a\u4e00\u4e2acss\u7c7b\uff0c\u4e5f\u53ef\u8ddf\u4e00\u4e2a\u51fd\u6570 success: function(label) { // set &nbsp; as text for IE label.html(\"&nbsp;\").addClass(\"checked\"); //label.addClass(\"valid\").text(\"Ok!\") } \u6dfb\u52a0\"valid\" \u5230\u9a8c\u8bc1\u5143\u7d20, \u5728CSS\u4e2d\u5b9a\u4e49\u7684\u6837\u5f0f label.valid {} success: \"valid\" nsubmit\uff1a Boolean Default: true \u63d0\u4ea4\u65f6\u9a8c\u8bc1. \u8bbe\u7f6e\u552ffalse\u5c31\u7528\u5176\u4ed6\u65b9\u6cd5\u53bb\u9a8c\u8bc1 onfocusout\uff1aBoolean Default: true \u5931\u53bb\u7126\u70b9\u662f\u9a8c\u8bc1(\u4e0d\u5305\u62eccheckboxes/radio buttons) onkeyup\uff1aBoolean Default: true \u5728keyup\u65f6\u9a8c\u8bc1. onclick\uff1aBoolean Default: true \u5728checkboxes \u548c radio \u70b9\u51fb\u65f6\u9a8c\u8bc1 focusInvalid\uff1aBoolean Default: true \u63d0\u4ea4\u8868\u5355\u540e\uff0c\u672a\u901a\u8fc7\u9a8c\u8bc1\u7684\u8868\u5355(\u7b2c\u4e00\u4e2a\u6216\u63d0\u4ea4\u4e4b\u524d\u83b7\u5f97\u7126\u70b9\u7684\u672a\u901a\u8fc7\u9a8c\u8bc1\u7684\u8868\u5355)\u4f1a\u83b7\u5f97\u7126\u70b9 focusCleanup\uff1aBoolean Default: false \u5982\u679c\u662ftrue\u90a3\u4e48\u5f53\u672a\u901a\u8fc7\u9a8c\u8bc1\u7684\u5143\u7d20\u83b7\u5f97\u7126\u70b9\u65f6\uff0c\u79fb\u9664\u9519\u8bef\u63d0\u793a\u3002\u907f\u514d\u548c focusInvalid \u4e00\u8d77\u7528 // \u91cd\u7f6e\u8868\u5355 $().ready(function() { var validator = $(\"#signupForm\").validate({ submitHandler:function(form){ alert(\"submitted\"); form.submit(); } }); $(\"#reset\").click(function() { validator.resetForm(); }); }); remote\uff1aURL \u4f7f\u7528ajax\u65b9\u5f0f\u8fdb\u884c\u9a8c\u8bc1\uff0c\u9ed8\u8ba4\u4f1a\u63d0\u4ea4\u5f53\u524d\u9a8c\u8bc1\u7684\u503c\u5230\u8fdc\u7a0b\u5730\u5740\uff0c\u5982\u679c\u9700\u8981\u63d0\u4ea4\u5176\u4ed6\u7684\u503c\uff0c\u53ef\u4ee5\u4f7f\u7528data\u9009\u9879 remote: \"check-email.php\" remote: { url: \"check-email.php\", //\u540e\u53f0\u5904\u7406\u7a0b\u5e8f type: \"post\", //\u6570\u636e\u53d1\u9001\u65b9\u5f0f dataType: \"json\", //\u63a5\u53d7\u6570\u636e\u683c\u5f0f data: { //\u8981\u4f20\u9012\u7684\u6570\u636e username: function() { return $(\"#username\").val(); } } } \u8fdc\u7a0b\u5730\u5740\u53ea\u80fd\u8f93\u51fa \"true\" \u6216 \"false\"\uff0c\u4e0d\u80fd\u6709\u5176\u5b83\u8f93\u51fa addMethod\uff1aname, method, message \u81ea\u5b9a\u4e49\u9a8c\u8bc1\u65b9\u6cd5 // \u4e2d\u6587\u5b57\u4e24\u4e2a\u5b57\u8282 jQuery.validator.addMethod(\"byteRangeLength\", function(value, element, param) { var length = value.length; for(var i = 0; i < value.length; i++){ if(value.charCodeAt(i) > 127){ length++; } } return this.optional(element) || ( length >= param[0] && length < = param[1] ); }, $.validator.format(\"\u8bf7\u786e\u4fdd\u8f93\u5165\u7684\u503c\u5728{0}-{1}\u4e2a\u5b57\u8282\u4e4b\u95f4(\u4e00\u4e2a\u4e2d\u6587\u5b57 \u6458\u81ea\u300ehttp://dcbjavaeye.iteye.com/blog/1125866\u300f","title":"jquery\u8868\u5355\u9a8c\u8bc1validate\u63d2\u4ef6\u5168\u653b\u7565"},{"location":"OPENSOURCE/2015-11-26-maven-%25e8%25ae%25be%25e7%25bd%25aejdk%25e7%25bc%2596%25e8%25af%2591%25e6%25b0%25b4%25e5%25b9%25b3.html/","tags":["maven"],"text":"\u5728pom.xml\u6dfb\u52a0\uff1a < build > < plugins > < plugin > < groupId > org.apache.maven.plugins groupId > < artifactId > maven-compiler-plugin artifactId > 3.1 < configuration > < source >6 source > < target >6 target > < encoding > UTF-8 encoding > configuration > plugin > plugins > build >","title":"maven \u8bbe\u7f6ejdk\u7f16\u8bd1\u6c34\u5e73"},{"location":"OPENSOURCE/2015-11-27-%25e8%25bd%25ac-maven-%25e5%258f%2591%25e5%25b8%2583artifact%25e5%2588%25b0%25e4%25b8%25ad%25e5%25a4%25ae%25e5%25ba%2593.html/","tags":["maven"],"text":"\u6b65\u9aa4\u4e00\uff1a\u6ce8\u518c\u8d26\u53f7\uff0c\u7533\u8bf7ticket\u3002 \u6ce8\u518c\u5728\u8fd9\u91cc\uff1a https://issues.sonatype.org \u7533\u8bf7ticket\uff1a\u521b\u5efa\u4e00\u4e2aissue\uff0c\u6ce8\u610f\u8fd9\u91cc\u8981\u9009OSSRH\uff0c\u4e14\u662fPROJECT\u800c\u4e0d\u662fTASK\uff0cgroup id\u8981\u614e\u91cd\u5199\uff0c\u4e0d\u80fd\u5199\u4f60\u6ca1\u6709\u6743\u9650\u7684\uff0c\u4e0d\u7136\u670d\u52a1\u4eba\u5458\u4f1a\u8ba9\u4f60\u91cd\u5199\uff08\u534a\u5929\u5de6\u53f3\uff09\u3002 \u7533\u8bf7\u6210\u529f\u540e\u4f1a\u63d0\u793a\uff1aConfiguration has been prepared, now you can:please comment on this ticket when you promoted your first release, thanks \u6b65\u9aa4\u4e8c\uff1aGPG\uff0c\u7b7e\u540d\u548c\u52a0\u5bc6\u7528\u3002 \u4e0b\u8f7d\uff1a https://www.gnupg.org/download/index.html \u6ce8\u610f\uff1a\u7b7e\u540d\u7684\u540d\u5b57\uff0c\u90ae\u7bb1\u548c\u6b65\u9aa4\u4e00\u7684\u4e00\u6837\uff0c\u8bb0\u4f4fpassphrase\u7528\u4e8e\u4e0b\u9762\u6b65\u9aa4\u3002 \u6b65\u9aa4\u4e09\uff1a\u7f16\u8bd1\u548c\u63d0\u4ea4\u6587\u4ef6\u3002 \u6ce8\u610f\u4e8b\u9879\uff1a 1\uff09.m2\\settings.xml\u6587\u4ef6\u4e2d\u8981\u52a0\u5165\uff1a [html] view plain copy < servers > < server > < id > sonatype-nexus-snapshots id > < username > your-jira-username username > < password > your-jira-password password > server > < server > < id > sonatype-nexus-staging id > < username > your-jira-username username > < password > your-jira-password password > server > servers > 2) pom.xml\u6587\u4ef6\u4e2d\u8981\u52a0\u5165\uff08project\u6807\u7b7e\u4e0b\uff09\uff1a [html] view plain copy < parent > < groupId > org.sonatype.oss groupId > < artifactId > oss-parent artifactId > < version > 7 version > parent > 3\uff09\u5982\u679c\u51fa\u73b0javadoc\u7f16\u8bd1\u4e0d\u901a\u8fc7\u7684\u53ef\u4ee5\u5728javadoc\u63d2\u4ef6\u4e0b\u52a0\u5165\uff1a [html] view plain copy < configuration > < additionalparam > -Xdoclint:none additionalparam > configuration > 4\uff09 \u6ce8\u610f\u5982\u8fc7\u65f6release\u8981\u52a0\u5165\uff1a [html] view plain copy < plugin > < groupId > org.apache.maven.plugins groupId > < artifactId > maven-gpg-plugin artifactId > < version > ${maven-gpg-plugin.version} version > < executions > < execution > < phase > verify phase > < goals > < goal > sign goal > goals > execution > executions > plugin > 5) \u5982\u679c\u662fjava web\u9879\u76ee\uff0cjavadoc\u53ef\u80fd\u4f1a\u62a5\u9519\uff1a\u627e\u4e0d\u5230\u7c7bjavax.servlet.ServletContext\uff0c\u53ef\u4ee5\u6dfb\u52a0\u4f9d\u8d56\uff1a [html] view plain copy < dependency > < groupId > javax.servlet groupId > < artifactId > javax.servlet-api artifactId > < version > 3.0.1 version > < scope > provided scope > dependency > 6) POM\u7f16\u5199\u53ef\u53c2\u8003 https://github.com/ACC-GIT/ACCWeb/blob/master/pom.xml \u6b65\u9aa4\u56db\uff1arelease\u548c\u63d0\u793a\u540c\u6b65\u3002 \u5148\u5728 https://oss.sonatype.org/#stagingRepositories \u8fdb\u884cclose,release\u7b49\u64cd\u4f5c\uff08\u6ce8\u610f\u8fd9\u91cc\u4f1a\u68c0\u6d4b\uff09 \u7136\u540e\u5728issue\u4e2d\u56de\u590d\u670d\u52a1\u4eba\u5458\uff0c\u63d0\u51fa\u540c\u6b65\u5230\u4e2d\u592e\u5e93\uff08\u534a\u5929\u5de6\u53f3\uff09\u3002 \u6458\u81ea\u300c\u4e92\u8054\u7f51\u300d","title":"maven \u53d1\u5e03artifact\u5230\u4e2d\u592e\u5e93"},{"location":"OPENSOURCE/2015-11-29-%25e9%2585%258d%25e7%25bd%25aeapache-basic%25e5%2592%258cdigest%25e8%25ae%25a4%25e8%25af%2581.html/","tags":["apache2","httpd"],"text":"Apache\u5e38\u89c1\u7684\u7528\u6237\u8ba4\u8bc1\u53ef\u4ee5\u5206\u4e3a\u4e0b\u9762\u4e09\u79cd\uff1a \u57fa\u4e8eIP\uff0c\u5b50\u7f51\u7684\u8bbf\u95ee\u63a7\u5236(ACL) \u57fa\u672c\u7528\u6237\u9a8c\u8bc1(Basic Authentication) \u6d88\u606f\u6458\u8981\u5f0f\u8eab\u4efd\u9a8c\u8bc1(Digest Authentication) \u57fa\u672c\u8eab\u4efd\u9a8c\u8bc1 \u539f\u7406\uff1a \u4e00\u4e2a\u9875\u9762\u8bbf\u95ee\u8bf7\u6c42 1 2 GET /auth/basic/ HTTP/1.1 Host: target Web\u670d\u52a1\u5668\u8981\u6c42\u7528\u4e66\u8f93\u5165\u7528\u6237\u51ed\u636e\uff08\u670d\u52a1\u5668\u8fd4\u56de401\u54cd\u5e94\u5934\u548c\u2019realm\u2019\uff09 1 2 3 4 5 6 7 HTTP/1.1 401 Authorization Required Date: Sat, 08 Jun 2013 12:52:40 GMT WWW-Authenticate: Basic realm=\"Basic auth Dir\" Content-Length: 401 Keep-Alive: timeout=15, max=100 Connection: Keep-Alive Content-Type: text/html; charset=iso-8859-1 \u6d4f\u89c8\u5668\u5f39\u51fa\u767b\u5f55\u7a97\u53e3(\u5305\u542b\u2019realm\u2019)\uff0c\u8981\u6c42\u7528\u63d0\u4f9b\u7528\u6237\u540d/\u5bc6\u7801 1 2 3 GET /auth/basic/ HTTP/1.1 Host: target Authorization: Basic TGVuZ1dhOjEyMzQ1Ng== //Basic\u540e\u9762\u5c31\u662fLengWa:123456\u7ecf\u8fc7Base64\u7f16\u7801\u540e\u7684\u5b57\u7b26\u4e32 \u670d\u52a1\u5668\u5c06\u7528\u6237\u8f93\u5165\u7684\u51ed\u636e\u548c\u670d\u52a1\u5668\u7aef\u7684\u51ed\u636e\u8fdb\u884c\u6bd4\u8f83\u3002\u5982\u679c\u4e00\u76f4\u5219\u8fd4\u56de\u6240\u8bf7\u6c42\u9875\u9762\u7684\u54cd\u5e94\u3002 \u914d\u7f6e: \u2013 \u4ee5\u4fdd\u62a4/data/www/auth/basic\u4e3a\u4f8b Step 1\uff1a \u521b\u5efa\u5bc6\u7801\u6587\u4ef6\uff0c\u5e76\u6dfb\u52a0\u7b2c\u4e00\u4e2a\u7528\u6237\u3002 1 2 3 4 /usr/local/apache/bin> ./htpasswd -c /data/www/auth/basic/user.txt LengWa New password: Re-type new password: Adding password for user LengWa -c = create file \u5e38\u89c4\u6dfb\u52a0\u4e0d\u8981\u4f7f\u7528-c\u9009\u9879\uff0c\u56e0\u4e3a\u5b83\u4f1a\u8986\u76d6\u73b0\u6709\u7684\u6587\u4ef6\u3002 \u8bbe\u7f6e\u6587\u4ef6\u6240\u6709\u6743\u548c\u6743\u9650\uff08root\u53ef\u4ee5\u8fdb\u884c\u8bfb\u5199\uff0cApache Group\u53ea\u53ef\u4ee5\u8bfb\u53d6\uff09 1 2 /data/www/auth/basic > ls -l -rw-r----- 1 root httpd ... user.txt \u6ce8\u610f\uff1a \u5728\u5bc6\u7801\u6587\u4ef6\u4e2d\uff0c\u5bc6\u7801\u662f\u52a0\u5bc6\u5b58\u8d2e\u7684(eg: LengWa:$apr1$MBvROZKM$wP.pdlMonB0P4xGZwl.8G0)\u3002\u4f46\u662f\u5728\u7f51\u7edc\u4e2d\u662f\u660e\u6587\u4f20\u8f93\u7684\u3002 Step 2\uff1a \u914d\u7f6ehttpd.conf 1 2 3 4 5 6 Options Indexes FollowSymLinks allowoverride authconfig order allow,deny allow from all Step3: \u7f16\u8f91/data/www/auth/basic/.htaccess 1 2 3 4 AuthName \"Basic Auth Dir\" AuthType Basic AuthUserFile /data/www/auth/basic/user.txt require valid-user \u91cd\u65b0\u542f\u52a8Apache\u670d\u52a1\u5668\uff0c\u8bbf\u95ee http://127.0.0.1/auth/basic/ \u9a8c\u8bc1\u52a0\u5bc6\u3002 \u6211\u524d\u9762\u8bf4\u8fc7\u8fd9\u79cd\u52a0\u5bc6\u5728\u7f51\u7edc\u4e2d\u4f20\u8f93\u65f6\u662f\u660e\u6587\u4f20\u8f93 Base64 \u7f16\u7801\uff0c\u6211\u4e0d\u8ba4\u4e3a\u8fd9\u662f\u4e00\u79cd\u52a0\u5bc6\u7b97\u6cd5)\u7684\u3002\u5982\u679c\u4f60\u611f\u5174\u8da3\uff0c\u53ef\u4ee5\u6293\u5305\u770b\u770b\u3002 \u6d88\u606f\u6458\u8981\u5f0f\u8eab\u4efd\u9a8c\u8bc1(Digest Authentication) \u539f\u7406\uff1a Digest Authentication\u5728\u57fa\u672c\u8eab\u4efd\u9a8c\u8bc1\u4e0a\u9762\u6269\u5c55\u4e86\u5b89\u5168\u6027. \u670d\u52a1\u5668\u4e3a\u6bcf\u4e00\u8fde\u63a5\u751f\u6210\u4e00\u4e2a\u552f\u4e00\u7684\u968f\u673a\u6570, \u5ba2\u6237\u7aef\u5bf9\u7528\u8fd9\u4e2a\u968f\u673a\u6570\u5bf9\u5bc6\u7801\u8fdb\u884cMD5\u52a0\u5bc6. \u7136\u540e\u53d1\u9001\u5230\u670d\u52a1\u5668. \u670d\u52a1\u5668\u7aef\u4e5f\u7528\u6b64\u968f\u673a\u6570\u5bf9\u5bc6\u7801\u52a0\u5bc6, \u7136\u540e\u548c\u5ba2\u6237\u7aef\u4f20\u9001\u8fc7\u6765\u7684\u52a0\u5bc6\u6570\u636e\u8fdb\u884c\u6bd4\u8f83. \u4e00\u4e2a\u9875\u9762\u8bbf\u95ee\u8bf7\u6c42 1 2 GET /auth/basic/ HTTP/1.1 Host: target Web\u670d\u52a1\u5668\u8981\u6c42\u7528\u4e66\u8f93\u5165\u7528\u6237\u51ed\u636e(\u670d\u52a1\u5668\u8fd4\u56de401\u54cd\u5e94\u5934\u548c\u2019realm\u2019) 1 2 3 4 5 6 7 HTTP/1.1 401 Unauthorized WWW-Authenticate: Digest realm=\"Digest Encrypt\", nonce=\"nmeEHKLeBAA=aa6ac7ab3cae8f1b73b04e1e3048179777a174b3\", opaque=\"0000000000000000\", \\ stale=false, algorithm=MD5, qop=\"auth\" \u6d4f\u89c8\u5668\u5f39\u51fa\u767b\u5f55\u7a97\u53e3(\u5305\u542b\u2019realm\u2019), \u8981\u6c42\u7528\u63d0\u4f9b\u7528\u6237\u540d/\u5bc6\u7801 1 2 3 4 5 6 7 8 9 10 11 12 GET /auth/digest/ HTTP/1.1 Accept: */* Authorization: Digest username=\"LengWa\", realm=\"Digest Encrypt\", qop=\"auth\", algorithm=\"MD5\", uri=\"/auth/digest/\", nonce=\"nmeEHKLeBAA=aa6ac7ab3cae8f1b73b04e1e3048179777a174b3\", nc=00000001, cnonce=\"6092d3a53e37bb44b3a6e0159974108b\", opaque=\"0000000000000000\", response=\"652b2f336aeb085d8dd9d887848c3314\" \u670d\u52a1\u5668\u5c06\u7528\u6237\u8f93\u5165\u52a0\u5bc6\u540e\u7684\u51ed\u636e\u548c\u670d\u52a1\u5668\u7aef\u52a0\u5bc6\u540e\u7684\u7684\u51ed\u636e\u8fdb\u884c\u6bd4\u8f83.\u5982\u679c\u4e00\u81f4\u5219\u8fd4\u56de\u6240\u8bf7\u6c42\u9875\u9762\u7684\u54cd\u5e94. \u914d\u7f6e : Step 1: \u521b\u5efa\u5bc6\u7801\u6587\u4ef6 \u8bed\u6cd5: 1 2 3 4 5 6 htdiget [-c] passwordfile realm username /usr/local/apache/bin> ./htdigest -c /data/www/auth/digest/user.txt \"Digest Encrypt\" LengWa Adding password for LengWa in realm \"Digest Encrypt\" . New password: Re-type new password: -c = create file \u5e38\u89c4\u6dfb\u52a0\u4e0d\u8981\u4f7f\u7528-c\u9009\u9879, \u56e0\u4e3a\u5b83\u4f1a\u8986\u76d6\u73b0\u6709\u7684\u6587\u4ef6. \u8bbe\u7f6e\u6587\u4ef6\u6240\u6709\u6743\u548c\u6743\u9650(root\u53ef\u4ee5\u8fdb\u884c\u8bfb\u5199, Apache Group\u53ea\u53ef\u4ee5\u8bfb\u53d6) 1 2 /data/www/auth/digest/ > ls -l -rw-r----- 1 root httpd ... user.txt user.txt\u683c\u5f0f: LengWa:Digest Encrypt:d95ea4412b0fb517b25c4c46f32e5a2b Step2: \u914d\u7f6ehttpd.conf 1 2 3 4 5 6 7 8 Options Indexes FollowSymLinks AuthType Digest AuthName \"Digest Encrypt\" //\u6ce8\u610f\u8fd9\u91cc\u7684AuthName\u548c\u4e0a\u9762\u7684realm\u5fc5\u987b\u4e00\u81f4(\u800cBasic\u9a8c\u8bc1\u5219\u53ef\u4ee5\u4e0d\u540c). \u5426\u5219\u4f60\u8f93\u5165\u6b63\u786e\u7684\u7528\u6237\u5bc6\u7801\u4e5f\u65e0\u6cd5\u901a\u8fc7\u8ba4\u8bc1 AuthDigestProvider file AuthUserFile /data/www/auth/digest/user.txt require valid-user \u6ce8 \uff1a\u8fd9\u91cc\u7684Directory \u4e5f\u53ef\u7528 Location \u3002 \u73b0\u5728\u57fa\u4e8eDigest\u7684\u9a8c\u8bc1\u73af\u5883\u5c31\u642d\u5efa\u597d\u4e86. \u6ce8: \u5728Basic\u9a8c\u8bc1\u4e2d. \u6211\u4f7f\u7528\u4e86.htaccess \u800c\u5728Digest\u9a8c\u8bc1\u4e2d\u6211\u6ca1\u6709\u4f7f\u7528. \u53ea\u662f\u4e3a\u4e86\u4e2a\u4eba\u7684\u9700\u8981. \u4f60\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u9700\u8981\u8fdb\u884c\u914d\u7f6e. \u7591\u60d1: \u5bf9\u4e8e\u5728\u914d\u7f6eDigest httpd.conf\u65f6, AuthName \u5fc5\u987b\u548c\u4e0a\u9762\u7684realm\u8fd8\u662f\u4e0d\u662f\u5f88\u660e\u767d. \u4e3a\u4ec0\u4e48\u5fc5\u987b\u4e00\u81f4. \u5982\u679c\u6709\u54ea\u4f4d\u5927\u795e\u77e5\u9053. \u671b\u4e0d\u541d\u8d50\u6559\u3002 \u603b\u7ed3: Basic\u9a8c\u8bc1\u65b9\u5f0f\u914d\u7f6e\u76f8\u5bf9\u7b80\u5355\uff0c\u4f46\u662f\u5b89\u5168\u6027\u592a\u4f4e\uff0c\u4e0d\u9002\u5408\u4e00\u4e9b\u52a0\u5bc6\u8981\u6c42\u6bd4\u8f83\u9ad8\u7684\u7ad9\u70b9\u3002 Digest\u5219\u76f8\u53cd\uff0c\u52a0\u5bc6\u6027\u662f\u5f88\u9ad8\uff0c\u4f46\u662f\u914d\u7f6e\u8d77\u6765\u8fd8\u662f\u6709\u4e00\u70b9\u96be\u5ea6\u7684\uff0c\u6240\u4ee5\u5927\u5bb6\u6839\u636e\u81ea\u5df1\u9700\u8981\uff0c\u9009\u62e9\u4e0d\u540c\u7684\u52a0\u5bc6\u65b9\u5f0f\u3002 \u6458\u81ea\u300ehttp://blog.jobbole.com/41519/\u300f","title":"\u914d\u7f6eApache Basic\u548cDigest\u8ba4\u8bc1"},{"location":"OPENSOURCE/2015-11-29-zookeeper%25e9%259b%2586%25e7%25be%25a4%25e9%2585%258d%25e7%25bd%25ae.html/","tags":["zookeeper"],"text":"ZooKeeper\u662f\u4e00\u4e2a\u5206\u5e03\u5f0f\u5f00\u6e90\u6846\u67b6\uff0c\u63d0\u4f9b\u4e86\u534f\u8c03\u5206\u5e03\u5f0f\u5e94\u7528\u7684\u57fa\u672c\u670d\u52a1\uff0c\u5b83\u5411\u5916\u90e8\u5e94\u7528\u66b4\u9732\u4e00\u7ec4\u901a\u7528\u670d\u52a1\u2014\u2014\u5206\u5e03\u5f0f\u540c\u6b65\uff08Distributed Synchronization\uff09\u3001\u547d\u540d\u670d\u52a1\uff08Naming Service\uff09\u3001\u96c6\u7fa4\u7ef4\u62a4\uff08Group Maintenance\uff09\u7b49\uff0c\u7b80\u5316\u5206\u5e03\u5f0f\u5e94\u7528\u534f\u8c03\u53ca\u5176\u7ba1\u7406\u7684\u96be\u5ea6\uff0c\u63d0\u4f9b\u9ad8\u6027\u80fd\u7684\u5206\u5e03\u5f0f\u670d\u52a1\u3002ZooKeeper\u672c\u8eab\u53ef\u4ee5\u4ee5Standalone\u6a21\u5f0f\u5b89\u88c5\u8fd0\u884c\uff0c\u4e0d\u8fc7\u5b83\u7684\u957f\u5904\u5728\u4e8e\u901a\u8fc7\u5206\u5e03\u5f0fZooKeeper\u96c6\u7fa4\uff08\u4e00\u4e2aLeader\uff0c\u591a\u4e2aFollower\uff09\uff0c\u57fa\u4e8e\u4e00\u5b9a\u7684\u7b56\u7565\u6765\u4fdd\u8bc1ZooKeeper\u96c6\u7fa4\u7684\u7a33\u5b9a\u6027\u548c\u53ef\u7528\u6027\uff0c\u4ece\u800c\u5b9e\u73b0\u5206\u5e03\u5f0f\u5e94\u7528\u7684\u53ef\u9760\u6027\u3002 \u6709\u5173ZooKeeper\u7684\u4ecb\u7ecd\uff0c\u7f51\u4e0a\u5f88\u591a\uff0c\u4e5f\u53ef\u4ee5\u53c2\u8003\u6587\u7ae0\u540e\u9762\uff0c\u6211\u6574\u7406\u7684\u4e00\u4e9b\u76f8\u5173\u94fe\u63a5\u3002 \u4e0b\u9762\uff0c\u6211\u4eec\u7b80\u5355\u8bf4\u660e\u4e00\u4e0bZooKeeper\u7684\u914d\u7f6e\u3002 ZooKeeper Standalone\u6a21\u5f0f \u4eceApache\u7f51\u7ad9\u4e0a\uff08zookeeper.apache.org\uff09\u4e0b\u8f7dZooKeeper\u8f6f\u4ef6\u5305\uff0c\u6211\u9009\u62e9\u4e863.3.4\u7248\u672c\u7684\uff08zookeeper-3.3.4.tar.gz\uff09\uff0c\u5728\u4e00\u53f0Linux\u673a\u5668\u4e0a\u5b89\u88c5\u975e\u5e38\u5bb9\u6613\uff0c\u53ea\u9700\u8981\u89e3\u538b\u7f29\u540e\uff0c\u7b80\u5355\u914d\u7f6e\u4e00\u4e0b\u5373\u53ef\u4ee5\u542f\u52a8ZooKeeper\u670d\u52a1\u5668\u8fdb\u7a0b\u3002 \u5c06zookeeper-3.3.4/conf\u76ee\u5f55\u4e0b\u9762\u7684 zoo_sample.cfg\u4fee\u6539\u4e3azoo.cfg\uff0c\u914d\u7f6e\u6587\u4ef6\u5185\u5bb9\u5982\u4e0b\u6240\u793a\uff1a [plain] view plain copy tickTime=2000 dataDir=/home/hadoop/storage/zookeeper clientPort=2181 initLimit=5 syncLimit=2 \u4e0a\u9762\u5404\u4e2a\u914d\u7f6e\u53c2\u6570\u7684\u542b\u4e49\u4e5f\u975e\u5e38\u7b80\u5355\uff0c\u5f15\u7528\u5982\u4e0b\u6240\u793a\uff1a [plain] view plain copy tickTime \u2014\u2014 the basic time unit in milliseconds used by ZooKeeper. It is used to do heartbeats and the minimum session timeout will be twice the tickTime. dataDir \u2014\u2014 the location to store the in-memory database snapshots and, unless specified otherwise, the transaction log of updates to the database. clientPort \u2014\u2014 the port to listen for client connections \u4e0b\u9762\u542f\u52a8ZooKeeper\u670d\u52a1\u5668\u8fdb\u7a0b\uff1a [plain] view plain copy cd zookeeper-3.3.4/ bin/zkServer.sh start \u901a\u8fc7jps\u547d\u4ee4\u53ef\u4ee5\u67e5\u770bZooKeeper\u670d\u52a1\u5668\u8fdb\u7a0b\uff0c\u540d\u79f0\u4e3aQuorumPeerMain\u3002 \u5728\u5ba2\u6237\u7aef\u8fde\u63a5ZooKeeper\u670d\u52a1\u5668\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a [plain] view plain copy bin/zkCli.sh -server dynamic:2181 \u4e0a\u9762dynamic\u662f\u6211\u7684\u4e3b\u673a\u540d\uff0c\u5982\u679c\u5728\u672c\u673a\u6267\u884c\uff0c\u5219\u6267\u884c\u5982\u4e0b\u547d\u4ee4\u5373\u53ef\uff1a [plain] view plain copy bin/zkCli.sh \u5ba2\u6237\u7aef\u8fde\u63a5\u4fe1\u606f\u5982\u4e0b\u6240\u793a\uff1a \u63a5\u7740\uff0c\u53ef\u4ee5\u4f7f\u7528help\u67e5\u770bZookeeper\u5ba2\u6237\u7aef\u53ef\u4ee5\u4f7f\u7528\u7684\u57fa\u672c\u64cd\u4f5c\u547d\u4ee4\u3002 ZooKeeper Distributed\u6a21\u5f0f ZooKeeper\u5206\u5e03\u5f0f\u6a21\u5f0f\u5b89\u88c5\uff08ZooKeeper\u96c6\u7fa4\uff09\u4e5f\u6bd4\u8f83\u5bb9\u6613\uff0c\u8fd9\u91cc\u8bf4\u660e\u4e00\u4e0b\u57fa\u672c\u8981\u70b9\u3002 \u9996\u5148\u8981\u660e\u786e\u7684\u662f\uff0cZooKeeper\u96c6\u7fa4\u662f\u4e00\u4e2a\u72ec\u7acb\u7684\u5206\u5e03\u5f0f\u534f\u8c03\u670d\u52a1\u96c6\u7fa4\uff0c\u201c\u72ec\u7acb\u201d\u7684\u542b\u4e49\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u60f3\u4f7f\u7528ZooKeeper\u5b9e\u73b0\u5206\u5e03\u5f0f\u5e94\u7528\u7684\u534f\u8c03\u4e0e\u7ba1\u7406\uff0c\u7b80\u5316\u534f\u8c03\u4e0e\u7ba1\u7406\uff0c\u4efb\u4f55\u5206\u5e03\u5f0f\u5e94\u7528\u90fd\u53ef\u4ee5\u4f7f\u7528\uff0c\u8fd9\u5c31\u8981\u5f52\u529f\u4e8eZookeeper\u7684\u6570\u636e\u6a21\u578b\uff08Data Model\uff09\u548c\u5c42\u6b21\u547d\u540d\u7a7a\u95f4\uff08Hierarchical Namespace\uff09\u7ed3\u6784\uff0c\u8be6\u7ec6\u53ef\u4ee5\u53c2\u8003 http://zookeeper.apache.org/doc/trunk/zookeeperOver.html \u3002\u5728\u8bbe\u8ba1\u4f60\u7684\u5206\u5e03\u5f0f\u5e94\u7528\u534f\u8c03\u670d\u52a1\u65f6\uff0c\u9996\u8981\u7684\u5c31\u662f\u8003\u8651\u5982\u4f55\u7ec4\u7ec7\u5c42\u6b21\u547d\u540d\u7a7a\u95f4\u3002 \u4e0b\u9762\u8bf4\u660e\u5206\u5e03\u5f0f\u6a21\u5f0f\u7684\u5b89\u88c5\u914d\u7f6e\uff0c\u8fc7\u7a0b\u5982\u4e0b\u6240\u793a\uff1a \u7b2c\u4e00\u6b65\uff1a\u4e3b\u673a\u540d\u79f0\u5230IP\u5730\u5740\u6620\u5c04\u914d\u7f6e ZooKeeper\u96c6\u7fa4\u4e2d\u5177\u6709\u4e24\u4e2a\u5173\u952e\u7684\u89d2\u8272\uff1aLeader\u548cFollower\u3002\u96c6\u7fa4\u4e2d\u6240\u6709\u7684\u7ed3\u70b9\u4f5c\u4e3a\u4e00\u4e2a\u6574\u4f53\u5bf9\u5206\u5e03\u5f0f\u5e94\u7528\u63d0\u4f9b\u670d\u52a1\uff0c\u96c6\u7fa4\u4e2d\u6bcf\u4e2a\u7ed3\u70b9\u4e4b\u95f4\u90fd\u4e92\u76f8\u8fde\u63a5\uff0c\u6240\u4ee5\uff0c\u5728\u914d\u7f6e\u7684ZooKeeper\u96c6\u7fa4\u7684\u65f6\u5019\uff0c\u6bcf\u4e00\u4e2a\u7ed3\u70b9\u7684host\u5230IP\u5730\u5740\u7684\u6620\u5c04\u90fd\u8981\u914d\u7f6e\u4e0a\u96c6\u7fa4\u4e2d\u5176\u5b83\u7ed3\u70b9\u7684\u6620\u5c04\u4fe1\u606f\u3002 \u4f8b\u5982\uff0c\u6211\u7684ZooKeeper\u96c6\u7fa4\u4e2d\u6bcf\u4e2a\u7ed3\u70b9\u7684\u914d\u7f6e\uff0c\u4ee5slave-01\u4e3a\u4f8b\uff0c/etc/hosts\u5185\u5bb9\u5982\u4e0b\u6240\u793a\uff1a [plain] view plain copy 192.168.0.179 slave-01 192.168.0.178 slave-02 192.168.0.177 slave-03 ZooKeeper\u91c7\u7528\u4e00\u79cd\u79f0\u4e3aLeader election\u7684\u9009\u4e3e\u7b97\u6cd5\u3002\u5728\u6574\u4e2a\u96c6\u7fa4\u8fd0\u884c\u8fc7\u7a0b\u4e2d\uff0c\u53ea\u6709\u4e00\u4e2aLeader\uff0c\u5176\u4ed6\u7684\u90fd\u662fFollower\uff0c\u5982\u679cZooKeeper\u96c6\u7fa4\u5728\u8fd0\u884c\u8fc7\u7a0b\u4e2dLeader\u51fa\u4e86\u95ee\u9898\uff0c\u7cfb\u7edf\u4f1a\u91c7\u7528\u8be5\u7b97\u6cd5\u91cd\u65b0\u9009\u51fa\u4e00\u4e2aLeader\u3002\u56e0\u6b64\uff0c\u5404\u4e2a\u7ed3\u70b9\u4e4b\u95f4\u8981\u80fd\u591f\u4fdd\u8bc1\u4e92\u76f8\u8fde\u63a5\uff0c\u5fc5\u987b\u914d\u7f6e\u4e0a\u8ff0\u6620\u5c04\u3002 ZooKeeper\u96c6\u7fa4\u542f\u52a8\u7684\u65f6\u5019\uff0c\u4f1a\u9996\u5148\u9009\u51fa\u4e00\u4e2aLeader\uff0c\u5728Leader election\u8fc7\u7a0b\u4e2d\uff0c\u67d0\u4e00\u4e2a\u6ee1\u8db3\u9009\u4e3e\u7b97\u7684\u7ed3\u70b9\u5c31\u80fd\u6210\u4e3aLeader\u3002\u6574\u4e2a\u96c6\u7fa4\u7684\u67b6\u6784\u53ef\u4ee5\u53c2\u8003 http://zookeeper.apache.org/doc/trunk/zookeeperOver.html#sc_designGoals \u3002 \u7b2c\u4e8c\u6b65\uff1a\u4fee\u6539ZooKeeper\u914d\u7f6e\u6587\u4ef6 \u5728\u5176\u4e2d\u4e00\u53f0\u673a\u5668\uff08slave-01\uff09\u4e0a\uff0c\u89e3\u538b\u7f29zookeeper-3.3.4.tar.gz\uff0c\u4fee\u6539\u914d\u7f6e\u6587\u4ef6conf/zoo.cfg\uff0c\u5185\u5bb9\u5982\u4e0b\u6240\u793a\uff1a [plain] view plain copy tickTime=2000 dataDir=/home/hadoop/storage/zookeeper clientPort=2181 initLimit=5 syncLimit=2 server.1=slave-01:2888:3888 server.2=slave-02:2888:3888 server.3=slave-03:2888:3888 \u4e0a\u8ff0\u914d\u7f6e\u5185\u5bb9\u8bf4\u660e\uff0c\u53ef\u4ee5\u53c2\u8003 http://zookeeper.apache.org/doc/trunk/zookeeperStarted.html#sc_RunningReplicatedZooKeeper \u3002 \u7b2c\u4e09\u6b65\uff1a\u8fdc\u7a0b\u590d\u5236\u5206\u53d1\u5b89\u88c5\u6587\u4ef6 \u4e0a\u9762\u5df2\u7ecf\u5728\u4e00\u53f0\u673a\u5668slave-01\u4e0a\u914d\u7f6e\u5b8c\u6210ZooKeeper\uff0c\u73b0\u5728\u53ef\u4ee5\u5c06\u8be5\u914d\u7f6e\u597d\u7684\u5b89\u88c5\u6587\u4ef6\u8fdc\u7a0b\u62f7\u8d1d\u5230\u96c6\u7fa4\u4e2d\u7684\u5404\u4e2a\u7ed3\u70b9\u5bf9\u5e94\u7684\u76ee\u5f55\u4e0b\uff1a [plain] view plain copy cd /home/hadoop/installation/ scp -r zookeeper-3.3.4/ hadoop@slave-02:/home/hadoop/installation/ scp -r zookeeper-3.3.4/ hadoop@slave-03:/home/hadoop/installation/ \u7b2c\u56db\u6b65\uff1a\u8bbe\u7f6emyid \u5728\u6211\u4eec\u914d\u7f6e\u7684dataDir\u6307\u5b9a\u7684\u76ee\u5f55\u4e0b\u9762\uff0c\u521b\u5efa\u4e00\u4e2amyid\u6587\u4ef6\uff0c\u91cc\u9762\u5185\u5bb9\u4e3a\u4e00\u4e2a\u6570\u5b57\uff0c\u7528\u6765\u6807\u8bc6\u5f53\u524d\u4e3b\u673a\uff0cconf/zoo.cfg\u6587\u4ef6\u4e2d\u914d\u7f6e\u7684server.X\u4e2dX\u4e3a\u4ec0\u4e48\u6570\u5b57\uff0c\u5219myid\u6587\u4ef6\u4e2d\u5c31\u8f93\u5165\u8fd9\u4e2a\u6570\u5b57\uff0c\u4f8b\u5982\uff1a [plain] view plain copy hadoop@slave-01:~/installation/zookeeper-3.3.4$ echo \"1\" > /home/hadoop/storage/zookeeper/myid hadoop@slave-02:~/installation/zookeeper-3.3.4$ echo \"2\" > /home/hadoop/storage/zookeeper/myid hadoop@slave-03:~/installation/zookeeper-3.3.4$ echo \"3\" > /home/hadoop/storage/zookeeper/myid \u6309\u7167\u4e0a\u8ff0\u8fdb\u884c\u914d\u7f6e\u5373\u53ef\u3002 \u7b2c\u4e94\u6b65\uff1a\u542f\u52a8ZooKeeper\u96c6\u7fa4 \u5728ZooKeeper\u96c6\u7fa4\u7684\u6bcf\u4e2a\u7ed3\u70b9\u4e0a\uff0c\u6267\u884c\u542f\u52a8ZooKeeper\u670d\u52a1\u7684\u811a\u672c\uff0c\u5982\u4e0b\u6240\u793a\uff1a [plain] view plain copy hadoop@slave-01:~/installation/zookeeper-3.3.4$ bin/zkServer.sh start hadoop@slave-02:~/installation/zookeeper-3.3.4$ bin/zkServer.sh start hadoop@slave-03:~/installation/zookeeper-3.3.4$ bin/zkServer.sh start \u4ee5\u7ed3\u70b9slave-01\u4e3a\u4f8b\uff0c\u65e5\u5fd7\u5982\u4e0b\u6240\u793a\uff1a [plain] view plain copy 2012-01-08 06:51:23,210 - INFO [QuorumPeer:/0:0:0:0:0:0:0:0:2181:Environment@97] - Server environment:java.io.tmpdir=/tmp 2012-01-08 06:51:23,212 - INFO [QuorumPeer:/0:0:0:0:0:0:0:0:2181:Environment@97] - Server environment:java.compiler= 2012-01-08 06:51:23,212 - INFO [QuorumPeer:/0:0:0:0:0:0:0:0:2181:Environment@97] - Server environment:os.name=Linux 2012-01-08 06:51:23,212 - INFO [QuorumPeer:/0:0:0:0:0:0:0:0:2181:Environment@97] - Server environment:os.arch=i386 2012-01-08 06:51:23,213 - INFO [QuorumPeer:/0:0:0:0:0:0:0:0:2181:Environment@97] - Server environment:os.version=3.0.0-14- \u6211\u542f\u52a8\u7684\u987a\u5e8f\u662fslave-01>slave-02>slave-03\uff0c\u7531\u4e8eZooKeeper\u96c6\u7fa4\u542f\u52a8\u7684\u65f6\u5019\uff0c\u6bcf\u4e2a\u7ed3\u70b9\u90fd\u8bd5\u56fe\u53bb\u8fde\u63a5\u96c6\u7fa4\u4e2d\u7684\u5176\u5b83\u7ed3\u70b9\uff0c\u5148\u542f\u52a8\u7684\u80af\u5b9a\u8fde\u4e0d\u4e0a\u540e\u9762\u8fd8\u6ca1\u542f\u52a8\u7684\uff0c\u6240\u4ee5\u4e0a\u9762\u65e5\u5fd7\u524d\u9762\u90e8\u5206\u7684\u5f02\u5e38\u662f\u53ef\u4ee5\u5ffd\u7565\u7684\u3002\u901a\u8fc7\u540e\u9762\u90e8\u5206\u53ef\u4ee5\u770b\u5230\uff0c\u96c6\u7fa4\u5728\u9009\u51fa\u4e00\u4e2aLeader\u540e\uff0c\u6700\u540e\u7a33\u5b9a\u4e86\u3002 \u5176\u4ed6\u7ed3\u70b9\u53ef\u80fd\u4e5f\u51fa\u73b0\u7c7b\u4f3c\u95ee\u9898\uff0c\u5c5e\u4e8e\u6b63\u5e38\u3002 \u7b2c\u516d\u6b65\uff1a\u5b89\u88c5\u9a8c\u8bc1 \u53ef\u4ee5\u901a\u8fc7ZooKeeper\u7684\u811a\u672c\u6765\u67e5\u770b\u542f\u52a8\u72b6\u6001\uff0c\u5305\u62ec\u96c6\u7fa4\u4e2d\u5404\u4e2a\u7ed3\u70b9\u7684\u89d2\u8272\uff08\u6216\u662fLeader\uff0c\u6216\u662fFollower\uff09\uff0c\u5982\u4e0b\u6240\u793a\uff0c\u662f\u5728ZooKeeper\u96c6\u7fa4\u4e2d\u7684\u6bcf\u4e2a\u7ed3\u70b9\u4e0a\u67e5\u8be2\u7684\u7ed3\u679c\uff1a [plain] view plain copy hadoop@slave-01:~/installation/zookeeper-3.3.4$ bin/zkServer.sh status JMX enabled by default Using config: /home/hadoop/installation/zookeeper-3.3.4/bin/../conf/zoo.cfg Mode: follower hadoop@slave-02:~/installation/zookeeper-3.3.4$ bin/zkServer.sh status JMX enabled by default Using config: /home/hadoop/installation/zookeeper-3.3.4/bin/../conf/zoo.cfg Mode: leader hadoop@slave-03:~/installation/zookeeper-3.3.4$ bin/zkServer.sh status JMX enabled by default Using config: /home/hadoop/installation/zookeeper-3.3.4/bin/../conf/zoo.cfg Mode: follower \u901a\u8fc7\u4e0a\u9762\u72b6\u6001\u67e5\u8be2\u7ed3\u679c\u53ef\u89c1\uff0cslave-02\u662f\u96c6\u7fa4\u7684Leader\uff0c\u5176\u4f59\u7684\u4e24\u4e2a\u7ed3\u70b9\u662fFollower\u3002 \u53e6\u5916\uff0c\u53ef\u4ee5\u901a\u8fc7\u5ba2\u6237\u7aef\u811a\u672c\uff0c\u8fde\u63a5\u5230ZooKeeper\u96c6\u7fa4\u4e0a\u3002\u5bf9\u4e8e\u5ba2\u6237\u7aef\u6765\u8bf4\uff0cZooKeeper\u662f\u4e00\u4e2a\u6574\u4f53\uff08ensemble\uff09\uff0c\u8fde\u63a5\u5230ZooKeeper\u96c6\u7fa4\u5b9e\u9645\u4e0a\u611f\u89c9\u5728\u72ec\u4eab\u6574\u4e2a\u96c6\u7fa4\u7684\u670d\u52a1\uff0c\u6240\u4ee5\uff0c\u4f60\u53ef\u4ee5\u5728\u4efb\u4f55\u4e00\u4e2a\u7ed3\u70b9\u4e0a\u5efa\u7acb\u5230\u670d\u52a1\u96c6\u7fa4\u7684\u8fde\u63a5\uff0c\u4f8b\u5982\uff1a [plain] view plain copy hadoop@slave-03:~/installation/zookeeper-3.3.4$ bin/zkCli.sh -server slave-01:2181 Connecting to slave-01:2181 2012-01-08 07:14:21,068 - INFO [main:Environment@97] - Client environment:zookeeper.version=3.3.3-1203054, built on 11/17/2011 05:47 GMT \u5f53\u524d\u6839\u8def\u5f84\u4e3a/zookeeper\u3002 \u603b\u7ed3\u8bf4\u660e \u4e3b\u673a\u540d\u4e0eIP\u5730\u5740\u6620\u5c04\u914d\u7f6e\u95ee\u9898 \u542f\u52a8ZooKeeper\u96c6\u7fa4\u65f6\uff0c\u5982\u679cZooKeeper\u96c6\u7fa4\u4e2dslave-01\u7ed3\u70b9\u7684\u65e5\u5fd7\u51fa\u73b0\u5982\u4e0b\u9519\u8bef\uff1a [plain] view plain copy java.net.SocketTimeoutException at sun.nio.ch.SocketAdaptor.connect(SocketAdaptor.java:109) at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:371) at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:404) at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:688) at org.apache.zookeeper.server.quorum.QuorumPeer.run(QuorumPeer.java:622) 2012-01-08 06:37:46,026 - INFO [QuorumPeer:/0:0:0:0:0:0:0:0:2181:FastLeaderElection@697] - Notification time out: 6400 2012-01-08 06:37:57,431 - WARN [QuorumPeer:/0:0:0:0:0:0:0:0:2181:QuorumCnxManager@384] - Cannot open channel to 2 at election address slave-02/202.106.199.35:3888 java.net.SocketTimeoutException at sun.nio.ch.SocketAdaptor.connect(SocketAdaptor.java:109) at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectOne(QuorumCnxManager.java:371) at org.apache.zookeeper.server.quorum.QuorumCnxManager.connectAll(QuorumCnxManager.java:404) at org.apache.zookeeper.server.quorum.FastLeaderElection.lookForLeader(FastLeaderElection.java:688) \u5f88\u663e\u7136\uff0cslave-01\u5728\u542f\u52a8\u65f6\u8fde\u63a5\u96c6\u7fa4\u4e2d\u5176\u4ed6\u7ed3\u70b9\uff08slave-02\u3001slave-03\uff09\u65f6\uff0c\u4e3b\u673a\u540d\u6620\u5c04\u7684IP\u4e0e\u6211\u4eec\u5b9e\u9645\u914d\u7f6e\u7684\u4e0d\u4e00\u81f4\uff0c\u6240\u4ee5\u96c6\u7fa4\u4e2d\u5404\u4e2a\u7ed3\u70b9\u4e4b\u95f4\u65e0\u6cd5\u5efa\u7acb\u94fe\u8def\uff0c\u6574\u4e2aZooKeeper\u96c6\u7fa4\u542f\u52a8\u662f\u5931\u8d25\u7684\u3002 \u4e0a\u9762\u9519\u8bef\u65e5\u5fd7\u4e2dslave-02/202.106.199.35:3888\u5b9e\u9645\u5e94\u8be5\u662fslave-02/202.192.168.0.178:3888\u5c31\u5bf9\u4e86\uff0c\u4f46\u662f\u5728\u8fdb\u884c\u57df\u540d\u89e3\u6790\u7684\u65f6\u5019\u6620\u5c04\u6709\u95ee\u9898\uff0c\u4fee\u6539\u6bcf\u4e2a\u7ed3\u70b9\u7684/etc/hosts\u6587\u4ef6\uff0c\u5c06ZooKeeper\u96c6\u7fa4\u4e2d\u6240\u6709\u7ed3\u70b9\u4e3b\u673a\u540d\u5230IP\u5730\u5740\u7684\u6620\u5c04\u914d\u7f6e\u4e0a \u6458\u81ea\u300e\u4e92\u8054\u7f51\u300f","title":"zookeeper\u96c6\u7fa4\u914d\u7f6e"},{"location":"OPENSOURCE/2015-12-05-google-java%25e7%25bc%2596%25e7%25a8%258b%25e9%25a3%258e%25e6%25a0%25bc%25e6%258c%2587%25e5%258d%2597.html/","tags":["java","\u89c4\u8303"],"text":"January 20, 2014 \u4f5c\u8005\uff1aHawstein \u51fa\u5904\uff1a http://hawstein.com/posts/google-java-style.html \u58f0\u660e\uff1a\u672c\u6587\u91c7\u7528\u4ee5\u4e0b\u534f\u8bae\u8fdb\u884c\u6388\u6743\uff1a \u81ea\u7531\u8f6c\u8f7d-\u975e\u5546\u7528-\u975e\u884d\u751f-\u4fdd\u6301\u7f72\u540d|Creative Commons BY-NC-ND 3.0 \uff0c\u8f6c\u8f7d\u8bf7\u6ce8\u660e\u4f5c\u8005\u53ca\u51fa\u5904\u3002 \u76ee\u5f55 \u524d\u8a00 \u6e90\u6587\u4ef6\u57fa\u7840 \u6e90\u6587\u4ef6\u7ed3\u6784 \u683c\u5f0f \u547d\u540d\u7ea6\u5b9a \u7f16\u7a0b\u5b9e\u8df5 Javadoc \u540e\u8bb0 \u524d\u8a00 \u8fd9\u4efd\u6587\u6863\u662fGoogle Java\u7f16\u7a0b\u98ce\u683c\u89c4\u8303\u7684\u5b8c\u6574\u5b9a\u4e49\u3002\u5f53\u4e14\u4ec5\u5f53\u4e00\u4e2aJava\u6e90\u6587\u4ef6\u7b26\u5408\u6b64\u6587\u6863\u4e2d\u7684\u89c4\u5219\uff0c \u6211\u4eec\u624d\u8ba4\u4e3a\u5b83\u7b26\u5408Google\u7684Java\u7f16\u7a0b\u98ce\u683c\u3002 \u4e0e\u5176\u5b83\u7684\u7f16\u7a0b\u98ce\u683c\u6307\u5357\u4e00\u6837\uff0c\u8fd9\u91cc\u6240\u8ba8\u8bba\u7684\u4e0d\u4ec5\u4ec5\u662f\u7f16\u7801\u683c\u5f0f\u7f8e\u4e0d\u7f8e\u89c2\u7684\u95ee\u9898\uff0c \u540c\u65f6\u4e5f\u8ba8\u8bba\u4e00\u4e9b\u7ea6\u5b9a\u53ca\u7f16\u7801\u6807\u51c6\u3002\u7136\u800c\uff0c\u8fd9\u4efd\u6587\u6863\u4e3b\u8981\u4fa7\u91cd\u4e8e\u6211\u4eec\u6240\u666e\u904d\u9075\u5faa\u7684\u89c4\u5219\uff0c \u5bf9\u4e8e\u90a3\u4e9b\u4e0d\u662f\u660e\u786e\u5f3a\u5236\u8981\u6c42\u7684\uff0c\u6211\u4eec\u5c3d\u91cf\u907f\u514d\u63d0\u4f9b\u610f\u89c1\u3002 1.1 \u672f\u8bed\u8bf4\u660e \u5728\u672c\u6587\u6863\u4e2d\uff0c\u9664\u975e\u53e6\u6709\u8bf4\u660e\uff1a \u672f\u8bedclass\u53ef\u8868\u793a\u4e00\u4e2a\u666e\u901a\u7c7b\uff0c\u679a\u4e3e\u7c7b\uff0c\u63a5\u53e3\u6216\u662fannotation\u7c7b\u578b( @interface ) \u672f\u8bedcomment\u53ea\u7528\u6765\u6307\u4ee3\u5b9e\u73b0\u7684\u6ce8\u91ca(implementation comments)\uff0c\u6211\u4eec\u4e0d\u4f7f\u7528\u201cdocumentation comments\u201d\u4e00\u8bcd\uff0c\u800c\u662f\u7528Javadoc\u3002 \u5176\u4ed6\u7684\u672f\u8bed\u8bf4\u660e\u4f1a\u5076\u5c14\u5728\u540e\u9762\u7684\u6587\u6863\u51fa\u73b0\u3002 1.2 \u6307\u5357\u8bf4\u660e \u672c\u6587\u6863\u4e2d\u7684\u793a\u4f8b\u4ee3\u7801\u5e76\u4e0d\u4f5c\u4e3a\u89c4\u8303\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u867d\u7136\u793a\u4f8b\u4ee3\u7801\u662f\u9075\u5faaGoogle\u7f16\u7a0b\u98ce\u683c\uff0c\u4f46\u5e76\u4e0d\u610f\u5473\u7740\u8fd9\u662f\u5c55\u73b0\u8fd9\u4e9b\u4ee3\u7801\u7684\u552f\u4e00\u65b9\u5f0f\u3002 \u793a\u4f8b\u4e2d\u7684\u683c\u5f0f\u9009\u62e9\u4e0d\u5e94\u8be5\u88ab\u5f3a\u5236\u5b9a\u4e3a\u89c4\u5219\u3002 \u6e90\u6587\u4ef6\u57fa\u7840 2.1 \u6587\u4ef6\u540d \u6e90\u6587\u4ef6\u4ee5\u5176\u6700\u9876\u5c42\u7684\u7c7b\u540d\u6765\u547d\u540d\uff0c\u5927\u5c0f\u5199\u654f\u611f\uff0c\u6587\u4ef6\u6269\u5c55\u540d\u4e3a .java \u3002 2.2 \u6587\u4ef6\u7f16\u7801\uff1aUTF-8 \u6e90\u6587\u4ef6\u7f16\u7801\u683c\u5f0f\u4e3aUTF-8\u3002 2.3 \u7279\u6b8a\u5b57\u7b26 2.3.1 \u7a7a\u767d\u5b57\u7b26 \u9664\u4e86\u884c\u7ed3\u675f\u7b26\u5e8f\u5217\uff0cASCII\u6c34\u5e73\u7a7a\u683c\u5b57\u7b26(0x20\uff0c\u5373\u7a7a\u683c)\u662f\u6e90\u6587\u4ef6\u4e2d\u552f\u4e00\u5141\u8bb8\u51fa\u73b0\u7684\u7a7a\u767d\u5b57\u7b26\uff0c\u8fd9\u610f\u5473\u7740\uff1a \u6240\u6709\u5176\u5b83\u5b57\u7b26\u4e32\u4e2d\u7684\u7a7a\u767d\u5b57\u7b26\u90fd\u8981\u8fdb\u884c\u8f6c\u4e49\u3002 \u5236\u8868\u7b26\u4e0d\u7528\u4e8e\u7f29\u8fdb\u3002 2.3.2 \u7279\u6b8a\u8f6c\u4e49\u5e8f\u5217 \u5bf9\u4e8e\u5177\u6709\u7279\u6b8a \u8f6c\u4e49\u5e8f\u5217 \u7684\u4efb\u4f55\u5b57\u7b26(\\b, \\t, \\n, \\f, \\r, \\\u201c, \\\u2018\u53ca\\)\uff0c\u6211\u4eec\u4f7f\u7528\u5b83\u7684\u8f6c\u4e49\u5e8f\u5217\uff0c\u800c\u4e0d\u662f\u76f8\u5e94\u7684\u516b\u8fdb\u5236(\u6bd4\u5982 \\012 )\u6216Unicode(\u6bd4\u5982 \\u000a )\u8f6c\u4e49\u3002 2.3.3 \u975eASCII\u5b57\u7b26 \u5bf9\u4e8e\u5269\u4f59\u7684\u975eASCII\u5b57\u7b26\uff0c\u662f\u4f7f\u7528\u5b9e\u9645\u7684Unicode\u5b57\u7b26(\u6bd4\u5982\u221e)\uff0c\u8fd8\u662f\u4f7f\u7528\u7b49\u4ef7\u7684Unicode\u8f6c\u4e49\u7b26(\u6bd4\u5982\\u221e)\uff0c\u53d6\u51b3\u4e8e\u54ea\u4e2a\u80fd\u8ba9\u4ee3\u7801\u66f4\u6613\u4e8e\u9605\u8bfb\u548c\u7406\u89e3\u3002 Tip: \u5728\u4f7f\u7528Unicode\u8f6c\u4e49\u7b26\u6216\u662f\u4e00\u4e9b\u5b9e\u9645\u7684Unicode\u5b57\u7b26\u65f6\uff0c\u5efa\u8bae\u505a\u4e9b\u6ce8\u91ca\u7ed9\u51fa\u89e3\u91ca\uff0c\u8fd9\u6709\u52a9\u4e8e\u522b\u4eba\u9605\u8bfb\u548c\u7406\u89e3\u3002 \u4f8b\u5982\uff1a String unitAbbrev = \"\u03bcs\"; | \u8d5e\uff0c\u5373\u4f7f\u6ca1\u6709\u6ce8\u91ca\u4e5f\u975e\u5e38\u6e05\u6670 String unitAbbrev = \"\\u03bcs\"; // \"\u03bcs\" | \u5141\u8bb8\uff0c\u4f46\u6ca1\u6709\u7406\u7531\u8981\u8fd9\u6837\u505a String unitAbbrev = \"\\u03bcs\"; // Greek letter mu, \"s\" | \u5141\u8bb8\uff0c\u4f46\u8fd9\u6837\u505a\u663e\u5f97\u7b28\u62d9\u8fd8\u5bb9\u6613\u51fa\u9519 String unitAbbrev = \"\\u03bcs\"; | \u5f88\u7cdf\uff0c\u8bfb\u8005\u6839\u672c\u770b\u4e0d\u51fa\u8fd9\u662f\u4ec0\u4e48 return '\\ufeff' + content; // byte order mark | Good\uff0c\u5bf9\u4e8e\u975e\u6253\u5370\u5b57\u7b26\uff0c\u4f7f\u7528\u8f6c\u4e49\uff0c\u5e76\u5728\u5fc5\u8981\u65f6\u5199\u4e0a\u6ce8\u91ca Tip: \u6c38\u8fdc\u4e0d\u8981\u7531\u4e8e\u5bb3\u6015\u67d0\u4e9b\u7a0b\u5e8f\u53ef\u80fd\u65e0\u6cd5\u6b63\u786e\u5904\u7406\u975eASCII\u5b57\u7b26\u800c\u8ba9\u4f60\u7684\u4ee3\u7801\u53ef\u8bfb\u6027\u53d8\u5dee\u3002\u5f53\u7a0b\u5e8f\u65e0\u6cd5\u6b63\u786e\u5904\u7406\u975eASCII\u5b57\u7b26\u65f6\uff0c\u5b83\u81ea\u7136\u65e0\u6cd5\u6b63\u786e\u8fd0\u884c\uff0c \u4f60\u5c31\u4f1a\u53bbfix\u8fd9\u4e9b\u95ee\u9898\u7684\u4e86\u3002(\u8a00\u4e0b\u4e4b\u610f\u5c31\u662f\u5927\u80c6\u53bb\u7528\u975eASCII\u5b57\u7b26\uff0c\u5982\u679c\u771f\u7684\u6709\u9700\u8981\u7684\u8bdd) \u6e90\u6587\u4ef6\u7ed3\u6784 \u4e00\u4e2a\u6e90\u6587\u4ef6\u5305\u542b(\u6309\u987a\u5e8f\u5730)\uff1a \u8bb8\u53ef\u8bc1\u6216\u7248\u6743\u4fe1\u606f(\u5982\u6709\u9700\u8981) package\u8bed\u53e5 import\u8bed\u53e5 \u4e00\u4e2a\u9876\u7ea7\u7c7b( \u53ea\u6709\u4e00\u4e2a ) \u4ee5\u4e0a\u6bcf\u4e2a\u90e8\u5206\u4e4b\u95f4\u7528\u4e00\u4e2a\u7a7a\u884c\u9694\u5f00\u3002 3.1 \u8bb8\u53ef\u8bc1\u6216\u7248\u6743\u4fe1\u606f \u5982\u679c\u4e00\u4e2a\u6587\u4ef6\u5305\u542b\u8bb8\u53ef\u8bc1\u6216\u7248\u6743\u4fe1\u606f\uff0c\u90a3\u4e48\u5b83\u5e94\u5f53\u88ab\u653e\u5728\u6587\u4ef6\u6700\u524d\u9762\u3002 3.2 package\u8bed\u53e5 package\u8bed\u53e5\u4e0d\u6362\u884c\uff0c\u5217\u9650\u5236(4.4\u8282)\u5e76\u4e0d\u9002\u7528\u4e8epackage\u8bed\u53e5\u3002(\u5373package\u8bed\u53e5\u5199\u5728\u4e00\u884c\u91cc) 3.3 import\u8bed\u53e5 3.3.1 import\u4e0d\u8981\u4f7f\u7528\u901a\u914d\u7b26 \u5373\uff0c\u4e0d\u8981\u51fa\u73b0\u7c7b\u4f3c\u8fd9\u6837\u7684import\u8bed\u53e5\uff1a import java.util.*; 3.3.2 \u4e0d\u8981\u6362\u884c import\u8bed\u53e5\u4e0d\u6362\u884c\uff0c\u5217\u9650\u5236(4.4\u8282)\u5e76\u4e0d\u9002\u7528\u4e8eimport\u8bed\u53e5\u3002(\u6bcf\u4e2aimport\u8bed\u53e5\u72ec\u7acb\u6210\u884c) 3.3.3 \u987a\u5e8f\u548c\u95f4\u8ddd import\u8bed\u53e5\u53ef\u5206\u4e3a\u4ee5\u4e0b\u51e0\u7ec4\uff0c\u6309\u7167\u8fd9\u4e2a\u987a\u5e8f\uff0c\u6bcf\u7ec4\u7531\u4e00\u4e2a\u7a7a\u884c\u5206\u9694\uff1a \u6240\u6709\u7684\u9759\u6001\u5bfc\u5165\u72ec\u7acb\u6210\u7ec4 com.google imports(\u4ec5\u5f53\u8fd9\u4e2a\u6e90\u6587\u4ef6\u662f\u5728 com.google \u5305\u4e0b) \u7b2c\u4e09\u65b9\u7684\u5305\u3002\u6bcf\u4e2a\u9876\u7ea7\u5305\u4e3a\u4e00\u7ec4\uff0c\u5b57\u5178\u5e8f\u3002\u4f8b\u5982\uff1aandroid, com, junit, org, sun java imports javax imports \u7ec4\u5185\u4e0d\u7a7a\u884c\uff0c\u6309\u5b57\u5178\u5e8f\u6392\u5217\u3002 3.4 \u7c7b\u58f0\u660e 3.4.1 \u53ea\u6709\u4e00\u4e2a\u9876\u7ea7\u7c7b\u58f0\u660e \u6bcf\u4e2a\u9876\u7ea7\u7c7b\u90fd\u5728\u4e00\u4e2a\u4e0e\u5b83\u540c\u540d\u7684\u6e90\u6587\u4ef6\u4e2d(\u5f53\u7136\uff0c\u8fd8\u5305\u542b .java \u540e\u7f00)\u3002 \u4f8b\u5916\uff1a package-info.java \uff0c\u8be5\u6587\u4ef6\u4e2d\u53ef\u6ca1\u6709 package-info \u7c7b\u3002 3.4.2 \u7c7b\u6210\u5458\u987a\u5e8f \u7c7b\u7684\u6210\u5458\u987a\u5e8f\u5bf9\u6613\u5b66\u6027\u6709\u5f88\u5927\u7684\u5f71\u54cd\uff0c\u4f46\u8fd9\u4e5f\u4e0d\u5b58\u5728\u552f\u4e00\u7684\u901a\u7528\u6cd5\u5219\u3002\u4e0d\u540c\u7684\u7c7b\u5bf9\u6210\u5458\u7684\u6392\u5e8f\u53ef\u80fd\u662f\u4e0d\u540c\u7684\u3002 \u6700\u91cd\u8981\u7684\u4e00\u70b9\uff0c\u6bcf\u4e2a\u7c7b\u5e94\u8be5\u4ee5\u67d0\u79cd\u903b\u8f91\u53bb\u6392\u5e8f\u5b83\u7684\u6210\u5458\uff0c\u7ef4\u62a4\u8005\u5e94\u8be5\u8981\u80fd\u89e3\u91ca\u8fd9\u79cd\u6392\u5e8f\u903b\u8f91\u3002\u6bd4\u5982\uff0c \u65b0\u7684\u65b9\u6cd5\u4e0d\u80fd\u603b\u662f\u4e60\u60ef\u6027\u5730\u6dfb\u52a0\u5230\u7c7b\u7684\u7ed3\u5c3e\uff0c\u56e0\u4e3a\u8fd9\u6837\u5c31\u662f\u6309\u65f6\u95f4\u987a\u5e8f\u800c\u975e\u67d0\u79cd\u903b\u8f91\u6765\u6392\u5e8f\u7684\u3002 3.4.2.1 \u91cd\u8f7d\uff1a\u6c38\u4e0d\u5206\u79bb \u5f53\u4e00\u4e2a\u7c7b\u6709\u591a\u4e2a\u6784\u9020\u51fd\u6570\uff0c\u6216\u662f\u591a\u4e2a\u540c\u540d\u65b9\u6cd5\uff0c\u8fd9\u4e9b\u51fd\u6570/\u65b9\u6cd5\u5e94\u8be5\u6309\u987a\u5e8f\u51fa\u73b0\u5728\u4e00\u8d77\uff0c\u4e2d\u95f4\u4e0d\u8981\u653e\u8fdb\u5176\u5b83\u51fd\u6570/\u65b9\u6cd5\u3002 \u683c\u5f0f \u672f\u8bed\u8bf4\u660e \uff1a\u5757\u72b6\u7ed3\u6784(block-like construct)\u6307\u7684\u662f\u4e00\u4e2a\u7c7b\uff0c\u65b9\u6cd5\u6216\u6784\u9020\u51fd\u6570\u7684\u4e3b\u4f53\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u6570\u7ec4\u521d\u59cb\u5316\u4e2d\u7684\u521d\u59cb\u503c\u53ef\u88ab\u9009\u62e9\u6027\u5730\u89c6\u4e3a\u5757\u72b6\u7ed3\u6784(4.8.3.1\u8282)\u3002 4.1 \u5927\u62ec\u53f7 4.1.1 \u4f7f\u7528\u5927\u62ec\u53f7(\u5373\u4f7f\u662f\u53ef\u9009\u7684) \u5927\u62ec\u53f7\u4e0e if, else, for, do, while \u8bed\u53e5\u4e00\u8d77\u4f7f\u7528\uff0c\u5373\u4f7f\u53ea\u6709\u4e00\u6761\u8bed\u53e5(\u6216\u662f\u7a7a)\uff0c\u4e5f\u5e94\u8be5\u628a\u5927\u62ec\u53f7\u5199\u4e0a\u3002 4.1.2 \u975e\u7a7a\u5757\uff1aK & R \u98ce\u683c \u5bf9\u4e8e\u975e\u7a7a\u5757\u548c\u5757\u72b6\u7ed3\u6784\uff0c\u5927\u62ec\u53f7\u9075\u5faaKernighan\u548cRitchie\u98ce\u683c ( Egyptian brackets ): \u5de6\u5927\u62ec\u53f7\u524d\u4e0d\u6362\u884c \u5de6\u5927\u62ec\u53f7\u540e\u6362\u884c \u53f3\u5927\u62ec\u53f7\u524d\u6362\u884c \u5982\u679c\u53f3\u5927\u62ec\u53f7\u662f\u4e00\u4e2a\u8bed\u53e5\u3001\u51fd\u6570\u4f53\u6216\u7c7b\u7684\u7ec8\u6b62\uff0c\u5219\u53f3\u5927\u62ec\u53f7\u540e\u6362\u884c; \u5426\u5219\u4e0d\u6362\u884c\u3002\u4f8b\u5982\uff0c\u5982\u679c\u53f3\u5927\u62ec\u53f7\u540e\u9762\u662felse\u6216\u9017\u53f7\uff0c\u5219\u4e0d\u6362\u884c\u3002 \u793a\u4f8b\uff1a return new MyClass () { @Override public void method () { if ( condition ()) { try { something (); } catch ( ProblemException e ) { recover (); } } } }; 4.8.1\u8282\u7ed9\u51fa\u4e86enum\u7c7b\u7684\u4e00\u4e9b\u4f8b\u5916\u3002 4.1.3 \u7a7a\u5757\uff1a\u53ef\u4ee5\u7528\u7b80\u6d01\u7248\u672c \u4e00\u4e2a\u7a7a\u7684\u5757\u72b6\u7ed3\u6784\u91cc\u4ec0\u4e48\u4e5f\u4e0d\u5305\u542b\uff0c\u5927\u62ec\u53f7\u53ef\u4ee5\u7b80\u6d01\u5730\u5199\u6210 {} \uff0c\u4e0d\u9700\u8981\u6362\u884c\u3002\u4f8b\u5916\uff1a\u5982\u679c\u5b83\u662f\u4e00\u4e2a\u591a\u5757\u8bed\u53e5\u7684\u4e00\u90e8\u5206(if/else \u6216 try/catch/finally) \uff0c\u5373\u4f7f\u5927\u62ec\u53f7\u5185\u6ca1\u5185\u5bb9\uff0c\u53f3\u5927\u62ec\u53f7\u4e5f\u8981\u6362\u884c\u3002 \u793a\u4f8b\uff1a void doNothing () {} 4.2 \u5757\u7f29\u8fdb\uff1a2\u4e2a\u7a7a\u683c \u6bcf\u5f53\u5f00\u59cb\u4e00\u4e2a\u65b0\u7684\u5757\uff0c\u7f29\u8fdb\u589e\u52a02\u4e2a\u7a7a\u683c\uff0c\u5f53\u5757\u7ed3\u675f\u65f6\uff0c\u7f29\u8fdb\u8fd4\u56de\u5148\u524d\u7684\u7f29\u8fdb\u7ea7\u522b\u3002\u7f29\u8fdb\u7ea7\u522b\u9002\u7528\u4e8e\u4ee3\u7801\u548c\u6ce8\u91ca\u3002(\u89c14.1.2\u8282\u4e2d\u7684\u4ee3\u7801\u793a\u4f8b) 4.3 \u4e00\u884c\u4e00\u4e2a\u8bed\u53e5 \u6bcf\u4e2a\u8bed\u53e5\u540e\u8981\u6362\u884c\u3002 4.4 \u5217\u9650\u5236\uff1a80\u6216100 \u4e00\u4e2a\u9879\u76ee\u53ef\u4ee5\u9009\u62e9\u4e00\u884c80\u4e2a\u5b57\u7b26\u6216100\u4e2a\u5b57\u7b26\u7684\u5217\u9650\u5236\uff0c\u9664\u4e86\u4e0b\u8ff0\u4f8b\u5916\uff0c\u4efb\u4f55\u4e00\u884c\u5982\u679c\u8d85\u8fc7\u8fd9\u4e2a\u5b57\u7b26\u6570\u9650\u5236\uff0c\u5fc5\u987b\u81ea\u52a8\u6362\u884c\u3002 \u4f8b\u5916\uff1a \u4e0d\u53ef\u80fd\u6ee1\u8db3\u5217\u9650\u5236\u7684\u884c(\u4f8b\u5982\uff0cJavadoc\u4e2d\u7684\u4e00\u4e2a\u957fURL\uff0c\u6216\u662f\u4e00\u4e2a\u957f\u7684JSNI\u65b9\u6cd5\u53c2\u8003)\u3002 package \u548c import \u8bed\u53e5(\u89c13.2\u8282\u548c3.3\u8282)\u3002 \u6ce8\u91ca\u4e2d\u90a3\u4e9b\u53ef\u80fd\u88ab\u526a\u5207\u5e76\u7c98\u8d34\u5230shell\u4e2d\u7684\u547d\u4ee4\u884c\u3002 4.5 \u81ea\u52a8\u6362\u884c \u672f\u8bed\u8bf4\u660e \uff1a\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u4e00\u884c\u957f\u4ee3\u7801\u4e3a\u4e86\u907f\u514d\u8d85\u51fa\u5217\u9650\u5236(80\u6216100\u4e2a\u5b57\u7b26)\u800c\u88ab\u5206\u4e3a\u591a\u884c\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3a\u81ea\u52a8\u6362\u884c(line-wrapping)\u3002 \u6211\u4eec\u5e76\u6ca1\u6709\u5168\u9762\uff0c\u786e\u5b9a\u6027\u7684\u51c6\u5219\u6765\u51b3\u5b9a\u5728\u6bcf\u4e00\u79cd\u60c5\u51b5\u4e0b\u5982\u4f55\u81ea\u52a8\u6362\u884c\u3002\u5f88\u591a\u65f6\u5019\uff0c\u5bf9\u4e8e\u540c\u4e00\u6bb5\u4ee3\u7801\u4f1a\u6709\u597d\u51e0\u79cd\u6709\u6548\u7684\u81ea\u52a8\u6362\u884c\u65b9\u5f0f\u3002 Tip: \u63d0\u53d6\u65b9\u6cd5\u6216\u5c40\u90e8\u53d8\u91cf\u53ef\u4ee5\u5728\u4e0d\u6362\u884c\u7684\u60c5\u51b5\u4e0b\u89e3\u51b3\u4ee3\u7801\u8fc7\u957f\u7684\u95ee\u9898(\u662f\u5408\u7406\u7f29\u77ed\u547d\u540d\u957f\u5ea6\u5427) 4.5.1 \u4ece\u54ea\u91cc\u65ad\u5f00 \u81ea\u52a8\u6362\u884c\u7684\u57fa\u672c\u51c6\u5219\u662f\uff1a\u66f4\u503e\u5411\u4e8e\u5728\u66f4\u9ad8\u7684\u8bed\u6cd5\u7ea7\u522b\u5904\u65ad\u5f00\u3002 \u5982\u679c\u5728 \u975e\u8d4b\u503c\u8fd0\u7b97\u7b26 \u5904\u65ad\u5f00\uff0c\u90a3\u4e48\u5728\u8be5\u7b26\u53f7\u524d\u65ad\u5f00(\u6bd4\u5982+\uff0c\u5b83\u5c06\u4f4d\u4e8e\u4e0b\u4e00\u884c)\u3002\u6ce8\u610f\uff1a\u8fd9\u4e00\u70b9\u4e0eGoogle\u5176\u5b83\u8bed\u8a00\u7684\u7f16\u7a0b\u98ce\u683c\u4e0d\u540c(\u5982C++\u548cJavaScript)\u3002 \u8fd9\u6761\u89c4\u5219\u4e5f\u9002\u7528\u4e8e\u4ee5\u4e0b\u201c\u7c7b\u8fd0\u7b97\u7b26\u201d\u7b26\u53f7\uff1a\u70b9\u5206\u9694\u7b26(.)\uff0c\u7c7b\u578b\u754c\u9650\u4e2d\u7684&\uff08 )\uff0ccatch\u5757\u4e2d\u7684\u7ba1\u9053\u7b26\u53f7( catch (FooException | BarException e ) \u5982\u679c\u5728 \u8d4b\u503c\u8fd0\u7b97\u7b26 \u5904\u65ad\u5f00\uff0c\u901a\u5e38\u7684\u505a\u6cd5\u662f\u5728\u8be5\u7b26\u53f7\u540e\u65ad\u5f00(\u6bd4\u5982=\uff0c\u5b83\u4e0e\u524d\u9762\u7684\u5185\u5bb9\u7559\u5728\u540c\u4e00\u884c)\u3002\u8fd9\u6761\u89c4\u5219\u4e5f\u9002\u7528\u4e8e foreach \u8bed\u53e5\u4e2d\u7684\u5206\u53f7\u3002 \u65b9\u6cd5\u540d\u6216\u6784\u9020\u51fd\u6570\u540d\u4e0e\u5de6\u62ec\u53f7\u7559\u5728\u540c\u4e00\u884c\u3002 \u9017\u53f7(,)\u4e0e\u5176\u524d\u9762\u7684\u5185\u5bb9\u7559\u5728\u540c\u4e00\u884c\u3002 4.5.2 \u81ea\u52a8\u6362\u884c\u65f6\u7f29\u8fdb\u81f3\u5c11+4\u4e2a\u7a7a\u683c \u81ea\u52a8\u6362\u884c\u65f6\uff0c\u7b2c\u4e00\u884c\u540e\u7684\u6bcf\u4e00\u884c\u81f3\u5c11\u6bd4\u7b2c\u4e00\u884c\u591a\u7f29\u8fdb4\u4e2a\u7a7a\u683c(\u6ce8\u610f\uff1a\u5236\u8868\u7b26\u4e0d\u7528\u4e8e\u7f29\u8fdb\u3002\u89c12.3.1\u8282)\u3002 \u5f53\u5b58\u5728\u8fde\u7eed\u81ea\u52a8\u6362\u884c\u65f6\uff0c\u7f29\u8fdb\u53ef\u80fd\u4f1a\u591a\u7f29\u8fdb\u4e0d\u53ea4\u4e2a\u7a7a\u683c(\u8bed\u6cd5\u5143\u7d20\u5b58\u5728\u591a\u7ea7\u65f6)\u3002\u4e00\u822c\u800c\u8a00\uff0c\u4e24\u4e2a\u8fde\u7eed\u884c\u4f7f\u7528\u76f8\u540c\u7684\u7f29\u8fdb\u5f53\u4e14\u4ec5\u5f53\u5b83\u4eec\u5f00\u59cb\u4e8e\u540c\u7ea7\u8bed\u6cd5\u5143\u7d20\u3002 \u7b2c4.6.3\u6c34\u5e73\u5bf9\u9f50\u4e00\u8282\u4e2d\u6307\u51fa\uff0c\u4e0d\u9f13\u52b1\u4f7f\u7528\u53ef\u53d8\u6570\u76ee\u7684\u7a7a\u683c\u6765\u5bf9\u9f50\u524d\u9762\u884c\u7684\u7b26\u53f7\u3002 4.6 \u7a7a\u767d 4.6.1 \u5782\u76f4\u7a7a\u767d \u4ee5\u4e0b\u60c5\u51b5\u9700\u8981\u4f7f\u7528\u4e00\u4e2a\u7a7a\u884c\uff1a \u7c7b\u5185\u8fde\u7eed\u7684\u6210\u5458\u4e4b\u95f4\uff1a\u5b57\u6bb5\uff0c\u6784\u9020\u51fd\u6570\uff0c\u65b9\u6cd5\uff0c\u5d4c\u5957\u7c7b\uff0c\u9759\u6001\u521d\u59cb\u5316\u5757\uff0c\u5b9e\u4f8b\u521d\u59cb\u5316\u5757\u3002 \u4f8b\u5916 \uff1a\u4e24\u4e2a\u8fde\u7eed\u5b57\u6bb5\u4e4b\u95f4\u7684\u7a7a\u884c\u662f\u53ef\u9009\u7684\uff0c\u7528\u4e8e\u5b57\u6bb5\u7684\u7a7a\u884c\u4e3b\u8981\u7528\u6765\u5bf9\u5b57\u6bb5\u8fdb\u884c\u903b\u8f91\u5206\u7ec4\u3002 \u5728\u51fd\u6570\u4f53\u5185\uff0c\u8bed\u53e5\u7684\u903b\u8f91\u5206\u7ec4\u95f4\u4f7f\u7528\u7a7a\u884c\u3002 \u7c7b\u5185\u7684\u7b2c\u4e00\u4e2a\u6210\u5458\u524d\u6216\u6700\u540e\u4e00\u4e2a\u6210\u5458\u540e\u7684\u7a7a\u884c\u662f\u53ef\u9009\u7684(\u65e2\u4e0d\u9f13\u52b1\u4e5f\u4e0d\u53cd\u5bf9\u8fd9\u6837\u505a\uff0c\u89c6\u4e2a\u4eba\u559c\u597d\u800c\u5b9a)\u3002 \u8981\u6ee1\u8db3\u672c\u6587\u6863\u4e2d\u5176\u4ed6\u8282\u7684\u7a7a\u884c\u8981\u6c42(\u6bd4\u59823.3\u8282\uff1aimport\u8bed\u53e5) \u591a\u4e2a\u8fde\u7eed\u7684\u7a7a\u884c\u662f\u5141\u8bb8\u7684\uff0c\u4f46\u6ca1\u6709\u5fc5\u8981\u8fd9\u6837\u505a(\u6211\u4eec\u4e5f\u4e0d\u9f13\u52b1\u8fd9\u6837\u505a)\u3002 4.6.2 \u6c34\u5e73\u7a7a\u767d \u9664\u4e86\u8bed\u8a00\u9700\u6c42\u548c\u5176\u5b83\u89c4\u5219\uff0c\u5e76\u4e14\u9664\u4e86\u6587\u5b57\uff0c\u6ce8\u91ca\u548cJavadoc\u7528\u5230\u5355\u4e2a\u7a7a\u683c\uff0c\u5355\u4e2aASCII\u7a7a\u683c\u4e5f\u51fa\u73b0\u5728\u4ee5\u4e0b\u51e0\u4e2a\u5730\u65b9\uff1a \u5206\u9694\u4efb\u4f55\u4fdd\u7559\u5b57\u4e0e\u7d27\u968f\u5176\u540e\u7684\u5de6\u62ec\u53f7( ( )(\u5982 if, for catch \u7b49)\u3002 \u5206\u9694\u4efb\u4f55\u4fdd\u7559\u5b57\u4e0e\u5176\u524d\u9762\u7684\u53f3\u5927\u62ec\u53f7( } )(\u5982 else, catch )\u3002 \u5728\u4efb\u4f55\u5de6\u5927\u62ec\u53f7\u524d( { )\uff0c\u4e24\u4e2a\u4f8b\u5916\uff1a @SomeAnnotation({a, b}) (\u4e0d\u4f7f\u7528\u7a7a\u683c)\u3002 String[][] x = foo; (\u5927\u62ec\u53f7\u95f4\u6ca1\u6709\u7a7a\u683c\uff0c\u89c1\u4e0b\u9762\u7684Note)\u3002 \u5728\u4efb\u4f55\u4e8c\u5143\u6216\u4e09\u5143\u8fd0\u7b97\u7b26\u7684\u4e24\u4fa7\u3002\u8fd9\u4e5f\u9002\u7528\u4e8e\u4ee5\u4e0b\u201c\u7c7b\u8fd0\u7b97\u7b26\u201d\u7b26\u53f7\uff1a \u7c7b\u578b\u754c\u9650\u4e2d\u7684&( )\u3002 catch\u5757\u4e2d\u7684\u7ba1\u9053\u7b26\u53f7( catch (FooException | BarException e )\u3002 foreach \u8bed\u53e5\u4e2d\u7684\u5206\u53f7\u3002 \u5728 , : ; \u53ca\u53f3\u62ec\u53f7( ) )\u540e \u5982\u679c\u5728\u4e00\u6761\u8bed\u53e5\u540e\u505a\u6ce8\u91ca\uff0c\u5219\u53cc\u659c\u6760(//)\u4e24\u8fb9\u90fd\u8981\u7a7a\u683c\u3002\u8fd9\u91cc\u53ef\u4ee5\u5141\u8bb8\u591a\u4e2a\u7a7a\u683c\uff0c\u4f46\u6ca1\u6709\u5fc5\u8981\u3002 \u7c7b\u578b\u548c\u53d8\u91cf\u4e4b\u95f4\uff1aList list\u3002 \u6570\u7ec4\u521d\u59cb\u5316\u4e2d\uff0c\u5927\u62ec\u53f7\u5185\u7684\u7a7a\u683c\u662f\u53ef\u9009\u7684\uff0c\u5373 new int[] {5, 6} \u548c new int[] { 5, 6 } \u90fd\u662f\u53ef\u4ee5\u7684\u3002 Note\uff1a\u8fd9\u4e2a\u89c4\u5219\u5e76\u4e0d\u8981\u6c42\u6216\u7981\u6b62\u4e00\u884c\u7684\u5f00\u5173\u6216\u7ed3\u5c3e\u9700\u8981\u989d\u5916\u7684\u7a7a\u683c\uff0c\u53ea\u5bf9\u5185\u90e8\u7a7a\u683c\u505a\u8981\u6c42\u3002 4.6.3 \u6c34\u5e73\u5bf9\u9f50\uff1a\u4e0d\u505a\u8981\u6c42 \u672f\u8bed\u8bf4\u660e \uff1a\u6c34\u5e73\u5bf9\u9f50\u6307\u7684\u662f\u901a\u8fc7\u589e\u52a0\u53ef\u53d8\u6570\u91cf\u7684\u7a7a\u683c\u6765\u4f7f\u67d0\u4e00\u884c\u7684\u5b57\u7b26\u4e0e\u4e0a\u4e00\u884c\u7684\u76f8\u5e94\u5b57\u7b26\u5bf9\u9f50\u3002 \u8fd9\u662f\u5141\u8bb8\u7684(\u800c\u4e14\u5728\u4e0d\u5c11\u5730\u65b9\u53ef\u4ee5\u770b\u5230\u8fd9\u6837\u7684\u4ee3\u7801)\uff0c\u4f46Google\u7f16\u7a0b\u98ce\u683c\u5bf9\u6b64\u4e0d\u505a\u8981\u6c42\u3002\u5373\u4f7f\u5bf9\u4e8e\u5df2\u7ecf\u4f7f\u7528\u6c34\u5e73\u5bf9\u9f50\u7684\u4ee3\u7801\uff0c\u6211\u4eec\u4e5f\u4e0d\u9700\u8981\u53bb\u4fdd\u6301\u8fd9\u79cd\u98ce\u683c\u3002 \u4ee5\u4e0b\u793a\u4f8b\u5148\u5c55\u793a\u672a\u5bf9\u9f50\u7684\u4ee3\u7801\uff0c\u7136\u540e\u662f\u5bf9\u9f50\u7684\u4ee3\u7801\uff1a private int x ; // this is fine private Color color ; // this too private int x ; // permitted, but future edits private Color color ; // may leave it unaligned Tip\uff1a\u5bf9\u9f50\u53ef\u589e\u52a0\u4ee3\u7801\u53ef\u8bfb\u6027\uff0c\u4f46\u5b83\u4e3a\u65e5\u540e\u7684\u7ef4\u62a4\u5e26\u6765\u95ee\u9898\u3002\u8003\u8651\u672a\u6765\u67d0\u4e2a\u65f6\u5019\uff0c\u6211\u4eec\u9700\u8981\u4fee\u6539\u4e00\u5806\u5bf9\u9f50\u7684\u4ee3\u7801\u4e2d\u7684\u4e00\u884c\u3002 \u8fd9\u53ef\u80fd\u5bfc\u81f4\u539f\u672c\u5f88\u6f02\u4eae\u7684\u5bf9\u9f50\u4ee3\u7801\u53d8\u5f97\u9519\u4f4d\u3002\u5f88\u53ef\u80fd\u5b83\u4f1a\u63d0\u793a\u4f60\u8c03\u6574\u5468\u56f4\u4ee3\u7801\u7684\u7a7a\u767d\u6765\u4f7f\u8fd9\u4e00\u5806\u4ee3\u7801\u91cd\u65b0\u6c34\u5e73\u5bf9\u9f50(\u6bd4\u5982\u7a0b\u5e8f\u5458\u60f3\u4fdd\u6301\u8fd9\u79cd\u6c34\u5e73\u5bf9\u9f50\u7684\u98ce\u683c)\uff0c \u8fd9\u5c31\u4f1a\u8ba9\u4f60\u505a\u8bb8\u591a\u7684\u65e0\u7528\u529f\uff0c\u589e\u52a0\u4e86reviewer\u7684\u5de5\u4f5c\u5e76\u4e14\u53ef\u80fd\u5bfc\u81f4\u66f4\u591a\u7684\u5408\u5e76\u51b2\u7a81\u3002 4.7 \u7528\u5c0f\u62ec\u53f7\u6765\u9650\u5b9a\u7ec4\uff1a\u63a8\u8350 \u9664\u975e\u4f5c\u8005\u548creviewer\u90fd\u8ba4\u4e3a\u53bb\u6389\u5c0f\u62ec\u53f7\u4e5f\u4e0d\u4f1a\u4f7f\u4ee3\u7801\u88ab\u8bef\u89e3\uff0c\u6216\u662f\u53bb\u6389\u5c0f\u62ec\u53f7\u80fd\u8ba9\u4ee3\u7801\u66f4\u6613\u4e8e\u9605\u8bfb\uff0c\u5426\u5219\u6211\u4eec\u4e0d\u5e94\u8be5\u53bb\u6389\u5c0f\u62ec\u53f7\u3002 \u6211\u4eec\u6ca1\u6709\u7406\u7531\u5047\u8bbe\u8bfb\u8005\u80fd\u8bb0\u4f4f\u6574\u4e2aJava\u8fd0\u7b97\u7b26\u4f18\u5148\u7ea7\u8868\u3002 4.8 \u5177\u4f53\u7ed3\u6784 4.8.1 \u679a\u4e3e\u7c7b \u679a\u4e3e\u5e38\u91cf\u95f4\u7528\u9017\u53f7\u9694\u5f00\uff0c\u6362\u884c\u53ef\u9009\u3002 \u6ca1\u6709\u65b9\u6cd5\u548c\u6587\u6863\u7684\u679a\u4e3e\u7c7b\u53ef\u5199\u6210\u6570\u7ec4\u521d\u59cb\u5316\u7684\u683c\u5f0f\uff1a private enum Suit { CLUBS , HEARTS , SPADES , DIAMONDS } \u7531\u4e8e\u679a\u4e3e\u7c7b\u4e5f\u662f\u4e00\u4e2a\u7c7b\uff0c\u56e0\u6b64\u6240\u6709\u9002\u7528\u4e8e\u5176\u5b83\u7c7b\u7684\u683c\u5f0f\u89c4\u5219\u4e5f\u9002\u7528\u4e8e\u679a\u4e3e\u7c7b\u3002 4.8.2 \u53d8\u91cf\u58f0\u660e 4.8.2.1 \u6bcf\u6b21\u53ea\u58f0\u660e\u4e00\u4e2a\u53d8\u91cf \u4e0d\u8981\u4f7f\u7528\u7ec4\u5408\u58f0\u660e\uff0c\u6bd4\u5982 int a, b; \u3002 4.8.2.2 \u9700\u8981\u65f6\u624d\u58f0\u660e\uff0c\u5e76\u5c3d\u5feb\u8fdb\u884c\u521d\u59cb\u5316 \u4e0d\u8981\u5728\u4e00\u4e2a\u4ee3\u7801\u5757\u7684\u5f00\u5934\u628a\u5c40\u90e8\u53d8\u91cf\u4e00\u6b21\u6027\u90fd\u58f0\u660e\u4e86(\u8fd9\u662fc\u8bed\u8a00\u7684\u505a\u6cd5)\uff0c\u800c\u662f\u5728\u7b2c\u4e00\u6b21\u9700\u8981\u4f7f\u7528\u5b83\u65f6\u624d\u58f0\u660e\u3002 \u5c40\u90e8\u53d8\u91cf\u5728\u58f0\u660e\u65f6\u6700\u597d\u5c31\u8fdb\u884c\u521d\u59cb\u5316\uff0c\u6216\u8005\u58f0\u660e\u540e\u5c3d\u5feb\u8fdb\u884c\u521d\u59cb\u5316\u3002 4.8.3 \u6570\u7ec4 4.8.3.1 \u6570\u7ec4\u521d\u59cb\u5316\uff1a\u53ef\u5199\u6210\u5757\u72b6\u7ed3\u6784 \u6570\u7ec4\u521d\u59cb\u5316\u53ef\u4ee5\u5199\u6210\u5757\u72b6\u7ed3\u6784\uff0c\u6bd4\u5982\uff0c\u4e0b\u9762\u7684\u5199\u6cd5\u90fd\u662fOK\u7684\uff1a new int [] { 0 , 1 , 2 , 3 } new int [] { 0 , 1 , 2 , 3 } new int [] { 0 , 1 , 2 , 3 } new int [] { 0 , 1 , 2 , 3 } 4.8.3.2 \u975eC\u98ce\u683c\u7684\u6570\u7ec4\u58f0\u660e \u4e2d\u62ec\u53f7\u662f\u7c7b\u578b\u7684\u4e00\u90e8\u5206\uff1a String[] args \uff0c \u800c\u975e String args[] \u3002 4.8.4 switch\u8bed\u53e5 \u672f\u8bed\u8bf4\u660e \uff1aswitch\u5757\u7684\u5927\u62ec\u53f7\u5185\u662f\u4e00\u4e2a\u6216\u591a\u4e2a\u8bed\u53e5\u7ec4\u3002\u6bcf\u4e2a\u8bed\u53e5\u7ec4\u5305\u542b\u4e00\u4e2a\u6216\u591a\u4e2aswitch\u6807\u7b7e( case FOO: \u6216 default: )\uff0c\u540e\u9762\u8ddf\u7740\u4e00\u6761\u6216\u591a\u6761\u8bed\u53e5\u3002 4.8.4.1 \u7f29\u8fdb \u4e0e\u5176\u5b83\u5757\u72b6\u7ed3\u6784\u4e00\u81f4\uff0cswitch\u5757\u4e2d\u7684\u5185\u5bb9\u7f29\u8fdb\u4e3a2\u4e2a\u7a7a\u683c\u3002 \u6bcf\u4e2aswitch\u6807\u7b7e\u540e\u65b0\u8d77\u4e00\u884c\uff0c\u518d\u7f29\u8fdb2\u4e2a\u7a7a\u683c\uff0c\u5199\u4e0b\u4e00\u6761\u6216\u591a\u6761\u8bed\u53e5\u3002 4.8.4.2 Fall-through\uff1a\u6ce8\u91ca \u5728\u4e00\u4e2aswitch\u5757\u5185\uff0c\u6bcf\u4e2a\u8bed\u53e5\u7ec4\u8981\u4e48\u901a\u8fc7 break, continue, return \u6216\u629b\u51fa\u5f02\u5e38\u6765\u7ec8\u6b62\uff0c\u8981\u4e48\u901a\u8fc7\u4e00\u6761\u6ce8\u91ca\u6765\u8bf4\u660e\u7a0b\u5e8f\u5c06\u7ee7\u7eed\u6267\u884c\u5230\u4e0b\u4e00\u4e2a\u8bed\u53e5\u7ec4\uff0c \u4efb\u4f55\u80fd\u8868\u8fbe\u8fd9\u4e2a\u610f\u601d\u7684\u6ce8\u91ca\u90fd\u662fOK\u7684(\u5178\u578b\u7684\u662f\u7528 // fall through )\u3002\u8fd9\u4e2a\u7279\u6b8a\u7684\u6ce8\u91ca\u5e76\u4e0d\u9700\u8981\u5728\u6700\u540e\u4e00\u4e2a\u8bed\u53e5\u7ec4(\u4e00\u822c\u662f default )\u4e2d\u51fa\u73b0\u3002\u793a\u4f8b\uff1a switch ( input ) { case 1 : case 2 : prepareOneOrTwo (); // fall through case 3 : handleOneTwoOrThree (); break ; default : handleLargeNumber ( input ); } 4.8.4.3 default\u7684\u60c5\u51b5\u8981\u5199\u51fa\u6765 \u6bcf\u4e2aswitch\u8bed\u53e5\u90fd\u5305\u542b\u4e00\u4e2a default \u8bed\u53e5\u7ec4\uff0c\u5373\u4f7f\u5b83\u4ec0\u4e48\u4ee3\u7801\u4e5f\u4e0d\u5305\u542b\u3002 4.8.5 \u6ce8\u89e3(Annotations) \u6ce8\u89e3\u7d27\u8ddf\u5728\u6587\u6863\u5757\u540e\u9762\uff0c\u5e94\u7528\u4e8e\u7c7b\u3001\u65b9\u6cd5\u548c\u6784\u9020\u51fd\u6570\uff0c\u4e00\u4e2a\u6ce8\u89e3\u72ec\u5360\u4e00\u884c\u3002\u8fd9\u4e9b\u6362\u884c\u4e0d\u5c5e\u4e8e\u81ea\u52a8\u6362\u884c(\u7b2c4.5\u8282\uff0c\u81ea\u52a8\u6362\u884c)\uff0c\u56e0\u6b64\u7f29\u8fdb\u7ea7\u522b\u4e0d\u53d8\u3002\u4f8b\u5982\uff1a @Override @Nullable public String getNameIfPresent () { ... } \u4f8b\u5916 \uff1a\u5355\u4e2a\u7684\u6ce8\u89e3\u53ef\u4ee5\u548c\u7b7e\u540d\u7684\u7b2c\u4e00\u884c\u51fa\u73b0\u5728\u540c\u4e00\u884c\u3002\u4f8b\u5982\uff1a @Override public int hashCode () { ... } \u5e94\u7528\u4e8e\u5b57\u6bb5\u7684\u6ce8\u89e3\u7d27\u968f\u6587\u6863\u5757\u51fa\u73b0\uff0c\u5e94\u7528\u4e8e\u5b57\u6bb5\u7684\u591a\u4e2a\u6ce8\u89e3\u5141\u8bb8\u4e0e\u5b57\u6bb5\u51fa\u73b0\u5728\u540c\u4e00\u884c\u3002\u4f8b\u5982\uff1a @Partial @Mock DataLoader loader ; \u53c2\u6570\u548c\u5c40\u90e8\u53d8\u91cf\u6ce8\u89e3\u6ca1\u6709\u7279\u5b9a\u89c4\u5219\u3002 4.8.6 \u6ce8\u91ca 4.8.6.1 \u5757\u6ce8\u91ca\u98ce\u683c \u5757\u6ce8\u91ca\u4e0e\u5176\u5468\u56f4\u7684\u4ee3\u7801\u5728\u540c\u4e00\u7f29\u8fdb\u7ea7\u522b\u3002\u5b83\u4eec\u53ef\u4ee5\u662f /* ... */ \u98ce\u683c\uff0c\u4e5f\u53ef\u4ee5\u662f // ... \u98ce\u683c\u3002\u5bf9\u4e8e\u591a\u884c\u7684 /* ... */ \u6ce8\u91ca\uff0c\u540e\u7eed\u884c\u5fc5\u987b\u4ece * \u5f00\u59cb\uff0c \u5e76\u4e14\u4e0e\u524d\u4e00\u884c\u7684 * \u5bf9\u9f50\u3002\u4ee5\u4e0b\u793a\u4f8b\u6ce8\u91ca\u90fd\u662fOK\u7684\u3002 /* * This is // And so /* Or you can * okay. // is this. * even do this. */ */ \u6ce8\u91ca\u4e0d\u8981\u5c01\u95ed\u5728\u7531\u661f\u53f7\u6216\u5176\u5b83\u5b57\u7b26\u7ed8\u5236\u7684\u6846\u67b6\u91cc\u3002 Tip\uff1a\u5728\u5199\u591a\u884c\u6ce8\u91ca\u65f6\uff0c\u5982\u679c\u4f60\u5e0c\u671b\u5728\u5fc5\u8981\u65f6\u80fd\u91cd\u65b0\u6362\u884c(\u5373\u6ce8\u91ca\u50cf\u6bb5\u843d\u98ce\u683c\u4e00\u6837)\uff0c\u90a3\u4e48\u4f7f\u7528 /* ... */ \u3002 4.8.7 Modifiers \u7c7b\u548c\u6210\u5458\u7684modifiers\u5982\u679c\u5b58\u5728\uff0c\u5219\u6309Java\u8bed\u8a00\u89c4\u8303\u4e2d\u63a8\u8350\u7684\u987a\u5e8f\u51fa\u73b0\u3002 public protected private abstract static final transient volatile synchronized native strictfp \u547d\u540d\u7ea6\u5b9a 5.1 \u5bf9\u6240\u6709\u6807\u8bc6\u7b26\u90fd\u901a\u7528\u7684\u89c4\u5219 \u6807\u8bc6\u7b26\u53ea\u80fd\u4f7f\u7528ASCII\u5b57\u6bcd\u548c\u6570\u5b57\uff0c\u56e0\u6b64\u6bcf\u4e2a\u6709\u6548\u7684\u6807\u8bc6\u7b26\u540d\u79f0\u90fd\u80fd\u5339\u914d\u6b63\u5219\u8868\u8fbe\u5f0f \\w+ \u3002 \u5728Google\u5176\u5b83\u7f16\u7a0b\u8bed\u8a00\u98ce\u683c\u4e2d\u4f7f\u7528\u7684\u7279\u6b8a\u524d\u7f00\u6216\u540e\u7f00\uff0c\u5982 name_ , mName , s_name \u548c kName \uff0c\u5728Java\u7f16\u7a0b\u98ce\u683c\u4e2d\u90fd\u4e0d\u518d\u4f7f\u7528\u3002 5.2 \u6807\u8bc6\u7b26\u7c7b\u578b\u7684\u89c4\u5219 5.2.1 \u5305\u540d \u5305\u540d\u5168\u90e8\u5c0f\u5199\uff0c\u8fde\u7eed\u7684\u5355\u8bcd\u53ea\u662f\u7b80\u5355\u5730\u8fde\u63a5\u8d77\u6765\uff0c\u4e0d\u4f7f\u7528\u4e0b\u5212\u7ebf\u3002 5.2.2 \u7c7b\u540d \u7c7b\u540d\u90fd\u4ee5 UpperCamelCase \u98ce\u683c\u7f16\u5199\u3002 \u7c7b\u540d\u901a\u5e38\u662f\u540d\u8bcd\u6216\u540d\u8bcd\u77ed\u8bed\uff0c\u63a5\u53e3\u540d\u79f0\u6709\u65f6\u53ef\u80fd\u662f\u5f62\u5bb9\u8bcd\u6216\u5f62\u5bb9\u8bcd\u77ed\u8bed\u3002\u73b0\u5728\u8fd8\u6ca1\u6709\u7279\u5b9a\u7684\u89c4\u5219\u6216\u884c\u4e4b\u6709\u6548\u7684\u7ea6\u5b9a\u6765\u547d\u540d\u6ce8\u89e3\u7c7b\u578b\u3002 \u6d4b\u8bd5\u7c7b\u7684\u547d\u540d\u4ee5\u5b83\u8981\u6d4b\u8bd5\u7684\u7c7b\u7684\u540d\u79f0\u5f00\u59cb\uff0c\u4ee5 Test \u7ed3\u675f\u3002\u4f8b\u5982\uff0c HashTest \u6216 HashIntegrationTest \u3002 5.2.3 \u65b9\u6cd5\u540d \u65b9\u6cd5\u540d\u90fd\u4ee5 lowerCamelCase \u98ce\u683c\u7f16\u5199\u3002 \u65b9\u6cd5\u540d\u901a\u5e38\u662f\u52a8\u8bcd\u6216\u52a8\u8bcd\u77ed\u8bed\u3002 \u4e0b\u5212\u7ebf\u53ef\u80fd\u51fa\u73b0\u5728JUnit\u6d4b\u8bd5\u65b9\u6cd5\u540d\u79f0\u4e2d\u7528\u4ee5\u5206\u9694\u540d\u79f0\u7684\u903b\u8f91\u7ec4\u4ef6\u3002\u4e00\u4e2a\u5178\u578b\u7684\u6a21\u5f0f\u662f\uff1a test _ \uff0c\u4f8b\u5982 testPop_emptyStack \u3002 \u5e76\u4e0d\u5b58\u5728\u552f\u4e00\u6b63\u786e\u7684\u65b9\u5f0f\u6765\u547d\u540d\u6d4b\u8bd5\u65b9\u6cd5\u3002 5.2.4 \u5e38\u91cf\u540d \u5e38\u91cf\u540d\u547d\u540d\u6a21\u5f0f\u4e3a CONSTANT_CASE \uff0c\u5168\u90e8\u5b57\u6bcd\u5927\u5199\uff0c\u7528\u4e0b\u5212\u7ebf\u5206\u9694\u5355\u8bcd\u3002\u90a3\uff0c\u5230\u5e95\u4ec0\u4e48\u7b97\u662f\u4e00\u4e2a\u5e38\u91cf\uff1f \u6bcf\u4e2a\u5e38\u91cf\u90fd\u662f\u4e00\u4e2a\u9759\u6001final\u5b57\u6bb5\uff0c\u4f46\u4e0d\u662f\u6240\u6709\u9759\u6001final\u5b57\u6bb5\u90fd\u662f\u5e38\u91cf\u3002\u5728\u51b3\u5b9a\u4e00\u4e2a\u5b57\u6bb5\u662f\u5426\u662f\u4e00\u4e2a\u5e38\u91cf\u65f6\uff0c \u8003\u8651\u5b83\u662f\u5426\u771f\u7684\u611f\u89c9\u50cf\u662f\u4e00\u4e2a\u5e38\u91cf\u3002\u4f8b\u5982\uff0c\u5982\u679c\u4efb\u4f55\u4e00\u4e2a\u8be5\u5b9e\u4f8b\u7684\u89c2\u6d4b\u72b6\u6001\u662f\u53ef\u53d8\u7684\uff0c\u5219\u5b83\u51e0\u4e4e\u80af\u5b9a\u4e0d\u4f1a\u662f\u4e00\u4e2a\u5e38\u91cf\u3002 \u53ea\u662f\u6c38\u8fdc\u4e0d \u6253\u7b97 \u6539\u53d8\u5bf9\u8c61\u4e00\u822c\u662f\u4e0d\u591f\u7684\uff0c\u5b83\u8981\u771f\u7684\u4e00\u76f4\u4e0d\u53d8\u624d\u80fd\u5c06\u5b83\u793a\u4e3a\u5e38\u91cf\u3002 // Constants static final int NUMBER = 5 ; static final ImmutableList < String > NAMES = ImmutableList . of ( \"Ed\" , \"Ann\" ); static final Joiner COMMA_JOINER = Joiner . on ( ',' ); // because Joiner is immutable static final SomeMutableType [] EMPTY_ARRAY = {}; enum SomeEnum { ENUM_CONSTANT } // Not constants static String nonFinal = \"non-final\" ; final String nonStatic = \"non-static\" ; static final Set < String > mutableCollection = new HashSet < String >(); static final ImmutableSet < SomeMutableType > mutableElements = ImmutableSet . of ( mutable ); static final Logger logger = Logger . getLogger ( MyClass . getName ()); static final String [] nonEmptyArray = { \"these\" , \"can\" , \"change\" }; \u8fd9\u4e9b\u540d\u5b57\u901a\u5e38\u662f\u540d\u8bcd\u6216\u540d\u8bcd\u77ed\u8bed\u3002 5.2.5 \u975e\u5e38\u91cf\u5b57\u6bb5\u540d \u975e\u5e38\u91cf\u5b57\u6bb5\u540d\u4ee5 lowerCamelCase \u98ce\u683c\u7f16\u5199\u3002 \u8fd9\u4e9b\u540d\u5b57\u901a\u5e38\u662f\u540d\u8bcd\u6216\u540d\u8bcd\u77ed\u8bed\u3002 5.2.6 \u53c2\u6570\u540d \u53c2\u6570\u540d\u4ee5 lowerCamelCase \u98ce\u683c\u7f16\u5199\u3002 \u53c2\u6570\u5e94\u8be5\u907f\u514d\u7528\u5355\u4e2a\u5b57\u7b26\u547d\u540d\u3002 5.2.7 \u5c40\u90e8\u53d8\u91cf\u540d \u5c40\u90e8\u53d8\u91cf\u540d\u4ee5 lowerCamelCase \u98ce\u683c\u7f16\u5199\uff0c\u6bd4\u8d77\u5176\u5b83\u7c7b\u578b\u7684\u540d\u79f0\uff0c\u5c40\u90e8\u53d8\u91cf\u540d\u53ef\u4ee5\u6709\u66f4\u4e3a\u5bbd\u677e\u7684\u7f29\u5199\u3002 \u867d\u7136\u7f29\u5199\u66f4\u5bbd\u677e\uff0c\u4f46\u8fd8\u662f\u8981\u907f\u514d\u7528\u5355\u5b57\u7b26\u8fdb\u884c\u547d\u540d\uff0c\u9664\u4e86\u4e34\u65f6\u53d8\u91cf\u548c\u5faa\u73af\u53d8\u91cf\u3002 \u5373\u4f7f\u5c40\u90e8\u53d8\u91cf\u662ffinal\u548c\u4e0d\u53ef\u6539\u53d8\u7684\uff0c\u4e5f\u4e0d\u5e94\u8be5\u628a\u5b83\u793a\u4e3a\u5e38\u91cf\uff0c\u81ea\u7136\u4e5f\u4e0d\u80fd\u7528\u5e38\u91cf\u7684\u89c4\u5219\u53bb\u547d\u540d\u5b83\u3002 5.2.8 \u7c7b\u578b\u53d8\u91cf\u540d \u7c7b\u578b\u53d8\u91cf\u53ef\u7528\u4ee5\u4e0b\u4e24\u79cd\u98ce\u683c\u4e4b\u4e00\u8fdb\u884c\u547d\u540d\uff1a \u5355\u4e2a\u7684\u5927\u5199\u5b57\u6bcd\uff0c\u540e\u9762\u53ef\u4ee5\u8ddf\u4e00\u4e2a\u6570\u5b57(\u5982\uff1aE, T, X, T2)\u3002 \u4ee5\u7c7b\u547d\u540d\u65b9\u5f0f(5.2.2\u8282)\uff0c\u540e\u9762\u52a0\u4e2a\u5927\u5199\u7684T(\u5982\uff1aRequestT, FooBarT)\u3002 5.3 \u9a7c\u5cf0\u5f0f\u547d\u540d\u6cd5(CamelCase) \u9a7c\u5cf0\u5f0f\u547d\u540d\u6cd5 \u5206\u5927\u9a7c\u5cf0\u5f0f\u547d\u540d\u6cd5( UpperCamelCase )\u548c\u5c0f\u9a7c\u5cf0\u5f0f\u547d\u540d\u6cd5( lowerCamelCase )\u3002 \u6709\u65f6\uff0c\u6211\u4eec\u6709\u4e0d\u53ea\u4e00\u79cd\u5408\u7406\u7684\u65b9\u5f0f\u5c06\u4e00\u4e2a\u82f1\u8bed\u8bcd\u7ec4\u8f6c\u6362\u6210\u9a7c\u5cf0\u5f62\u5f0f\uff0c\u5982\u7f29\u7565\u8bed\u6216\u4e0d\u5bfb\u5e38\u7684\u7ed3\u6784(\u4f8b\u5982\"IPv6\"\u6216\"iOS\")\u3002Google\u6307\u5b9a\u4e86\u4ee5\u4e0b\u7684\u8f6c\u6362\u65b9\u6848\u3002 \u540d\u5b57\u4ece \u6563\u6587\u5f62\u5f0f (prose form)\u5f00\u59cb: \u628a\u77ed\u8bed\u8f6c\u6362\u4e3a\u7eafASCII\u7801\uff0c\u5e76\u4e14\u79fb\u9664\u4efb\u4f55\u5355\u5f15\u53f7\u3002\u4f8b\u5982\uff1a\"M\u00fcller\u2019s algorithm\"\u5c06\u53d8\u6210\"Muellers algorithm\"\u3002 \u628a\u8fd9\u4e2a\u7ed3\u679c\u5207\u5206\u6210\u5355\u8bcd\uff0c\u5728\u7a7a\u683c\u6216\u5176\u5b83\u6807\u70b9\u7b26\u53f7(\u901a\u5e38\u662f\u8fde\u5b57\u7b26)\u5904\u5206\u5272\u5f00\u3002 \u63a8\u8350\uff1a\u5982\u679c\u67d0\u4e2a\u5355\u8bcd\u5df2\u7ecf\u6709\u4e86\u5e38\u7528\u7684\u9a7c\u5cf0\u8868\u793a\u5f62\u5f0f\uff0c\u6309\u5b83\u7684\u7ec4\u6210\u5c06\u5b83\u5206\u5272\u5f00(\u5982\"AdWords\"\u5c06\u5206\u5272\u6210\"ad words\")\u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\"iOS\"\u5e76\u4e0d\u662f\u4e00\u4e2a\u771f\u6b63\u7684\u9a7c\u5cf0\u8868\u793a\u5f62\u5f0f\uff0c\u56e0\u6b64\u8be5\u63a8\u8350\u5bf9\u5b83\u5e76\u4e0d\u9002\u7528\u3002 \u73b0\u5728\u5c06\u6240\u6709\u5b57\u6bcd\u90fd\u5c0f\u5199(\u5305\u62ec\u7f29\u5199)\uff0c\u7136\u540e\u5c06\u5355\u8bcd\u7684\u7b2c\u4e00\u4e2a\u5b57\u6bcd\u5927\u5199\uff1a \u6bcf\u4e2a\u5355\u8bcd\u7684\u7b2c\u4e00\u4e2a\u5b57\u6bcd\u90fd\u5927\u5199\uff0c\u6765\u5f97\u5230\u5927\u9a7c\u5cf0\u5f0f\u547d\u540d\u3002 \u9664\u4e86\u7b2c\u4e00\u4e2a\u5355\u8bcd\uff0c\u6bcf\u4e2a\u5355\u8bcd\u7684\u7b2c\u4e00\u4e2a\u5b57\u6bcd\u90fd\u5927\u5199\uff0c\u6765\u5f97\u5230\u5c0f\u9a7c\u5cf0\u5f0f\u547d\u540d\u3002 \u6700\u540e\u5c06\u6240\u6709\u7684\u5355\u8bcd\u8fde\u63a5\u8d77\u6765\u5f97\u5230\u4e00\u4e2a\u6807\u8bc6\u7b26\u3002 \u793a\u4f8b\uff1a Prose form Correct Incorrect ------------------------------------------------------------------ \"XML HTTP request\" XmlHttpRequest XMLHTTPRequest \"new customer ID\" newCustomerId newCustomerID \"inner stopwatch\" innerStopwatch innerStopWatch \"supports IPv6 on iOS?\" supportsIpv6OnIos supportsIPv6OnIOS \"YouTube importer\" YouTubeImporter YoutubeImporter* \u52a0\u661f\u53f7\u5904\u8868\u793a\u53ef\u4ee5\uff0c\u4f46\u4e0d\u63a8\u8350\u3002 Note\uff1a\u5728\u82f1\u8bed\u4e2d\uff0c\u67d0\u4e9b\u5e26\u6709\u8fde\u5b57\u7b26\u7684\u5355\u8bcd\u5f62\u5f0f\u4e0d\u552f\u4e00\u3002\u4f8b\u5982\uff1a\"nonempty\"\u548c\"non-empty\"\u90fd\u662f\u6b63\u786e\u7684\uff0c\u56e0\u6b64\u65b9\u6cd5\u540d checkNonempty \u548c checkNonEmpty \u4e5f\u90fd\u662f\u6b63\u786e\u7684\u3002 \u7f16\u7a0b\u5b9e\u8df5 6.1 @Override\uff1a\u80fd\u7528\u5219\u7528 \u53ea\u8981\u662f\u5408\u6cd5\u7684\uff0c\u5c31\u628a @Override \u6ce8\u89e3\u7ed9\u7528\u4e0a\u3002 6.2 \u6355\u83b7\u7684\u5f02\u5e38\uff1a\u4e0d\u80fd\u5ffd\u89c6 \u9664\u4e86\u4e0b\u9762\u7684\u4f8b\u5b50\uff0c\u5bf9\u6355\u83b7\u7684\u5f02\u5e38\u4e0d\u505a\u54cd\u5e94\u662f\u6781\u5c11\u6b63\u786e\u7684\u3002(\u5178\u578b\u7684\u54cd\u5e94\u65b9\u5f0f\u662f\u6253\u5370\u65e5\u5fd7\uff0c\u6216\u8005\u5982\u679c\u5b83\u88ab\u8ba4\u4e3a\u662f\u4e0d\u53ef\u80fd\u7684\uff0c\u5219\u628a\u5b83\u5f53\u4f5c\u4e00\u4e2a AssertionError \u91cd\u65b0\u629b\u51fa\u3002) \u5982\u679c\u5b83\u786e\u5b9e\u662f\u4e0d\u9700\u8981\u5728catch\u5757\u4e2d\u505a\u4efb\u4f55\u54cd\u5e94\uff0c\u9700\u8981\u505a\u6ce8\u91ca\u52a0\u4ee5\u8bf4\u660e(\u5982\u4e0b\u9762\u7684\u4f8b\u5b50)\u3002 try { int i = Integer . parseInt ( response ); return handleNumericResponse ( i ); } catch ( NumberFormatException ok ) { // it's not numeric; that's fine, just continue } return handleTextResponse ( response ); \u4f8b\u5916 \uff1a\u5728\u6d4b\u8bd5\u4e2d\uff0c\u5982\u679c\u4e00\u4e2a\u6355\u83b7\u7684\u5f02\u5e38\u88ab\u547d\u540d\u4e3a expected \uff0c\u5219\u5b83\u53ef\u4ee5\u88ab\u4e0d\u52a0\u6ce8\u91ca\u5730\u5ffd\u7565\u3002\u4e0b\u9762\u662f\u4e00\u79cd\u975e\u5e38\u5e38\u89c1\u7684\u60c5\u5f62\uff0c\u7528\u4ee5\u786e\u4fdd\u6240\u6d4b\u8bd5\u7684\u65b9\u6cd5\u4f1a\u629b\u51fa\u4e00\u4e2a\u671f\u671b\u4e2d\u7684\u5f02\u5e38\uff0c \u56e0\u6b64\u5728\u8fd9\u91cc\u5c31\u6ca1\u6709\u5fc5\u8981\u52a0\u6ce8\u91ca\u3002 try { emptyStack . pop (); fail (); } catch ( NoSuchElementException expected ) { } 6.3 \u9759\u6001\u6210\u5458\uff1a\u4f7f\u7528\u7c7b\u8fdb\u884c\u8c03\u7528 \u4f7f\u7528\u7c7b\u540d\u8c03\u7528\u9759\u6001\u7684\u7c7b\u6210\u5458\uff0c\u800c\u4e0d\u662f\u5177\u4f53\u67d0\u4e2a\u5bf9\u8c61\u6216\u8868\u8fbe\u5f0f\u3002 Foo aFoo = ...; Foo . aStaticMethod (); // good aFoo . aStaticMethod (); // bad somethingThatYieldsAFoo (). aStaticMethod (); // very bad 6.4 Finalizers: \u7981\u7528 \u6781\u5c11\u4f1a\u53bb\u91cd\u5199 Object.finalize \u3002 Tip\uff1a\u4e0d\u8981\u4f7f\u7528finalize\u3002\u5982\u679c\u4f60\u975e\u8981\u4f7f\u7528\u5b83\uff0c\u8bf7\u5148\u4ed4\u7ec6\u9605\u8bfb\u548c\u7406\u89e3 Effective Java \u7b2c7\u6761\u6b3e\uff1a\u201cAvoid Finalizers\u201d\uff0c\u7136\u540e\u4e0d\u8981\u4f7f\u7528\u5b83\u3002 Javadoc 7.1 \u683c\u5f0f 7.1.1 \u4e00\u822c\u5f62\u5f0f Javadoc\u5757\u7684\u57fa\u672c\u683c\u5f0f\u5982\u4e0b\u6240\u793a\uff1a /** * Multiple lines of Javadoc text are written here, * wrapped normally... */ public int method ( String p1 ) { ... } \u6216\u8005\u662f\u4ee5\u4e0b\u5355\u884c\u5f62\u5f0f\uff1a /** An especially short bit of Javadoc. */ \u57fa\u672c\u683c\u5f0f\u603b\u662fOK\u7684\u3002\u5f53\u6574\u4e2aJavadoc\u5757\u80fd\u5bb9\u7eb3\u4e8e\u4e00\u884c\u65f6(\u4e14\u6ca1\u6709Javadoc\u6807\u8bb0@XXX)\uff0c\u53ef\u4ee5\u4f7f\u7528\u5355\u884c\u5f62\u5f0f\u3002 7.1.2 \u6bb5\u843d \u7a7a\u884c(\u5373\uff0c\u53ea\u5305\u542b\u6700\u5de6\u4fa7\u661f\u53f7\u7684\u884c)\u4f1a\u51fa\u73b0\u5728\u6bb5\u843d\u4e4b\u95f4\u548cJavadoc\u6807\u8bb0(@XXX)\u4e4b\u524d(\u5982\u679c\u6709\u7684\u8bdd)\u3002 \u9664\u4e86\u7b2c\u4e00\u4e2a\u6bb5\u843d\uff0c\u6bcf\u4e2a\u6bb5\u843d\u7b2c\u4e00\u4e2a\u5355\u8bcd\u524d\u90fd\u6709\u6807\u7b7e \uff0c\u5e76\u4e14\u5b83\u548c\u7b2c\u4e00\u4e2a\u5355\u8bcd\u95f4\u6ca1\u6709\u7a7a\u683c\u3002 7.1.3 Javadoc\u6807\u8bb0 \u6807\u51c6\u7684Javadoc\u6807\u8bb0\u6309\u4ee5\u4e0b\u987a\u5e8f\u51fa\u73b0\uff1a @param , @return , @throws , @deprecated , \u524d\u9762\u8fd94\u79cd\u6807\u8bb0\u5982\u679c\u51fa\u73b0\uff0c\u63cf\u8ff0\u90fd\u4e0d\u80fd\u4e3a\u7a7a\u3002 \u5f53\u63cf\u8ff0\u65e0\u6cd5\u5728\u4e00\u884c\u4e2d\u5bb9\u7eb3\uff0c\u8fde\u7eed\u884c\u9700\u8981\u81f3\u5c11\u518d\u7f29\u8fdb4\u4e2a\u7a7a\u683c\u3002 7.2 \u6458\u8981\u7247\u6bb5 \u6bcf\u4e2a\u7c7b\u6216\u6210\u5458\u7684Javadoc\u4ee5\u4e00\u4e2a\u7b80\u77ed\u7684\u6458\u8981\u7247\u6bb5\u5f00\u59cb\u3002\u8fd9\u4e2a\u7247\u6bb5\u662f\u975e\u5e38\u91cd\u8981\u7684\uff0c\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\uff0c\u5b83\u662f\u552f\u4e00\u51fa\u73b0\u7684\u6587\u672c\uff0c\u6bd4\u5982\u5728\u7c7b\u548c\u65b9\u6cd5\u7d22\u5f15\u4e2d\u3002 \u8fd9\u53ea\u662f\u4e00\u4e2a\u5c0f\u7247\u6bb5\uff0c\u53ef\u4ee5\u662f\u4e00\u4e2a\u540d\u8bcd\u77ed\u8bed\u6216\u52a8\u8bcd\u77ed\u8bed\uff0c\u4f46\u4e0d\u662f\u4e00\u4e2a\u5b8c\u6574\u7684\u53e5\u5b50\u3002\u5b83\u4e0d\u4f1a\u4ee5 A {@code Foo} is a... \u6216 This method returns... \u5f00\u5934, \u5b83\u4e5f\u4e0d\u4f1a\u662f\u4e00\u4e2a\u5b8c\u6574\u7684\u7948\u4f7f\u53e5\uff0c\u5982 Save the record... \u3002\u7136\u800c\uff0c\u7531\u4e8e\u5f00\u5934\u5927\u5199\u53ca\u88ab\u52a0\u4e86\u6807\u70b9\uff0c\u5b83\u770b\u8d77\u6765\u5c31\u50cf\u662f\u4e2a\u5b8c\u6574\u7684\u53e5\u5b50\u3002 Tip\uff1a\u4e00\u4e2a\u5e38\u89c1\u7684\u9519\u8bef\u662f\u628a\u7b80\u5355\u7684Javadoc\u5199\u6210 /** @return the customer ID */ \uff0c\u8fd9\u662f\u4e0d\u6b63\u786e\u7684\u3002\u5b83\u5e94\u8be5\u5199\u6210 /** Returns the customer ID. */ \u3002 7.3 \u54ea\u91cc\u9700\u8981\u4f7f\u7528Javadoc \u81f3\u5c11\u5728\u6bcf\u4e2apublic\u7c7b\u53ca\u5b83\u7684\u6bcf\u4e2apublic\u548cprotected\u6210\u5458\u5904\u4f7f\u7528Javadoc\uff0c\u4ee5\u4e0b\u662f\u4e00\u4e9b\u4f8b\u5916\uff1a 7.3.1 \u4f8b\u5916\uff1a\u4e0d\u8a00\u81ea\u660e\u7684\u65b9\u6cd5 \u5bf9\u4e8e\u7b80\u5355\u660e\u663e\u7684\u65b9\u6cd5\u5982 getFoo \uff0cJavadoc\u662f\u53ef\u9009\u7684(\u5373\uff0c\u662f\u53ef\u4ee5\u4e0d\u5199\u7684)\u3002\u8fd9\u79cd\u60c5\u51b5\u4e0b\u9664\u4e86\u5199\u201cReturns the foo\u201d\uff0c\u786e\u5b9e\u4e5f\u6ca1\u6709\u4ec0\u4e48\u503c\u5f97\u5199\u4e86\u3002 \u5355\u5143\u6d4b\u8bd5\u7c7b\u4e2d\u7684\u6d4b\u8bd5\u65b9\u6cd5\u53ef\u80fd\u662f\u4e0d\u8a00\u81ea\u660e\u7684\u6700\u5e38\u89c1\u4f8b\u5b50\u4e86\uff0c\u6211\u4eec\u901a\u5e38\u53ef\u4ee5\u4ece\u8fd9\u4e9b\u65b9\u6cd5\u7684\u63cf\u8ff0\u6027\u547d\u540d\u4e2d\u77e5\u9053\u5b83\u662f\u5e72\u4ec0\u4e48\u7684\uff0c\u56e0\u6b64\u4e0d\u9700\u8981\u989d\u5916\u7684\u6587\u6863\u8bf4\u660e\u3002 Tip\uff1a\u5982\u679c\u6709\u4e00\u4e9b\u76f8\u5173\u4fe1\u606f\u662f\u9700\u8981\u8bfb\u8005\u4e86\u89e3\u7684\uff0c\u90a3\u4e48\u4ee5\u4e0a\u7684\u4f8b\u5916\u4e0d\u5e94\u4f5c\u4e3a\u5ffd\u89c6\u8fd9\u4e9b\u4fe1\u606f\u7684\u7406\u7531\u3002\u4f8b\u5982\uff0c\u5bf9\u4e8e\u65b9\u6cd5\u540d getCanonicalName \uff0c \u5c31\u4e0d\u5e94\u8be5\u5ffd\u89c6\u6587\u6863\u8bf4\u660e\uff0c\u56e0\u4e3a\u8bfb\u8005\u5f88\u53ef\u80fd\u4e0d\u77e5\u9053\u8bcd\u8bed canonical name \u6307\u7684\u662f\u4ec0\u4e48\u3002 7.3.2 \u4f8b\u5916\uff1a\u91cd\u5199 \u5982\u679c\u4e00\u4e2a\u65b9\u6cd5\u91cd\u5199\u4e86\u8d85\u7c7b\u4e2d\u7684\u65b9\u6cd5\uff0c\u90a3\u4e48Javadoc\u5e76\u975e\u5fc5\u9700\u7684\u3002 7.3.3 \u53ef\u9009\u7684Javadoc \u5bf9\u4e8e\u5305\u5916\u4e0d\u53ef\u89c1\u7684\u7c7b\u548c\u65b9\u6cd5\uff0c\u5982\u6709\u9700\u8981\uff0c\u4e5f\u662f\u8981\u4f7f\u7528Javadoc\u7684\u3002\u5982\u679c\u4e00\u4e2a\u6ce8\u91ca\u662f\u7528\u6765\u5b9a\u4e49\u4e00\u4e2a\u7c7b\uff0c\u65b9\u6cd5\uff0c\u5b57\u6bb5\u7684\u6574\u4f53\u76ee\u7684\u6216\u884c\u4e3a\uff0c \u90a3\u4e48\u8fd9\u4e2a\u6ce8\u91ca\u5e94\u8be5\u5199\u6210Javadoc\uff0c\u8fd9\u6837\u66f4\u7edf\u4e00\u66f4\u53cb\u597d\u3002 \u540e\u8bb0 \u672c\u6587\u6863\u7ffb\u8bd1\u81ea Google Java Style \uff0c \u8bd1\u8005 @Hawstein \u3002","title":"Google Java\u7f16\u7a0b\u98ce\u683c\u6307\u5357"},{"location":"OPENSOURCE/2015-12-08-activemq-delay-and-schedule-message-delivery-download.html/","tags":["activemq","jms"],"text":"ActiveMQ from version 5.4 has an optional persistent scheduler built into the ActiveMQ message broker. It is enabled by setting the broker schedulerSupport attribute to true in the Xml Configuration . An ActiveMQ client can take advantage of a delayed delivery by using the following message properties: Check your Message Properties The message property scheduledJobId is reserved for use by the Job Scheduler. If this property is set before sending, the message will be sent immediately and not scheduled. Also, after a scheduled message is received, the property scheduledJobId will be set on the received message so keep this in mind if using something like a Camel Route which might automatically copy properties over when re-sending a message. Property name type description AMQ_SCHEDULED_DELAY long The time in milliseconds that a message will wait before being scheduled to be delivered by the broker AMQ_SCHEDULED_PERIOD long The time in milliseconds to wait after the start time to wait before scheduling the message again AMQ_SCHEDULED_REPEAT int The number of times to repeat scheduling a message for delivery AMQ_SCHEDULED_CRON String Use a Cron entry to set the schedule For the connivence of Java JMS clients - there's an interface with the property names used for scheduling at org.apache.activemq.ScheduledMessage . For example, to have a message scheduled for delivery in 60 seconds - you would need to set the AMQ_SCHEDULED_DELAY property: MessageProducer producer = session.createProducer(destination); TextMessage message = session.createTextMessage( \"test msg\" ); long time = 60 * 1000 ; message.setLongProperty(ScheduledMessage.AMQ_SCHEDULED_DELAY, time); producer.send(message); You can set a message to wait with an initial delay, and the repeat delivery 10 times, waiting 10 seconds between each re-delivery: MessageProducer producer = session.createProducer(destination); TextMessage message = session.createTextMessage( \"test msg\" ); long delay = 30 * 1000 ; long period = 10 * 1000 ; int repeat = 9 ; message.setLongProperty(ScheduledMessage.AMQ_SCHEDULED_DELAY, delay); message.setLongProperty(ScheduledMessage.AMQ_SCHEDULED_PERIOD, period); message.setIntProperty(ScheduledMessage.AMQ_SCHEDULED_REPEAT, repeat); producer.send(message); You can also use CRON to schedule a message, for example, if you want a message scheduled to be delivered every hour, you would need to set the CRON entry to be - 0 * * * * - e.g. MessageProducer producer = session.createProducer(destination); TextMessage message = session.createTextMessage( \"test msg\" ); message.setStringProperty(ScheduledMessage.AMQ_SCHEDULED_CRON, \"0 * * * *\" ); producer.send(message); CRON scheduling takes priority over using message delay - however, if a repeat and period is set with a CRON entry, the ActiveMQ scheduler will schedule delivery of the message for every time the CRON entry fires. Easier to explain with an example. Supposing that you want a message to be delivered 10 times, with a one second delay between each message - and you wanted this to happen every hour - you'd do this: MessageProducer producer = session.createProducer(destination); TextMessage message = session.createTextMessage( \"test msg\" ); message.setStringProperty(ScheduledMessage.AMQ_SCHEDULED_CRON, \"0 * * * *\" ); message.setLongProperty(ScheduledMessage.AMQ_SCHEDULED_DELAY, 1000 ); message.setLongProperty(ScheduledMessage.AMQ_SCHEDULED_PERIOD, 1000 ); message.setIntProperty(ScheduledMessage.AMQ_SCHEDULED_REPEAT, 9 ); producer.send(message); \u6458\u81ea\u300ehttp://activemq.apache.org/delay-and-schedule-message-delivery.html\u300f","title":"ActiveMQ Delay and Schedule Message Delivery"},{"location":"OPENSOURCE/2015-12-08-quartz-cron%25e8%25a1%25a8%25e8%25be%25be%25e5%25bc%258f.html/","tags":["QuartZ","Cron"],"text":"CronTrigger CronTriggers\u5f80\u5f80\u6bd4SimpleTrigger\u66f4\u6709\u7528\uff0c\u5982\u679c\u60a8\u9700\u8981\u57fa\u4e8e\u65e5\u5386\u7684\u6982\u5ff5\uff0c\u800c\u975eSimpleTrigger\u5b8c\u5168\u6307\u5b9a\u7684\u65f6\u95f4\u95f4\u9694\uff0c\u590d\u53d1\u7684\u53d1\u5c04\u5de5\u4f5c\u7684\u65f6\u95f4\u8868\u3002 CronTrigger\uff0c\u4f60\u53ef\u4ee5\u6307\u5b9a\u89e6\u53d1\u7684\u65f6\u95f4\u8868\u5982\u201c\u6bcf\u661f\u671f\u4e94\u4e2d\u5348\u201d\uff0c\u6216\u201c\u6bcf\u4e2a\u5de5\u4f5c\u65e59:30\u65f6\u201d\uff0c\u751a\u81f3\u201c\u6bcf5\u5206\u949f\u4e00\u73ed9:00\u548c10:00\u9022\u661f\u671f\u4e00\u4e0a\u5348\uff0c\u661f\u671f\u4e09\u661f\u671f\u4e94\u201c\u3002 \u5373\u4fbf\u5982\u6b64\uff0cSimpleTrigger\u4e00\u6837\uff0cCronTrigger\u62e5\u6709\u7684startTime\u6307\u5b9a\u7684\u65f6\u95f4\u8868\u65f6\u751f\u6548\uff0c\u6307\u5b9a\u7684\u65f6\u95f4\u8868\u65f6\uff0c\u5e94\u505c\u6b62\uff08\u53ef\u9009\uff09\u7ed3\u675f\u65f6\u95f4\u3002 Cron Expressions cron\u7684\u8868\u8fbe\u5f0f\u88ab\u7528\u6765\u914d\u7f6eCronTrigger\u5b9e\u4f8b\u3002 cron\u7684\u8868\u8fbe\u5f0f\u662f\u5b57\u7b26\u4e32\uff0c\u5b9e\u9645\u4e0a\u662f\u7531\u4e03\u5b50\u8868\u8fbe\u5f0f\uff0c\u63cf\u8ff0\u4e2a\u522b\u7ec6\u8282\u7684\u65f6\u95f4\u8868\u3002\u8fd9\u4e9b\u5b50\u8868\u8fbe\u5f0f\u662f\u5206\u5f00\u7684\u7a7a\u767d\uff0c\u4ee3\u8868\uff1a 1. Seconds 2. Minutes 3. Hours 4. Day-of-Month 5. Month 6. Day-of-Week 7. Year ( \u53ef\u9009\u5b57\u6bb5 ) \u4f8b \"0 0 12 ? * WED\" \u5728\u6bcf\u661f\u671f\u4e09\u4e0b\u534812:00 \u6267\u884c, \u4e2a\u522b\u5b50\u8868\u8fbe\u5f0f\u53ef\u4ee5\u5305\u542b\u8303\u56f4, \u4f8b\u5982\uff0c\u5728\u524d\u9762\u7684\u4f8b\u5b50\u91cc(\"WED\")\u53ef\u4ee5\u66ff\u6362\u6210 \"MON-FRI\", \"MON, WED, FRI\"\u751a\u81f3\"MON-WED,SAT\". \u201c*\u201d \u4ee3\u8868\u6574\u4e2a\u65f6\u95f4\u6bb5. \u6bcf\u4e00\u4e2a\u5b57\u6bb5\u90fd\u6709\u4e00\u5957\u53ef\u4ee5\u6307\u5b9a\u6709\u6548\u503c\uff0c\u5982 Seconds (\u79d2) \uff1a\u53ef\u4ee5\u7528\u6570\u5b570\uff0d59 \u8868\u793a\uff0c Minutes( \u5206) \uff1a\u53ef\u4ee5\u7528\u6570\u5b570\uff0d59 \u8868\u793a\uff0c Hours( \u65f6) \uff1a\u53ef\u4ee5\u7528\u6570\u5b570-23\u8868\u793a, Day-of-Month( \u5929) \uff1a\u53ef\u4ee5\u7528\u6570\u5b571-31 \u4e2d\u7684\u4efb\u4e00\u4e00\u4e2a\u503c\uff0c\u4f46\u8981\u6ce8\u610f\u4e00\u4e9b\u7279\u522b\u7684\u6708\u4efd Month( \u6708) \uff1a\u53ef\u4ee5\u75280-11 \u6216\u7528\u5b57\u7b26\u4e32 \u201cJAN, FEB, MAR, APR, MAY, JUN, JUL, AUG, SEP, OCT, NOV and DEC\u201d \u8868\u793a Day-of-Week( \u6bcf\u5468 ) \uff1a \u53ef\u4ee5\u7528\u6570\u5b571-7\u8868\u793a\uff081 \uff1d \u661f\u671f\u65e5\uff09\u6216\u7528\u5b57\u7b26\u53e3\u4e32\u201cSUN, MON, TUE, WED, THU, FRI and SAT\u201d\u8868\u793a \u201c/\u201d\uff1a\u4e3a\u7279\u522b\u5355\u4f4d\uff0c\u8868\u793a\u4e3a\u201c\u6bcf\u201d\u5982\u201c0/15\u201d\u8868\u793a\u6bcf\u969415\u5206\u949f\u6267\u884c\u4e00\u6b21,\u201c0\u201d\u8868\u793a\u4e3a\u4ece\u201c0\u201d\u5206\u5f00\u59cb, \u201c3/20\u201d\u8868\u793a\u8868\u793a\u6bcf\u969420\u5206\u949f\u6267\u884c\u4e00\u6b21\uff0c\u201c3\u201d\u8868\u793a\u4ece\u7b2c3\u5206\u949f\u5f00\u59cb\u6267\u884c \u201c?\u201d\uff1a\u8868\u793a\u6bcf\u6708\u7684\u67d0\u4e00\u5929\uff0c\u6216\u7b2c\u5468\u7684\u67d0\u4e00\u5929 \u201cL\u201d\uff1a\u7528\u4e8e\u6bcf\u6708\uff0c\u6216\u6bcf\u5468\uff0c\u8868\u793a\u4e3a\u6bcf\u6708\u7684\u6700\u540e\u4e00\u5929\uff0c\u6216\u6bcf\u4e2a\u6708\u7684\u6700\u540e\u661f\u671f\u51e0\u5982\u201c6L\u201d\u8868\u793a\u201c\u6bcf\u6708\u7684\u6700\u540e\u4e00\u4e2a\u661f\u671f\u4e94\u201d \u201cW\u201d\uff1a\u8868\u793a\u4e3a\u6700\u8fd1\u5de5\u4f5c\u65e5\uff0c\u5982\u201c15W\u201d\u653e\u5728\u6bcf\u6708\uff08day-of-month\uff09\u5b57\u6bb5\u4e0a\u8868\u793a\u4e3a\u201c\u5230\u672c\u670815\u65e5\u6700\u8fd1\u7684\u5de5\u4f5c\u65e5\u201d \u201c\u201c#\u201d\uff1a\u662f\u7528\u6765\u6307\u5b9a\u201c\u7684\u201d\u6bcf\u6708\u7b2cn\u4e2a\u5de5\u4f5c\u65e5,\u4f8b \u5728\u6bcf\u5468\uff08day-of-week\uff09\u8fd9\u4e2a\u5b57\u6bb5\u4e2d\u5185\u5bb9\u4e3a\"6#3\" or \"FRI#3\" \u5219\u8868\u793a\u201c\u6bcf\u6708\u7b2c\u4e09\u4e2a\u661f\u671f\u4e94\u201d 1\uff09Cron\u8868\u8fbe\u5f0f\u7684\u683c\u5f0f\uff1a\u79d2 \u5206 \u65f6 \u65e5 \u6708 \u5468 \u5e74(\u53ef\u9009)\u3002 \u5b57\u6bb5\u540d \u5141\u8bb8\u7684\u503c \u5141\u8bb8\u7684\u7279\u6b8a\u5b57\u7b26 \u79d2 0-59 , - * / \u5206 0-59 , - * / \u5c0f\u65f6 0-23 , - * / \u65e5 1-31 , - * ? / L W C \u6708 1-12 or JAN-DEC , - * / \u5468\u51e0 1-7 or SUN-SAT , - * ? / L C # \u5e74 (\u53ef\u9009\u5b57\u6bb5) empty, 1970-2099 , - * / \u201c?\u201d\u5b57\u7b26\uff1a\u8868\u793a\u4e0d\u786e\u5b9a\u7684\u503c \u201c,\u201d\u5b57\u7b26\uff1a\u6307\u5b9a\u6570\u4e2a\u503c \u201c-\u201d\u5b57\u7b26\uff1a\u6307\u5b9a\u4e00\u4e2a\u503c\u7684\u8303\u56f4 \u201c/\u201d\u5b57\u7b26\uff1a\u6307\u5b9a\u4e00\u4e2a\u503c\u7684\u589e\u52a0\u5e45\u5ea6\u3002n/m\u8868\u793a\u4ecen\u5f00\u59cb\uff0c\u6bcf\u6b21\u589e\u52a0m \u201cL\u201d\u5b57\u7b26\uff1a\u7528\u5728\u65e5\u8868\u793a\u4e00\u4e2a\u6708\u4e2d\u7684\u6700\u540e\u4e00\u5929\uff0c\u7528\u5728\u5468\u8868\u793a\u8be5\u6708\u6700\u540e\u4e00\u4e2a\u661f\u671fX \u201cW\u201d\u5b57\u7b26\uff1a\u6307\u5b9a\u79bb\u7ed9\u5b9a\u65e5\u671f\u6700\u8fd1\u7684\u5de5\u4f5c\u65e5(\u5468\u4e00\u5230\u5468\u4e94) \u201c#\u201d\u5b57\u7b26\uff1a\u8868\u793a\u8be5\u6708\u7b2c\u51e0\u4e2a\u5468X\u30026#3\u8868\u793a\u8be5\u6708\u7b2c3\u4e2a\u5468\u4e94 2\uff09Cron\u8868\u8fbe\u5f0f\u8303\u4f8b\uff1a \u6bcf\u96945\u79d2\u6267\u884c\u4e00\u6b21\uff1a*/5 * * * * ? \u6bcf\u96941\u5206\u949f\u6267\u884c\u4e00\u6b21\uff1a0 */1 * * * ? \u6bcf\u592923\u70b9\u6267\u884c\u4e00\u6b21\uff1a0 0 23 * * ? \u6bcf\u5929\u51cc\u66681\u70b9\u6267\u884c\u4e00\u6b21\uff1a0 0 1 * * ? \u6bcf\u67081\u53f7\u51cc\u66681\u70b9\u6267\u884c\u4e00\u6b21\uff1a0 0 1 1 * ? \u6bcf\u6708\u6700\u540e\u4e00\u592923\u70b9\u6267\u884c\u4e00\u6b21\uff1a0 0 23 L * ? \u6bcf\u5468\u661f\u671f\u5929\u51cc\u66681\u70b9\u5b9e\u884c\u4e00\u6b21\uff1a0 0 1 ? * L \u572826\u5206\u300129\u5206\u300133\u5206\u6267\u884c\u4e00\u6b21\uff1a0 26,29,33 * * * ? \u6bcf\u5929\u76840\u70b9\u300113\u70b9\u300118\u70b9\u300121\u70b9\u90fd\u6267\u884c\u4e00\u6b21\uff1a0 0 0,13,18,21 * * ? \u6458\u81ea\u300ehttp://www.cnblogs.com/sunjie9606/archive/2012/03/15/2397626.html\u300f","title":"QuartZ Cron\u8868\u8fbe\u5f0f"},{"location":"OPENSOURCE/2015-12-09-%25e5%2588%25a9%25e7%2594%25a8cors%25e5%25ae%259e%25e7%258e%25b0js%25e8%25b7%25a8%25e5%259f%259f%25e8%25ae%25bf%25e9%2597%25ae.html/","tags":["cors","js\u8de8\u57df"],"text":"\u6211\u9a8c\u8bc1\u4e86\u4e24\u4e2a\uff0c\u4e00\u4e2a\u662ftomcat\u4e0b\u81ea\u5e26\u7684cors\u8fc7\u6ee4\u5668\uff0c\u4e00\u4e2a\u662fcors-filter-1.7.jar\u4e0b\u7684\u8fc7\u6ee4\u5668\u3002\u4e24\u4e2a\u6211\u90fd\u6d4b\u8bd5\u4e86\uff0c\u6ca1\u95ee\u9898\u3002 \u5e94\u7528tomcat\u7684filter\u914d\u7f6e\u5982\u4e0b\uff1a\u53c2\u6570cors.allowOrigin\u53ef\u4ee5\u6307\u5b9a\u5177\u4f53\u7684\u6e90\u6765\u8bbf\u95ee CorsFilter org.apache.catalina.filters.CorsFilter cors.allowed.origins * cors.allowed.methods GET,POST,HEAD,OPTIONS,PUT cors.allowed.headers Content-Type,X-Requested-With,accept,Origin,Access-Control-Request-Method,Access-Control-Request-Headers cors.exposed.headers Access-Control-Allow-Origin,Access-Control-Allow-Credentials cors.support.credentials true cors.preflight.maxage 10 CorsFilter /* \u6216\u8005\u5e94\u7528cors-filter-1.7.jar\uff0c\u8fd8\u9700\u8981java-property-utils-1.9.jar\uff0c\u53ef\u4ee5\u5728 http://mvnrepository.com/artifact/com.thetransactioncompany/cors-filter \u9009\u62e9\u67d0\u4e2a\u7248\u672c\u5bfc\u5165pom.xml\u4e2d\uff0c\u81ea\u52a8\u5bfc\u5165jar\u5305\u3002 \u914d\u7f6e\u5982\u4e0b\uff1a\u53c2\u6570cors.allowOrigin\u53ef\u4ee5\u6307\u5b9a\u5177\u4f53\u7684\u6e90\u6765\u8bbf\u95ee CORS com.thetransactioncompany.cors.CORSFilter cors.allowOrigin * cors.supportedMethods GET, POST, HEAD, PUT, DELETE cors.supportedHeaders Accept, Origin, X-Requested-With, Content-Type, Last-Modified cors.exposedHeaders Set-Cookie cors.supportsCredentials true CORS /* \u6458\u81ea\u300ehttp://www.cnblogs.com/chiyouguli/p/4283349.html\u300f","title":"\u5229\u7528cors\u5b9e\u73b0js\u8de8\u57df\u8bbf\u95ee"},{"location":"OPENSOURCE/2015-12-19-web-xml-%25e4%25b8%25ad%25e7%259a%2584listener%25e3%2580%2581-filter%25e3%2580%2581servlet-%25e5%258a%25a0%25e8%25bd%25bd%25e9%25a1%25ba%25e5%25ba%258f.html/","tags":["web.xml","servelt","listener","filter"],"text":"\u5728\u9879\u76ee\u4e2d\u603b\u4f1a\u9047\u5230\u4e00\u4e9b\u5173\u4e8e\u52a0\u8f7d\u7684\u4f18\u5148\u7ea7\u95ee\u9898\uff0c\u8fd1\u671f\u4e5f\u540c\u6837\u9047\u5230\u8fc7\u7c7b\u4f3c\u7684\uff0c\u6240\u4ee5\u81ea\u5df1\u67e5\u627e\u8d44\u6599\u603b\u7ed3\u4e86\u4e0b\uff0c\u4e0b\u9762\u6709\u4e9b\u662f\u8f6c\u8f7d\u5176\u4ed6\u4eba\u7684\uff0c\u6bd5\u7adf\u4eba\u5bb6\u5199\u7684\u4e0d\u9519\uff0c\u81ea\u5df1\u4e5f\u5c31\u4e0d\u91cd\u590d\u9020\u8f6e\u5b50\u4e86\uff0c\u53ea\u662f\u7565\u52a0\u70b9\u4e86\u81ea\u5df1\u7684\u4fee\u9970\u3002 \u9996\u5148\u53ef\u4ee5\u80af\u5b9a\u7684\u662f\uff0c\u52a0\u8f7d\u987a\u5e8f\u4e0e\u5b83\u4eec\u5728 web.xml \u6587\u4ef6\u4e2d\u7684\u5148\u540e\u987a\u5e8f\u65e0\u5173\u3002\u5373\u4e0d\u4f1a\u56e0\u4e3a filter \u5199\u5728 listener \u7684\u524d\u9762\u800c\u4f1a\u5148\u52a0\u8f7d filter\u3002\u6700\u7ec8\u5f97\u51fa\u7684\u7ed3\u8bba\u662f\uff1a listener -> filter -> servlet \u540c\u65f6\u8fd8\u5b58\u5728\u7740\u8fd9\u6837\u4e00\u79cd\u914d\u7f6e\u8282\uff1acontext-param\uff0c\u5b83\u7528\u4e8e\u5411 ServletContext \u63d0\u4f9b\u952e\u503c\u5bf9\uff0c\u5373\u5e94\u7528\u7a0b\u5e8f\u4e0a\u4e0b\u6587\u4fe1\u606f\u3002\u6211\u4eec\u7684 listener, filter \u7b49\u5728\u521d\u59cb\u5316\u65f6\u4f1a\u7528\u5230\u8fd9\u4e9b\u4e0a\u4e0b\u6587\u4e2d\u7684\u4fe1\u606f\uff0c\u90a3\u4e48 context-param \u914d\u7f6e\u8282\u662f\u4e0d\u662f\u5e94\u8be5\u5199\u5728 listener \u914d\u7f6e\u8282\u524d\u5462\uff1f\u5b9e\u9645\u4e0a context-param \u914d\u7f6e\u8282\u53ef\u5199\u5728\u4efb\u610f\u4f4d\u7f6e\uff0c\u56e0\u6b64 \u771f\u6b63\u7684\u52a0\u8f7d\u987a\u5e8f\u4e3a\uff1acontext-param -> listener -> filter -> servlet \u5bf9\u4e8e\u67d0\u7c7b\u914d\u7f6e\u8282\u800c\u8a00\uff0c\u4e0e\u5b83\u4eec\u51fa\u73b0\u7684\u987a\u5e8f\u662f\u6709\u5173\u7684\u3002\u4ee5 filter \u4e3a\u4f8b\uff0cweb.xml \u4e2d\u5f53\u7136\u53ef\u4ee5\u5b9a\u4e49\u591a\u4e2a filter\uff0c\u4e0e filter \u76f8\u5173\u7684\u4e00\u4e2a\u914d\u7f6e\u8282\u662f filter-mapping\uff0c\u8fd9\u91cc\u4e00\u5b9a\u8981\u6ce8\u610f\uff0c\u5bf9\u4e8e\u62e5\u6709\u76f8\u540c filter-name \u7684 filter \u548c filter-mapping \u914d\u7f6e\u8282\u800c\u8a00\uff0cfilter-mapping \u5fc5\u987b\u51fa\u73b0\u5728 filter \u4e4b\u540e\uff0c\u5426\u5219\u5f53\u89e3\u6790\u5230 filter-mapping \u65f6\uff0c\u5b83\u6240\u5bf9\u5e94\u7684 filter-name \u8fd8\u672a\u5b9a\u4e49\u3002web \u5bb9\u5668\u542f\u52a8\u65f6\u521d\u59cb\u5316\u6bcf\u4e2a filter \u65f6\uff0c\u662f\u6309\u7167 filter \u914d\u7f6e\u8282\u51fa\u73b0\u7684\u987a\u5e8f\u6765\u521d\u59cb\u5316\u7684\uff0c\u5f53\u8bf7\u6c42\u8d44\u6e90\u5339\u914d\u591a\u4e2a filter-mapping \u65f6\uff0c filter \u62e6\u622a\u8d44\u6e90\u662f\u6309\u7167 filter-mapping \u914d\u7f6e\u8282\u51fa\u73b0\u7684\u987a\u5e8f\u6765\u4f9d\u6b21\u8c03\u7528 doFilter() \u65b9\u6cd5\u7684\u3002 servlet \u540c filter \u7c7b\u4f3c \uff0c\u6b64\u5904\u4e0d\u518d\u8d58\u8ff0\u3002 \u7531\u6b64\uff0c\u53ef\u4ee5\u770b\u51fa\uff0cweb.xml \u7684\u52a0\u8f7d\u987a\u5e8f\u662f\uff1a context-param -> listener -> filter -> servlet \uff0c\u800c\u540c\u4e2a\u7c7b\u578b\u4e4b\u95f4\u7684\u5b9e\u9645\u7a0b\u5e8f\u8c03\u7528\u7684\u65f6\u5019\u7684\u987a\u5e8f\u662f\u6839\u636e\u5bf9\u5e94\u7684 mapping \u7684\u987a\u5e8f\u8fdb\u884c\u8c03\u7528\u7684\u3002 web.xml\u6587\u4ef6\u8be6\u89e3 ======================================================================== Web.xml\u5e38\u7528\u5143\u7d20 \u5b9a\u4e49\u4e86WEB\u5e94\u7528\u7684\u540d\u5b57 \u58f0\u660eWEB\u5e94\u7528\u7684\u63cf\u8ff0\u4fe1\u606f context-param\u5143\u7d20\u58f0\u660e\u5e94\u7528\u8303\u56f4\u5185\u7684\u521d\u59cb\u5316\u53c2\u6570\u3002 \u8fc7\u6ee4\u5668\u5143\u7d20\u5c06\u4e00\u4e2a\u540d\u5b57\u4e0e\u4e00\u4e2a\u5b9e\u73b0javax.servlet.Filter\u63a5\u53e3\u7684\u7c7b\u76f8\u5173\u8054\u3002 \u4e00\u65e6\u547d\u540d\u4e86\u4e00\u4e2a\u8fc7\u6ee4\u5668\uff0c\u5c31\u8981\u5229\u7528filter-mapping\u5143\u7d20\u628a\u5b83\u4e0e\u4e00\u4e2a\u6216\u591a\u4e2aservlet\u6216JSP\u9875\u9762\u76f8\u5173\u8054\u3002 servlet API\u7684\u7248\u672c2.3\u589e\u52a0\u4e86\u5bf9\u4e8b\u4ef6\u76d1\u542c\u7a0b\u5e8f\u7684\u652f\u6301\uff0c\u4e8b\u4ef6\u76d1\u542c\u7a0b\u5e8f\u5728\u5efa\u7acb\u3001\u4fee\u6539\u548c\u5220\u9664\u4f1a\u8bdd\u6216servlet\u73af\u5883\u65f6\u5f97\u5230\u901a\u77e5\u3002 Listener\u5143\u7d20\u6307\u51fa\u4e8b\u4ef6\u76d1\u542c\u7a0b\u5e8f\u7c7b\u3002 \u5728\u5411servlet\u6216JSP\u9875\u9762\u5236\u5b9a\u521d\u59cb\u5316\u53c2\u6570\u6216\u5b9a\u5236URL\u65f6\uff0c\u5fc5\u987b\u9996\u5148\u547d\u540dservlet\u6216JSP\u9875\u9762\u3002Servlet\u5143\u7d20\u5c31\u662f\u7528\u6765\u5b8c\u6210\u6b64\u9879\u4efb\u52a1\u7684\u3002 \u670d\u52a1\u5668\u4e00\u822c\u4e3aservlet\u63d0\u4f9b\u4e00\u4e2a\u7f3a\u7701\u7684URL\uff1a http://host/webAppPrefix/servlet/ServletName \u3002 \u4f46\u662f\uff0c\u5e38\u5e38\u4f1a\u66f4\u6539\u8fd9\u4e2aURL\uff0c\u4ee5\u4fbfservlet\u53ef\u4ee5\u8bbf\u95ee\u521d\u59cb\u5316\u53c2\u6570\u6216\u66f4\u5bb9\u6613\u5730\u5904\u7406\u76f8\u5bf9URL\u3002\u5728\u66f4\u6539\u7f3a\u7701URL\u65f6\uff0c\u4f7f\u7528servlet-mapping\u5143\u7d20\u3002 \u5982\u679c\u67d0\u4e2a\u4f1a\u8bdd\u5728\u4e00\u5b9a\u65f6\u95f4\u5185\u672a\u88ab\u8bbf\u95ee\uff0c\u670d\u52a1\u5668\u53ef\u4ee5\u629b\u5f03\u5b83\u4ee5\u8282\u7701\u5185\u5b58\u3002 \u53ef\u901a\u8fc7\u4f7f\u7528HttpSession\u7684setMaxInactiveInterval\u65b9\u6cd5\u660e\u786e\u8bbe\u7f6e\u5355\u4e2a\u4f1a\u8bdd\u5bf9\u8c61\u7684\u8d85\u65f6\u503c\uff0c\u6216\u8005\u53ef\u5229\u7528session-config\u5143\u7d20\u5236\u5b9a\u7f3a\u7701\u8d85\u65f6\u503c\u3002 \u5982\u679cWeb\u5e94\u7528\u5177\u6709\u60f3\u5230\u7279\u6b8a\u7684\u6587\u4ef6\uff0c\u5e0c\u671b\u80fd\u4fdd\u8bc1\u7ed9\u4ed6\u4eec\u5206\u914d\u7279\u5b9a\u7684MIME\u7c7b\u578b\uff0c\u5219mime-mapping\u5143\u7d20\u63d0\u4f9b\u8fd9\u79cd\u4fdd\u8bc1\u3002 \u6307\u793a\u670d\u52a1\u5668\u5728\u6536\u5230\u5f15\u7528\u4e00\u4e2a\u76ee\u5f55\u540d\u800c\u4e0d\u662f\u6587\u4ef6\u540d\u7684URL\u65f6\uff0c\u4f7f\u7528\u54ea\u4e2a\u6587\u4ef6\u3002 \u5728\u8fd4\u56de\u7279\u5b9aHTTP\u72b6\u6001\u4ee3\u7801\u65f6\uff0c\u6216\u8005\u7279\u5b9a\u7c7b\u578b\u7684\u5f02\u5e38\u88ab\u629b\u51fa\u65f6\uff0c\u80fd\u591f\u5236\u5b9a\u5c06\u8981\u663e\u793a\u7684\u9875\u9762\u3002 \u5bf9\u6807\u8bb0\u5e93\u63cf\u8ff0\u7b26\u6587\u4ef6\uff08Tag Libraryu Descriptor file\uff09\u6307\u5b9a\u522b\u540d\u3002\u6b64\u529f\u80fd\u4f7f\u4f60\u80fd\u591f\u66f4\u6539TLD\u6587\u4ef6\u7684\u4f4d\u7f6e\uff0c \u800c\u4e0d\u7528\u7f16\u8f91\u4f7f\u7528\u8fd9\u4e9b\u6587\u4ef6\u7684JSP\u9875\u9762\u3002 \u58f0\u660e\u4e0e\u8d44\u6e90\u76f8\u5173\u7684\u4e00\u4e2a\u7ba1\u7406\u5bf9\u8c61\u3002 \u58f0\u660e\u4e00\u4e2a\u8d44\u6e90\u5de5\u5382\u4f7f\u7528\u7684\u5916\u90e8\u8d44\u6e90\u3002 \u5236\u5b9a\u5e94\u8be5\u4fdd\u62a4\u7684URL\u3002\u5b83\u4e0elogin-config\u5143\u7d20\u8054\u5408\u4f7f\u7528 \u6307\u5b9a\u670d\u52a1\u5668\u5e94\u8be5\u600e\u6837\u7ed9\u8bd5\u56fe\u8bbf\u95ee\u53d7\u4fdd\u62a4\u9875\u9762\u7684\u7528\u6237\u6388\u6743\u3002\u5b83\u4e0esercurity-constraint\u5143\u7d20\u8054\u5408\u4f7f\u7528\u3002 \u7ed9\u51fa\u5b89\u5168\u89d2\u8272\u7684\u4e00\u4e2a\u5217\u8868\uff0c\u8fd9\u4e9b\u89d2\u8272\u5c06\u51fa\u73b0\u5728servlet\u5143\u7d20\u5185\u7684security-role-ref\u5143\u7d20 \u7684role-name\u5b50\u5143\u7d20\u4e2d\u3002\u5206\u522b\u5730\u58f0\u660e\u89d2\u8272\u53ef\u4f7f\u9ad8\u7ea7IDE\u5904\u7406\u5b89\u5168\u4fe1\u606f\u66f4\u4e3a\u5bb9\u6613\u3002 \u58f0\u660eWeb\u5e94\u7528\u7684\u73af\u5883\u9879\u3002 \u58f0\u660e\u4e00\u4e2aEJB\u7684\u4e3b\u76ee\u5f55\u7684\u5f15\u7528\u3002 < ejb-local-ref> \u58f0\u660e\u4e00\u4e2aEJB\u7684\u672c\u5730\u4e3b\u76ee\u5f55\u7684\u5e94\u7528\u3002 \u76f8\u5e94\u5143\u7d20\u914d\u7f6e 1\u3001Web\u5e94\u7528\u56fe\u6807\uff1a\u6307\u51faIDE\u548cGUI\u5de5\u5177\u7528\u6765\u8868\u793aWeb\u5e94\u7528\u7684\u5927\u56fe\u6807\u548c\u5c0f\u56fe\u6807 /images/app_small.gif /images/app_large.gif 2\u3001Web \u5e94\u7528\u540d\u79f0\uff1a\u63d0\u4f9bGUI\u5de5\u5177\u53ef\u80fd\u4f1a\u7528\u6765\u6807\u8bb0\u8fd9\u4e2a\u7279\u5b9a\u7684Web\u5e94\u7528\u7684\u4e00\u4e2a\u540d\u79f0 Tomcat Example 3\u3001Web \u5e94\u7528\u63cf\u8ff0\uff1a \u7ed9\u51fa\u4e8e\u6b64\u76f8\u5173\u7684\u8bf4\u660e\u6027\u6587\u672c Tomcat Example servlets and JSP pages. 4\u3001\u4e0a\u4e0b\u6587\u53c2\u6570\uff1a\u58f0\u660e\u5e94\u7528\u8303\u56f4\u5185\u7684\u521d\u59cb\u5316\u53c2\u6570\u3002 ContextParameter test It is a test parameter. \u5728servlet\u91cc\u9762\u53ef\u4ee5\u901a\u8fc7getServletContext().getInitParameter(\"context/param\")\u5f97\u5230 5\u3001\u8fc7\u6ee4\u5668\u914d\u7f6e\uff1a\u5c06\u4e00\u4e2a\u540d\u5b57\u4e0e\u4e00\u4e2a\u5b9e\u73b0javaxs.servlet.Filter\u63a5\u53e3\u7684\u7c7b\u76f8\u5173\u8054\u3002 setCharacterEncoding com.myTest.setCharacterEncodingFilter encoding GB2312 setCharacterEncoding /* 6\u3001\u76d1\u542c\u5668\u914d\u7f6e listener.SessionListener 7\u3001Servlet\u914d\u7f6e \u57fa\u672c\u914d\u7f6e snoop SnoopServlet snoop /snoop \u9ad8\u7ea7\u914d\u7f6e snoop SnoopServlet foo bar Security role for anonymous access tomcat snoop /snoop \u5143\u7d20\u8bf4\u660e \u7528\u6765\u58f0\u660e\u4e00\u4e2aservlet\u7684\u6570\u636e\uff0c\u4e3b\u8981\u6709\u4ee5\u4e0b\u5b50\u5143\u7d20\uff1a \u6307\u5b9aservlet\u7684\u540d\u79f0 \u6307\u5b9aservlet\u7684\u7c7b\u540d\u79f0 \u6307\u5b9aweb\u7ad9\u53f0\u4e2d\u7684\u67d0\u4e2aJSP\u7f51\u9875\u7684\u5b8c\u6574\u8def\u5f84 \u7528\u6765\u5b9a\u4e49\u53c2\u6570\uff0c\u53ef\u6709\u591a\u4e2ainit-param\u3002\u5728servlet\u7c7b\u4e2d\u901a\u8fc7getInitParamenter(String name)\u65b9\u6cd5\u8bbf\u95ee\u521d\u59cb\u5316\u53c2\u6570 \u6307\u5b9a\u5f53Web\u5e94\u7528\u542f\u52a8\u65f6\uff0c\u88c5\u8f7dServlet\u7684\u6b21\u5e8f\u3002 \u5f53\u503c\u4e3a\u6b63\u6570\u6216\u96f6\u65f6\uff1aServlet\u5bb9\u5668\u5148\u52a0\u8f7d\u6570\u503c\u5c0f\u7684servlet\uff0c\u518d\u4f9d\u6b21\u52a0\u8f7d\u5176\u4ed6\u6570\u503c\u5927\u7684servlet. \u5f53\u503c\u4e3a\u8d1f\u6216\u672a\u5b9a\u4e49\uff1aServlet\u5bb9\u5668\u5c06\u5728Web\u5ba2\u6237\u9996\u6b21\u8bbf\u95ee\u8fd9\u4e2aservlet\u65f6\u52a0\u8f7d\u5b83 \u7528\u6765\u5b9a\u4e49servlet\u6240\u5bf9\u5e94\u7684URL\uff0c\u5305\u542b\u4e24\u4e2a\u5b50\u5143\u7d20 \u6307\u5b9aservlet\u7684\u540d\u79f0 \u6307\u5b9aservlet\u6240\u5bf9\u5e94\u7684URL 8\u3001\u4f1a\u8bdd\u8d85\u65f6\u914d\u7f6e\uff08\u5355\u4f4d\u4e3a\u5206\u949f\uff09 120 9\u3001MIME\u7c7b\u578b\u914d\u7f6e htm text/html 10\u3001\u6307\u5b9a\u6b22\u8fce\u6587\u4ef6\u9875\u914d\u7f6e index.jsp index.html index.htm 11\u3001\u914d\u7f6e\u9519\u8bef\u9875\u9762 \u4e00\u3001 \u901a\u8fc7\u9519\u8bef\u7801\u6765\u914d\u7f6eerror-page 404 /NotFound.jsp \u4e0a\u9762\u914d\u7f6e\u4e86\u5f53\u7cfb\u7edf\u53d1\u751f404\u9519\u8bef\u65f6\uff0c\u8df3\u8f6c\u5230\u9519\u8bef\u5904\u7406\u9875\u9762NotFound.jsp\u3002 \u4e8c\u3001\u901a\u8fc7\u5f02\u5e38\u7684\u7c7b\u578b\u914d\u7f6eerror-page java.lang.NullException /error.jsp \u4e0a\u9762\u914d\u7f6e\u4e86\u5f53\u7cfb\u7edf\u53d1\u751fjava.lang.NullException\uff08\u5373\u7a7a\u6307\u9488\u5f02\u5e38\uff09\u65f6\uff0c\u8df3\u8f6c\u5230\u9519\u8bef\u5904\u7406\u9875\u9762error.jsp 12\u3001TLD\u914d\u7f6e http://jakarta.apache.org/tomcat/debug-taglib /WEB-INF/jsp/debug-taglib.tld \u5982\u679cMyEclipse\u4e00\u76f4\u5728\u62a5\u9519,\u5e94\u8be5\u628a \u653e\u5230 \u4e2d http://jakarta.apache.org/tomcat/debug-taglib /WEB-INF/pager-taglib.tld 13\u3001\u8d44\u6e90\u7ba1\u7406\u5bf9\u8c61\u914d\u7f6e jms/StockQueue 14\u3001\u8d44\u6e90\u5de5\u5382\u914d\u7f6e mail/Session javax.mail.Session Container \u914d\u7f6e\u6570\u636e\u5e93\u8fde\u63a5\u6c60\u5c31\u53ef\u5728\u6b64\u914d\u7f6e\uff1a JNDI JDBC DataSource of shop jdbc/sample_db javax.sql.DataSource Container 15\u3001\u5b89\u5168\u9650\u5236\u914d\u7f6e Example Security Constraint Protected Area /jsp/security/protected/* DELETE GET POST PUT tomcat role1 16\u3001\u767b\u9646\u9a8c\u8bc1\u914d\u7f6e FORM Example-Based Authentiation Area /jsp/security/protected/login.jsp /jsp/security/protected/error.jsp 17\u3001\u5b89\u5168\u89d2\u8272\uff1asecurity-role\u5143\u7d20\u7ed9\u51fa\u5b89\u5168\u89d2\u8272\u7684\u4e00\u4e2a\u5217\u8868\uff0c\u8fd9\u4e9b\u89d2\u8272\u5c06\u51fa\u73b0\u5728servlet\u5143\u7d20\u5185\u7684security-role-ref\u5143\u7d20\u7684role-name\u5b50\u5143\u7d20\u4e2d\u3002 \u5206\u522b\u5730\u58f0\u660e\u89d2\u8272\u53ef\u4f7f\u9ad8\u7ea7IDE\u5904\u7406\u5b89\u5168\u4fe1\u606f\u66f4\u4e3a\u5bb9\u6613\u3002 tomcat 18\u3001Web\u73af\u5883\u53c2\u6570\uff1aenv-entry\u5143\u7d20\u58f0\u660eWeb\u5e94\u7528\u7684\u73af\u5883\u9879 minExemptions 1 java.lang.Integer 19\u3001EJB \u58f0\u660e Example EJB reference ejb/Account Entity com.mycompany.mypackage.AccountHome com.mycompany.mypackage.Account 20\u3001\u672c\u5730EJB\u58f0\u660e Example Loacal EJB reference ejb/ProcessOrder Session com.mycompany.mypackage.ProcessOrderHome com.mycompany.mypackage.ProcessOrder 21\u3001\u914d\u7f6eDWR dwr-invoker uk.ltd.getahead.dwr.DWRServlet dwr-invoker /dwr/* 22\u3001\u914d\u7f6eStruts Struts Blank Application action org.apache.struts.action.ActionServlet detail 2 debug 2 config /WEB-INF/struts-config.xml application ApplicationResources 2 action *.do index.jsp struts-bean /WEB-INF/tld/struts-bean.tld struts-html /WEB-INF/tld/struts-html.tld struts-nested /WEB-INF/tld/struts-nested.tld struts-logic /WEB-INF/tld/struts-logic.tld struts-tiles /WEB-INF/tld/struts-tiles.tld 23\u3001\u914d\u7f6eSpring\uff08\u57fa\u672c\u4e0a\u90fd\u662f\u5728Struts\u4e2d\u914d\u7f6e\u7684\uff09 contextConfigLocation /WEB-INF/applicationContext.xml, /WEB-INF/action-servlet.xml org.springframework.web.context.ContextLoaderListener org.springframework.web.context.request.RequestContextListener \u6458\u81ea\u300ehttp://www.cnblogs.com/JesseV/archive/2009/11/17/1605015.html\u300f","title":"web.xml \u4e2d\u7684listener\u3001 filter\u3001servlet \u52a0\u8f7d\u987a\u5e8f\u6781\u5176\u8be6\u89e3"},{"location":"OPENSOURCE/2015-12-25-maven-profiles-for-different-environments/","tags":["maven","package"],"text":"src/main \u76ee\u5f55\u4e0b\u539f\u6765\u6709 java , resources , \u65b0\u5efa\u73af\u5883\u76f8\u5173\u7684\u914d\u7f6e\u6587\u4ef6\u76ee\u5f55\uff1a resources : \u4e00\u4e9b\u5171\u4eab\u7684\u914d\u7f6e\u6587\u4ef6 environment/dev : \u5f00\u53d1\u73af\u5883\u4e0b\u7528\u7684\u914d\u7f6e\u6587\u4ef6, \u6253\u5305\u65f6\u4f1a\u8986\u76d6resources\u76ee\u5f55\u4e0b\u7684\u540c\u540d\u6587\u4ef6. environment/test : \u6d4b\u8bd5\u73af\u5883\u4e0b\u7528\u7684\u914d\u7f6e\u6587\u4ef6, \u6253\u5305\u65f6\u4f1a\u8986\u76d6resources\u76ee\u5f55\u4e0b\u7684\u540c\u540d\u6587\u4ef6. environment/prod : \u751f\u4ea7\u73af\u5883\u4e0b\u7528\u7684\u914d\u7f6e\u6587\u4ef6, \u6253\u5305\u65f6\u4f1a\u8986\u76d6resources\u76ee\u5f55\u4e0b\u7684\u540c\u540d\u6587\u4ef6. \u672c\u673a\u5f00\u53d1\u65f6\u8bbe\u7f6e\u6e90\u7801\u76ee\u5f55\u4e3a java, resources, \u53ef\u76f4\u63a5\u5f00\u53d1\u8c03\u8bd5. \u7f16\u8bd1\u7684\u65f6\u5019\u5e0c\u671bmaven\u6839\u636e\u4e0d\u540c\u73af\u5883, \u6253\u5305\u4e0d\u540c\u76ee\u5f55\u4e0b\u7684\u6587\u4ef6, \u6211\u4eec\u5229\u7528maven\u7684profile\u548cmaven-resources-plugin\u63d2\u4ef6\u6765\u5b9e\u73b0\u8fd9\u4e2a\u76ee\u6807. e.g. \u8fd0\u884c mvn clean package -P test \u6253\u5305. pom.xml \u76f8\u5173\u914d\u7f6e\u5982\u4e0b\uff1a <!-- == \u914d\u7f6e\u5f00\u53d1/\u6d4b\u8bd5/\u751f\u4ea7\u73af\u5883 == --> <properties> <package.target> prod </package.target> </properties> <profiles> <profile> <id> dev </id> <properties> <package.target> dev </package.target> </properties> </profile> <profile> <id> test </id> <properties> <package.target> test </package.target> </properties> </profile> <profile> <id> prod </id> <properties> <package.target> prod </package.target> </properties> </profile> </profiles> <!-- == \u4f7f\u7528maven-resources-plugin\u62f7\u8d1d\u4e0d\u540c\u73af\u5883\u4e0b\u7684\u8d44\u6e90 == --> <build> <plugins> <plugin> <artifactId> maven-resources-plugin </artifactId> <version> 2.5 </version> <executions> <execution> <id> copy-resources </id> <phase> generate-resources </phase> <goals> <goal> copy-resources </goal> </goals> <configuration> <outputDirectory> target/classes </outputDirectory> <resources> <resource> <directory> src/main/environment/${package.target} </directory> </resource> </resources> </configuration> </execution> </executions> </plugin> </plugins> </build>","title":"maven \u5982\u4f55\u4e3a\u5f00\u53d1\u548c\u751f\u4ea7\u73af\u5883\u5efa\u7acb\u4e0d\u540c\u7684\u914d\u7f6e\u6587\u4ef6"},{"location":"OPENSOURCE/2016-01-03-jssc-library-for-easy-work-with-serial-ports.html/","tags":["jssc","serial"],"text":"jSSC (Java Simple Serial Connector) - library for work with serial port from Java. The library was created as a simple and reliable replacement of existing facilities. Briefly about the opportunities it provides. With jSSC you can get the port names, read and write data, control lines RTS and DTR, receive Event etc. jSSC designed to operate 24/7 multi-threaded systems and is currently successfully used in automation, data collection and recording. Now let me give a few examples of actual work with the component. Example 1. Getting the names of serial ports: import jssc.SerialPortList; public class Main { public static void main( String [] args) { //Method getPortNames() returns an array of strings. Elements of the array is already sorted. String [] portNames = SerialPortList.getPortNames(); for(int i = 0; i < portNames.length; i++){ System .out.println(portNames[i]); } } } Example 2. Read and write data: import jssc.SerialPort; import jssc.SerialPortException; public class Main { public static void main( String [] args) { //In the constructor pass the name of the port with which we work SerialPort serialPort = new SerialPort(\"COM1\"); try { //Open port serialPort.openPort(); //We expose the settings. You can also use this line - serialPort.setParams(9600, 8, 1, 0); serialPort.setParams(SerialPort.BAUDRATE_9600, SerialPort.DATABITS_8, SerialPort.STOPBITS_1, SerialPort.PARITY_NONE); //Writes data to port serialPort.writeBytes(\"Test\"); //Read the data of 10 bytes. Be careful with the method readBytes(), if the number of bytes in the input buffer //is less than you need, then the method will wait for the right amount. Better to use it in conjunction with the //interface SerialPortEventListener. byte[] buffer = serialPort.readBytes(10); //Closing the port serialPort.closePort(); } catch (SerialPortException ex) { System .out.println(ex); } } } Example 3. Read and write data using the interface SerialPortEventListener: import jssc.SerialPort; import jssc.SerialPortEvent; import jssc.SerialPortEventListener; import jssc.SerialPortException; public class Main { static SerialPort serialPort; public static void main( String [] args) { serialPort = new SerialPort(\"COM1\"); try { serialPort.openPort(); serialPort.setParams(9600, 8, 1, 0); //Preparing a mask. In a mask, we need to specify the types of events that we want to track. //Well, for example, we need to know what came some data, thus in the mask must have the //following value: MASK_RXCHAR. If we, for example, still need to know about changes in states //of lines CTS and DSR, the mask has to look like this: SerialPort.MASK_RXCHAR + SerialPort.MASK_CTS + SerialPort.MASK_DSR int mask = SerialPort.MASK_RXCHAR; //Set the prepared mask serialPort.setEventsMask(mask); //Add an interface through which we will receive information about events serialPort.addEventListener(new SerialPortReader()); } catch (SerialPortException ex) { System .out.println(ex); } } static class SerialPortReader implements SerialPortEventListener { public void serialEvent(SerialPortEvent event) { //Object type SerialPortEvent carries information about which event occurred and a value. //For example, if the data came a method event.getEventValue() returns us the number of bytes in the input buffer. if(event.isRXCHAR()){ if(event.getEventValue() == 10){ try { byte buffer[] = serialPort.readBytes(10); } catch (SerialPortException ex) { System .out.println(ex); } } } //If the CTS line status has changed, then the method event.getEventValue() returns 1 if the line is ON and 0 if it is OFF. else if(event.isCTS()){ if(event.getEventValue() == 1){ System .out.println(\"CTS - ON\"); } else { System .out.println(\"CTS - OFF\"); } } else if(event.isDSR()){ if(event.getEventValue() == 1){ System .out.println(\"DSR - ON\"); } else { System .out.println(\"DSR - OFF\"); } } } } } Here are a few examples to work with the component. I wish you success. At the moment there is a stable implementation of the libraries under Win32 (Win98-Win7). \u6458\u81ea\u300ehttp://www.javaprogrammingforums.com/java-se-api-tutorials/5603-jssc-library-easy-work-serial-ports.html\u300f GitHub \uff1a https://github.com/scream3r/java-simple-serial-connector","title":"jSSC library - for easy work with serial ports"},{"location":"OPENSOURCE/2016-01-03-netty-websocket-%25e7%25a4%25ba%25e4%25be%258b.html/","tags":["netty","WebSocket"],"text":"\u4ee3\u7801: Server package netty.protocol.websocket.server; import io.netty.bootstrap.ServerBootstrap; import io.netty.channel.Channel; import io.netty.channel.ChannelInitializer; import io.netty.channel.ChannelPipeline; import io.netty.channel.EventLoopGroup; import io.netty.channel.nio.NioEventLoopGroup; import io.netty.channel.socket.SocketChannel; import io.netty.channel.socket.nio.NioServerSocketChannel; import io.netty.handler.codec.http.HttpObjectAggregator; import io.netty.handler.codec.http.HttpServerCodec; import io.netty.handler.stream.ChunkedWriteHandler; /** * TODO * * @description * @author ez * @time 2015\u5e746\u67083\u65e5 \u4e0b\u53484:42:31 */ public class WebSocketServer { public void run(int port) throws Exception { EventLoopGroup bossGroup = new NioEventLoopGroup(); EventLoopGroup workerGroup = new NioEventLoopGroup(); try { ServerBootstrap b = new ServerBootstrap(); b.group(bossGroup, workerGroup) .channel(NioServerSocketChannel.class) .childHandler(new ChannelInitializer () { @Override protected void initChannel(SocketChannel ch) throws Exception { ChannelPipeline pipeline = ch.pipeline(); /* * HttpServerCodec ,\u5c06\u8bf7\u6c42\u548c\u5e94\u7b54\u6d88\u606f\u7f16\u7801\u6216\u8005\u89e3\u7801\u4e3aHTTP\u6d88\u606f */ pipeline.addLast(\"http-codec\", new HttpServerCodec()); /* * HttpObjectAggregator , * \u5c06HTTP\u6d88\u606f\u7684\u591a\u4e2a\u90e8\u5206\u7ec4\u5408\u6210\u4e00\u6761\u5b8c\u6574\u7684HTTP\u6d88\u606f; */ pipeline.addLast(\"aggregator\", new HttpObjectAggregator(65536)); /* * ChunkedWriteHandler , * \u7684\u4e3b\u8981\u4f5c\u7528\u662f\u652f\u6301\u5f02\u6b65\u53d1\u9001\u5927\u7684\u7801\u6d41(\u4f8b\u5982\u5927\u6587\u4ef6\u4f20\u8f93),\u4f46\u4e0d\u5360\u7528\u8fc7\u591a\u7684\u5185\u5b58,\u9632\u6b62JAVA\u5185\u5b58\u6ea2\u51fa */ ch.pipeline().addLast(\"http-chunked\", new ChunkedWriteHandler()); /* * WebSocketServerHandler \u81ea\u5df1\u7684\u4e1a\u52a1\u5904\u7406 */ pipeline.addLast(\"handler\", new WebSocketServerHandler()); } }); Channel ch = b.bind(port).sync().channel(); System.out.println(\"Web socket server started at port \" + port + '.'); System.out .println(\"Open your browser and navigate to http://localhost:\" + port + '/'); ch.closeFuture().sync(); } finally { bossGroup.shutdownGracefully(); workerGroup.shutdownGracefully(); } } public static void main(String[] args) throws Exception { int port = 8080; if (args.length > 0) { try { port = Integer.parseInt(args[0]); } catch (NumberFormatException e) { e.printStackTrace(); } } new WebSocketServer().run(port); } } Handler package netty.protocol.websocket.server; import static io.netty.handler.codec.http.HttpHeaders.isKeepAlive; import static io.netty.handler.codec.http.HttpHeaders.setContentLength; import static io.netty.handler.codec.http.HttpResponseStatus.BAD_REQUEST; import static io.netty.handler.codec.http.HttpVersion.HTTP_1_1; import io.netty.buffer.ByteBuf; import io.netty.buffer.Unpooled; import io.netty.channel.ChannelFuture; import io.netty.channel.ChannelFutureListener; import io.netty.channel.ChannelHandlerContext; import io.netty.channel.SimpleChannelInboundHandler; import io.netty.handler.codec.http.DefaultFullHttpResponse; import io.netty.handler.codec.http.FullHttpRequest; import io.netty.handler.codec.http.FullHttpResponse; import io.netty.handler.codec.http.websocketx.CloseWebSocketFrame; import io.netty.handler.codec.http.websocketx.PingWebSocketFrame; import io.netty.handler.codec.http.websocketx.PongWebSocketFrame; import io.netty.handler.codec.http.websocketx.TextWebSocketFrame; import io.netty.handler.codec.http.websocketx.WebSocketFrame; import io.netty.handler.codec.http.websocketx.WebSocketServerHandshaker; import io.netty.handler.codec.http.websocketx.WebSocketServerHandshakerFactory; import io.netty.util.CharsetUtil; import java.util.logging.Level; import java.util.logging.Logger; /** * TODO * * @description * @author ez * @time 2015\u5e746\u67083\u65e5 \u4e0b\u53484:42:59 */ public class WebSocketServerHandler extends SimpleChannelInboundHandler { private static final Logger logger = Logger .getLogger(WebSocketServerHandler.class.getName()); private WebSocketServerHandshaker handshaker; @Override public void messageReceived(ChannelHandlerContext ctx, Object msg) throws Exception { // \u4f20\u7edf\u7684HTTP\u63a5\u5165 if (msg instanceof FullHttpRequest) { handleHttpRequest(ctx, (FullHttpRequest) msg); } // WebSocket\u63a5\u5165 else if (msg instanceof WebSocketFrame) { handleWebSocketFrame(ctx, (WebSocketFrame) msg); } } @Override public void channelReadComplete(ChannelHandlerContext ctx) throws Exception { ctx.flush(); } private void handleHttpRequest(ChannelHandlerContext ctx, FullHttpRequest req) throws Exception { // \u5982\u679cHTTP\u89e3\u7801\u5931\u8d25\uff0c\u8fd4\u56deHHTP\u5f02\u5e38 if (!req.getDecoderResult().isSuccess() || (!\"websocket\".equals(req.headers().get(\"Upgrade\")))) { sendHttpResponse(ctx, req, new DefaultFullHttpResponse(HTTP_1_1, BAD_REQUEST)); return; } // \u6784\u9020\u63e1\u624b\u54cd\u5e94\u8fd4\u56de\uff0c\u672c\u673a\u6d4b\u8bd5 WebSocketServerHandshakerFactory wsFactory = new WebSocketServerHandshakerFactory( \"ws://localhost:8080/websocket\", null, false); handshaker = wsFactory.newHandshaker(req); if (handshaker == null) { WebSocketServerHandshakerFactory .sendUnsupportedWebSocketVersionResponse(ctx.channel()); } else { handshaker.handshake(ctx.channel(), req); } } private void handleWebSocketFrame(ChannelHandlerContext ctx, WebSocketFrame frame) { // \u5224\u65ad\u662f\u5426\u662f\u5173\u95ed\u94fe\u8def\u7684\u6307\u4ee4 if (frame instanceof CloseWebSocketFrame) { handshaker.close(ctx.channel(), (CloseWebSocketFrame) frame.retain()); return; } // \u5224\u65ad\u662f\u5426\u662fPing\u6d88\u606f if (frame instanceof PingWebSocketFrame) { ctx.channel().write( new PongWebSocketFrame(frame.content().retain())); return; } // \u672c\u4f8b\u7a0b\u4ec5\u652f\u6301\u6587\u672c\u6d88\u606f\uff0c\u4e0d\u652f\u6301\u4e8c\u8fdb\u5236\u6d88\u606f if (!(frame instanceof TextWebSocketFrame)) { throw new UnsupportedOperationException(String.format( \"%s frame types not supported\", frame.getClass().getName())); } // \u8fd4\u56de\u5e94\u7b54\u6d88\u606f String request = ((TextWebSocketFrame) frame).text(); if (logger.isLoggable(Level.FINE)) { logger.fine(String.format(\"%s received %s\", ctx.channel(), request)); } ctx.channel().writeAndFlush( new TextWebSocketFrame(request + \" , \u6b22\u8fce\u4f7f\u7528Netty WebSocket\u670d\u52a1\uff0c\u73b0\u5728\u65f6\u523b\uff1a\" + new java.util.Date().toString())); for (int i = 0; i < 100; i++) { ctx.channel().writeAndFlush( new TextWebSocketFrame(request + i + new java.util.Date().toString())); try { Thread.sleep(1000); } catch (InterruptedException e) { // TODO Auto-generated catch block e.printStackTrace(); } } } private static void sendHttpResponse(ChannelHandlerContext ctx, FullHttpRequest req, FullHttpResponse res) { // \u8fd4\u56de\u5e94\u7b54\u7ed9\u5ba2\u6237\u7aef if (res.getStatus().code() != 200) { ByteBuf buf = Unpooled.copiedBuffer(res.getStatus().toString(), CharsetUtil.UTF_8); res.content().writeBytes(buf); buf.release(); setContentLength(res, res.content().readableBytes()); } // \u5982\u679c\u662f\u975eKeep-Alive\uff0c\u5173\u95ed\u8fde\u63a5 ChannelFuture f = ctx.channel().writeAndFlush(res); if (!isKeepAlive(req) || res.getStatus().code() != 200) { f.addListener(ChannelFutureListener.CLOSE); } } @Override public void exceptionCaught(ChannelHandlerContext ctx, Throwable cause) throws Exception { cause.printStackTrace(); ctx.close(); } } html Netty WebSocket \u65f6\u95f4\u670d\u52a1\u5668 var socket; if (!window.WebSocket) { window.WebSocket = window.MozWebSocket; } if (window.WebSocket) { socket = new WebSocket(\"ws://localhost:8080/websocket\"); socket.onmessage = function(event) { var ta = document.getElementById('responseText'); ta.value += event.data }; socket.onopen = function(event) { var ta = document.getElementById('responseText'); ta.value = \"\u6253\u5f00WebSocket\u670d\u52a1\u6b63\u5e38\uff0c\u6d4f\u89c8\u5668\u652f\u6301WebSocket!\"; }; socket.onclose = function(event) { var ta = document.getElementById('responseText'); ta.value = \"\"; ta.value = \"WebSocket \u5173\u95ed!\"; }; } else { alert(\"\u62b1\u6b49\uff0c\u60a8\u7684\u6d4f\u89c8\u5668\u4e0d\u652f\u6301WebSocket\u534f\u8bae!\"); } function send(message) { if (!window.WebSocket) { return; } if (socket.readyState == WebSocket.OPEN) { socket.send(message); } else { alert(\"WebSocket\u8fde\u63a5\u6ca1\u6709\u5efa\u7acb\u6210\u529f!\"); } } \u670d\u52a1\u7aef\u8fd4\u56de\u7684\u5e94\u7b54\u6d88\u606f \u6458\u81ea\u300ehttp://www.cnblogs.com/mjorcen/p/4549784.html\u300f","title":"Netty WebSocket \u793a\u4f8b"},{"location":"OPENSOURCE/2016-01-03-swixml-sample-code.html/","tags":["swing","swixml"],"text":"Java and XML Sample Code HelloWorld: Small Sample with Label, TextField, Button, and Submit Action Java2Html | Source | XML | Screenshot HelloMac: Small Sample, showing a some Mac features. Java2Html | Source | XML | Screenshot Eventhandling: Actions and ActionCommands Java2Html | Source | XML | Screenshot Accelerators and Mnemonics Java2Html | Source | XML | Screenshot Layout Managers JGoodies FormLayout Example Java2Html | Source | XML Screenshot GridBag Layout Example Java2Html | Source | XML Screenshot Card Layout Example Java2Html | Source | XML | Screenshot Fun with Layouts, a lot of different Layouts in an Internal Frame Java2Html | Source | XML | Screenshot Swixml and Localization Java2Html | Source | XML | Screenshot How to do Applets with Swixml Java2Html | Source | XML | Screenshot Extend the Swixml TagLibrary with your own tags Java2Html | Source | XML | Screenshot Java2Html | Source Java2Html | Source Java2Html | Source ComboBox Tag with an initclass attribute. Java2Html | Source | XML | Screenshot Java2Html | Source The initclass is loaded, an instance is obtained and passed into the constructor of the tag's implementing class. List Tag with an initclass attribute. Java2Html | Source | XML | Screenshot Java2Html | Source The initclass is loaded, an instance is obtained and passed into the constructor of the tag's implementing class. Swixml now understands some XPointer / XInclude syntax Java2Html | Source | XML | XML | Screenshot Custom Tags Java2Html | Source | XML | Screenshot Action Generator( public void myMethod() {..} instead of having to define public Action members. Java2Html | Source | XML | Screenshot \u6458\u81ea\u300ehttp://swixml.org/samples/index.html\u300f GitHub : https://github.com/bsorrentino/swixml2 The goals of project is both to extend the original swixml project providing integration with Swing Application Framework ( JSR 296 ) and Beans Binding ( JSR 295 ) to further simplifying the GUI creation & management and to provide a strict integration with maven","title":"Swixml Sample Code"},{"location":"OPENSOURCE/2016-01-08-maven-assembly-plugin-%25e6%2589%2593%25e5%258c%2585%25e5%258f%25af%25e6%2589%25a7%25e8%25a1%258cjar%25e5%258c%2585.html/","tags":["maven"],"text":"maven-assembly-plugin false jar-with-dependencies the.Main make-assembly package assembly","title":"maven-assembly-plugin \u6253\u5305\u53ef\u6267\u884cjar\u5305"},{"location":"OPENSOURCE/2016-01-16-secure-cookie-with-httponly-and-secure-flag-in-apache.html/","tags":["apache2","XSS"],"text":"Secure Apache Web Server from XSS Attack Do you know you can mitigate most common XSS attack using HttpOnly and Secure flag with your cookie? XSS is dangerous, very dangerous. By looking at increasing number of XSS attack on daily basis, you must secure you web applications. Without having HttpOnly and Secure flag in HTTP response header, it is possible to steal or manipulate web application session and cookies. It\u2019s good practice to set HttpOnly and Secure flag in application code by developers. However, due to bad programming or developers\u2019 unawareness it comes to Web Infrastructures. I will not talk about how to set these at code level. You can refer here . While performing security test on web applications, it\u2019s expected that you will have to fix these to pass the penetration test. This is how you can fix these in Apache Web Server. Implement in Apache: 1. Ensure you have mod_headers.so enabled in Apache instance 2. Add following entry in httpd.conf Header edit Set-Cookie ^(.*)$ $1;HttpOnly;Secure 3. Restart Apache Web Server Note: Header edit is not compatible with lower than Apache 2.2.4 version . You can use following to set HttpOnly and Secure flag in lower than 2.2.4 version. Thanks to Ytse for sharing this information. Header set Set-Cookie HttpOnly;Secure Verification: Open your website with HTTP Watch, Live HTTP Header or HTTP Header Online tool . Check HTTP response header, you should see as highlighted \u6458\u81ea\u300chttp://geekflare.com/httponly-secure-cookie-apache/\u300d","title":"Secure cookie with HttpOnly and Secure flag in Apache"},{"location":"OPENSOURCE/2016-03-06-maven%25e5%25ae%259e%25e6%2588%2598-%25e5%25b8%25b8%25e7%2594%25a8maven%25e6%258f%2592%25e4%25bb%25b6%25e4%25bb%258b%25e7%25bb%258d.html/","tags":["maven","\u63d2\u4ef6","plugin"],"text":"\u6211\u4eec\u90fd\u77e5\u9053Maven\u672c\u8d28\u4e0a\u662f\u4e00\u4e2a\u63d2\u4ef6\u6846\u67b6\uff0c\u5b83\u7684\u6838\u5fc3\u5e76\u4e0d\u6267\u884c\u4efb\u4f55\u5177\u4f53\u7684\u6784\u5efa\u4efb\u52a1\uff0c\u6240\u6709\u8fd9\u4e9b\u4efb\u52a1\u90fd\u4ea4\u7ed9\u63d2\u4ef6\u6765\u5b8c\u6210\uff0c\u4f8b\u5982\u7f16\u8bd1\u6e90\u4ee3\u7801\u662f\u7531maven-compiler-plugin\u5b8c\u6210\u7684\u3002\u8fdb\u4e00\u6b65\u8bf4\uff0c\u6bcf\u4e2a\u4efb\u52a1\u5bf9\u5e94\u4e86\u4e00\u4e2a\u63d2\u4ef6\u76ee\u6807\uff08goal\uff09\uff0c\u6bcf\u4e2a\u63d2\u4ef6\u4f1a\u6709\u4e00\u4e2a\u6216\u8005\u591a\u4e2a\u76ee\u6807\uff0c\u4f8b\u5982maven-compiler-plugin\u7684compile\u76ee\u6807\u7528\u6765\u7f16\u8bd1\u4f4d\u4e8e src/main/java/ \u76ee\u5f55\u4e0b\u7684\u4e3b\u6e90\u7801\uff0ctestCompile\u76ee\u6807\u7528\u6765\u7f16\u8bd1\u4f4d\u4e8e src/test/java/ \u76ee\u5f55\u4e0b\u7684\u6d4b\u8bd5\u6e90\u7801\u3002 \u7528\u6237\u53ef\u4ee5\u901a\u8fc7\u4e24\u79cd\u65b9\u5f0f\u8c03\u7528Maven\u63d2\u4ef6\u76ee\u6807\u3002\u7b2c\u4e00\u79cd\u65b9\u5f0f\u662f\u5c06\u63d2\u4ef6\u76ee\u6807\u4e0e\u751f\u547d\u5468\u671f\u9636\u6bb5\uff08lifecycle phase\uff09\u7ed1\u5b9a\uff0c\u8fd9\u6837\u7528\u6237\u5728\u547d\u4ee4\u884c\u53ea\u662f\u8f93\u5165\u751f\u547d\u5468\u671f\u9636\u6bb5\u800c\u5df2\uff0c\u4f8b\u5982Maven\u9ed8\u8ba4\u5c06maven-compiler-plugin\u7684compile\u76ee\u6807\u4e0ecompile\u751f\u547d\u5468\u671f\u9636\u6bb5\u7ed1\u5b9a\uff0c\u56e0\u6b64\u547d\u4ee4 mvn compile \u5b9e\u9645\u4e0a\u662f\u5148\u5b9a\u4f4d\u5230compile\u8fd9\u4e00\u751f\u547d\u5468\u671f\u9636\u6bb5\uff0c\u7136\u540e\u518d\u6839\u636e\u7ed1\u5b9a\u5173\u7cfb\u8c03\u7528maven-compiler-plugin\u7684compile\u76ee\u6807\u3002\u7b2c\u4e8c\u79cd\u65b9\u5f0f\u662f\u76f4\u63a5\u5728\u547d\u4ee4\u884c\u6307\u5b9a\u8981\u6267\u884c\u7684\u63d2\u4ef6\u76ee\u6807\uff0c\u4f8b\u5982 mvn archetype:generate \u5c31\u8868\u793a\u8c03\u7528maven-archetype-plugin\u7684generate\u76ee\u6807\uff0c\u8fd9\u79cd\u5e26\u5192\u53f7\u7684\u8c03\u7528\u65b9\u5f0f\u4e0e\u751f\u547d\u5468\u671f\u65e0\u5173\u3002 \u8ba4\u8bc6\u4e0a\u8ff0Maven\u63d2\u4ef6\u7684\u57fa\u672c\u6982\u5ff5\u80fd\u5e2e\u52a9\u4f60\u7406\u89e3Maven\u7684\u5de5\u4f5c\u673a\u5236\uff0c\u4e0d\u8fc7\u8981\u60f3\u66f4\u9ad8\u6548\u7387\u5730\u4f7f\u7528Maven\uff0c\u4e86\u89e3\u4e00\u4e9b\u5e38\u7528\u7684\u63d2\u4ef6\u8fd8\u662f\u5f88\u6709\u5fc5\u8981\u7684\uff0c\u8fd9\u53ef\u4ee5\u5e2e\u52a9\u4f60\u907f\u514d\u4e00\u4e0d\u5c0f\u5fc3\u91cd\u65b0\u53d1\u660e\u8f6e\u5b50\u3002\u591a\u5e74\u6765Maven\u793e\u533a\u79ef\u7d2f\u4e86\u5927\u91cf\u7684\u7ecf\u9a8c\uff0c\u5e76\u968f\u4e4b\u5f62\u6210\u4e86\u4e00\u4e2a\u6210\u719f\u7684\u63d2\u4ef6\u751f\u6001\u5708\u3002Maven\u5b98\u65b9\u6709\u4e24\u4e2a\u63d2\u4ef6\u5217\u8868\uff0c\u7b2c\u4e00\u4e2a\u5217\u8868\u7684GroupId\u4e3aorg.apache.maven.plugins\uff0c\u8fd9\u91cc\u7684\u63d2\u4ef6\u6700\u4e3a\u6210\u719f\uff0c\u5177\u4f53\u5730\u5740\u4e3a\uff1a http://maven.apache.org/plugins/index.html \u3002\u7b2c\u4e8c\u4e2a\u5217\u8868\u7684GroupId\u4e3aorg.codehaus.mojo\uff0c\u8fd9\u91cc\u7684\u63d2\u4ef6\u6ca1\u6709\u90a3\u4e48\u6838\u5fc3\uff0c\u4f46\u4e5f\u6709\u4e0d\u5c11\u5341\u5206\u6709\u7528\uff0c\u5176\u5730\u5740\u4e3a\uff1a http://mojo.codehaus.org/plugins.html \u3002 \u63a5\u4e0b\u6765\u7b14\u8005\u6839\u636e\u81ea\u5df1\u7684\u7ecf\u9a8c\u4ecb\u7ecd\u4e00\u4e9b\u6700\u5e38\u7528\u7684Maven\u63d2\u4ef6\uff0c\u5728\u4e0d\u540c\u7684\u73af\u5883\u4e0b\u5b83\u4eec\u5404\u81ea\u90fd\u6709\u5176\u51fa\u8272\u7684\u8868\u73b0\uff0c\u719f\u7ec3\u5730\u4f7f\u7528\u5b83\u4eec\u80fd\u8ba9\u4f60\u7684\u65e5\u5e38\u6784\u5efa\u5de5\u4f5c\u4e8b\u534a\u529f\u500d\u3002 maven-antrun-plugin http://maven.apache.org/plugins/maven-antrun-plugin/ maven-antrun-plugin\u80fd\u8ba9\u7528\u6237\u5728Maven\u9879\u76ee\u4e2d\u8fd0\u884cAnt\u4efb\u52a1\u3002\u7528\u6237\u53ef\u4ee5\u76f4\u63a5\u5728\u8be5\u63d2\u4ef6\u7684\u914d\u7f6e\u4ee5Ant\u7684\u65b9\u5f0f\u7f16\u5199Target\uff0c\u7136\u540e\u4ea4\u7ed9\u8be5\u63d2\u4ef6\u7684run\u76ee\u6807\u53bb\u6267\u884c\u3002\u5728\u4e00\u4e9b\u7531Ant\u5f80Maven\u8fc1\u79fb\u7684\u9879\u76ee\u4e2d\uff0c\u8be5\u63d2\u4ef6\u5c24\u5176\u6709\u7528\u3002\u6b64\u5916\u5f53\u4f60\u53d1\u73b0\u9700\u8981\u7f16\u5199\u4e00\u4e9b\u81ea\u5b9a\u4e49\u7a0b\u5ea6\u5f88\u9ad8\u7684\u4efb\u52a1\uff0c\u540c\u65f6\u53c8\u89c9\u5f97Maven\u4e0d\u591f\u7075\u6d3b\u65f6\uff0c\u4e5f\u53ef\u4ee5\u4ee5Ant\u7684\u65b9\u5f0f\u5b9e\u73b0\u4e4b\u3002maven-antrun-plugin\u7684run\u76ee\u6807\u901a\u5e38\u4e0e\u751f\u547d\u5468\u671f\u7ed1\u5b9a\u8fd0\u884c\u3002 maven-archetype-plugin http://maven.apache.org/archetype/maven-archetype-plugin/ Archtype\u6307\u9879\u76ee\u7684\u9aa8\u67b6\uff0cMaven\u521d\u5b66\u8005\u6700\u5f00\u59cb\u6267\u884c\u7684Maven\u547d\u4ee4\u53ef\u80fd\u5c31\u662f mvn archetype:generate \uff0c\u8fd9\u5b9e\u9645\u4e0a\u5c31\u662f\u8ba9maven-archetype-plugin\u751f\u6210\u4e00\u4e2a\u5f88\u7b80\u5355\u7684\u9879\u76ee\u9aa8\u67b6\uff0c\u5e2e\u52a9\u5f00\u53d1\u8005\u5feb\u901f\u4e0a\u624b\u3002\u53ef\u80fd\u4e5f\u6709\u4eba\u770b\u5230\u4e00\u4e9b\u6587\u6863\u5199\u4e86 mvn archetype:create \uff0c\u4f46\u5b9e\u9645\u4e0acreate\u76ee\u6807\u5df2\u7ecf\u88ab\u5f03\u7528\u4e86\uff0c\u53d6\u800c\u4ee3\u4e4b\u7684\u662fgenerate\u76ee\u6807\uff0c\u8be5\u76ee\u6807\u4f7f\u7528\u4ea4\u4e92\u5f0f\u7684\u65b9\u5f0f\u63d0\u793a\u7528\u6237\u8f93\u5165\u5fc5\u8981\u7684\u4fe1\u606f\u4ee5\u521b\u5efa\u9879\u76ee\uff0c\u4f53\u9a8c\u66f4\u597d\u3002maven-archetype-plugin\u8fd8\u6709\u4e00\u4e9b\u5176\u4ed6\u76ee\u6807\u5e2e\u52a9\u7528\u6237\u81ea\u5df1\u5b9a\u4e49\u9879\u76ee\u539f\u578b\uff0c\u4f8b\u5982\u4f60\u7531\u4e00\u4e2a\u4ea7\u54c1\u9700\u8981\u4ea4\u4ed8\u7ed9\u5f88\u591a\u5ba2\u6237\u8fdb\u884c\u4e8c\u6b21\u5f00\u53d1\uff0c\u4f60\u5c31\u53ef\u4ee5\u4e3a\u4ed6\u4eec\u63d0\u4f9b\u4e00\u4e2aArchtype\uff0c\u5e2e\u52a9\u4ed6\u4eec\u5feb\u901f\u4e0a\u624b\u3002 maven-assembly-plugin http://maven.apache.org/plugins/maven-assembly-plugin/ maven-assembly-plugin\u7684\u7528\u9014\u662f\u5236\u4f5c\u9879\u76ee\u5206\u53d1\u5305\uff0c\u8be5\u5206\u53d1\u5305\u53ef\u80fd\u5305\u542b\u4e86\u9879\u76ee\u7684\u53ef\u6267\u884c\u6587\u4ef6\u3001\u6e90\u4ee3\u7801\u3001readme\u3001\u5e73\u53f0\u811a\u672c\u7b49\u7b49\u3002maven-assembly-plugin\u652f\u6301\u5404\u79cd\u4e3b\u6d41\u7684\u683c\u5f0f\u5982zip\u3001tar.gz\u3001jar\u548cwar\u7b49\uff0c\u5177\u4f53\u6253\u5305\u54ea\u4e9b\u6587\u4ef6\u662f\u9ad8\u5ea6\u53ef\u63a7\u7684\uff0c\u4f8b\u5982\u7528\u6237\u53ef\u4ee5\u6309\u6587\u4ef6\u7ea7\u522b\u7684\u7c92\u5ea6\u3001\u6587\u4ef6\u96c6\u7ea7\u522b\u7684\u7c92\u5ea6\u3001\u6a21\u5757\u7ea7\u522b\u7684\u7c92\u5ea6\u3001\u4ee5\u53ca\u4f9d\u8d56\u7ea7\u522b\u7684\u7c92\u5ea6\u63a7\u5236\u6253\u5305\uff0c\u6b64\u5916\uff0c\u5305\u542b\u548c\u6392\u9664\u914d\u7f6e\u4e5f\u662f\u652f\u6301\u7684\u3002maven-assembly-plugin\u8981\u6c42\u7528\u6237\u4f7f\u7528\u4e00\u4e2a\u540d\u4e3a assembly.xml \u7684\u5143\u6570\u636e\u6587\u4ef6\u6765\u8868\u8ff0\u6253\u5305\uff0c\u5b83\u7684single\u76ee\u6807\u53ef\u4ee5\u76f4\u63a5\u5728\u547d\u4ee4\u884c\u8c03\u7528\uff0c\u4e5f\u53ef\u4ee5\u88ab\u7ed1\u5b9a\u81f3\u751f\u547d\u5468\u671f\u3002 maven-dependency-plugin http://maven.apache.org/plugins/maven-dependency-plugin/ maven-dependency-plugin\u6700\u5927\u7684\u7528\u9014\u662f\u5e2e\u52a9\u5206\u6790\u9879\u76ee\u4f9d\u8d56\uff0c dependency:list \u80fd\u591f\u5217\u51fa\u9879\u76ee\u6700\u7ec8\u89e3\u6790\u5230\u7684\u4f9d\u8d56\u5217\u8868\uff0c dependency:tree \u80fd\u8fdb\u4e00\u6b65\u7684\u63cf\u7ed8\u9879\u76ee\u4f9d\u8d56\u6811\uff0c dependency:analyze \u53ef\u4ee5\u544a\u8bc9\u4f60\u9879\u76ee\u4f9d\u8d56\u6f5c\u5728\u7684\u95ee\u9898\uff0c\u5982\u679c\u4f60\u6709\u76f4\u63a5\u4f7f\u7528\u5230\u7684\u5374\u672a\u58f0\u660e\u7684\u4f9d\u8d56\uff0c\u8be5\u76ee\u6807\u5c31\u4f1a\u53d1\u51fa\u8b66\u544a\u3002maven-dependency-plugin\u8fd8\u6709\u5f88\u591a\u76ee\u6807\u5e2e\u52a9\u4f60\u64cd\u4f5c\u4f9d\u8d56\u6587\u4ef6\uff0c\u4f8b\u5982 dependency:copy-dependencies \u80fd\u5c06\u9879\u76ee\u4f9d\u8d56\u4ece\u672c\u5730Maven\u4ed3\u5e93\u590d\u5236\u5230\u67d0\u4e2a\u7279\u5b9a\u7684\u6587\u4ef6\u5939\u4e0b\u9762\u3002 maven-enforcer-plugin http://maven.apache.org/plugins/maven-enforcer-plugin/ \u5728\u4e00\u4e2a\u7a0d\u5927\u4e00\u70b9\u7684\u7ec4\u7ec7\u6216\u56e2\u961f\u4e2d\uff0c\u4f60\u65e0\u6cd5\u4fdd\u8bc1\u6240\u6709\u6210\u5458\u90fd\u719f\u6089Maven\uff0c\u90a3\u4ed6\u4eec\u505a\u4e00\u4e9b\u6bd4\u8f83\u611a\u8822\u7684\u4e8b\u60c5\u5c31\u4f1a\u53d8\u5f97\u5f88\u6b63\u5e38\uff0c\u4f8b\u5982\u7ed9\u9879\u76ee\u5f15\u5165\u4e86\u5916\u90e8\u7684SNAPSHOT\u4f9d\u8d56\u800c\u5bfc\u81f4\u6784\u5efa\u4e0d\u7a33\u5b9a\uff0c\u4f7f\u7528\u4e86\u4e00\u4e2a\u4e0e\u5927\u5bb6\u4e0d\u4e00\u81f4\u7684Maven\u7248\u672c\u800c\u7ecf\u5e38\u62b1\u6028\u6784\u5efa\u51fa\u73b0\u8be1\u5f02\u95ee\u9898\u3002maven-enforcer-plugin\u80fd\u591f\u5e2e\u52a9\u4f60\u907f\u514d\u4e4b\u7c7b\u95ee\u9898\uff0c\u5b83\u5141\u8bb8\u4f60\u521b\u5efa\u4e00\u7cfb\u5217\u89c4\u5219\u5f3a\u5236\u5927\u5bb6\u9075\u5b88\uff0c\u5305\u62ec\u8bbe\u5b9aJava\u7248\u672c\u3001\u8bbe\u5b9aMaven\u7248\u672c\u3001\u7981\u6b62\u67d0\u4e9b\u4f9d\u8d56\u3001\u7981\u6b62SNAPSHOT\u4f9d\u8d56\u3002\u53ea\u8981\u5728\u4e00\u4e2a\u7236POM\u914d\u7f6e\u89c4\u5219\uff0c\u7136\u540e\u8ba9\u5927\u5bb6\u7ee7\u627f\uff0c\u5f53\u89c4\u5219\u906d\u5230\u7834\u574f\u7684\u65f6\u5019\uff0cMaven\u5c31\u4f1a\u62a5\u9519\u3002\u9664\u4e86\u6807\u51c6\u7684\u89c4\u5219\u4e4b\u5916\uff0c\u4f60\u8fd8\u53ef\u4ee5\u6269\u5c55\u8be5\u63d2\u4ef6\uff0c\u7f16\u5199\u81ea\u5df1\u7684\u89c4\u5219\u3002maven-enforcer-plugin\u7684enforce\u76ee\u6807\u8d1f\u8d23\u68c0\u67e5\u89c4\u5219\uff0c\u5b83\u9ed8\u8ba4\u7ed1\u5b9a\u5230\u751f\u547d\u5468\u671f\u7684validate\u9636\u6bb5\u3002 maven-help-plugin http://maven.apache.org/plugins/maven-help-plugin/ maven-help-plugin\u662f\u4e00\u4e2a\u5c0f\u5de7\u7684\u8f85\u52a9\u5de5\u5177\uff0c\u6700\u7b80\u5355\u7684 help:system \u53ef\u4ee5\u6253\u5370\u6240\u6709\u53ef\u7528\u7684\u73af\u5883\u53d8\u91cf\u548cJava\u7cfb\u7edf\u5c5e\u6027\u3002 help:effective-pom \u548c help:effective-settings \u6700\u4e3a\u6709\u7528\uff0c\u5b83\u4eec\u5206\u522b\u6253\u5370\u9879\u76ee\u7684\u6709\u6548POM\u548c\u6709\u6548settings\uff0c\u6709\u6548POM\u662f\u6307\u5408\u5e76\u4e86\u6240\u6709\u7236POM\uff08\u5305\u62ecSuper POM\uff09\u540e\u7684XML\uff0c\u5f53\u4f60\u4e0d\u786e\u5b9aPOM\u7684\u67d0\u4e9b\u4fe1\u606f\u4ece\u4f55\u800c\u6765\u65f6\uff0c\u5c31\u53ef\u4ee5\u67e5\u770b\u6709\u6548POM\u3002\u6709\u6548settings\u540c\u7406\uff0c\u7279\u522b\u662f\u5f53\u4f60\u53d1\u73b0\u81ea\u5df1\u914d\u7f6e\u7684settings.xml\u6ca1\u6709\u751f\u6548\u65f6\uff0c\u5c31\u53ef\u4ee5\u7528 help:effective-settings \u6765\u9a8c\u8bc1\u3002\u6b64\u5916\uff0cmaven-help-plugin\u7684describe\u76ee\u6807\u53ef\u4ee5\u5e2e\u52a9\u4f60\u63cf\u8ff0\u4efb\u4f55\u4e00\u4e2aMaven\u63d2\u4ef6\u7684\u4fe1\u606f\uff0c\u8fd8\u6709all-profiles\u76ee\u6807\u548cactive-profiles\u76ee\u6807\u5e2e\u52a9\u67e5\u770b\u9879\u76ee\u7684Profile\u3002 maven-release-plugin http://maven.apache.org/plugins/maven-release-plugin/ maven-release-plugin\u7684\u7528\u9014\u662f\u5e2e\u52a9\u81ea\u52a8\u5316\u9879\u76ee\u7248\u672c\u53d1\u5e03\uff0c\u5b83\u4f9d\u8d56\u4e8ePOM\u4e2d\u7684SCM\u4fe1\u606f\u3002 release:prepare \u7528\u6765\u51c6\u5907\u7248\u672c\u53d1\u5e03\uff0c\u5177\u4f53\u7684\u5de5\u4f5c\u5305\u62ec\u68c0\u67e5\u662f\u5426\u6709\u672a\u63d0\u4ea4\u4ee3\u7801\u3001\u68c0\u67e5\u662f\u5426\u6709SNAPSHOT\u4f9d\u8d56\u3001\u5347\u7ea7\u9879\u76ee\u7684SNAPSHOT\u7248\u672c\u81f3RELEASE\u7248\u672c\u3001\u4e3a\u9879\u76ee\u6253\u6807\u7b7e\u7b49\u7b49\u3002 release:perform \u5219\u662f\u7b7e\u51fa\u6807\u7b7e\u4e2d\u7684RELEASE\u6e90\u7801\uff0c\u6784\u5efa\u5e76\u53d1\u5e03\u3002\u7248\u672c\u53d1\u5e03\u662f\u975e\u5e38\u7410\u788e\u7684\u5de5\u4f5c\uff0c\u5b83\u6d89\u53ca\u4e86\u5404\u79cd\u68c0\u67e5\uff0c\u800c\u4e14\u7531\u4e8e\u8be5\u5de5\u4f5c\u4ec5\u4ec5\u662f\u5076\u5c14\u9700\u8981\uff0c\u56e0\u6b64\u624b\u52a8\u64cd\u4f5c\u5f88\u5bb9\u6613\u9057\u6f0f\u4e00\u4e9b\u7ec6\u8282\uff0cmaven-release-plugin\u8ba9\u8be5\u5de5\u4f5c\u53d8\u5f97\u975e\u5e38\u5feb\u901f\u7b80\u4fbf\uff0c\u4e0d\u6613\u51fa\u9519\u3002maven-release-plugin\u7684\u5404\u79cd\u76ee\u6807\u901a\u5e38\u76f4\u63a5\u5728\u547d\u4ee4\u884c\u8c03\u7528\uff0c\u56e0\u4e3a\u7248\u672c\u53d1\u5e03\u663e\u7136\u4e0d\u662f\u65e5\u5e38\u6784\u5efa\u751f\u547d\u5468\u671f\u7684\u4e00\u90e8\u5206\u3002 maven-resources-plugin http://maven.apache.org/plugins/maven-resources-plugin/ \u4e3a\u4e86\u4f7f\u9879\u76ee\u7ed3\u6784\u66f4\u4e3a\u6e05\u6670\uff0cMaven\u533a\u522b\u5bf9\u5f85Java\u4ee3\u7801\u6587\u4ef6\u548c\u8d44\u6e90\u6587\u4ef6\uff0cmaven-compiler-plugin\u7528\u6765\u7f16\u8bd1Java\u4ee3\u7801\uff0cmaven-resources-plugin\u5219\u7528\u6765\u5904\u7406\u8d44\u6e90\u6587\u4ef6\u3002\u9ed8\u8ba4\u7684\u4e3b\u8d44\u6e90\u6587\u4ef6\u76ee\u5f55\u662f src/main/resources \uff0c\u5f88\u591a\u7528\u6237\u4f1a\u9700\u8981\u6dfb\u52a0\u989d\u5916\u7684\u8d44\u6e90\u6587\u4ef6\u76ee\u5f55\uff0c\u8fd9\u4e2a\u65f6\u5019\u5c31\u53ef\u4ee5\u901a\u8fc7\u914d\u7f6emaven-resources-plugin\u6765\u5b9e\u73b0\u3002\u6b64\u5916\uff0c\u8d44\u6e90\u6587\u4ef6\u8fc7\u6ee4\u4e5f\u662fMaven\u7684\u4e00\u5927\u7279\u6027\uff0c\u4f60\u53ef\u4ee5\u5728\u8d44\u6e90\u6587\u4ef6\u4e2d\u4f7f\u7528 ${propertyName} \u5f62\u5f0f\u7684Maven\u5c5e\u6027\uff0c\u7136\u540e\u914d\u7f6emaven-resources-plugin\u5f00\u542f\u5bf9\u8d44\u6e90\u6587\u4ef6\u7684\u8fc7\u6ee4\uff0c\u4e4b\u540e\u5c31\u53ef\u4ee5\u9488\u5bf9\u4e0d\u540c\u73af\u5883\u901a\u8fc7\u547d\u4ee4\u884c\u6216\u8005Profile\u4f20\u5165\u5c5e\u6027\u7684\u503c\uff0c\u4ee5\u5b9e\u73b0\u66f4\u4e3a\u7075\u6d3b\u7684\u6784\u5efa\u3002 maven-surefire-plugin http://maven.apache.org/plugins/maven-surefire-plugin/ \u53ef\u80fd\u662f\u7531\u4e8e\u5386\u53f2\u7684\u539f\u56e0\uff0cMaven 2/3\u4e2d\u7528\u4e8e\u6267\u884c\u6d4b\u8bd5\u7684\u63d2\u4ef6\u4e0d\u662fmaven-test-plugin\uff0c\u800c\u662fmaven-surefire-plugin\u3002\u5176\u5b9e\u5927\u90e8\u5206\u65f6\u95f4\u5185\uff0c\u53ea\u8981\u4f60\u7684\u6d4b\u8bd5\u7c7b\u9075\u5faa\u901a\u7528\u7684\u547d\u4ee4\u7ea6\u5b9a\uff08\u4ee5Test\u7ed3\u5c3e\u3001\u4ee5TestCase\u7ed3\u5c3e\u3001\u6216\u8005\u4ee5Test\u5f00\u5934\uff09\uff0c\u5c31\u51e0\u4e4e\u4e0d\u7528\u77e5\u6653\u8be5\u63d2\u4ef6\u7684\u5b58\u5728\u3002\u7136\u800c\u5728\u5f53\u4f60\u60f3\u8981\u8df3\u8fc7\u6d4b\u8bd5\u3001\u6392\u9664\u67d0\u4e9b\u6d4b\u8bd5\u7c7b\u3001\u6216\u8005\u4f7f\u7528\u4e00\u4e9bTestNG\u7279\u6027\u7684\u65f6\u5019\uff0c\u4e86\u89e3maven-surefire-plugin\u7684\u4e00\u4e9b\u914d\u7f6e\u9009\u9879\u5c31\u5f88\u6709\u7528\u4e86\u3002\u4f8b\u5982 mvn test -Dtest=FooTest \u8fd9\u6837\u4e00\u6761\u547d\u4ee4\u7684\u6548\u679c\u662f\u4ec5\u8fd0\u884cFooTest\u6d4b\u8bd5\u7c7b\uff0c\u8fd9\u662f\u901a\u8fc7\u63a7\u5236maven-surefire-plugin\u7684test\u53c2\u6570\u5b9e\u73b0\u7684\u3002 build-helper-maven-plugin http://mojo.codehaus.org/build-helper-maven-plugin/ Maven\u9ed8\u8ba4\u53ea\u5141\u8bb8\u6307\u5b9a\u4e00\u4e2a\u4e3bJava\u4ee3\u7801\u76ee\u5f55\u548c\u4e00\u4e2a\u6d4b\u8bd5Java\u4ee3\u7801\u76ee\u5f55\uff0c\u867d\u7136\u8fd9\u5176\u5b9e\u662f\u4e2a\u5e94\u5f53\u5c3d\u91cf\u9075\u5b88\u7684\u7ea6\u5b9a\uff0c\u4f46\u5076\u5c14\u4f60\u8fd8\u662f\u4f1a\u5e0c\u671b\u80fd\u591f\u6307\u5b9a\u591a\u4e2a\u6e90\u7801\u76ee\u5f55\uff08\u4f8b\u5982\u4e3a\u4e86\u5e94\u5bf9\u9057\u7559\u9879\u76ee\uff09\uff0cbuild-helper-maven-plugin\u7684add-source\u76ee\u6807\u5c31\u662f\u670d\u52a1\u4e8e\u8fd9\u4e2a\u76ee\u7684\uff0c\u901a\u5e38\u5b83\u88ab\u7ed1\u5b9a\u5230\u9ed8\u8ba4\u751f\u547d\u5468\u671f\u7684generate-sources\u9636\u6bb5\u4ee5\u6dfb\u52a0\u989d\u5916\u7684\u6e90\u7801\u76ee\u5f55\u3002\u9700\u8981\u5f3a\u8c03\u7684\u662f\uff0c\u8fd9\u79cd\u505a\u6cd5\u8fd8\u662f\u4e0d\u63a8\u8350\u7684\uff0c\u56e0\u4e3a\u5b83\u7834\u574f\u4e86 Maven\u7684\u7ea6\u5b9a\uff0c\u800c\u4e14\u53ef\u80fd\u4f1a\u9047\u5230\u5176\u4ed6\u4e25\u683c\u9075\u5b88\u7ea6\u5b9a\u7684\u63d2\u4ef6\u5de5\u5177\u65e0\u6cd5\u6b63\u786e\u8bc6\u522b\u989d\u5916\u7684\u6e90\u7801\u76ee\u5f55\u3002 build-helper-maven-plugin\u7684\u53e6\u4e00\u4e2a\u975e\u5e38\u6709\u7528\u7684\u76ee\u6807\u662fattach-artifact\uff0c\u4f7f\u7528\u8be5\u76ee\u6807\u4f60\u53ef\u4ee5\u4ee5classifier\u7684\u5f62\u5f0f\u9009\u53d6\u90e8\u5206\u9879\u76ee\u6587\u4ef6\u751f\u6210\u9644\u5c5e\u6784\u4ef6\uff0c\u5e76\u540c\u65f6install\u5230\u672c\u5730\u4ed3\u5e93\uff0c\u4e5f\u53ef\u4ee5deploy\u5230\u8fdc\u7a0b\u4ed3\u5e93\u3002 exec-maven-plugin http://mojo.codehaus.org/exec-maven-plugin/ exec-maven-plugin\u5f88\u597d\u7406\u89e3\uff0c\u987e\u540d\u601d\u4e49\uff0c\u5b83\u80fd\u8ba9\u4f60\u8fd0\u884c\u4efb\u4f55\u672c\u5730\u7684\u7cfb\u7edf\u7a0b\u5e8f\uff0c\u5728\u67d0\u4e9b\u7279\u5b9a\u60c5\u51b5\u4e0b\uff0c\u8fd0\u884c\u4e00\u4e2aMaven\u5916\u90e8\u7684\u7a0b\u5e8f\u53ef\u80fd\u5c31\u662f\u6700\u7b80\u5355\u7684\u95ee\u9898\u89e3\u51b3\u65b9\u6848\uff0c\u8fd9\u5c31\u662f exec:exec \u7684\u7528\u9014\uff0c\u5f53\u7136\uff0c\u8be5\u63d2\u4ef6\u8fd8\u5141\u8bb8\u4f60\u914d\u7f6e\u76f8\u5173\u7684\u7a0b\u5e8f\u8fd0\u884c\u53c2\u6570\u3002\u9664\u4e86exec\u76ee\u6807\u4e4b\u5916\uff0cexec-maven-plugin\u8fd8\u63d0\u4f9b\u4e86\u4e00\u4e2ajava\u76ee\u6807\uff0c\u8be5\u76ee\u6807\u8981\u6c42\u4f60\u63d0\u4f9b\u4e00\u4e2amainClass\u53c2\u6570\uff0c\u7136\u540e\u5b83\u80fd\u591f\u5229\u7528\u5f53\u524d\u9879\u76ee\u7684\u4f9d\u8d56\u4f5c\u4e3aclasspath\uff0c\u5728\u540c\u4e00\u4e2aJVM\u4e2d\u8fd0\u884c\u8be5mainClass\u3002\u6709\u65f6\u5019\uff0c\u4e3a\u4e86\u7b80\u5355\u7684\u6f14\u793a\u4e00\u4e2a\u547d\u4ee4\u884cJava\u7a0b\u5e8f\uff0c\u4f60\u53ef\u4ee5\u5728POM\u4e2d\u914d\u7f6e\u597dexec-maven-plugin\u7684\u76f8\u5173\u8fd0\u884c\u53c2\u6570\uff0c\u7136\u540e\u76f4\u63a5\u5728\u547d\u4ee4\u8fd0\u884c mvn exec:java \u4ee5\u67e5\u770b\u8fd0\u884c\u6548\u679c\u3002 jetty-maven-plugin http://wiki.eclipse.org/Jetty/Feature/Jetty_Maven_Plugin \u5728\u8fdb\u884cWeb\u5f00\u53d1\u7684\u65f6\u5019\uff0c\u6253\u5f00\u6d4f\u89c8\u5668\u5bf9\u5e94\u7528\u8fdb\u884c\u624b\u52a8\u7684\u6d4b\u8bd5\u51e0\u4e4e\u662f\u65e0\u6cd5\u907f\u514d\u7684\uff0c\u8fd9\u79cd\u6d4b\u8bd5\u65b9\u6cd5\u901a\u5e38\u5c31\u662f\u5c06\u9879\u76ee\u6253\u5305\u6210war\u6587\u4ef6\uff0c\u7136\u540e\u90e8\u7f72\u5230Web\u5bb9\u5668\u4e2d\uff0c\u518d\u542f\u52a8\u5bb9\u5668\u8fdb\u884c\u9a8c\u8bc1\uff0c\u8fd9\u663e\u7136\u5341\u5206\u8017\u65f6\u3002\u4e3a\u4e86\u5e2e\u52a9\u5f00\u53d1\u8005\u8282\u7701\u65f6\u95f4\uff0cjetty-maven-plugin\u5e94\u8fd0\u800c\u751f\uff0c\u5b83\u5b8c\u5168\u517c\u5bb9 Maven\u9879\u76ee\u7684\u76ee\u5f55\u7ed3\u6784\uff0c\u80fd\u591f\u5468\u671f\u6027\u5730\u68c0\u67e5\u6e90\u6587\u4ef6\uff0c\u4e00\u65e6\u53d1\u73b0\u53d8\u66f4\u540e\u81ea\u52a8\u66f4\u65b0\u5230\u5185\u7f6e\u7684Jetty Web\u5bb9\u5668\u4e2d\u3002\u505a\u4e00\u4e9b\u57fa\u672c\u914d\u7f6e\u540e\uff08\u4f8b\u5982Web\u5e94\u7528\u7684contextPath\u548c\u81ea\u52a8\u626b\u63cf\u53d8\u66f4\u7684\u65f6\u95f4\u95f4\u9694\uff09\uff0c\u4f60\u53ea\u8981\u6267\u884c mvn jetty:run \uff0c\u7136\u540e\u5728IDE\u4e2d\u4fee\u6539\u4ee3\u7801\uff0c\u4ee3\u7801\u7ecfIDE\u81ea\u52a8\u7f16\u8bd1\u540e\u4ea7\u751f\u53d8\u66f4\uff0c\u518d\u7531jetty-maven-plugin\u4fa6\u6d4b\u5230\u540e\u66f4\u65b0\u81f3Jetty\u5bb9\u5668\uff0c\u8fd9\u65f6\u4f60\u5c31\u53ef\u4ee5\u76f4\u63a5\u6d4b\u8bd5Web\u9875\u9762\u4e86\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cjetty-maven-plugin\u5e76\u4e0d\u662f\u5bbf\u4e3b\u4e8eApache\u6216Codehaus\u7684\u5b98\u65b9\u63d2\u4ef6\uff0c\u56e0\u6b64\u4f7f\u7528\u7684\u65f6\u5019\u9700\u8981\u989d\u5916\u7684\u914d\u7f6e settings.xml \u7684pluginGroups\u5143\u7d20\uff0c\u5c06org.mortbay.jetty\u8fd9\u4e2apluginGroup\u52a0\u5165\u3002 versions-maven-plugin http://mojo.codehaus.org/versions-maven-plugin/ \u5f88\u591aMaven\u7528\u6237\u9047\u5230\u8fc7\u8fd9\u6837\u4e00\u4e2a\u95ee\u9898\uff0c\u5f53\u9879\u76ee\u5305\u542b\u5927\u91cf\u6a21\u5757\u7684\u65f6\u5019\uff0c\u4e3a\u4ed6\u4eec\u96c6\u4f53\u66f4\u65b0\u7248\u672c\u5c31\u53d8\u6210\u4e00\u4ef6\u70e6\u4eba\u7684\u4e8b\u60c5\uff0c\u5230\u5e95\u6709\u6ca1\u6709\u81ea\u52a8\u5316\u5de5\u5177\u80fd\u5e2e\u52a9\u5b8c\u6210\u8fd9\u4ef6\u4e8b\u60c5\u5462\uff1f\uff08\u5f53\u7136\u4f60\u53ef\u4ee5\u4f7f\u7528sed\u4e4b\u7c7b\u7684\u6587\u672c\u64cd\u4f5c\u5de5\u5177\uff0c\u4e0d\u8fc7\u4e0d\u5728\u672c\u6587\u8ba8\u8bba\u8303\u56f4\uff09\u7b54\u6848\u662f\u80af\u5b9a\u7684\uff0cversions-maven- plugin\u63d0\u4f9b\u4e86\u5f88\u591a\u76ee\u6807\u5e2e\u52a9\u4f60\u7ba1\u7406Maven\u9879\u76ee\u7684\u5404\u79cd\u7248\u672c\u4fe1\u606f\u3002\u4f8b\u5982\u6700\u5e38\u7528\u7684\uff0c\u547d\u4ee4 mvn versions:set -DnewVersion=1.1-SNAPSHOT \u5c31\u80fd\u5e2e\u52a9\u4f60\u628a\u6240\u6709\u6a21\u5757\u7684\u7248\u672c\u66f4\u65b0\u52301.1-SNAPSHOT\u3002\u8be5\u63d2\u4ef6\u8fd8\u63d0\u4f9b\u4e86\u5176\u4ed6\u4e00\u4e9b\u5f88\u6709\u7528\u7684\u76ee\u6807\uff0cdisplay-dependency- updates\u80fd\u544a\u8bc9\u4f60\u9879\u76ee\u4f9d\u8d56\u6709\u54ea\u4e9b\u53ef\u7528\u7684\u66f4\u65b0\uff1b\u7c7b\u4f3c\u7684display-plugin-updates\u80fd\u544a\u8bc9\u4f60\u53ef\u7528\u7684\u63d2\u4ef6\u66f4\u65b0\uff1b\u7136\u540euse- latest-versions\u80fd\u81ea\u52a8\u5e2e\u4f60\u5c06\u6240\u6709\u4f9d\u8d56\u5347\u7ea7\u5230\u6700\u65b0\u7248\u672c\u3002\u6700\u540e\uff0c\u5982\u679c\u4f60\u5bf9\u6240\u505a\u7684\u66f4\u6539\u6ee1\u610f\uff0c\u5219\u53ef\u4ee5\u4f7f\u7528 mvn versions:commit \u63d0\u4ea4\uff0c\u4e0d\u6ee1\u610f\u7684\u8bdd\u4e5f\u53ef\u4ee5\u4f7f\u7528 mvn versions:revert \u8fdb\u884c\u64a4\u9500\u3002 \u5c0f\u7ed3 \u672c\u6587\u4ecb\u7ecd\u4e86\u4e00\u4e9b\u6700\u5e38\u7528\u7684Maven\u63d2\u4ef6\uff0c\u8fd9\u91cc\u6307\u7684\u201c\u5e38\u7528\u201d\u662f\u6307\u7ecf\u5e38\u9700\u8981\u8fdb\u884c\u914d\u7f6e\u7684\u63d2\u4ef6\uff0c\u4e8b\u5b9e\u4e0a\u6211\u4eec\u7528Maven\u7684\u65f6\u5019\u5f88\u591a\u5176\u5b83\u63d2\u4ef6\u4e5f\u662f\u5fc5\u987b\u7684\uff0c\u4f8b\u5982\u9ed8\u8ba4\u7684\u7f16\u8bd1\u63d2\u4ef6maven-compiler-plugin\u548c\u9ed8\u8ba4\u7684\u6253\u5305\u63d2\u4ef6maven-jar-plugin\uff0c\u4f46\u56e0\u4e3a\u5f88\u5c11\u9700\u8981\u5bf9\u5b83\u4eec\u8fdb\u884c\u914d\u7f6e\uff0c\u56e0\u6b64\u4e0d\u5728\u672c\u6587\u8ba8\u8bba\u8303\u56f4\u3002\u4e86\u89e3\u5e38\u7528\u7684Maven\u63d2\u4ef6\u80fd\u5e2e\u52a9\u4f60\u4e8b\u500d\u529f\u534a\u5730\u5b8c\u6210\u9879\u76ee\u6784\u5efa\u4efb\u52a1\uff0c\u53cd\u4e4b\u4f60\u5c31\u53ef\u80fd\u4f1a\u56e0\u4e3a\u7ecf\u5e38\u9047\u5230\u4e00\u4e9b\u96be\u4ee5\u89e3\u51b3\u7684\u95ee\u9898\u800c\u611f\u5230\u6cae\u4e27\u3002\u672c\u6587\u4ecb\u7ecd\u7684\u63d2\u4ef6\u57fa\u672c\u80fd\u8986\u76d6\u5927\u90e8\u5206Maven\u7528\u6237\u7684\u65e5\u5e38\u4f7f\u7528\u9700\u8981\uff0c\u5982\u679c\u4f60\u771f\u6709\u975e\u5e38\u7279\u6b8a\u7684\u9700\u6c42\uff0c\u81ea\u884c\u7f16\u5199\u4e00\u4e2aMaven\u63d2\u4ef6\u4e5f\u4e0d\u662f\u96be\u4e8b\uff0c\u66f4\u4f55\u51b5\u8fd8\u6709\u8fd9\u4e48\u591a\u5f00\u653e\u6e90\u4ee3\u7801\u7684\u63d2\u4ef6\u4f9b\u4f60\u53c2\u8003\u3002 \u672c\u6587\u7684\u8fd9\u4e2a\u63d2\u4ef6\u5217\u8868\u5e76\u4e0d\u662f\u4e00\u4e2a\u5b8c\u6574\u5217\u8868\uff0c\u8bfb\u8005\u6709\u5174\u8da3\u7684\u8bdd\u4e5f\u53ef\u4ee5\u53bb\u4ed4\u7ec6\u6d4f\u89c8\u4e00\u4e0bApache\u548cCodehaus Mojo\u7684Maven\u63d2\u4ef6\u5217\u8868\uff0c\u4ee5\u7684\u5230\u4e00\u4e2a\u66f4\u4e3a\u5168\u9762\u7684\u8ba4\u8bc6\u3002\u6700\u540e\uff0c\u5728\u7ebf\u7684Maven\u4ed3\u5e93\u641c\u7d22\u5f15\u64ce\u5982 http://search.maven.org/ \u4e5f\u80fd\u5e2e\u52a9\u4f60\u5feb\u901f\u627e\u5230\u81ea\u5df1\u611f\u5174\u8da3\u7684Maven\u63d2\u4ef6\u3002 \u6458\u81ea \u300chttp://www.infoq.com/cn/news/2011/04/xxb-maven-7-plugin\u300d \u300chttp://www.infoq.com/cn/news/2011/05/xxb-maven-8-plugin\u300d","title":"Maven\u5b9e\u6218 &mdash; \u5e38\u7528Maven\u63d2\u4ef6\u4ecb\u7ecd"},{"location":"OPENSOURCE/2016-03-06-maven-practice-%25e6%2596%2587%25e9%259b%2586-infoq.html/","tags":[],"text":"http://www.infoq.com/cn/maven-practice","title":"Maven Practice \u6587\u96c6 @InfoQ"},{"location":"OPENSOURCE/2016-04-04-redis%25e4%25b8%25bb%25e4%25bb%258e%25e9%2585%258d%25e7%25bd%25ae%25e5%258f%258a%25e4%25bd%25bf%25e7%2594%25a8keepalived%25e5%25ae%259e%25e7%258e%25b0redis%25e9%25ab%2598%25e5%258f%25af%25e7%2594%25a8.html/","tags":["Keepalived","Redis","\u9ad8\u53ef\u7528"],"text":"\u4e00\uff1a\u73af\u5883\u4ecb\u7ecd Master: 172.16.206.29 Slave: 172.16.206.28 Virtural IP Address (VIP): 172.16.206.250 \u4e8c\uff1a\u8bbe\u8ba1\u601d\u8def\uff1a \u5f53 Master \u4e0e Slave \u5747\u8fd0\u4f5c\u6b63\u5e38\u65f6, Master\u8d1f\u8d23\u670d\u52a1\uff0cSlave\u8d1f\u8d23Standby\uff1b \u5f53 Master \u6302\u6389\uff0cSlave \u6b63\u5e38\u65f6, Slave\u63a5\u7ba1\u670d\u52a1\uff0c\u6709\u5199\u6743\u9650\uff0c\u540c\u65f6\u5173\u95ed\u4e3b\u4ece\u590d\u5236\u529f\u80fd\uff1b \u5f53 Master \u6062\u590d\u6b63\u5e38\uff0c\u5219\u4eceSlave\u540c\u6b65\u6570\u636e\uff0c\u540c\u6b65\u6570\u636e\u4e4b\u540e\u5173\u95ed\u4e3b\u4ece\u590d\u5236\u529f\u80fd\uff0c\u6062\u590dMaster\u8eab\u4efd\uff0c\u540c\u65f6Slave\u7b49\u5f85Master\u540c\u6b65\u6570\u636e\u5b8c\u6210\u4e4b\u540e\uff0c\u6062\u590dSlave\u8eab\u4efd\u3002 \u4e09\uff1a\u5b89\u88c5\u914d\u7f6e\u524d\u51c6\u5907\u5de5\u4f5c \u5728\u4e3b\u670d\u52a1\u5668 172.16.206.29 \u4e0a\u9762\u505a\u4e0b\u9762\u64cd\u4f5c echo \u201c172.16.206.29 osb29\u201d >> /etc/hosts echo \u201c172.16.206.28 osb28\u201d >> /etc/hosts \u5728\u4ece\u670d\u52a1\u5668 172.16.206.28 \u4e0a\u9762\u505a\u4e0b\u9762\u64cd\u4f5c echo \u201c172.16.206.29 osb29\u201d >> /etc/hosts echo \u201c172.16.206.28 osb28\u201d >> /etc/hosts \u56db\uff1a\u4e3b\u670d\u52a1\u5668\u914d\u7f6eredis 1\uff0e\u4e0b\u8f7dredis \u7248\u672c2.8.19 wget http://download.redis.io/releases/redis-2.8.19.tar.gz 2\uff0e\u89e3\u538b tar -zxvf redis-2.8.19.tar.gz 3\uff0ecd redis-2.8.19 4\uff0emake && make install 5\uff0ecp redis.conf /etc/redis.conf cd src/ cp redis-server redis-cli redis-benchmark redis-check-aofredis-check-dump /usr/local/bin 6\uff0e\u4fee\u6539 /etc/redis.conf\u91cc\u9762\u53ef\u4ee5\u628adaemonize no \u4fee\u6539\u4e3adaemonize yes \u76ee\u7684\u662f\u53ef\u4ee5\u5728\u540e\u53f0\u6267\u884credis-server\u3002 7\uff0einit.d \u542f\u52a8\u811a\u672c vi /etc/init.d/redis-server #!/usr/bin/env bash # # redis start up the redis server daemon # # chkconfig: 345 99 99 # description: redis service in /etc/init.d/redis # chkconfig --add redis or chkconfig --list redis # service redis start or service redis stop # processname: redis-server # config: /etc/redis.conf PATH=/usr/local/bin:/sbin:/usr/bin:/bin REDISPORT=6379 EXEC=/usr/local/bin/redis-server REDIS_CLI=/usr/local/bin/redis-cli PIDFILE=/var/run/redis.pid CONF=\"/etc/redis.conf\" #make sure some dir exist if [ ! -d /var/lib/redis ] then mkdir -p /var/lib/redis mkdir -p /var/log/redis fi case \"$1\" in status) ps -A|grep redis ;; start) if [ -f $PIDFILE ] then echo \"$PIDFILE exists, process is already running or crashed\" else echo \"Starting Redis server...\" $EXEC $CONF fi if [ \"$?\"=\"0\" ] then echo \"Redis is running...\" fi ;; stop) if [ ! -f $PIDFILE ] then echo \"$PIDFILE does not exist, process is not running\" else PID=$(cat $PIDFILE) echo \"Stopping ...\" $REDIS_CLI -p $REDISPORT SHUTDOWN while [ -x ${PIDFILE} ] do echo \"Waiting for Redis to shutdown ...\" sleep 1 done echo \"Redis stopped\" fi ;; restart|force-reload) ${0} stop ${0} start ;; *) echo \"Usage: /etc/init.d/redis {start|stop|restart|force-reload}\" >&2 exit 1 esac \u6267\u884c\uff1a $ chmod o+x /etc/init.d/redis-server $ chkconfig \u2013add redis-server $ service redis-server start \u4e94\uff1a\u4ece\u670d\u52a1\u5668\u914d\u7f6eredis \u4ece\u670d\u52a1\u5668\uff0c\u914d\u7f6e\u4e00\u6837\uff0c\u53ea\u4e0d\u8fc7 \u4fee\u6539/etc/redis.conf \u4e2d slaveof \u4fee\u6539\u4e3a slaveof 172.16.206.28 6379 \u7136\u540e\u5f00\u542f\u4ece\u670d\u52a1\u5668\u7684redis\u670d\u52a1\u3002 start redis-server start \u516d\uff1a\u8fdb\u884credis\u4e3b\u4ece\u6d4b\u8bd5 #\u4e3b\u670d\u52a1\u5668 redis-cli -p 6379 set hello world #\u4ece\u670d\u52a1\u5668 redis-cli -p 6379 get hello \u201cworld\u201d #\u4e3b\u670d\u52a1\u5668 redis-cli -p 6379 set hello2 world2 #\u4ece\u670d\u52a1\u5668 redis-cli -p 6379 get hello2 \u201cworld2\u201d redis-cli -p 6379 set hello world (error) READONLY You can\u2019t write against a read only slave. \u6210\u529f\u914d\u7f6e\u4e3b\u4eceredis\u670d\u52a1\u5668\uff0c\u7531\u4e8e\u914d\u7f6e\u4e2d\u6709\u4e00\u6761\u4ece\u670d\u52a1\u5668\u662f\u53ea\u8bfb\u7684\uff0c\u6240\u4ee5\u4ece\u670d\u52a1\u5668\u6ca1\u6cd5\u8bbe\u7f6e\u6570\u636e\uff0c\u53ea\u53ef\u4ee5\u8bfb\u53d6\u6570\u636e\u3002 \u4e03\uff1a\u5b89\u88c5\u548c\u914d\u7f6ekeepalived 1\uff0e wget http://www.keepalived.org/software/keepalived-1.2.15.tar.gz tar -zxvf keepalived-1.2.15.tar.gz cd keepalived-1.2.15 2\uff0e \u5b89\u88c5openssl-devel\u548ckernel-devel yum install openssl-devel yum install kernel-devel ln -s /usr/src/kernels/2.6.32-431.el6.x86_64 /usr/src/linux 3\uff0e \u914d\u7f6e\u7f16\u8bd1\u5b89\u88c5 ./configure\u2013prefix=/usr/local/keepalived \u2013with-kernel-dir=/usr/src/linux \u2013enable-sha1 make && make install 4\uff0e \u590d\u5236keepalived\u76f8\u5173\u6587\u4ef6 cp /usr/local/keepalived/etc/sysconfig/keepalived /etc/sysconfig/keepalived cp /usr/local/keepalived/sbin/keepalived /usr/sbin/keepalived cp /usr/local/keepalived/etc/rc.d/init.d/keepalived /etc/init.d/keepalived mkdir /etc/keepalived cp /usr/local/keepalived/etc/keepalived/samples/keepalived.conf.virtualhost /etc/keepalived/keepalived.conf \u516b\uff1a\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u548c\u76f8\u5173\u811a\u672c 1\uff0e \u5728Master\u4e0a\u521b\u5efa\u914d\u7f6e\u6587\u4ef6keepalived.conf vi /etc/keepalived/keepalived.conf ////////////////////////////////////////////////// ! Configuration File for keepalived vrrp_script chk_redis { script \"/etc/keepalived/scripts/redis_check.sh\" ###\u76d1\u63a7\u811a\u672c interval 2 ###\u76d1\u63a7\u65f6\u95f4 } #\u7f51\u5361\u9700\u8981\u6ce8\u610f\uff0c\u4f7f\u7528ifconfig\u67e5\u770b\u4e00\u4e0b\u5f53\u524d\u6d3b\u52a8\u7f51\u5361 vrrp_instance VI_1 { state MASTER ###\u8bbe\u7f6e\u4e3aMASTER interface eth0 ###\u76d1\u63a7\u7f51\u5361 virtual_router_id 51 priority 100 ###\u6743\u91cd\u503c authentication { auth_type PASS ###\u52a0\u5bc6 auth_pass 1111 ###\u5bc6\u7801 } track_script { chk_redis ###\u6267\u884c\u4e0a\u9762\u5b9a\u4e49\u7684chk_redis } virtual_ipaddress { 172.16.206.250 ######VIP } notify_master /etc/keepalived/scripts/redis_master.sh notify_backup /etc/keepalived/scripts/redis_backup.sh notify_fault /etc/keepalived/scripts/redis_fault.sh notify_stop /etc/keepalived/scripts/redis_stop.sh } 2\uff0e\u5728Slave\u4e0a\u521b\u5efa\u914d\u7f6e\u6587\u4ef6keepalived.conf vim /etc/keepalived/keepalived.conf ////////////////////////////////////////////////// ! Configuration File for keepalived vrrp_script chk_redis { script \"/etc/keepalived/scripts/redis_check.sh\" ###\u76d1\u63a7\u811a\u672c interval 2 ###\u76d1\u63a7\u65f6\u95f4 } #\u540c\u6837\u8981\u6ce8\u610f\u7f51\u5361 vrrp_instance VI_1 { state BACKUP ###\u8bbe\u7f6e\u4e3aBACKUP interface eth0 ###\u76d1\u63a7\u7f51\u5361 virtual_router_id 51 priority 10 ###\u6bd4MASTRE\u6743\u91cd\u503c\u4f4e authentication { auth_type PASS auth_pass 1111 ###\u5bc6\u7801\u4e0eMASTRE\u76f8\u540c } track_script { chk_redis ###\u6267\u884c\u4e0a\u9762\u5b9a\u4e49\u7684chk_redis } virtual_ipaddress { 172.16.206.250 ####vip } notify_master /etc/keepalived/scripts/redis_master.sh notify_backup /etc/keepalived/scripts/redis_backup.sh notify_fault /etc/keepalived/scripts/redis_fault.sh notify_stop /etc/keepalived/scripts/redis_stop.sh } 3\uff0e\u5728Master\u548cSlave\u4e0a\u521b\u5efa\u76d1\u63a7Redis\u7684\u811a\u672c $ mkdir /etc/keepalived/scripts $ vim /etc/keepalived/scripts/redis_check.sh #!/bin/bash ALIVE=`/usr/local/bin/redis-cli -p 6379 -a password_of_redis PING` if [ \"$ALIVE\" == \"PONG\" ]; then echo $ALIVE exit 0 else echo $ALIVE exit 1 fi 4\uff0e\u7f16\u5199\u5173\u952e\u811a\u672c notify_master /etc/keepalived/scripts/redis_master.sh notify_backup /etc/keepalived/scripts/redis_backup.sh notify_fault /etc/keepalived/scripts/redis_fault.sh notify_stop /etc/keepalived/scripts/redis_stop.sh Keepalived\u5728\u8f6c\u6362\u72b6\u6001\u65f6\u4f1a\u4f9d\u7167\u72b6\u6001\u6765\u6267\u884c\u811a\u672c\uff1a \u5f53\u8fdb\u5165Master\u72b6\u6001\u65f6\u4f1a\u547c\u53eb notify_master \u5f53\u8fdb\u5165Backup\u72b6\u6001\u65f6\u4f1a\u547c\u53eb notify_backup \u5f53\u53d1\u73b0\u5f02\u5e38\u60c5\u51b5\u65f6\u8fdb\u5165Fault\u72b6\u6001\u547c\u53eb notify_fault \u5f53\u7a0b\u5e8f\u7ec8\u6b62\u65f6\u5219\u547c\u53eb notify_stop 4.1 \u5728Redis Master\u4e0a\u521b\u5efanotity_master\u4e0enotify_backup\u811a\u672c\uff1a vi /etc/keepalived/scripts/redis_master.sh #!/bin/bash REDISCLI=\"/usr/local/bin/redis-cli\" LOGFILE=\"/var/log/keepalived-redis-state.log\" echo \"[master]\" >> $LOGFILE date >> $LOGFILE echo \"Being master....\" >> $LOGFILE 2>&1 echo \"Run SLAVEOF cmd ...\" >> $LOGFILE $REDISCLI SLAVEOF 172.16.206.sl 6379 >> $LOGFILE 2>&1 sleep 10 #\u5ef6\u8fdf10\u79d2\u4ee5\u540e\u5f85\u6570\u636e\u540c\u6b65\u5b8c\u6210\u540e\u518d\u53d6\u6d88\u540c\u6b65\u72b6\u6001 echo \"Run SLAVEOF NO ONE cmd ...\" >> $LOGFILE $REDISCLI SLAVEOF NO ONE >> $LOGFILE 2>&1 vi /etc/keepalived/scripts/redis_backup.sh #!/bin/bash REDISCLI=\"/usr/local/bin/redis-cli\" LOGFILE=\"/var/log/keepalived-redis-state.log\" echo \"[backup]\" >> $LOGFILE date >> $LOGFILE echo \"Being slave....\" >> $LOGFILE 2>&1 sleep 15 #\u5ef6\u8fdf15\u79d2\u5f85\u6570\u636e\u88ab\u5bf9\u65b9\u540c\u6b65\u5b8c\u6210\u4e4b\u540e\u518d\u5207\u6362\u4e3b\u4ece\u89d2\u8272 echo \"Run SLAVEOF cmd ...\" >> $LOGFILE $REDISCLI SLAVEOF 192.168.1.sl 6379 >> $LOGFILE 2>&1 4.2 \u5728Redis Slave\u4e0a\u521b\u5efanotity_master\u4e0enotify_backup\u811a\u672c\uff1a vi /etc/keepalived/scripts/redis_master.sh #!/bin/bash REDISCLI=\"/usr/local/bin/redis-cli\" LOGFILE=\"/var/log/keepalived-redis-state.log\" echo \"[master]\" >> $LOGFILE date >> $LOGFILE echo \"Being master....\" >> $LOGFILE 2>&1 echo \"Run SLAVEOF cmd ...\" >> $LOGFILE $REDISCLI SLAVEOF 192.168.1.ma 6379 >> $LOGFILE 2>&1 sleep 10 #\u5ef6\u8fdf10\u79d2\u4ee5\u540e\u5f85\u6570\u636e\u540c\u6b65\u5b8c\u6210\u540e\u518d\u53d6\u6d88\u540c\u6b65\u72b6\u6001 echo \"Run SLAVEOF NO ONE cmd ...\" >> $LOGFILE $REDISCLI SLAVEOF NO ONE >> $LOGFILE 2>&1 vi /etc/keepalived/scripts/redis_backup.sh #!/bin/bash REDISCLI=\"/usr/local/bin/redis-cli\" LOGFILE=\"/var/log/keepalived-redis-state.log\" echo \"[backup]\" >> $LOGFILE date >> $LOGFILE echo \"Being slave....\" >> $LOGFILE 2>&1 sleep 15 #\u5ef6\u8fdf15\u79d2\u5f85\u6570\u636e\u88ab\u5bf9\u65b9\u540c\u6b65\u5b8c\u6210\u4e4b\u540e\u518d\u5207\u6362\u4e3b\u4ece\u89d2\u8272 echo \"Run SLAVEOF cmd ...\" >> $LOGFILE $REDISCLI SLAVEOF 192.168.1.4 6379 >> $LOGFILE 2>&1 4.3 \u7136\u540e\u5728Master\u4e0eSlave\u521b\u5efa\u5982\u4e0b\u76f8\u540c\u7684\u811a\u672c\uff1a vi /etc/keepalived/scripts/redis_fault.sh #!/bin/bash LOGFILE=/var/log/keepalived-redis-state.log echo \"[fault]\" >> $LOGFILE date >> $LOGFILE vi /etc/keepalived/scripts/redis_stop.sh #!/bin/bash LOGFILE=/var/log/keepalived-redis-state.log echo \"[stop]\" >> $LOGFILE date >> $LOGFILE 4.4 \u5728\u4e3b\u4ece\u670d\u52a1\u5668\u4e0a\u9762\u7ed9\u811a\u672c\u90fd\u52a0\u4e0a\u53ef\u6267\u884c\u6743\u9650\uff1a chmod +x /etc/keepalived/scripts/*.sh \u4e5d\uff1a\u76f8\u5173\u529f\u80fd\u6d4b\u8bd5 1. \u542f\u52a8Master\u548cslave\u4e0a\u7684Redis service redis-server start 2.\u542f\u52a8Master\u548cslave\u4e0a\u7684Keepalived /etc/init.d/keepalived start 3.\u5c1d\u8bd5\u901a\u8fc7VIP\u8fde\u63a5Redis: $ redis-cli -h 172.16.206.250 -p 6379 -a password_of_redis INFO \u8fde\u63a5\u6210\u529f\uff0c\u53ef\u4ee5\u770b\u5230\u4e3b\u4ece\u673a\u7684\u4fe1\u606f\uff0c\u4f8b\u5982\uff1a role:master slave0:172.16.206.28,6379,online 4.\u5c1d\u8bd5\u63d2\u5165\u4e00\u4e9b\u6570\u636e\uff1a $ redis-cli -h 172.16.206.250 SET hello3 world3 OK \u4eceVIP\u8bfb\u53d6\u6570\u636e $ redis-cli -h 172.16.206.250 GET hello3 \u201cworld3\u201d \u4eceMaster\u8bfb\u53d6\u6570\u636e $ redis-cli -h 172.16.206.29 GET hello3 \u201cworld3\u201d \u4eceSlave\u8bfb\u53d6\u6570\u636e $ redis-cli -h 172.16.206.28 GET hello3 \u201cworld3\u201d 5.\u5c06Master\u4e0a\u7684Redis\u8fdb\u7a0b\u6740\u6b7b\uff1a $ service redis-server stop \u67e5\u770bMaster\u4e0a\u7684Keepalived\u65e5\u5fd7 $ tail -f /var/log/keepalived-redis-state.log [fault] Mon Jan 5 14:06:22 CST 2015 \u540c\u65f6Slave\u4e0a\u7684\u65e5\u5fd7\u663e\u793a\uff1a $ tail -f /var/log/keepalived-redis-state.log [master] Mon Jan 5 14:13:52 CST 2015 Being master\u2026. Run SLAVEOF cmd \u2026 OK Already connected to specified master Run SLAVEOF NO ONE cmd \u2026 OK \u73b0\u5728\uff0cSlave\u5df2\u7ecf\u63a5\u7ba1\u670d\u52a1\uff0c\u5e76\u4e14\u62e5\u6709Master\u7684\u89d2\u8272 $ redis-cli -h 172.16.206.250 INFO $ redis-cli -h 172.16.206.28 INFO role:master 6.\u7136\u540e\u6062\u590dMaster\u7684Redis\u8fdb\u7a0b $ service redis-server start \u67e5\u770bMaster\u4e0a\u7684Keepalived\u65e5\u5fd7 $ tail -f /var/log/keepalived-redis-state.log [master] 2015\u5e74 01\u6708 05\u65e5 \u661f\u671f\u4e00 15:48:08 CST Being master\u2026. Run SLAVEOF cmd \u2026 OK Run SLAVEOF NO ONE cmd \u2026 OK \u540c\u65f6Slave\u4e0a\u7684\u65e5\u5fd7\u663e\u793a\uff1a $ tail -f /var/log/keepalived-redis-state.log [backup] Mon Jan 5 14:53:16 CST 2015 Being slave\u2026. Run SLAVEOF cmd \u2026 OK Master\u5df2\u7ecf\u518d\u6b21\u6062\u590d\u4e86Master\u89d2\u8272 \u6458\u81ea\u300chttp://abcve.com/redis-keepalived/\u300d","title":"Redis\u4e3b\u4ece\u914d\u7f6e\u53ca\u4f7f\u7528KeepAlived\u5b9e\u73b0Redis\u9ad8\u53ef\u7528"},{"location":"OPENSOURCE/2016-11-04-gitsvn-resetrevert-%25e5%259b%259e%25e6%25bb%259a%25e5%2588%25b0%25e6%259c%258d%25e5%258a%25a1%25e5%2599%25a8%25e4%25b8%258a%25e7%259a%2584%25e6%259f%2590%25e4%25b8%2580%25e4%25b8%25aa%25e7%2589%2588%25e6%259c%25ac.html/","tags":["svn","git"],"text":"Git: 1\u3001git log \u67e5\u627e\u5230\u8981\u56de\u6eda\u7684\u7248\u672c\u53f7\uff0c\u8bbe\u4e3aaldfjsajdfljsadf 2\u3001git reset --hard aldfjsajdfljsadf reset \u4f1a\u5f71\u54cd commit aldfjsajdfljsadf \u4e4b\u540e\u7684commit\u90fd\u4f1a\u88ab\u9000\u56de\u5230\u6682\u5b58\u533a revert\u662f\u64a4\u9500\u67d0\u6b21\u64cd\u4f5c\uff0c\u6b64\u6b21\u64cd\u4f5c\u4e4b\u524d\u7684commit\u90fd\u4f1a\u88ab\u4fdd\u7559\uff0c\u8c8c\u4f3c\u4e4b\u540e\u7684\u4e5f\u4f1a\u88ab\u4fdd\u7559 git revert \u64a4\u9500 \u67d0\u6b21\u64cd\u4f5c\uff0c\u6b64\u6b21\u64cd\u4f5c\u4e4b\u524d\u548c\u4e4b\u540e\u7684commit\u548chistory\u90fd\u4f1a\u4fdd\u7559\uff0c\u5e76\u4e14\u628a\u8fd9\u6b21\u64a4\u9500 \u4f5c\u4e3a\u4e00\u6b21\u6700\u65b0\u7684\u63d0\u4ea4 * git revert HEAD \u64a4\u9500\u524d\u4e00\u6b21 commit * git revert HEAD^ \u64a4\u9500\u524d\u524d\u4e00\u6b21 commit * git revert commit \uff08\u6bd4\u5982\uff1afa042ce57ebbe5bb9c8db709f719cec2c58ee7ff\uff09\u64a4\u9500\u6307\u5b9a\u7684\u7248\u672c\uff0c\u64a4\u9500\u4e5f\u4f1a\u4f5c\u4e3a\u4e00\u6b21\u63d0\u4ea4\u8fdb\u884c\u4fdd\u5b58\u3002 git revert\u662f\u63d0\u4ea4\u4e00\u4e2a\u65b0\u7684\u7248\u672c\uff0c\u5c06\u9700\u8981revert\u7684\u7248\u672c\u7684\u5185\u5bb9\u518d\u53cd\u5411\u4fee\u6539\u56de\u53bb\uff0c\u7248\u672c\u4f1a\u9012\u589e\uff0c\u4e0d\u5f71\u54cd\u4e4b\u524d\u63d0\u4ea4\u7684\u5185\u5bb9 Svn: svn log \u67e5\u627e\u5230\u8981\u56de\u6eda\u7684\u7248\u672c\u53f7 ------------------------------------------------------------------------ r26 | yaoming | 2014-02-12 15:06:17 +0800 | 5 \u884c [BSP]\u79fb\u9664BSP\u5206\u652f \u9002\u7528\u673a\u578b:M65U \u9a8c\u8bc1\u5efa\u8bae: \u5173\u8054\u53d8\u66f4\u9879: \u65e0 checked by liuxiang ------------------------------------------------------------------------ r25 | yaoming | 2014-02-11 17:55:44 +0800 | 5 \u884c [BSP]\u6dfb\u52a0MT6592\u5e73\u53f0\u652f\u6301 \u9002\u7528\u673a\u578b:M65U \u9a8c\u8bc1\u5efa\u8bae: \u5173\u8054\u53d8\u66f4\u9879: \u65e0 checked by liuxiang \u4ece26\u56de\u6eda\u523025 svn diff -r 26:25 \"\" svn merge -r 26:25 \"\" svn\u4ee3\u7801\u56de\u6eda\u547d\u4ee4 \u53d6\u6d88\u5bf9\u4ee3\u7801\u7684\u4fee\u6539\u5206\u4e3a\u4e24\u79cd\u60c5\u51b5\uff1a \u7b2c\u4e00\u79cd\u60c5\u51b5\uff1a\u6539\u52a8\u6ca1\u6709\u88ab\u63d0\u4ea4\uff08commit\uff09\u3002 \u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528svn revert\u5c31\u80fd\u53d6\u6d88\u4e4b\u524d\u7684\u4fee\u6539\u3002 svn revert\u7528\u6cd5\u5982\u4e0b\uff1a # svn revert [-R] something \u5176\u4e2dsomething\u53ef\u4ee5\u662f\uff08\u76ee\u5f55\u6216\u6587\u4ef6\u7684\uff09\u76f8\u5bf9\u8def\u5f84\u4e5f\u53ef\u4ee5\u662f\u7edd\u5bf9\u8def\u5f84\u3002 \u5f53something\u4e3a\u5355\u4e2a\u6587\u4ef6\u65f6\uff0c\u76f4\u63a5svn revert something\u5c31\u884c\u4e86\uff1b\u5f53something\u4e3a\u76ee\u5f55\u65f6\uff0c\u9700\u8981\u52a0\u4e0a\u53c2\u6570-R(Recursive,\u9012\u5f52)\uff0c\u5426\u5219\u53ea\u4f1a\u5c06something\u8fd9\u4e2a\u76ee\u5f55\u7684\u6539\u52a8\u3002 \u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\u4e5f\u53ef\u4ee5\u4f7f\u7528svn update\u547d\u4ee4\u6765\u53d6\u6d88\u5bf9\u4e4b\u524d\u7684\u4fee\u6539\uff0c\u4f46\u4e0d\u5efa\u8bae\u4f7f\u7528\u3002\u56e0\u4e3asvn update\u4f1a\u53bb\u8fde\u63a5\u4ed3\u5e93\u670d\u52a1\u5668\uff0c\u8017\u8d39\u65f6\u95f4\u3002 \u6ce8\u610f\uff1asvn revert\u672c\u8eab\u6709\u56fa\u6709\u7684\u5371\u9669\uff0c\u56e0\u4e3a\u5b83\u7684\u76ee\u7684\u662f\u653e\u5f03\u672a\u63d0\u4ea4\u7684\u4fee\u6539\u3002\u4e00\u65e6\u4f60\u9009\u62e9\u4e86\u6062\u590d\uff0cSubversion\u6ca1\u6709\u65b9\u6cd5\u627e\u56de\u672a\u63d0\u4ea4\u7684\u4fee\u6539\u3002 \u7b2c\u4e8c\u79cd\u60c5\u51b5\uff1a\u6539\u52a8\u5df2\u7ecf\u88ab\u63d0\u4ea4\uff08commit\uff09\u3002 \u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u7528svn merge\u547d\u4ee4\u6765\u8fdb\u884c\u56de\u6eda\u3002 \u56de\u6eda\u7684\u64cd\u4f5c\u8fc7\u7a0b\u5982\u4e0b\uff1a 1\u3001\u4fdd\u8bc1\u6211\u4eec\u62ff\u5230\u7684\u662f\u6700\u65b0\u4ee3\u7801\uff1a svn update \u5047\u8bbe\u6700\u65b0\u7248\u672c\u53f7\u662f28\u3002 2\u3001\u7136\u540e\u627e\u51fa\u8981\u56de\u6eda\u7684\u786e\u5207\u7248\u672c\u53f7\uff1a svn log [something] \u5047\u8bbe\u6839\u636esvn log\u65e5\u5fd7\u67e5\u51fa\u8981\u56de\u6eda\u7684\u7248\u672c\u53f7\u662f25\uff0c\u6b64\u5904\u7684something\u53ef\u4ee5\u662f\u6587\u4ef6\u3001\u76ee\u5f55\u6216\u6574\u4e2a\u9879\u76ee \u5982\u679c\u60f3\u8981\u66f4\u8be6\u7ec6\u7684\u4e86\u89e3\u60c5\u51b5\uff0c\u53ef\u4ee5\u4f7f\u7528svn diff -r 28:25 [something] 3\u3001\u56de\u6eda\u5230\u7248\u672c\u53f725\uff1a svn merge -r 28:25 something \u4e3a\u4e86\u4fdd\u9669\u8d77\u89c1\uff0c\u518d\u6b21\u786e\u8ba4\u56de\u6eda\u7684\u7ed3\u679c\uff1a svn diff [something] \u53d1\u73b0\u6b63\u786e\u65e0\u8bef\uff0c\u63d0\u4ea4\u3002 4\u3001\u63d0\u4ea4\u56de\u6eda\uff1a svn commit -m \"Revert revision from r28 to r25,because of ...\" \u63d0\u4ea4\u540e\u7248\u672c\u53d8\u6210\u4e8629\u3002 \u5c06\u4ee5\u4e0a\u64cd\u4f5c\u603b\u7ed3\u4e3a\u4e09\u6761\u5982\u4e0b\uff1a 1. svn update\uff0csvn log\uff0c\u627e\u5230\u6700\u65b0\u7248\u672c\uff08latest revision\uff09 2. \u627e\u5230\u81ea\u5df1\u60f3\u8981\u56de\u6eda\u7684\u7248\u672c\u53f7\uff08rollbak revision\uff09 3. \u7528svn merge\u6765\u56de\u6eda\uff1a svn merge -r : something \u6458\u81ea\u300chttp://blog.csdn.net/angle_birds/article/details/19506405\u300d","title":"git/svn reset/revert \u56de\u6eda\u5230\u670d\u52a1\u5668\u4e0a\u7684\u67d0\u4e00\u4e2a\u7248\u672c"},{"location":"OPENSOURCE/2016-12-08-centos-6-yum-%25e5%25ae%2589%25e8%25a3%2585-glusterfs-3-6.html/","tags":[],"text":"GlusterFS \u5b89\u88c5\u81f3 o2o-gluster-1,o2o-gluster-2 ============================================================ \u4e24\u53f0\u673a\u7ec4\u6210GlusterFS Server\u96c6\u7fa4\u3002 1\u3001\u5b89\u88c5\u4f9d\u8d56\u5305 # yum -y install wget # cd /etc/yum.repos.d/ # wget http://download.gluster.org/pub/gluster/glusterfs/3.6/LATEST/CentOS/glusterfs-epel.repo # yum -y install epel-release 2\u3001\u5b89\u88c5\u670d\u52a1\u7aef (o2o-gluster-1,o2o-gluster-2) # yum install glusterfs-server # service glusterd start \u6216 # /etc/init.d/glusterd start # chkconfig glusterfsd on **\u5982\u679c\u662fo2o-gluster-1\uff0co2o-gluster-2\u96c6\u7fa4** ----------------------------------------------- \u4e0b\u9762\u8fd9\u884c\u547d\u4ee4\u5728\u4e00\u53f0\u670d\u52a1\u5668\u4e0a\u6267\u884c\u5373\u53ef\uff0c\u72b6\u6001\u5c06\u540c\u6b65\u5230\u5176\u4ed6\u670d\u52a1\u5668 \u4f8b\u5982\u5728o2o-gluster-1\u4e0a\u6267\u884c # gluster peer probe o2o-gluster-2 ----------------------------------------------- \u67e5\u770b\u72b6\u6001 # gluster peer status \u6ce8\uff1a\u5df2\u6302\u8f7d\u72ec\u7acb\u786c\u76d8\u5206\u533a\u5230/gfs_data\u76ee\u5f55 \u5728o2o-gluster-1\u548co2o-gluster-2\u4e2d\u5206\u522b\u6267\u884c # mkdir -p /gfs_data/glusterfs/brick1 **\u5982\u679c\u662fo2o-gluster-1\uff0co2o-gluster-2\u96c6\u7fa4** ----------------------------------------------- \u5728o2o-gluster-1\u548co2o-gluster-2\u5176\u4e2d\u4e00\u53f0\u673a\u5668\u4e0a\u6267\u884c replica \u6307\u5b9a\u526f\u672c\u6570\u91cf # gluster volume create gv0 replica 2 o2o-gluster-1:/gfs_data/glusterfs/brick1 o2o-gluster-2:/gfs_data/glusterfs/brick1 ----------------------------------------------- **\u5982\u679c\u662fo2o-gluster-1\u5355\u673a** ----------------------------------------------- gluster volume create gv0 o2o-gluster-1:/gfs_data/glusterfs/brick1 ----------------------------------------------- \u542f\u52a8volume # gluster volume start gv0 \u82e5\u8981\u4f7f\u7528Cache # gluster volume set gv0 performance.cache-size 1GB # \u53ef\u9009\u9879\uff1a\u914d\u7f6eACL\u53ea\u5141\u8bb8\u6307\u5b9aIP\u8bbf\u95ee\u96c6\u7fa4\uff0c\u4f8b\u5982\uff1a gluster volume set gv0 auth.allow 10.10.0.1,10.10.0.2 \u67e5\u770bvolume\u72b6\u6001 # gluster volume status # gluster volume info 3\u3001**\u5ba2\u6237\u7aef**\u6302\u8f7d\u8fdc\u7a0b\u6587\u4ef6\u7cfb\u7edf \uff08\u4ee5o2o-proxy-1\u4e3a\u4f8b\uff09 \u67e5\u627e glusterfs \u547d\u4ee4 # which glusterfs /usr/sbin/glusterfs \u5982\u679cglusterfs\u547d\u4ee4**\u4e0d\u5b58\u5728**\uff0c\u5219\u5b89\u88c5glusterfs-client # yum install glusterfs-client \u6302\u8f7d\u76ee\u5f55 # mkdir -p /data/gfs_data # chown -R prod:prod /data/gfs_data \u5728\u5ba2\u6237\u673a\uff08\u4f8b\u5982o2o-proxy-1\uff09\u4e0a\u6267\u884c\u6302\u8f7d\u547d\u4ee4\uff08\u8bfb\u5199\u6a21\u5f0f\uff09\uff1a mount -t glusterfs -o rw o2o-gluster-1:/gv0 /data/gfs_data \u6ce8\uff1aro:\u53ea\u8bfb\u6a21\u5f0f rw:\u8bfb\u5199\u6a21\u5f0f \u8bbe\u7f6e\u4e3a\u5f00\u673a\u81ea\u52a8\u6302\u8f7d # vi /etc/fstab \u8ffd\u52a0 o2o-gluster-1:/gv0 /data/gfs_data glusterfs defaults,_netdev 0 0","title":"CentOS 6 yum \u5b89\u88c5  GlusterFS 3.6"},{"location":"OPENSOURCE/2016-12-08-centos-6-yum-%25e5%25ae%2589%25e8%25a3%2585-nginx.html/","tags":[],"text":"# cat /etc/redhat-release CentOS release 6.5 (Final) # vi /etc/yum.repos.d/nginx.repo [nginx] name=nginx repo baseurl=http://nginx.org/packages/centos/6/x86_64/ gpgcheck=0 enabled=1 # yum install nginx \u542f\u52a8 # service ngnix start","title":"CentOS 6  yum \u5b89\u88c5 nginx"},{"location":"OPENSOURCE/2016-12-20-mongodb-%25e7%25a3%2581%25e7%259b%2598%25e7%25a9%25ba%25e9%2597%25b4%25e9%2587%258d%25e7%2594%25a8%25e6%25b5%258b%25e8%25af%2595%25e5%25af%25b9%25e6%25af%2594-2-6-12-v-s-3-2-11.html/","tags":["mongodb","nosql","\u5927\u6570\u636e"],"text":"Conclusion \u00b6 \u4ece\u6d4b\u8bd5\u65e5\u5fd7\u53ef\u4ee5\u770b\u51fa\uff1a mongodb3\u9ed8\u8ba4\u7684WiredTiger\u5b58\u50a8\u5f15\u64ce\uff0c\u4e0emongodb2\u7684MMAP\u76f8\u6bd4\uff0c\u5728\u7a7a\u95f4\u5229\u7528\u7387\u4e0a\u6709\u7740\u8d28\u7684\u98de\u8d8a\uff1b mongodb3\u5728\u5220\u9664\u96c6\u5408\u540e\uff0c\u5bf9\u5e94\u7684\u78c1\u76d8\u7a7a\u95f4\u4f1a\u7acb\u5373\u56de\u6536\uff0c\u8fd9\u6781\u5927\u7684\u51cf\u8f7b\u4e86\u8fd0\u7ef4\u5de5\u4f5c\u91cf\u3002 \u4ee5\u4e0b\u662f\u6d4b\u8bd5\u65e5\u5fd7 ( mongodb_reuse_diskspace_test_log.txt ). Mongodb 2.6.12 test log \u00b6 $ mongo --version MongoDB shell version: 2 .6.12 ===================================================== \u6d4b\u8bd5\u96c6\u5408\u540d\u79f0\uff1aperson2 \u51c6\u5907 db.person2.drop () ; db.repairDatabase () ; $ du -h -d 1 data/master 80M data/master/admin 0B data/master/journal 10G data/master/local 80M data/master/logevents 10G data/master \u5199\u5165727.2\u4e07 727 .2\u4e07 person2.dataSize = 1 .6254186630249023G \u6bcf\u6761\u6570\u636e 240bytes $ du -h -d 1 data/master 0B data/master/_tmp 80M data/master/admin 289M data/master/journal 10G data/master/local 4 .0G data/master/logevents 14G data/master \u518d\u5199\u5165500\u4e07 [ 2016 -12-15 14 :08:33.460 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-15 14 :09:39.644 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-15 14 :09:40.471 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-15 14 :10:48.308 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-15 14 :10:48.969 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-15 14 :11:58.608 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-15 14 :11:59.592 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-15 14 :13:09.636 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-15 14 :13:10.622 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-15 14 :14:35.282 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f 1227 .2\u4e07 person2.dataSize = 2 .7430057525634766G $ du -h -d 1 data/master 0B data/master/_tmp 80M data/master/admin 491M data/master/journal 10G data/master/local 6 .0G data/master/logevents 17G data/master \u5220\u9664\u96c6\u5408 db.person2.drop () ; $ du -h -d 1 data/master 0B data/master/_tmp 80M data/master/admin 492M data/master/journal 10G data/master/local 6 .0G data/master/logevents 17G data/master \u518d\u5199\u5165500\u4e07 [ 2016 -12-15 14 :17:39.876 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-15 14 :18:29.688 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-15 14 :18:30.380 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-15 14 :19:18.009 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-15 14 :19:18.591 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-15 14 :20:07.668 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-15 14 :20:08.188 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-15 14 :20:58.533 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-15 14 :20:59.098 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-15 14 :21:56.991 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f 500\u4e07 person2.dataSize = 1 .1175870895385742G $ du -h -d 1 data/master 0B data/master/_tmp 80M data/master/admin 325M data/master/journal 10G data/master/local 6 .0G data/master/logevents 16G data/master Mongodb 3.2.11 test log \u00b6 $ mongo --version MongoDB shell version: 3 .2.11 ===================================================== [ echo@EchoMa data ] $ du -h -d 1 master 20K master/diagnostic.data 300M master/journal 64K master/local 300M master \u9996\u5148\u5411logevents.person2\u5199\u5165800\u4e07 [ 2016 -12-20 11 :14:57.037 CST ] main INFO context.TestContextManager: Could not instantiate TestExecutionListener [ org.springframework.test.context.web.ServletTestExecutionListener ] . Specify custom listener classes or make the default listener classes ( and their required dependencies ) available. Offending class: [ javax/servlet/ServletContext ] [ 2016 -12-20 11 :14:57.212 CST ] main INFO xml.XmlBeanDefinitionReader: Loading XML bean definitions from URL [ file:/Users/echo/workjava/ctower-v3.0/mongodb-demo/target/classes/applicationContext-mongo2.xml ] [ 2016 -12-20 11 :14:57.533 CST ] main INFO support.GenericApplicationContext: Refreshing org.springframework.context.support.GenericApplicationContext@321e4dd0: startup date [ Tue Dec 20 11 :14:57 CST 2016 ] ; root of context hierarchy [ 2016 -12-20 11 :14:57.644 CST ] main INFO config.PropertyPlaceholderConfigurer: Loading properties file from URL [ file:/Users/echo/workjava/ctower-v3.0/mongodb-demo/target/classes/conf/conf-mongo2.properties ] [ 2016 -12-20 11 :14:57.678 CST ] main INFO support.DefaultListableBeanFactory: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@a78f12e: defining beans [ org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,mongo,org.springframework.beans.factory.config.CustomEditorConfigurer#0,org.springframework.beans.factory.config.CustomEditorConfigurer#1,org.springframework.beans.factory.config.CustomEditorConfigurer#2,mongoDbFactory,mongoTemplate,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor ] ; root of factory hierarchy [ 2016 -12-20 11 :14:59.535 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-20 11 :16:11.159 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-20 11 :16:11.201 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: Person2 \u8bb0\u5f55\u6570: 1000010 [ 2016 -12-20 11 :16:12.463 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-20 11 :17:13.819 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-20 11 :17:13.820 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: Person2 \u8bb0\u5f55\u6570: 2000010 [ 2016 -12-20 11 :17:14.273 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-20 11 :18:15.463 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-20 11 :18:15.479 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: Person2 \u8bb0\u5f55\u6570: 3000010 [ 2016 -12-20 11 :18:17.394 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-20 11 :19:13.793 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-20 11 :19:13.794 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: Person2 \u8bb0\u5f55\u6570: 4000010 [ 2016 -12-20 11 :19:14.279 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-20 11 :20:46.799 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-20 11 :20:46.806 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: Person2 \u8bb0\u5f55\u6570: 5000010 [ 2016 -12-20 11 :20:47.462 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-20 11 :22:59.124 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-20 11 :22:59.127 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: Person2 \u8bb0\u5f55\u6570: 6000010 [ 2016 -12-20 11 :23:00.799 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-20 11 :24:26.280 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-20 11 :24:26.283 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: Person2 \u8bb0\u5f55\u6570: 7000010 [ 2016 -12-20 11 :24:27.261 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-20 11 :26:03.717 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-20 11 :26:03.723 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: Person2 \u8bb0\u5f55\u6570: 8000010 [ 2016 -12-20 11 :26:03.805 CST ] Thread-2 INFO support.GenericApplicationContext: Closing org.springframework.context.support.GenericApplicationContext@321e4dd0: startup date [ Tue Dec 20 11 :14:57 CST 2016 ] ; root of context hierarchy [ 2016 -12-20 11 :26:03.811 CST ] Thread-2 INFO support.DefaultListableBeanFactory: Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@a78f12e: defining beans [ org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,mongo,org.springframework.beans.factory.config.CustomEditorConfigurer#0,org.springframework.beans.factory.config.CustomEditorConfigurer#1,org.springframework.beans.factory.config.CustomEditorConfigurer#2,mongoDbFactory,mongoTemplate,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor ] ; root of factory hierarchy \u67e5\u770b\u78c1\u76d8\u6587\u4ef6\u5927\u5c0f [ echo@EchoMa mongodb3 ] $ du -h -d 1 data/master 140K data/master/admin 1 .1M data/master/diagnostic.data 400M data/master/journal 478M data/master/local 703M data/master/logevents 1 .5G data/master \u5220\u9664person2\u96c6\u5408 db.person2.drop () ; [ echo@EchoMa mongodb3 ] $ du -h -d 1 data/master 140K data/master/admin 1 .1M data/master/diagnostic.data 400M data/master/journal 478M data/master/local 8 .0K data/master/logevents 879M data/master \u518d\u5199\u5165800\u4e07 [ 2016 -12-20 11 :43:27.632 CST ] main INFO context.TestContextManager: Could not instantiate TestExecutionListener [ org.springframework.test.context.web.ServletTestExecutionListener ] . Specify custom listener classes or make the default listener classes ( and their required dependencies ) available. Offending class: [ javax/servlet/ServletContext ] [ 2016 -12-20 11 :43:27.814 CST ] main INFO xml.XmlBeanDefinitionReader: Loading XML bean definitions from URL [ file:/Users/echo/workjava/ctower-v3.0/mongodb-demo/target/classes/applicationContext-mongo.xml ] [ 2016 -12-20 11 :43:28.159 CST ] main INFO support.GenericApplicationContext: Refreshing org.springframework.context.support.GenericApplicationContext@401a37b1: startup date [ Tue Dec 20 11 :43:28 CST 2016 ] ; root of context hierarchy [ 2016 -12-20 11 :43:28.296 CST ] main INFO config.PropertyPlaceholderConfigurer: Loading properties file from URL [ file:/Users/echo/workjava/ctower-v3.0/mongodb-demo/target/classes/conf/conf-mongo.properties ] [ 2016 -12-20 11 :43:28.329 CST ] main INFO support.DefaultListableBeanFactory: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@54891f43: defining beans [ org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,mongo,org.springframework.beans.factory.config.CustomEditorConfigurer#0,org.springframework.beans.factory.config.CustomEditorConfigurer#1,org.springframework.beans.factory.config.CustomEditorConfigurer#2,mongoDbFactory,mongoTemplate,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor ] ; root of factory hierarchy [ 2016 -12-20 11 :43:30.177 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-20 11 :44:55.370 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-20 11 :44:55.435 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: Person2 \u8bb0\u5f55\u6570: 1000000 [ 2016 -12-20 11 :44:56.017 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-20 11 :46:36.982 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-20 11 :46:36.987 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: Person2 \u8bb0\u5f55\u6570: 2000000 [ 2016 -12-20 11 :46:37.680 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-20 11 :47:39.489 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-20 11 :47:39.492 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: Person2 \u8bb0\u5f55\u6570: 3000000 [ 2016 -12-20 11 :47:40.754 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-20 11 :49:25.819 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-20 11 :49:25.828 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: Person2 \u8bb0\u5f55\u6570: 4000000 [ 2016 -12-20 11 :49:26.283 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-20 11 :50:47.129 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-20 11 :50:47.135 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: Person2 \u8bb0\u5f55\u6570: 5000000 [ 2016 -12-20 11 :50:48.615 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-20 11 :52:36.344 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-20 11 :52:36.348 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: Person2 \u8bb0\u5f55\u6570: 6000000 [ 2016 -12-20 11 :52:37.756 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-20 11 :54:06.097 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-20 11 :54:06.100 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: Person2 \u8bb0\u5f55\u6570: 7000000 [ 2016 -12-20 11 :54:06.721 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-20 11 :55:36.462 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-20 11 :55:36.462 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: Person2 \u8bb0\u5f55\u6570: 8000000 [ 2016 -12-20 11 :55:36.486 CST ] Thread-2 INFO support.GenericApplicationContext: Closing org.springframework.context.support.GenericApplicationContext@401a37b1: startup date [ Tue Dec 20 11 :43:28 CST 2016 ] ; root of context hierarchy [ 2016 -12-20 11 :55:36.489 CST ] Thread-2 INFO support.DefaultListableBeanFactory: Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@54891f43: defining beans [ org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,mongo,org.springframework.beans.factory.config.CustomEditorConfigurer#0,org.springframework.beans.factory.config.CustomEditorConfigurer#1,org.springframework.beans.factory.config.CustomEditorConfigurer#2,mongoDbFactory,mongoTemplate,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor ] ; root of factory hierarchy \u67e5\u770b\u78c1\u76d8\u6587\u4ef6\u5927\u5c0f [ echo@EchoMa mongodb3 ] $ du -h -d 1 data/master 140K data/master/admin 1 .3M data/master/diagnostic.data 400M data/master/journal 956M data/master/local 694M data/master/logevents 2 .0G data/master Test codes \u00b6 MongoDbReuseDiskspaceTest.java import java.util.ArrayList ; import java.util.Collection ; import javax.annotation.Resource ; import org.apache.commons.logging.Log ; import org.apache.commons.logging.LogFactory ; import org.junit.Test ; import org.junit.runner.RunWith ; import org.springframework.data.mongodb.core.MongoTemplate ; import org.springframework.test.context.ContextConfiguration ; import org.springframework.test.context.junit4.SpringJUnit4ClassRunner ; /** * MongoDB \u91cd\u7528\u78c1\u76d8\u7a7a\u95f4\u6d4b\u8bd5 */ @RunWith ( SpringJUnit4ClassRunner . class ) @ContextConfiguration ( \"classpath*:applicationContext-mongo.xml\" ) public class MongoDbReuseDiskspaceTest { static Log LOG = LogFactory . getLog ( MongoDbReuseDiskspaceTest . class ); @Resource MongoTemplate mongoTemplate ; @Test public void testMultiInsert () { for ( int i = 0 ; i < 8 ; i ++ ) { // 800\u4e07\u8bb0\u5f55 // 100\u4e07\u8bb0\u5f55 this . testInsert ( 100 * 10000 ); } } private void testInsert ( int count ) { Collection < Person2 > list = new ArrayList < Person2 > (); String suffix = String . valueOf ( Math . random ()); for ( int i = 0 ; i < count ; i ++ ) { Person2 p = new Person2 (); p . setId ( i + suffix ); // p.setId(\"1\"); \u91cd\u590d\u4f1a\u62a5\u9519 p . setAge (( int ) ( Math . random () * 80 )); p . setName ( \"Tom\" + ( int ) ( Math . random () * 1000 )); list . add ( p ); } LOG . info ( list . size () + \"\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea\" ); mongoTemplate . insertAll ( list ); LOG . info ( \"\u5199\u5165\" + list . size () + \"\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f\" ); long records = mongoTemplate . count ( null , Person2 . class ); LOG . info ( \"Person2 \u8bb0\u5f55\u6570: \" + records ); } }","title":"mongodb \u78c1\u76d8\u7a7a\u95f4\u91cd\u7528\u6d4b\u8bd5\u5bf9\u6bd4 (2.6.12 v.s. 3.2.11)"},{"location":"OPENSOURCE/2016-12-20-mongodb-%25e7%25a3%2581%25e7%259b%2598%25e7%25a9%25ba%25e9%2597%25b4%25e9%2587%258d%25e7%2594%25a8%25e6%25b5%258b%25e8%25af%2595%25e5%25af%25b9%25e6%25af%2594-2-6-12-v-s-3-2-11.html/#conclusion","text":"\u4ece\u6d4b\u8bd5\u65e5\u5fd7\u53ef\u4ee5\u770b\u51fa\uff1a mongodb3\u9ed8\u8ba4\u7684WiredTiger\u5b58\u50a8\u5f15\u64ce\uff0c\u4e0emongodb2\u7684MMAP\u76f8\u6bd4\uff0c\u5728\u7a7a\u95f4\u5229\u7528\u7387\u4e0a\u6709\u7740\u8d28\u7684\u98de\u8d8a\uff1b mongodb3\u5728\u5220\u9664\u96c6\u5408\u540e\uff0c\u5bf9\u5e94\u7684\u78c1\u76d8\u7a7a\u95f4\u4f1a\u7acb\u5373\u56de\u6536\uff0c\u8fd9\u6781\u5927\u7684\u51cf\u8f7b\u4e86\u8fd0\u7ef4\u5de5\u4f5c\u91cf\u3002 \u4ee5\u4e0b\u662f\u6d4b\u8bd5\u65e5\u5fd7 ( mongodb_reuse_diskspace_test_log.txt ).","title":"Conclusion"},{"location":"OPENSOURCE/2016-12-20-mongodb-%25e7%25a3%2581%25e7%259b%2598%25e7%25a9%25ba%25e9%2597%25b4%25e9%2587%258d%25e7%2594%25a8%25e6%25b5%258b%25e8%25af%2595%25e5%25af%25b9%25e6%25af%2594-2-6-12-v-s-3-2-11.html/#mongodb-2612-test-log","text":"$ mongo --version MongoDB shell version: 2 .6.12 ===================================================== \u6d4b\u8bd5\u96c6\u5408\u540d\u79f0\uff1aperson2 \u51c6\u5907 db.person2.drop () ; db.repairDatabase () ; $ du -h -d 1 data/master 80M data/master/admin 0B data/master/journal 10G data/master/local 80M data/master/logevents 10G data/master \u5199\u5165727.2\u4e07 727 .2\u4e07 person2.dataSize = 1 .6254186630249023G \u6bcf\u6761\u6570\u636e 240bytes $ du -h -d 1 data/master 0B data/master/_tmp 80M data/master/admin 289M data/master/journal 10G data/master/local 4 .0G data/master/logevents 14G data/master \u518d\u5199\u5165500\u4e07 [ 2016 -12-15 14 :08:33.460 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-15 14 :09:39.644 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-15 14 :09:40.471 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-15 14 :10:48.308 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-15 14 :10:48.969 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-15 14 :11:58.608 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-15 14 :11:59.592 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-15 14 :13:09.636 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-15 14 :13:10.622 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-15 14 :14:35.282 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f 1227 .2\u4e07 person2.dataSize = 2 .7430057525634766G $ du -h -d 1 data/master 0B data/master/_tmp 80M data/master/admin 491M data/master/journal 10G data/master/local 6 .0G data/master/logevents 17G data/master \u5220\u9664\u96c6\u5408 db.person2.drop () ; $ du -h -d 1 data/master 0B data/master/_tmp 80M data/master/admin 492M data/master/journal 10G data/master/local 6 .0G data/master/logevents 17G data/master \u518d\u5199\u5165500\u4e07 [ 2016 -12-15 14 :17:39.876 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-15 14 :18:29.688 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-15 14 :18:30.380 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-15 14 :19:18.009 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-15 14 :19:18.591 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-15 14 :20:07.668 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-15 14 :20:08.188 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-15 14 :20:58.533 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-15 14 :20:59.098 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-15 14 :21:56.991 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f 500\u4e07 person2.dataSize = 1 .1175870895385742G $ du -h -d 1 data/master 0B data/master/_tmp 80M data/master/admin 325M data/master/journal 10G data/master/local 6 .0G data/master/logevents 16G data/master","title":"Mongodb 2.6.12 test log"},{"location":"OPENSOURCE/2016-12-20-mongodb-%25e7%25a3%2581%25e7%259b%2598%25e7%25a9%25ba%25e9%2597%25b4%25e9%2587%258d%25e7%2594%25a8%25e6%25b5%258b%25e8%25af%2595%25e5%25af%25b9%25e6%25af%2594-2-6-12-v-s-3-2-11.html/#mongodb-3211-test-log","text":"$ mongo --version MongoDB shell version: 3 .2.11 ===================================================== [ echo@EchoMa data ] $ du -h -d 1 master 20K master/diagnostic.data 300M master/journal 64K master/local 300M master \u9996\u5148\u5411logevents.person2\u5199\u5165800\u4e07 [ 2016 -12-20 11 :14:57.037 CST ] main INFO context.TestContextManager: Could not instantiate TestExecutionListener [ org.springframework.test.context.web.ServletTestExecutionListener ] . Specify custom listener classes or make the default listener classes ( and their required dependencies ) available. Offending class: [ javax/servlet/ServletContext ] [ 2016 -12-20 11 :14:57.212 CST ] main INFO xml.XmlBeanDefinitionReader: Loading XML bean definitions from URL [ file:/Users/echo/workjava/ctower-v3.0/mongodb-demo/target/classes/applicationContext-mongo2.xml ] [ 2016 -12-20 11 :14:57.533 CST ] main INFO support.GenericApplicationContext: Refreshing org.springframework.context.support.GenericApplicationContext@321e4dd0: startup date [ Tue Dec 20 11 :14:57 CST 2016 ] ; root of context hierarchy [ 2016 -12-20 11 :14:57.644 CST ] main INFO config.PropertyPlaceholderConfigurer: Loading properties file from URL [ file:/Users/echo/workjava/ctower-v3.0/mongodb-demo/target/classes/conf/conf-mongo2.properties ] [ 2016 -12-20 11 :14:57.678 CST ] main INFO support.DefaultListableBeanFactory: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@a78f12e: defining beans [ org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,mongo,org.springframework.beans.factory.config.CustomEditorConfigurer#0,org.springframework.beans.factory.config.CustomEditorConfigurer#1,org.springframework.beans.factory.config.CustomEditorConfigurer#2,mongoDbFactory,mongoTemplate,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor ] ; root of factory hierarchy [ 2016 -12-20 11 :14:59.535 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-20 11 :16:11.159 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-20 11 :16:11.201 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: Person2 \u8bb0\u5f55\u6570: 1000010 [ 2016 -12-20 11 :16:12.463 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-20 11 :17:13.819 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-20 11 :17:13.820 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: Person2 \u8bb0\u5f55\u6570: 2000010 [ 2016 -12-20 11 :17:14.273 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-20 11 :18:15.463 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-20 11 :18:15.479 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: Person2 \u8bb0\u5f55\u6570: 3000010 [ 2016 -12-20 11 :18:17.394 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-20 11 :19:13.793 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-20 11 :19:13.794 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: Person2 \u8bb0\u5f55\u6570: 4000010 [ 2016 -12-20 11 :19:14.279 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-20 11 :20:46.799 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-20 11 :20:46.806 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: Person2 \u8bb0\u5f55\u6570: 5000010 [ 2016 -12-20 11 :20:47.462 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-20 11 :22:59.124 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-20 11 :22:59.127 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: Person2 \u8bb0\u5f55\u6570: 6000010 [ 2016 -12-20 11 :23:00.799 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-20 11 :24:26.280 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-20 11 :24:26.283 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: Person2 \u8bb0\u5f55\u6570: 7000010 [ 2016 -12-20 11 :24:27.261 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-20 11 :26:03.717 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-20 11 :26:03.723 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: Person2 \u8bb0\u5f55\u6570: 8000010 [ 2016 -12-20 11 :26:03.805 CST ] Thread-2 INFO support.GenericApplicationContext: Closing org.springframework.context.support.GenericApplicationContext@321e4dd0: startup date [ Tue Dec 20 11 :14:57 CST 2016 ] ; root of context hierarchy [ 2016 -12-20 11 :26:03.811 CST ] Thread-2 INFO support.DefaultListableBeanFactory: Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@a78f12e: defining beans [ org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,mongo,org.springframework.beans.factory.config.CustomEditorConfigurer#0,org.springframework.beans.factory.config.CustomEditorConfigurer#1,org.springframework.beans.factory.config.CustomEditorConfigurer#2,mongoDbFactory,mongoTemplate,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor ] ; root of factory hierarchy \u67e5\u770b\u78c1\u76d8\u6587\u4ef6\u5927\u5c0f [ echo@EchoMa mongodb3 ] $ du -h -d 1 data/master 140K data/master/admin 1 .1M data/master/diagnostic.data 400M data/master/journal 478M data/master/local 703M data/master/logevents 1 .5G data/master \u5220\u9664person2\u96c6\u5408 db.person2.drop () ; [ echo@EchoMa mongodb3 ] $ du -h -d 1 data/master 140K data/master/admin 1 .1M data/master/diagnostic.data 400M data/master/journal 478M data/master/local 8 .0K data/master/logevents 879M data/master \u518d\u5199\u5165800\u4e07 [ 2016 -12-20 11 :43:27.632 CST ] main INFO context.TestContextManager: Could not instantiate TestExecutionListener [ org.springframework.test.context.web.ServletTestExecutionListener ] . Specify custom listener classes or make the default listener classes ( and their required dependencies ) available. Offending class: [ javax/servlet/ServletContext ] [ 2016 -12-20 11 :43:27.814 CST ] main INFO xml.XmlBeanDefinitionReader: Loading XML bean definitions from URL [ file:/Users/echo/workjava/ctower-v3.0/mongodb-demo/target/classes/applicationContext-mongo.xml ] [ 2016 -12-20 11 :43:28.159 CST ] main INFO support.GenericApplicationContext: Refreshing org.springframework.context.support.GenericApplicationContext@401a37b1: startup date [ Tue Dec 20 11 :43:28 CST 2016 ] ; root of context hierarchy [ 2016 -12-20 11 :43:28.296 CST ] main INFO config.PropertyPlaceholderConfigurer: Loading properties file from URL [ file:/Users/echo/workjava/ctower-v3.0/mongodb-demo/target/classes/conf/conf-mongo.properties ] [ 2016 -12-20 11 :43:28.329 CST ] main INFO support.DefaultListableBeanFactory: Pre-instantiating singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@54891f43: defining beans [ org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,mongo,org.springframework.beans.factory.config.CustomEditorConfigurer#0,org.springframework.beans.factory.config.CustomEditorConfigurer#1,org.springframework.beans.factory.config.CustomEditorConfigurer#2,mongoDbFactory,mongoTemplate,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor ] ; root of factory hierarchy [ 2016 -12-20 11 :43:30.177 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-20 11 :44:55.370 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-20 11 :44:55.435 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: Person2 \u8bb0\u5f55\u6570: 1000000 [ 2016 -12-20 11 :44:56.017 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-20 11 :46:36.982 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-20 11 :46:36.987 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: Person2 \u8bb0\u5f55\u6570: 2000000 [ 2016 -12-20 11 :46:37.680 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-20 11 :47:39.489 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-20 11 :47:39.492 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: Person2 \u8bb0\u5f55\u6570: 3000000 [ 2016 -12-20 11 :47:40.754 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-20 11 :49:25.819 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-20 11 :49:25.828 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: Person2 \u8bb0\u5f55\u6570: 4000000 [ 2016 -12-20 11 :49:26.283 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-20 11 :50:47.129 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-20 11 :50:47.135 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: Person2 \u8bb0\u5f55\u6570: 5000000 [ 2016 -12-20 11 :50:48.615 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-20 11 :52:36.344 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-20 11 :52:36.348 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: Person2 \u8bb0\u5f55\u6570: 6000000 [ 2016 -12-20 11 :52:37.756 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-20 11 :54:06.097 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-20 11 :54:06.100 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: Person2 \u8bb0\u5f55\u6570: 7000000 [ 2016 -12-20 11 :54:06.721 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: 1000000\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea [ 2016 -12-20 11 :55:36.462 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: \u5199\u51651000000\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f [ 2016 -12-20 11 :55:36.462 CST ] main INFO mongodb.MongoDbReuseDiskspaceTest: Person2 \u8bb0\u5f55\u6570: 8000000 [ 2016 -12-20 11 :55:36.486 CST ] Thread-2 INFO support.GenericApplicationContext: Closing org.springframework.context.support.GenericApplicationContext@401a37b1: startup date [ Tue Dec 20 11 :43:28 CST 2016 ] ; root of context hierarchy [ 2016 -12-20 11 :55:36.489 CST ] Thread-2 INFO support.DefaultListableBeanFactory: Destroying singletons in org.springframework.beans.factory.support.DefaultListableBeanFactory@54891f43: defining beans [ org.springframework.beans.factory.config.PropertyPlaceholderConfigurer#0,org.springframework.context.annotation.internalConfigurationAnnotationProcessor,org.springframework.context.annotation.internalAutowiredAnnotationProcessor,org.springframework.context.annotation.internalRequiredAnnotationProcessor,org.springframework.context.annotation.internalCommonAnnotationProcessor,mongo,org.springframework.beans.factory.config.CustomEditorConfigurer#0,org.springframework.beans.factory.config.CustomEditorConfigurer#1,org.springframework.beans.factory.config.CustomEditorConfigurer#2,mongoDbFactory,mongoTemplate,org.springframework.context.annotation.ConfigurationClassPostProcessor.importAwareProcessor ] ; root of factory hierarchy \u67e5\u770b\u78c1\u76d8\u6587\u4ef6\u5927\u5c0f [ echo@EchoMa mongodb3 ] $ du -h -d 1 data/master 140K data/master/admin 1 .3M data/master/diagnostic.data 400M data/master/journal 956M data/master/local 694M data/master/logevents 2 .0G data/master","title":"Mongodb 3.2.11 test log"},{"location":"OPENSOURCE/2016-12-20-mongodb-%25e7%25a3%2581%25e7%259b%2598%25e7%25a9%25ba%25e9%2597%25b4%25e9%2587%258d%25e7%2594%25a8%25e6%25b5%258b%25e8%25af%2595%25e5%25af%25b9%25e6%25af%2594-2-6-12-v-s-3-2-11.html/#test-codes","text":"MongoDbReuseDiskspaceTest.java import java.util.ArrayList ; import java.util.Collection ; import javax.annotation.Resource ; import org.apache.commons.logging.Log ; import org.apache.commons.logging.LogFactory ; import org.junit.Test ; import org.junit.runner.RunWith ; import org.springframework.data.mongodb.core.MongoTemplate ; import org.springframework.test.context.ContextConfiguration ; import org.springframework.test.context.junit4.SpringJUnit4ClassRunner ; /** * MongoDB \u91cd\u7528\u78c1\u76d8\u7a7a\u95f4\u6d4b\u8bd5 */ @RunWith ( SpringJUnit4ClassRunner . class ) @ContextConfiguration ( \"classpath*:applicationContext-mongo.xml\" ) public class MongoDbReuseDiskspaceTest { static Log LOG = LogFactory . getLog ( MongoDbReuseDiskspaceTest . class ); @Resource MongoTemplate mongoTemplate ; @Test public void testMultiInsert () { for ( int i = 0 ; i < 8 ; i ++ ) { // 800\u4e07\u8bb0\u5f55 // 100\u4e07\u8bb0\u5f55 this . testInsert ( 100 * 10000 ); } } private void testInsert ( int count ) { Collection < Person2 > list = new ArrayList < Person2 > (); String suffix = String . valueOf ( Math . random ()); for ( int i = 0 ; i < count ; i ++ ) { Person2 p = new Person2 (); p . setId ( i + suffix ); // p.setId(\"1\"); \u91cd\u590d\u4f1a\u62a5\u9519 p . setAge (( int ) ( Math . random () * 80 )); p . setName ( \"Tom\" + ( int ) ( Math . random () * 1000 )); list . add ( p ); } LOG . info ( list . size () + \"\u6761\u8bb0\u5f55\u5df2\u5c31\u7eea\" ); mongoTemplate . insertAll ( list ); LOG . info ( \"\u5199\u5165\" + list . size () + \"\u6761\u8bb0\u5f55\u81f3Person2\u6210\u529f\" ); long records = mongoTemplate . count ( null , Person2 . class ); LOG . info ( \"Person2 \u8bb0\u5f55\u6570: \" + records ); } }","title":"Test codes"},{"location":"OPENSOURCE/2016-12-21-centos-7-2-redis-3-0-5-warning-solved.html/","tags":["Redis","nosql","\u7f13\u5b58"],"text":"\u542f\u52a8redis\uff0c\u663e\u793a\u544a\u8b66\u5982\u4e0b\uff1a 8589:M 05 Dec 14:28:58.509 # WARNING: The TCP backlog setting of 511 cannot be enforced because /proc/sys/net/core/somaxconn is set to the lower value of 128. 8589:M 05 Dec 14:28:58.509 # Server started, Redis version 3.0.5 8589:M 05 Dec 14:28:58.509 # WARNING overcommit_memory is set to 0! Background save may fail under low memory condition. To fix this issue add 'vm.overcommit_memory = 1' to /etc/sysctl.conf and then reboot or run the command 'sysctl vm.overcommit_memory=1' for this to take effect. 8589:M 05 Dec 14:28:58.523 # WARNING you have Transparent Huge Pages (THP) support enabled in your kernel. This will create latency and memory usage issues with Redis. To fix this issue run the command 'echo never > /sys/kernel/mm/transparent_hugepage/enabled' as root, and add it to your /etc/rc.local in order to retain the setting after a reboot. Redis must be restarted after THP is disabled. \u89e3\u51b3\u65b9\u6cd5: # vi /etc/sysctl.conf \u8ffd\u52a0 ------------------------------------------- vm.overcommit_memory = 1 net.core.somaxconn = 4096 ------------------------------------------- \u4f7f\u4e0a\u8ff0\u914d\u7f6e\u751f\u6548 # /sbin/sysctl -p # echo never > /sys/kernel/mm/transparent_hugepage/enabled # vi /etc/rc.local \u8ffd\u52a0 ------------------------------------------- echo never > /sys/kernel/mm/transparent_hugepage/enabled ------------------------------------------- # vi /etc/security/limits.conf \u8ffd\u52a0\u5982\u4e0b\u5185\u5bb9 \u6ce8\uff1aredis\u662f\u542f\u52a8redis\u7684\u64cd\u4f5c\u7cfb\u7edf\u7528\u6237 ------------------------------------------- redis hard nofile 64000 redis soft nofile 64000 ------------------------------------------- \u7136\u540e\u91cd\u542fredis.","title":"CentOS 7.2 redis-3.0.5 WARNING  solved"},{"location":"OPENSOURCE/2016-12-21-mongodb-3-2-11-%25e5%2589%25af%25e6%259c%25ac%25e9%259b%2586-%25e5%25ae%2589%25e8%25a3%2585%25e6%2597%25a5%25e5%25bf%2597-%25e4%25b8%25bb%25e4%25bb%258e%25e4%25bb%25b2%25e8%25a3%2581.html/","tags":["mongodb","nosql","\u5927\u6570\u636e"],"text":"Environment \u7cfb\u7edf\u73af\u5883: CentOS release 6.2+ \u5b89\u88c5\u8f6f\u4ef6: mongodb-linux-x86_64-rhel62-3.2.11.tgz 1. mongodb3 \u526f\u672c\u96c6\u89c4\u5212 \u00b6 \u526f\u672c\u96c6\u540d\u79f0: testrs \uff08\u9879\u76ee\u4e2d\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539\uff09 \u4ee5 192.168.100.x \u4e3a\u4f8b. 1.1 \u96c6\u7fa4\u89c4\u5212 \u00b6 192.168.100.1:27017 \u4e3b 192.168.100.2:27017 \u4ece 192.168.100.3:27017 \u4ef2\u88c1 - \u4e0d\u4fdd\u5b58\u4e1a\u52a1\u6570\u636e\uff0c\u8282\u7ea6\u786c\u76d8\u7a7a\u95f4 1.2 \u670d\u52a1\u5668\u76ee\u5f55\u89c4\u5212 \u00b6 /home/mongodb3 mongodb-home\u76ee\u5f55 |_ bin \u547d\u4ee4\u76ee\u5f55 |_ conf \u914d\u7f6e\u76ee\u5f55 |_ data \u6570\u636e\u76ee\u5f55 - \u53ef\u5efa\u7acb\u7b26\u53f7\u94fe\u63a5 \u6307\u5411nas/\u5176\u4ed6\u76ee\u5f55 |_ master \u4e3b |_ slaver \u4ece |_ arbiter \u4ef2\u88c1 |_ log mongodb\u8fd0\u884c\u65e5\u5fd7\u76ee\u5f55 - \u53ef\u5efa\u7acb\u7b26\u53f7\u94fe\u63a5 \u6307\u5411\u5176\u4ed6\u76ee\u5f55 1.3 \u7528\u6237 \u00b6 \u4ee5 mongodb3 \u7528\u6237\u540d\u4e3a\u4f8b\uff08\u9879\u76ee\u4e2d\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u5b9a\uff09\uff1a # useradd mongodb3 2. \u64cd\u4f5c\u7cfb\u7edf\u914d\u7f6e \u00b6 \u4f7f\u7528 root \u7528\u6237\u767b\u5f55 2.1 \u5982\u679c\u542f\u7528\u4e86iptables\uff0c\u5c0627001\u7aef\u53e3\u52a0\u5165\u9632\u706b\u5899 \u00b6 vi /etc/sysconfig/iptables \u4e0b\u9762\u4e00\u884c\u5185\u5bb9\u52a0\u5728COMMIT\u4e4b\u524d -A INPUT -p tcp --dport 27001 -j ACCEPT \u91cd\u542f\u9632\u706b\u5899 # service iptables restart 2.2 \u5927\u5185\u5b58\u9875\u9762redhat_transparent_hugepage\u53c2\u6570\u8bbe\u7f6e\u4e3anever \u00b6 \u5148\u67e5\u770b\u8be5\u53c2\u6570\u503c # cat /sys/kernel/mm/redhat_transparent_hugepage/enabled [ always ] madvise never # cat /sys/kernel/mm/redhat_transparent_hugepage/defrag [ always ] madvise never \u914d\u7f6edisable-transparent-hugepages\u670d\u52a1 /etc/init.d/disable-transparent-hugepages #!/bin/bash ### BEGIN INIT INFO # Provides: disable-transparent-hugepages # Required-Start: $local_fs # Required-Stop: # X-Start-Before: mongod mongodb-mms-automation-agent # Default-Start: 2 3 4 5 # Default-Stop: 0 1 6 # Short-Description: Disable Linux transparent huge pages # Description: Disable Linux transparent huge pages, to improve # database performance. ### END INIT INFO case $1 in start ) if [ -d /sys/kernel/mm/transparent_hugepage ] ; then thp_path = /sys/kernel/mm/transparent_hugepage elif [ -d /sys/kernel/mm/redhat_transparent_hugepage ] ; then thp_path = /sys/kernel/mm/redhat_transparent_hugepage else return 0 fi echo 'never' > ${ thp_path } /enabled echo 'never' > ${ thp_path } /defrag re = '^[0-1]+$' if [[ $( cat ${ thp_path } /khugepaged/defrag ) = ~ $re ]] then # RHEL 7 echo 0 > ${ thp_path } /khugepaged/defrag else # RHEL 6 echo 'no' > ${ thp_path } /khugepaged/defrag fi unset re unset thp_path ;; esac \u5bf9\u8be5\u670d\u52a1\u5668\u6388\u6743\uff0c\u5e76\u8bbe\u7f6e \u5f00\u673a\u81ea\u542f\u52a8 # chmod 755 /etc/init.d/disable-transparent-hugepages # chkconfig --add disable-transparent-hugepages \u542f\u52a8\u5e76\u68c0\u67e5\u8be5\u53c2\u6570\u662f\u5426\u5df2\u7ecf\u751f\u6548 # service disable-transparent-hugepages start # cat /sys/kernel/mm/redhat_transparent_hugepage/enabled always madvise [ never ] # cat /sys/kernel/mm/redhat_transparent_hugepage/defrag always madvise [ never ] 2.3 \u914d\u7f6emongodb\u7528\u6237\u7684ulimit \u00b6 vi /etc/security/limits.conf \u4ee5\u7528\u6237\u540d\u4e3amongodb3\u4e3a\u4f8b\uff0c\u5728 # End of file \u524d\u6dfb\u52a0 mongodb3 hard nofile 64000 mongodb3 soft nofile 64000 mongodb3 hard nproc 64000 mongodb3 soft nproc 64000 2.4 \u7cfb\u7edf\u53c2\u6570\u8c03\u4f18 \u00b6 vi /etc/sysctl.conf \u8ffd\u52a0\u5982\u4e0b\u5185\u5bb9 net.core.somaxconn = 4096 net.ipv4.tcp_fin_timeout = 30 net.ipv4.tcp_keepalive_intvl = 30 net.ipv4.tcp_keepalive_time = 120 net.ipv4.tcp_max_syn_backlog = 4096 vm.dirty_ratio = 15 vm.dirty_background_ratio = 5 vm.swappiness = 1 \u4f7f\u4e0a\u8ff0\u914d\u7f6e\u751f\u6548 # /sbin/sysctl -p 3.\u5b89\u88c5mongodb \u00b6 3.1 \u83b7\u53d6 mongodb 3.2.11 RHEL 6 Linux \u8f6f\u4ef6\u5b89\u88c5\u5305 \u00b6 # su - mongodb3 # pwd /home/mongodb3 $ wget https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-rhel62-3.2.11.tgz 3.2 \u89e3\u538b\u5b89\u88c5\u5305 \u5e76 \u521b\u5efa\u54cd\u5e94\u76ee\u5f55\uff08\u6216\u8005\u5efa\u7acb\u76f8\u5e94\u7684\u7b26\u53f7\u94fe\u63a5\uff09 \u00b6 $ tar -xvf mongodb-linux-x86_64-rhel62-3.2.11.tgz $ mv mongodb-linux-x86_64-rhel62-3.2.8 mongodb-3.2.11 $ ln -s mongodb-3.2.11/bin bin $ mkdir conf log $ mkdir -p data/master data/slaver data/arbiter 3.3 \u521b\u5efa\u914d\u7f6e\u6587\u4ef6 conf/master.conf conf/slaver.conf conf/arbiter.conf \u00b6 conf/master.conf dbpath=/home/mongodb3/data/master logpath=/home/mongodb3/log/master.log pidfilepath=/home/mongodb3/log/master.pid directoryperdb=true logappend=true replSet=testrs bind_ip=192.168.100.1,localhost port=27017 #oplogSize:10G oplogSize=10240 fork=true #keyFile = /home/mongodb3/conf/keyfile Note conf/slaver.conf \u548c conf/arbiter.conf \u7c7b\u4f3c\uff0c\u9664\u4e86 bind_ip=192.168.100.1,localhost \u8fd9\u4e00\u884c\uff0c\u5c06ip\u4fee\u6539\u4e3a\u670d\u52a1\u5668ip oplogSize \u4e00\u822c\u53d6\u786c\u76d8\u53ef\u7528\u7a7a\u95f4\u7684 5% replSet \u526f\u672c\u96c6\u540d\u79f0\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u5b9a\uff0c\u5168\u6587\u4fdd\u6301\u4e00\u81f4 3.4 \u521b\u5efa\u542f\u52a8\u811a\u672c start-master.sh start-slaver.sh start-arbiter.sh \u00b6 start-master.sh # !/bin/sh cd ` dirname $0 ` bin/mongod -f conf/master.conf start-slaver.sh # !/bin/sh cd ` dirname $0 ` bin/mongod -f conf/slaver.conf start-slaver.sh # !/bin/sh cd ` dirname $0 ` bin/mongod -f conf/arbiter.conf \u8d4b\u4e88\u6267\u884c\u6743\u9650 $ chmod +x *.sh 3.5 \u542f\u52a8/\u505c\u6b62 \u00b6 \u5728\u4e3b\u8282\u70b9\u4e0a\u542f\u52a8\uff1a $ ./start-master.sh \u5728\u5907\u8282\u70b9\u4e0a\u542f\u52a8 $ ./start-slaver.sh \u5728\u4ef2\u88c1\u670d\u52a1\u5668\u4e0a\u542f\u52a8 $ ./start-arbiter.sh \u901a\u8fc7\u7aef\u53e3\u53f7\u67e5\u770b\u542f\u52a8\u662f\u5426\u6210\u529f $ netstat -lanp | grep 27017 \u4f7f\u7528mongo\u5ba2\u6237\u7aef\u8bbf\u95ee\u4e00\u4e0b\u4e3b\u6570\u636e\u5e93 $ bin/mongo 192 .168.100.1 \u505c\u6b62\u6570\u636e\u5e93 $ killall mongod 3.6 \u914d\u7f6e\u526f\u672c\u96c6 \u00b6 \u767b\u5f55\u4e3b\u8282\u70b9\uff0c\u914d\u7f6e\u5e76\u521d\u59cb\u5316\u526f\u672c\u96c6\u3002 $ bin/mongo > cfg ={ _id: \"testrs\" , members: [ { _id:0, host: '192.168.100.1:27017' , priority:20 } , { _id:1, host: '192.168.100.2:27017' , priority:10 } , { _id:2, host: '192.168.100.3:27017' , arbiterOnly:true }] } > rs.initiate ( cfg ) > rs.status () 3.7 \u542f\u7528\u5bc6\u7801\u9a8c\u8bc1\u529f\u80fd \u00b6 3.7.1 \u767b\u5f55\u4e3b\u8282\u70b9\uff0c\u5e76\u521b\u5efa\u7ba1\u7406\u5458 \u00b6 \u7528\u6237\u540d/\u5bc6\u7801: root/123456 > db.createUser ( { user: \"root\" , pwd: \"123456\" , roles: [{ role: \"userAdminAnyDatabase\" ,db: \"admin\" }] } ) > db.grantRolesToUser ( \"root\" , [{ role: \"clusterManager\" ,db: \"admin\" }]) db.grantRolesToUser ( \"root\" , [{ role: \"clusterAdmin\" ,db: \"admin\" }]) db.grantRolesToUser ( \"root\" , [{ role: \"clusterMonitor\" ,db: \"admin\" }]) db.grantRolesToUser ( \"root\" , [{ role: \"hostManager\" ,db: \"admin\" }]) db.grantRolesToUser ( \"root\" , [{ role: \"userAdminAnyDatabase\" ,db: \"admin\" }]) db.grantRolesToUser ( \"root\" , [{ role: \"readWrite\" ,db: \"admin\" }]) ; db.grantRolesToUser ( \"root\" , [{ role: \"backup\" ,db: \"admin\" }]) db.grantRolesToUser ( \"root\" , [{ role: \"restore\" ,db: \"admin\" }]) roles \u89d2\u8272 \u6570\u636e\u5e93\u7528\u6237\u89d2\u8272\uff1aread\u3001readWrite \u6570\u636e\u5e93\u7ba1\u7406\u89d2\u8272\uff1adbAdmin\u3001dbOwner\u3001userAdmin \u96c6\u7fa4\u7ba1\u7406\u89d2\u8272\uff1aclusterAdmin\u3001clusterManager\u3001clusterMonitor\u3001hostManager \u5907\u4efd\u6062\u590d\u89d2\u8272\uff1abackup\u3001restore \u6240\u6709\u6570\u636e\u5e93\u89d2\u8272\uff1areadAnyDatabase\u3001readWriteAnyDatabase\u3001userAdminAnyDatabase\u3001dbAdminAnyDatabase \u8d85\u7ea7\u7528\u6237\u89d2\u8272\uff1aroot 3.7.2 \u521b\u5efa\u666e\u901a\u7528\u6237 \u00b6 \u4f8b\u5982\u521b\u5efa user/123456 db:logevents \u6743\u9650:readWrite > use logevents > db.createUser ( { user: \"user\" , pwd: \"123456\" , roles: [{ role: \"readWrite\" ,db: \"logevents\" }] } ) 3.7.3 \u521b\u5efaKeyfile\uff0c\u5e76\u5206\u522b\u590d\u5236\u5230\u5404\u8282\u70b9\u7684\u6307\u5b9a\u76ee\u5f55 \u00b6 \u521b\u5efa\u4e00\u6b21\uff0c\u7136\u540e\u590d\u5236\u5230\u5176\u4ed6\u8282\u70b9. # cd /home/mongodb3 # openssl rand -base64 741 > conf/keyfile # chmod 600 conf/keyfile \u91cd\u65b0\u4fee\u6539 conf/*.conf \u6587\u4ef6\uff0c\u5c06\u4ee5\u4e0b\u8fd9\u4e2a\u53c2\u6570\u914d\u7f6e\u6ce8\u91ca\u53bb\u6389\uff0c\u4f7f\u5176\u751f\u6548\u3002 keyFile=/home/mongodb3/conf/keyfile \u5173\u95ed\u6240\u6709\u8fdb\u7a0b\uff0c\u5e76\u91cd\u65b0\u542f\u52a8\u8fdb\u7a0b\u3002\u7136\u540e\u901a\u8fc7\u547d\u4ee4\u8fdb\u884c\u767b\u5f55\u9a8c\u8bc1\u3002 $ mongo localhost:27017/admin -u root -p MongoDB shell version: 3 .2.11 Enter password: connecting to: localhost:27017/admin Reference \u00b6 https://yq.aliyun.com/articles/63223 https://docs.mongodb.com/v3.2/reference/ulimit/#recommended-ulimit-settings Tuning Linux for MongoDB","title":"mongodb 3.2.11 \u526f\u672c\u96c6 \u5b89\u88c5\u65e5\u5fd7 \u4e3b\u4ece\u4ef2\u88c1"},{"location":"OPENSOURCE/2016-12-21-mongodb-3-2-11-%25e5%2589%25af%25e6%259c%25ac%25e9%259b%2586-%25e5%25ae%2589%25e8%25a3%2585%25e6%2597%25a5%25e5%25bf%2597-%25e4%25b8%25bb%25e4%25bb%258e%25e4%25bb%25b2%25e8%25a3%2581.html/#1-mongodb3","text":"\u526f\u672c\u96c6\u540d\u79f0: testrs \uff08\u9879\u76ee\u4e2d\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u4fee\u6539\uff09 \u4ee5 192.168.100.x \u4e3a\u4f8b.","title":"1. mongodb3 \u526f\u672c\u96c6\u89c4\u5212"},{"location":"OPENSOURCE/2016-12-21-mongodb-3-2-11-%25e5%2589%25af%25e6%259c%25ac%25e9%259b%2586-%25e5%25ae%2589%25e8%25a3%2585%25e6%2597%25a5%25e5%25bf%2597-%25e4%25b8%25bb%25e4%25bb%258e%25e4%25bb%25b2%25e8%25a3%2581.html/#11","text":"192.168.100.1:27017 \u4e3b 192.168.100.2:27017 \u4ece 192.168.100.3:27017 \u4ef2\u88c1 - \u4e0d\u4fdd\u5b58\u4e1a\u52a1\u6570\u636e\uff0c\u8282\u7ea6\u786c\u76d8\u7a7a\u95f4","title":"1.1 \u96c6\u7fa4\u89c4\u5212"},{"location":"OPENSOURCE/2016-12-21-mongodb-3-2-11-%25e5%2589%25af%25e6%259c%25ac%25e9%259b%2586-%25e5%25ae%2589%25e8%25a3%2585%25e6%2597%25a5%25e5%25bf%2597-%25e4%25b8%25bb%25e4%25bb%258e%25e4%25bb%25b2%25e8%25a3%2581.html/#12","text":"/home/mongodb3 mongodb-home\u76ee\u5f55 |_ bin \u547d\u4ee4\u76ee\u5f55 |_ conf \u914d\u7f6e\u76ee\u5f55 |_ data \u6570\u636e\u76ee\u5f55 - \u53ef\u5efa\u7acb\u7b26\u53f7\u94fe\u63a5 \u6307\u5411nas/\u5176\u4ed6\u76ee\u5f55 |_ master \u4e3b |_ slaver \u4ece |_ arbiter \u4ef2\u88c1 |_ log mongodb\u8fd0\u884c\u65e5\u5fd7\u76ee\u5f55 - \u53ef\u5efa\u7acb\u7b26\u53f7\u94fe\u63a5 \u6307\u5411\u5176\u4ed6\u76ee\u5f55","title":"1.2 \u670d\u52a1\u5668\u76ee\u5f55\u89c4\u5212"},{"location":"OPENSOURCE/2016-12-21-mongodb-3-2-11-%25e5%2589%25af%25e6%259c%25ac%25e9%259b%2586-%25e5%25ae%2589%25e8%25a3%2585%25e6%2597%25a5%25e5%25bf%2597-%25e4%25b8%25bb%25e4%25bb%258e%25e4%25bb%25b2%25e8%25a3%2581.html/#13","text":"\u4ee5 mongodb3 \u7528\u6237\u540d\u4e3a\u4f8b\uff08\u9879\u76ee\u4e2d\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u5b9a\uff09\uff1a # useradd mongodb3","title":"1.3 \u7528\u6237"},{"location":"OPENSOURCE/2016-12-21-mongodb-3-2-11-%25e5%2589%25af%25e6%259c%25ac%25e9%259b%2586-%25e5%25ae%2589%25e8%25a3%2585%25e6%2597%25a5%25e5%25bf%2597-%25e4%25b8%25bb%25e4%25bb%258e%25e4%25bb%25b2%25e8%25a3%2581.html/#2","text":"\u4f7f\u7528 root \u7528\u6237\u767b\u5f55","title":"2. \u64cd\u4f5c\u7cfb\u7edf\u914d\u7f6e"},{"location":"OPENSOURCE/2016-12-21-mongodb-3-2-11-%25e5%2589%25af%25e6%259c%25ac%25e9%259b%2586-%25e5%25ae%2589%25e8%25a3%2585%25e6%2597%25a5%25e5%25bf%2597-%25e4%25b8%25bb%25e4%25bb%258e%25e4%25bb%25b2%25e8%25a3%2581.html/#21-iptables27001","text":"vi /etc/sysconfig/iptables \u4e0b\u9762\u4e00\u884c\u5185\u5bb9\u52a0\u5728COMMIT\u4e4b\u524d -A INPUT -p tcp --dport 27001 -j ACCEPT \u91cd\u542f\u9632\u706b\u5899 # service iptables restart","title":"2.1 \u5982\u679c\u542f\u7528\u4e86iptables\uff0c\u5c0627001\u7aef\u53e3\u52a0\u5165\u9632\u706b\u5899"},{"location":"OPENSOURCE/2016-12-21-mongodb-3-2-11-%25e5%2589%25af%25e6%259c%25ac%25e9%259b%2586-%25e5%25ae%2589%25e8%25a3%2585%25e6%2597%25a5%25e5%25bf%2597-%25e4%25b8%25bb%25e4%25bb%258e%25e4%25bb%25b2%25e8%25a3%2581.html/#22-redhat_transparent_hugepagenever","text":"\u5148\u67e5\u770b\u8be5\u53c2\u6570\u503c # cat /sys/kernel/mm/redhat_transparent_hugepage/enabled [ always ] madvise never # cat /sys/kernel/mm/redhat_transparent_hugepage/defrag [ always ] madvise never \u914d\u7f6edisable-transparent-hugepages\u670d\u52a1 /etc/init.d/disable-transparent-hugepages #!/bin/bash ### BEGIN INIT INFO # Provides: disable-transparent-hugepages # Required-Start: $local_fs # Required-Stop: # X-Start-Before: mongod mongodb-mms-automation-agent # Default-Start: 2 3 4 5 # Default-Stop: 0 1 6 # Short-Description: Disable Linux transparent huge pages # Description: Disable Linux transparent huge pages, to improve # database performance. ### END INIT INFO case $1 in start ) if [ -d /sys/kernel/mm/transparent_hugepage ] ; then thp_path = /sys/kernel/mm/transparent_hugepage elif [ -d /sys/kernel/mm/redhat_transparent_hugepage ] ; then thp_path = /sys/kernel/mm/redhat_transparent_hugepage else return 0 fi echo 'never' > ${ thp_path } /enabled echo 'never' > ${ thp_path } /defrag re = '^[0-1]+$' if [[ $( cat ${ thp_path } /khugepaged/defrag ) = ~ $re ]] then # RHEL 7 echo 0 > ${ thp_path } /khugepaged/defrag else # RHEL 6 echo 'no' > ${ thp_path } /khugepaged/defrag fi unset re unset thp_path ;; esac \u5bf9\u8be5\u670d\u52a1\u5668\u6388\u6743\uff0c\u5e76\u8bbe\u7f6e \u5f00\u673a\u81ea\u542f\u52a8 # chmod 755 /etc/init.d/disable-transparent-hugepages # chkconfig --add disable-transparent-hugepages \u542f\u52a8\u5e76\u68c0\u67e5\u8be5\u53c2\u6570\u662f\u5426\u5df2\u7ecf\u751f\u6548 # service disable-transparent-hugepages start # cat /sys/kernel/mm/redhat_transparent_hugepage/enabled always madvise [ never ] # cat /sys/kernel/mm/redhat_transparent_hugepage/defrag always madvise [ never ]","title":"2.2 \u5927\u5185\u5b58\u9875\u9762redhat_transparent_hugepage\u53c2\u6570\u8bbe\u7f6e\u4e3anever"},{"location":"OPENSOURCE/2016-12-21-mongodb-3-2-11-%25e5%2589%25af%25e6%259c%25ac%25e9%259b%2586-%25e5%25ae%2589%25e8%25a3%2585%25e6%2597%25a5%25e5%25bf%2597-%25e4%25b8%25bb%25e4%25bb%258e%25e4%25bb%25b2%25e8%25a3%2581.html/#23-mongodbulimit","text":"vi /etc/security/limits.conf \u4ee5\u7528\u6237\u540d\u4e3amongodb3\u4e3a\u4f8b\uff0c\u5728 # End of file \u524d\u6dfb\u52a0 mongodb3 hard nofile 64000 mongodb3 soft nofile 64000 mongodb3 hard nproc 64000 mongodb3 soft nproc 64000","title":"2.3 \u914d\u7f6emongodb\u7528\u6237\u7684ulimit"},{"location":"OPENSOURCE/2016-12-21-mongodb-3-2-11-%25e5%2589%25af%25e6%259c%25ac%25e9%259b%2586-%25e5%25ae%2589%25e8%25a3%2585%25e6%2597%25a5%25e5%25bf%2597-%25e4%25b8%25bb%25e4%25bb%258e%25e4%25bb%25b2%25e8%25a3%2581.html/#24","text":"vi /etc/sysctl.conf \u8ffd\u52a0\u5982\u4e0b\u5185\u5bb9 net.core.somaxconn = 4096 net.ipv4.tcp_fin_timeout = 30 net.ipv4.tcp_keepalive_intvl = 30 net.ipv4.tcp_keepalive_time = 120 net.ipv4.tcp_max_syn_backlog = 4096 vm.dirty_ratio = 15 vm.dirty_background_ratio = 5 vm.swappiness = 1 \u4f7f\u4e0a\u8ff0\u914d\u7f6e\u751f\u6548 # /sbin/sysctl -p","title":"2.4 \u7cfb\u7edf\u53c2\u6570\u8c03\u4f18"},{"location":"OPENSOURCE/2016-12-21-mongodb-3-2-11-%25e5%2589%25af%25e6%259c%25ac%25e9%259b%2586-%25e5%25ae%2589%25e8%25a3%2585%25e6%2597%25a5%25e5%25bf%2597-%25e4%25b8%25bb%25e4%25bb%258e%25e4%25bb%25b2%25e8%25a3%2581.html/#3mongodb","text":"","title":"3.\u5b89\u88c5mongodb"},{"location":"OPENSOURCE/2016-12-21-mongodb-3-2-11-%25e5%2589%25af%25e6%259c%25ac%25e9%259b%2586-%25e5%25ae%2589%25e8%25a3%2585%25e6%2597%25a5%25e5%25bf%2597-%25e4%25b8%25bb%25e4%25bb%258e%25e4%25bb%25b2%25e8%25a3%2581.html/#31-mongodb-3211-rhel-6-linux","text":"# su - mongodb3 # pwd /home/mongodb3 $ wget https://fastdl.mongodb.org/linux/mongodb-linux-x86_64-rhel62-3.2.11.tgz","title":"3.1 \u83b7\u53d6 mongodb 3.2.11 RHEL 6 Linux \u8f6f\u4ef6\u5b89\u88c5\u5305"},{"location":"OPENSOURCE/2016-12-21-mongodb-3-2-11-%25e5%2589%25af%25e6%259c%25ac%25e9%259b%2586-%25e5%25ae%2589%25e8%25a3%2585%25e6%2597%25a5%25e5%25bf%2597-%25e4%25b8%25bb%25e4%25bb%258e%25e4%25bb%25b2%25e8%25a3%2581.html/#32","text":"$ tar -xvf mongodb-linux-x86_64-rhel62-3.2.11.tgz $ mv mongodb-linux-x86_64-rhel62-3.2.8 mongodb-3.2.11 $ ln -s mongodb-3.2.11/bin bin $ mkdir conf log $ mkdir -p data/master data/slaver data/arbiter","title":"3.2 \u89e3\u538b\u5b89\u88c5\u5305 \u5e76 \u521b\u5efa\u54cd\u5e94\u76ee\u5f55\uff08\u6216\u8005\u5efa\u7acb\u76f8\u5e94\u7684\u7b26\u53f7\u94fe\u63a5\uff09"},{"location":"OPENSOURCE/2016-12-21-mongodb-3-2-11-%25e5%2589%25af%25e6%259c%25ac%25e9%259b%2586-%25e5%25ae%2589%25e8%25a3%2585%25e6%2597%25a5%25e5%25bf%2597-%25e4%25b8%25bb%25e4%25bb%258e%25e4%25bb%25b2%25e8%25a3%2581.html/#33-confmasterconf-confslaverconf-confarbiterconf","text":"conf/master.conf dbpath=/home/mongodb3/data/master logpath=/home/mongodb3/log/master.log pidfilepath=/home/mongodb3/log/master.pid directoryperdb=true logappend=true replSet=testrs bind_ip=192.168.100.1,localhost port=27017 #oplogSize:10G oplogSize=10240 fork=true #keyFile = /home/mongodb3/conf/keyfile Note conf/slaver.conf \u548c conf/arbiter.conf \u7c7b\u4f3c\uff0c\u9664\u4e86 bind_ip=192.168.100.1,localhost \u8fd9\u4e00\u884c\uff0c\u5c06ip\u4fee\u6539\u4e3a\u670d\u52a1\u5668ip oplogSize \u4e00\u822c\u53d6\u786c\u76d8\u53ef\u7528\u7a7a\u95f4\u7684 5% replSet \u526f\u672c\u96c6\u540d\u79f0\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u5b9a\uff0c\u5168\u6587\u4fdd\u6301\u4e00\u81f4","title":"3.3 \u521b\u5efa\u914d\u7f6e\u6587\u4ef6 conf/master.conf conf/slaver.conf conf/arbiter.conf"},{"location":"OPENSOURCE/2016-12-21-mongodb-3-2-11-%25e5%2589%25af%25e6%259c%25ac%25e9%259b%2586-%25e5%25ae%2589%25e8%25a3%2585%25e6%2597%25a5%25e5%25bf%2597-%25e4%25b8%25bb%25e4%25bb%258e%25e4%25bb%25b2%25e8%25a3%2581.html/#34-start-mastersh-start-slaversh-start-arbitersh","text":"start-master.sh # !/bin/sh cd ` dirname $0 ` bin/mongod -f conf/master.conf start-slaver.sh # !/bin/sh cd ` dirname $0 ` bin/mongod -f conf/slaver.conf start-slaver.sh # !/bin/sh cd ` dirname $0 ` bin/mongod -f conf/arbiter.conf \u8d4b\u4e88\u6267\u884c\u6743\u9650 $ chmod +x *.sh","title":"3.4 \u521b\u5efa\u542f\u52a8\u811a\u672c start-master.sh start-slaver.sh start-arbiter.sh"},{"location":"OPENSOURCE/2016-12-21-mongodb-3-2-11-%25e5%2589%25af%25e6%259c%25ac%25e9%259b%2586-%25e5%25ae%2589%25e8%25a3%2585%25e6%2597%25a5%25e5%25bf%2597-%25e4%25b8%25bb%25e4%25bb%258e%25e4%25bb%25b2%25e8%25a3%2581.html/#35","text":"\u5728\u4e3b\u8282\u70b9\u4e0a\u542f\u52a8\uff1a $ ./start-master.sh \u5728\u5907\u8282\u70b9\u4e0a\u542f\u52a8 $ ./start-slaver.sh \u5728\u4ef2\u88c1\u670d\u52a1\u5668\u4e0a\u542f\u52a8 $ ./start-arbiter.sh \u901a\u8fc7\u7aef\u53e3\u53f7\u67e5\u770b\u542f\u52a8\u662f\u5426\u6210\u529f $ netstat -lanp | grep 27017 \u4f7f\u7528mongo\u5ba2\u6237\u7aef\u8bbf\u95ee\u4e00\u4e0b\u4e3b\u6570\u636e\u5e93 $ bin/mongo 192 .168.100.1 \u505c\u6b62\u6570\u636e\u5e93 $ killall mongod","title":"3.5 \u542f\u52a8/\u505c\u6b62"},{"location":"OPENSOURCE/2016-12-21-mongodb-3-2-11-%25e5%2589%25af%25e6%259c%25ac%25e9%259b%2586-%25e5%25ae%2589%25e8%25a3%2585%25e6%2597%25a5%25e5%25bf%2597-%25e4%25b8%25bb%25e4%25bb%258e%25e4%25bb%25b2%25e8%25a3%2581.html/#36","text":"\u767b\u5f55\u4e3b\u8282\u70b9\uff0c\u914d\u7f6e\u5e76\u521d\u59cb\u5316\u526f\u672c\u96c6\u3002 $ bin/mongo > cfg ={ _id: \"testrs\" , members: [ { _id:0, host: '192.168.100.1:27017' , priority:20 } , { _id:1, host: '192.168.100.2:27017' , priority:10 } , { _id:2, host: '192.168.100.3:27017' , arbiterOnly:true }] } > rs.initiate ( cfg ) > rs.status ()","title":"3.6 \u914d\u7f6e\u526f\u672c\u96c6"},{"location":"OPENSOURCE/2016-12-21-mongodb-3-2-11-%25e5%2589%25af%25e6%259c%25ac%25e9%259b%2586-%25e5%25ae%2589%25e8%25a3%2585%25e6%2597%25a5%25e5%25bf%2597-%25e4%25b8%25bb%25e4%25bb%258e%25e4%25bb%25b2%25e8%25a3%2581.html/#37","text":"","title":"3.7 \u542f\u7528\u5bc6\u7801\u9a8c\u8bc1\u529f\u80fd"},{"location":"OPENSOURCE/2016-12-21-mongodb-3-2-11-%25e5%2589%25af%25e6%259c%25ac%25e9%259b%2586-%25e5%25ae%2589%25e8%25a3%2585%25e6%2597%25a5%25e5%25bf%2597-%25e4%25b8%25bb%25e4%25bb%258e%25e4%25bb%25b2%25e8%25a3%2581.html/#371","text":"\u7528\u6237\u540d/\u5bc6\u7801: root/123456 > db.createUser ( { user: \"root\" , pwd: \"123456\" , roles: [{ role: \"userAdminAnyDatabase\" ,db: \"admin\" }] } ) > db.grantRolesToUser ( \"root\" , [{ role: \"clusterManager\" ,db: \"admin\" }]) db.grantRolesToUser ( \"root\" , [{ role: \"clusterAdmin\" ,db: \"admin\" }]) db.grantRolesToUser ( \"root\" , [{ role: \"clusterMonitor\" ,db: \"admin\" }]) db.grantRolesToUser ( \"root\" , [{ role: \"hostManager\" ,db: \"admin\" }]) db.grantRolesToUser ( \"root\" , [{ role: \"userAdminAnyDatabase\" ,db: \"admin\" }]) db.grantRolesToUser ( \"root\" , [{ role: \"readWrite\" ,db: \"admin\" }]) ; db.grantRolesToUser ( \"root\" , [{ role: \"backup\" ,db: \"admin\" }]) db.grantRolesToUser ( \"root\" , [{ role: \"restore\" ,db: \"admin\" }]) roles \u89d2\u8272 \u6570\u636e\u5e93\u7528\u6237\u89d2\u8272\uff1aread\u3001readWrite \u6570\u636e\u5e93\u7ba1\u7406\u89d2\u8272\uff1adbAdmin\u3001dbOwner\u3001userAdmin \u96c6\u7fa4\u7ba1\u7406\u89d2\u8272\uff1aclusterAdmin\u3001clusterManager\u3001clusterMonitor\u3001hostManager \u5907\u4efd\u6062\u590d\u89d2\u8272\uff1abackup\u3001restore \u6240\u6709\u6570\u636e\u5e93\u89d2\u8272\uff1areadAnyDatabase\u3001readWriteAnyDatabase\u3001userAdminAnyDatabase\u3001dbAdminAnyDatabase \u8d85\u7ea7\u7528\u6237\u89d2\u8272\uff1aroot","title":"3.7.1 \u767b\u5f55\u4e3b\u8282\u70b9\uff0c\u5e76\u521b\u5efa\u7ba1\u7406\u5458"},{"location":"OPENSOURCE/2016-12-21-mongodb-3-2-11-%25e5%2589%25af%25e6%259c%25ac%25e9%259b%2586-%25e5%25ae%2589%25e8%25a3%2585%25e6%2597%25a5%25e5%25bf%2597-%25e4%25b8%25bb%25e4%25bb%258e%25e4%25bb%25b2%25e8%25a3%2581.html/#372","text":"\u4f8b\u5982\u521b\u5efa user/123456 db:logevents \u6743\u9650:readWrite > use logevents > db.createUser ( { user: \"user\" , pwd: \"123456\" , roles: [{ role: \"readWrite\" ,db: \"logevents\" }] } )","title":"3.7.2 \u521b\u5efa\u666e\u901a\u7528\u6237"},{"location":"OPENSOURCE/2016-12-21-mongodb-3-2-11-%25e5%2589%25af%25e6%259c%25ac%25e9%259b%2586-%25e5%25ae%2589%25e8%25a3%2585%25e6%2597%25a5%25e5%25bf%2597-%25e4%25b8%25bb%25e4%25bb%258e%25e4%25bb%25b2%25e8%25a3%2581.html/#373-keyfile","text":"\u521b\u5efa\u4e00\u6b21\uff0c\u7136\u540e\u590d\u5236\u5230\u5176\u4ed6\u8282\u70b9. # cd /home/mongodb3 # openssl rand -base64 741 > conf/keyfile # chmod 600 conf/keyfile \u91cd\u65b0\u4fee\u6539 conf/*.conf \u6587\u4ef6\uff0c\u5c06\u4ee5\u4e0b\u8fd9\u4e2a\u53c2\u6570\u914d\u7f6e\u6ce8\u91ca\u53bb\u6389\uff0c\u4f7f\u5176\u751f\u6548\u3002 keyFile=/home/mongodb3/conf/keyfile \u5173\u95ed\u6240\u6709\u8fdb\u7a0b\uff0c\u5e76\u91cd\u65b0\u542f\u52a8\u8fdb\u7a0b\u3002\u7136\u540e\u901a\u8fc7\u547d\u4ee4\u8fdb\u884c\u767b\u5f55\u9a8c\u8bc1\u3002 $ mongo localhost:27017/admin -u root -p MongoDB shell version: 3 .2.11 Enter password: connecting to: localhost:27017/admin","title":"3.7.3  \u521b\u5efaKeyfile\uff0c\u5e76\u5206\u522b\u590d\u5236\u5230\u5404\u8282\u70b9\u7684\u6307\u5b9a\u76ee\u5f55"},{"location":"OPENSOURCE/2016-12-21-mongodb-3-2-11-%25e5%2589%25af%25e6%259c%25ac%25e9%259b%2586-%25e5%25ae%2589%25e8%25a3%2585%25e6%2597%25a5%25e5%25bf%2597-%25e4%25b8%25bb%25e4%25bb%258e%25e4%25bb%25b2%25e8%25a3%2581.html/#reference","text":"https://yq.aliyun.com/articles/63223 https://docs.mongodb.com/v3.2/reference/ulimit/#recommended-ulimit-settings Tuning Linux for MongoDB","title":"Reference"},{"location":"OPENSOURCE/2016-12-21-tuning-linux-for-mongodb-%25e8%25bd%25ac.html/","tags":["mongodb","nosql","\u5927\u6570\u636e"],"text":"Tuning Linux for MongoDB Tim Vaillancourt | August 12, 2016 | Posted In: MongoDB In this post, we\u2019ll discuss tuning Linux for MongoDB deployments. By far the most common operating system you\u2019ll see MongoDB running on is Linux 2.6 and 3.x. Linux flavors such as CentOS and Debian do a fantastic job of being a stable, general-purpose operating system. Linux runs software on hardware ranging from tiny computers like the Raspberry Pi up to massive data center servers. To make this flexibility work, however, Linux defaults to some \u201clowest common denominator\u201d tunings so that the OS will boot on anything. Working with databases, we often focus on the queries, patterns and tunings that happen inside the database process itself. This means we sometimes forget that the operating system below it is the life-support of database, the air that it breathes so-to-speak. Of course, a highly-scalable database such as MongoDB runs fine on these general-purpose defaults without complaints, but the efficiency can be equivalent to running in regular shoes instead of sleek runners. At small scale, you might not notice the lost efficiency, but at large scale ( especially when data exceeds RAM ) improved tunings equate to fewer servers and less operational costs. For all use cases and scale, good OS tunings also provide some improvement in response times and removes extra \u201cwhat if\u2026?\u201d questions when troubleshooting. Overall, memory, network and disk are the system resources important to MongoDB. This article covers how to optimize each of these areas. Of course, while we have successfully deployed these tunings to many live systems, it\u2019s always best to test before applying changes to your servers. If you plan on applying these changes, I suggest performing them with one full reboot of the host. Some of these changes don\u2019t require a reboot, but test that they get re-applied if you reboot in the future. MongoDB\u2019s clustered nature should make this relatively painless, plus it might be a good time to do that dreaded \u201c yum upgrade \u201d / \u201c aptitude upgrade \u201c, too. Linux Ulimit To prevent a single user from impacting the entire system, Linux has a facility to implement some system resource constraints on processes, file handles and other system resources on a per-user-basis. For medium-high-usage MongoDB deployments, the default limits are almost always too low. Considering MongoDB generally uses dedicated hardware, it makes sense to allow the Linux user running MongoDB ( e.g., \u201cmongod\u201d ) to use a majority of the available resources. Now you might be thinking: \u201cWhy not disable the limit ( or set it to unlimited )?\u201d This is a common recommendation for database servers. I think you should avoid this for two reasons: If you hit a problem, a lack of a limit on system resources can allow a relatively smaller problem to spiral out of control, often bringing down other services (such as SSH) crucial to solving the original problem. All systems DO have an upper-limit, and understanding those limitations instead of masking them is an important exercise. In most cases, a limit of 64,000 \u201cmax user processes\u201d and 64,000 \u201copen files\u201d ( both have defaults of 1024 ) will suffice. To be more exact you need to do some math on the number of applications/clients, the maximum size of their connection pools and some case-by-case tuning for the number of inter-node connections between replica set members and sharding processes. (We might address this in a future blog post.) You can deploy these limits by adding a file in \u201c /etc/security/limits.d\u201d ( or appending to \u201c/etc/security/limits.conf\u201d i f there is no \u201climits.d\u201d) . Below is an example file for the Linux user \u201c mongod\u201d , raising open-file and max-user-process limits to 64,000: /etc/security/limits.d/mongod.conf Shell 1 2 3 4 mongod soft nproc 64000 mongod hard nproc 64000 mongod soft nofile 64000 mongod hard nofile 64000 Note: this change only applies to new shells, meaning you must restart \u201cmongod\u201d or \u201cmongos\u201d to apply this change! Virtual Memory Dirty Ratio The \u201cdirty_ratio\u201d is the percentage of total system memory that can hold dirty pages. The default on most Linux hosts is between 20-30%. When you exceed the limit the dirty pages are committed to disk, creating a small pause. To avoid this hard pause there is a second ratio: \u201cdirty_background_ratio\u201d ( default 10-15% ) which tells the kernel to start flushing dirty pages to disk in the background without any pause. 20-30% is a good general default for \u201cdirty_ratio\u201d, but on large-memory database servers this can be a lot of memory! For example, on a 128GB-memory host this can allow up to 38.4GB of dirty pages. The background ratio won\u2019t kick in until 12.8GB! We recommend that you lower this setting and monitor the impact to query performance and disk IO. The goal is reducing memory usage without impacting query performance negatively. Reducing caches sizes also guarantees data gets written to disk in smaller batches more frequently, which increases disk throughput (than huge bulk writes less often). A recommended setting for dirty ratios on large-memory ( 64GB+ perhaps ) database servers is: \u201c vm.dirty_ratio = 15\u2033 and \u201c vm.dirty_background_ratio = 5\u2033 , or possibly less. ( Red Hat recommends lower ratios of 10 and 3 for high-performance/large-memory servers. ) You can set this by adding the following lines to \u201c /etc/sysctl.conf\u201d : Shell 1 2 vm .dirty_ratio = 15 vm .dirty_background_ratio = 5 To check these current running values: Shell 1 2 3 $ sysctl - a | egrep \"vm.dirty.*_ratio\" vm .dirty_background_ratio = 5 vm .dirty_ratio = 15 Swappiness \u201cSwappiness\u201d is a Linux kernel setting that influences the behavior of the Virtual Memory manager when it needs to allocate a swap, ranging from 0-100. A setting of \u201c 0 \u201c tells the kernel to swap only to avoid out-of-memory problems. A setting of 100 tells it to swap aggressively to disk. The Linux default is usually 60, which is not ideal for database usage. It is common to see a setting of \u201c 0\u2033 ( or sometimes \u201c10\u201d ) on database servers, telling the kernel to prefer to swap to memory for better response times. However, Ovais Tariq details a known bug ( or feature ) when using a setting of \u201c 0 \u201c in this blog post: https://www.percona.com/blog/2014/04/28/oom-relation-vm-swappiness0-new-kernel/ . Due to this bug, we recommended using a setting of \u201c 1\u2033 ( or \u201c10\u201d if you prefer some disk swapping ) by adding the following to your \u201c /etc/sysctl.conf\u201d : /etc/sysctl.conf Shell 1 vm .swappiness = 1 To check the current swappiness: Shell 1 2 $ sysctl vm .swappiness vm .swappiness = 1 Note: you must run the command \u201c/sbin/sysctl -p\u201d as root/sudo (or reboot) to apply a dirty_ratio or swappiness change! Transparent HugePages *Does not apply to Debian/Ubuntu or CentOS/RedHat 5 and lower* Transparent HugePages is an optimization introduced in CentOS/RedHat 6.0, with the goal of reducing overhead on systems with large amounts of memory. However, due to the way MongoDB uses memory, this feature actually does more harm than good as memory access are rarely contiguous. Disabled THP entirely by adding the following flag below to your Linux kernel boot options: Shell 1 transparent_hugepage = never Usually this requires changes to the GRUB boot-loader config in the directory \u201c /boot/grub\u201d or \u201c /etc/grub.d\u201d on newer systems. Red Hat covers this in more detail in this article (same method on CentOS): https://access.redhat.com/solutions/46111 . Note: We recommended rebooting the system to clear out any previous huge pages and validate that the setting will persist on reboot. NUMA (Non-Uniform Memory Access) Architecture Non-Uniform Memory Access is a recent memory architecture that takes into account the locality of caches and CPUs for lower latency. Unfortunately, MongoDB is not \u201cNUMA-aware\u201d and leaving NUMA setup in the default behavior can cause severe memory in-balance. There are two ways to disable NUMA: one is via an on/off switch in the system BIOS config, the 2nd is using the \u201c numactl\u201d command to set NUMA-interleaved-mode ( similar effect to disabling NUMA ) when starting MongoDB. Both methods achieve the same result. I lean towards using the \u201c numactl\u201d command due to future-proofing yourself for the mostly inevitable addition of NUMA awareness. On CentOS 7+ you may need to install the \u201c numactl\u201d yum/rpm package. To make mongod start using interleaved-mode, add \u201c numactl \u2013interleave=all\u201d before your regular \u201c mongod\u201d command: Shell 1 $ numactl -- interleave = all mongod < options here > To check mongod\u2019s NUMA setting: Shell 1 2 3 4 5 6 7 8 9 10 11 $ sudo numastat - p $ ( pidof mongod ) Per - node process memory usage ( in MBs ) for PID 7516 ( mongod ) Node 0 Total -- -- -- -- -- -- -- - -- -- -- -- -- -- -- - Huge 0.00 0.00 Heap 28.53 28.53 Stack 0.20 0.20 Private 7.55 7.55 -- -- -- -- -- -- -- -- -- -- -- -- -- -- -- - -- -- -- -- -- -- -- - Total 36.29 36.29 If you see only 1 x NUMA-node column ( \u201cNode0\u201d ) NUMA is disabled. If you see more than 1 x NUMA-node, make sure the metric numbers ( \u201c Heap\u201d, etc .) are balanced between nodes. Otherwise, NUMA is NOT in \u201cinterleave\u201d mode. Note: some MongoDB packages already ship logic to disable NUMA in the init/startup script. Check for this using \u201cgrep\u201d first. Your hardware or BIOS manual should cover disabling NUMA via the system BIOS. Block Device IO Scheduler and Read-Ahead For tuning flexibility, we recommended that MongoDB data sits on its own disk volume, preferably with its own dedicated disks/RAID array. While it may complicate backups, for the best performance you can also dedicate a separate volume for the MongoDB journal to separate it\u2019s disk activity noise from the main data set. The journal does not yet have it\u2019s own config/command-line setting, so you\u2019ll need to mount a volume to the \u201c journal\u201d directory inside the dbPath. For example, \u201c /var/lib/mongo/journal\u201d would be the journal mount-path if the dbPath was set to \u201c /var/lib/mongo\u201d . Aside from good hardware, the block device MongoDB stores its data on can benefit from 2 x major adjustments: IO Scheduler The IO scheduler is an algorithm the kernel will use to commit reads and writes to disk. By default most Linux installs use the CFQ ( Completely-Fair Queue ) scheduler. This is designed to work well for many general use cases, but with little latency guarantees. Two other popular schedulers are \u201c deadline\u201d and \u201c noop\u201d . Deadline excels at latency-sensitive use cases ( like databases ) and noop is closer to no scheduling at all. We generally suggest using the \u201c deadline\u201d IO scheduler for cases where you have real, non-virtualised disks under MongoDB. (For example, a \u201cbare metal\u201d server.) In some cases I\u2019ve seen \u201c noop\u201d perform better with certain hardware RAID controllers, however. The difference between \u201c deadline\u201d and \u201c cfq\u201d can be massive for disk-bound deployments. If you are running MongoDB inside a VM ( which has it\u2019s own IO scheduler beneath it ) it is best to use \u201c noop\u201d and let the virtualization layer take care of the IO scheduling itself. Read-Ahead Read-ahead is a per-block device performance tuning in Linux that causes data ahead of a requested block on disk to be read and then cached into the filesystem cache. Read-ahead assumes that there is a sequential read pattern and something will benefit from those extra blocks being cached. MongoDB tends to have very random disk patterns and often does not benefit from the default read-ahead setting, wasting memory that could be used for more hot data. Most Linux systems have a default setting of 128KB/256 sectors ( 128KB = 256 x 512-byte sectors ). This means if MongoDB fetches a 64kb document from disk, 128kb of filesystem cache is used and maybe the extra 64kb is never accessed later, wasting memory. For this setting, we suggest a starting-point of 32 sectors (= 16KB ) for most MongoDB workloads. From there you can test increasing/reducing this setting and then monitor a combination of query performance, cached memory usage and disk read activity to find a better balance. You should aim to use as little cached memory as possible without dropping the query performance or causing significant disk activity. Both the IO scheduler and read-ahead can be changed by adding a file to the udev configuration at \u201c /etc/udev/rules. d\u201d. In this example I am assuming the block device serving mongo data is named \u201c /dev/sda\u201d and I am setting \u201c deadline \u201d as the IO scheduler and 16kb/32-sectors as read-ahead: /etc/udev/rules.d/60-sda.rules Shell 1 2 # set deadline scheduler and 16kb read-ahead for /dev/sda ACTION == \"add|change\" , KERNEL == \"sda\" , ATTR { queue / scheduler } = \"deadline\" , ATTR { bdi / read_ahead_kb } = \"16\" To check the IO scheduler was applied ( [square-brackets] = enabled scheduler ): Shell 1 2 $ cat / sys / block / sda / queue / scheduler noop [ deadline ] cfq To check the current read-ahead setting: Shell 1 2 $ sudo blockdev -- getra / dev / sda 32 Note: this change should be applied and tested with a full system reboot! Filesystem and Options It is recommended that MongoDB uses only the ext4 or XFS filesystems for on-disk database data. ext3 should be avoided due to its poor pre-allocation performance. If you\u2019re using WiredTiger ( MongoDB 3.0+ ) as a storage engine, it is strongly advised that you ONLY use XFS due to serious stability issues on ext4. Each time you read a file, the filesystems perform an access-time metadata update by default. However, MongoDB ( and most applications ) does not use this access-time information. This means you can disable access-time updates on MongoDB\u2019s data volume. A small amount of disk IO activity that the access-time updates cause stops in this case. You can disable access-time updates by adding the flag \u201c noatime\u201d to the filesystem options field in the file \u201c /etc/fstab\u201d ( 4th field ) for the disk serving MongoDB data: Shell 1 / dev / mapper / data - mongodb / var / lib / mongo ext4 defaults , noatime 0 0 Use \u201cgrep \u201d to verify the volume is currently mounted: Shell 1 2 $ grep \"/var/lib/mongo\" / proc / mounts / dev / mapper / data - mongodb / var / lib / mongo ext4 rw , seclabel , noatime , data = ordered 0 0 Note: to apply a filesystem-options change, you must remount (umount + mount) the volume again after stopping MongoDB, or reboot. Network Stack Several defaults of the Linux kernel network tunings are either not optimal for MongoDB, limit a typical host with 1000mbps network interfaces ( or better ) or cause unpredictable behavior with routers and load balancers. We suggest some increases to the relatively low throughput settings ( net.core.somaxconn and net.ipv4.tcp_max_syn_backlog ) and a decrease in keepalive settings, seen below. Make these changes permanent by adding the following to \u201c /etc/sysctl.conf\u201d ( or a new file /etc/sysctl.d/mongodb-sysctl.conf \u2013 if /etc/sysctl.d exists ): /etc/sysctl.conf Shell 1 2 3 4 5 net .core .somaxconn = 4096 net .ipv4 .tcp_fin_timeout = 30 net .ipv4 .tcp_keepalive_intvl = 30 net .ipv4 .tcp_keepalive_time = 120 net .ipv4 .tcp_max_syn_backlog = 4096 To check the current values of any of these settings: Shell 1 2 $ sysctl net .core .somaxconn net .core .somaxconn = 4096 Note: you must run the command \u201c/sbin/sysctl -p\u201d as root/sudo (or reboot) to apply this change! NTP Daemon All of these deeper tunings make it easy to forget about something as simple as your clock source. As MongoDB is a cluster, it relies on a consistent time across nodes. Thus the NTP Daemon should run permanently on all MongoDB hosts, mongos and arbiters included. Be sure to check the time syncing won\u2019t fight with any guest-based virtualization tools like \u201cVMWare tools\u201d and \u201cVirtualBox Guest Additions\u201d. This is installed on RedHat/CentOS with: Shell 1 $ sudo yum install ntp And on Debian/Ubuntu: Shell 1 $ sudo apt - get install ntp Note: Start and enable the NTP Daemon (for starting on reboots) after installation. The commands to do this vary by OS and OS version, so please consult your documentation. Security-Enhanced Linux (SELinux) Security-Enhanced Linux is a kernel-level security access control module that has an unfortunate tendency to be disabled or set to warn-only on Linux deployments. As SELinux is a strict access control system, sometimes it can cause unexpected errors ( permission denied, etc.) with applications that were not configured properly for SELinux. Often people disable SELinux to resolve the issue and forget about it entirely. While implementing SELinux is not an end-all solution, it massively reduces the local attack surface of the server. We recommend deploying MongoDB with SELinus \u201c Enforcing\u201d mode on. The modes of SELinux are: Enforcing \u2013 Block and log policy violations. Permissive \u2013 Log policy violations only. Disabled \u2013 Completely disabled. As database servers are usually dedicated to one purpose, such as running MongoDB, the work of setting up SELinux is a lot simpler than a multi-use server with many processes and users (such as an application/web server, etc.). The OS access pattern of a database server should be extremely predictable. Introducing \u201c Enforcing\u201d mode at the very beginning of your testing/installation instead of after-the-fact avoids a lot of gotchas with SELinux. Logging for SELinux is directed to \u201c /var/log/audit/audit.log\u201d and the configuration is at \u201c /etc/selinux\u201d . Luckily, Percona Server for MongoDB RPM packages ( CentOS/RedHat ) are SELinux \u201c Enforcing \u201d mode compatible as they install/enable an SELinux policy at RPM install time! Debian/Ubuntu SELinux support is still in planning. Here you can see the SELinux policy shipped in the Percona Server for MongoDB version 3.2 server package: Shell 1 2 $ rpm - ql Percona - Server - MongoDB - 32 - server | grep selinux / etc / selinux / targeted / modules / active / modules / mongod .pp To change the SELinux mode to \u201c Enforcing\u201d : Shell 1 $ sudo setenforce Enforcing To check the running SELinux mode: Shell 1 2 $ sudo getenforce Enforcing Linux Kernel and Glibc Version The version of the Linux kernel and Glibc itself may be more important than you think. Some community benchmarks show a significant improvement on OLTP throughput benchmarks with the recent Linux 3.x kernels versus the 2.6 still widely deployed. To avoid serious bugs, MongoDB should at minimum use Linux 2.6.36 and Glibc 2.13 or newer. I hope to create a follow-up post on the specific differences seen under MongoDB workloads on Linux 3.2+ versus 2.6. Until then, I recommend you test the difference using your own workloads and any results/feedback are appreciated. What\u2019s Next? What\u2019s the next thing to tune? At this point, tuning becomes case-by-case and open-ended. I appreciate any comments on use-case/tunings pairings that worked for you. Also, look out for follow-ups to this article for a few tunings I excluded due to lack of testing. Not knowing the next step might mean you\u2019re done tuning, or that you need more visibility into your stack to find the next bottleneck. Good monitoring and data visibility are invaluable for this type of investigation. Look out for future posts regarding monitoring your MongoDB ( or MySQL ) deployment and consider using Percona Monitoring and Management as an all-in-one monitoring solution. You could also try using Percona-Lab/prometheus_mongodb_exporter , prometheus/node_exporter and Percona-Lab/grafana_mongodb_dashboards for monitoring MongoDB/Linux with Prometheus and Grafana. The road to an efficient database stack requires patience, analysis and iteration. Tomorrow a new hardware architecture or change in kernel behavior could come, be the first to spot the next bottleneck! Happy hunting. \u539f\u6587\uff1ahttps://www.percona.com/blog/2016/08/12/tuning-linux-for-mongodb/","title":"Tuning Linux for MongoDB -- \u8f6c"},{"location":"OPENSOURCE/2017-05-05-activemq5-x-x%25e4%25b8%25bb%25e4%25bb%258e%25e5%25ae%2589%25e8%25a3%2585%25e6%258c%2587%25e5%258d%2597.html/","tags":["activemq","jms","\u4e2d\u95f4\u4ef6","\u6d88\u606f"],"text":"1. \u670d\u52a1\u5668\u89c4\u5212 \u00b6 \u4e0b\u9762\u7684\u670d\u52a1\u5668ip\u3001\u7528\u6237\u3001\u76ee\u5f55\u4e3a\u793a\u4f8b\uff0c\u6839\u636e\u5177\u4f53\u60c5\u51b5\u8bbe\u5b9a\u3002 \u5b89\u88c5activemq\u524d\uff0c\u8bf7\u786e\u4fdd\u5df2\u7ecf\u5b89\u88c5jdk1.7\u6216jdk1.8\u3002 1.1 \u670d\u52a1\u5668\u5217\u8868 \u00b6 \u64cd\u4f5c\u7cfb\u7edf: CentOS6.2+ \u6216 Redhat6.2+ 192.168.10.1 serv-a1 \u4e3b 192.168.10.2 serv-b1 \u4ece 1.2 \u7528\u6237\u89c4\u5212 \u00b6 mqusr activemq\u7528\u6237 1.3 \u76ee\u5f55\u89c4\u5212 \u00b6 \u76ee\u5f55 \u7528\u9014 \u5907\u6ce8 /opt \u5e94\u7528\u76ee\u5f55 owner: mqusr /opt/_archive \u5b89\u88c5\u7a0b\u5e8f\u5f52\u6863 /data \u6570\u636e\u76ee\u5f55 owner: mqusr /data/nas_data nas\u5171\u4eab\u76ee\u5f55 2. activemq \u5b89\u88c5\u81f3 serv-a1 \uff08\u4e3b\uff09, serv-b1\uff08\u4ece\uff09 \u00b6 \u4e0b\u9762\u4ee5serv-a1\u4e3a\u4f8b\u3002 2.1 \u5efa\u7acb\u6570\u636e\u76ee\u5f55 \u00b6 [root@serv-a1 ~]# mkdir /data/nas_data/activemq [root@serv-a1 ~]# mkdir /data/nas_data/activemq/serv-a1 [root@serv-a1 ~]# mkdir /data/nas_data/activemq/serv-b1 [root@serv-a1 ~]# chown -R mqusr:mqusr /data/nas_data/activemq/ [root@serv-a1 ~]# su - mqusr 2.2 \u89e3\u538bactivemq\u7a0b\u5e8f\u5305 \u00b6 [mqusr@serv-a1 ~]$ cd /opt/ [mqusr@serv-a1 opt]$ tar -zxf apache-activemq-5.13.4-bin.tar.gz [mqusr@serv-a1 opt]$ mv apache-activemq-5.13.4/ activemq-5.13.4/ 2.3 \u91cd\u5efadata\u76ee\u5f55 \uff08\u4e24\u53f0\u673a\u5171\u4eab\u76ee\u5f55\uff09 \u00b6 [mqusr@serv-a1 opt]]$ cd activemq-5.13.4/ [mqusr@serv-a1 activemq-5.13.4]$ rm -rf data/ [mqusr@serv-a1 activemq-5.13.4]$ ln -s /data/nas_data/activemq/ data 2.4 \u914d\u7f6e \u00b6 2.4.1 conf/activemq.xml \u00b6 [mqusr@serv-a1 activemq-5.13.4]$ vi conf/activemq.xml \u5b9a\u4f4d\u81f340\u884c\uff0c\u6dfb\u52a0 schedulerSupport=\"true\"\uff0c\u5e76\u4fdd\u5b58 \u6ce8 \uff1a\u4e24\u53f0\u673a\u5668\u7684brokerName\u4e0d\u4e00\u6837\uff0c\u914d\u7f6e\u4e3a\u673a\u5668\u540d\u5373\u53ef\u3002 40 <broker xmlns= \"http://activemq.apache.org/schema/core\" 41 brokerName= \"serv-a1\" dataDirectory= \"${activemq.data}\" 42 schedulerSupport= \"true\" > 2.4.2 bin/env \u00b6 [mqusr@serv-a1 activemq-5.13.4]$ vi bin/env \u5206\u522b\u5b9a\u4f4d\u81f327\u3001102\u884c\uff0c\u8bbe\u7f6e ACTIVEMQ_OPTS_MEMORY\u3001ACTIVEMQ_PIDFILE \u6ce8 \uff1a\u5176\u4e2d\u7684serv-a1\u53d6\u673a\u5668\u540d 27 ACTIVEMQ_OPTS_MEMORY=\"-Xms4G -Xmx4G\" 102 ACTIVEMQ_PIDFILE=\"$ACTIVEMQ_DATA/serv-a1/activemq.pid\" 2.4.3 conf/log4j.properties \u00b6 [mqusr@serv-a1 activemq-5.13.4]$ vi conf/log4j.properties \u5206\u522b\u5b9a\u4f4d\u81f347\u300173\u884c\uff0c\u8bbe\u7f6elog\u6587\u4ef6 \u6ce8 \uff1a\u5176\u4e2d\u7684serv-a1\u53d6\u673a\u5668\u540d 47 log4j.appender.logfile.file=${activemq.base}/data/serv-a1/activemq.log 73 log4j.appender.audit.file=${activemq.base}/data/serv-a1/audit.log 2.4.4 conf/credentials.properties \u00b6 \u8bbe\u7f6e activemq \u8fde\u63a5\u5bc6\u7801 \uff08\u5f00\u53d1\u73af\u5883\u53ef\u9009\uff09 [mqusr@serv-a1 activemq-5.13.4]$ vi conf/credentials.properties activemq.username=sys activemq.password=changeMe 2.4.5 conf/jetty-realm.properties \u00b6 \u8bbe\u7f6eweb\u63a7\u5236\u53f0\u5bc6\u7801 \uff08\u5f00\u53d1\u73af\u5883\u53ef\u9009\uff09 [mqusr@serv-a1 activemq-5.13.4]$ vi conf/jetty-realm.properties admin: changeMe, admin 2.5 \u542f\u52a8 \u00b6 [mqusr@serv-a1 activemq-5.13.4]$ ./bin/activemq start \u6d4f\u89c8\u5668\u8bbf\u95eeweb\u63a7\u5236\u53f0 http://serv-a1:8161/admin/ \uff08\u7528\u6237\u5bc6\u7801 admin/changeMe\uff09 3. \u53c2\u8003\u8d44\u6599 \u00b6 activemq\u5b98\u7f51 http://activemq.apache.org/ \u5b89\u88c5\u6587\u4ef6\u4e0b\u8f7d\u9875\u9762 http://activemq.apache.org/download.html activemq cluster http://activemq.apache.org/clustering.html","title":"activemq5.x.x\u4e3b\u4ece\u5b89\u88c5\u6307\u5357"},{"location":"OPENSOURCE/2017-05-05-activemq5-x-x%25e4%25b8%25bb%25e4%25bb%258e%25e5%25ae%2589%25e8%25a3%2585%25e6%258c%2587%25e5%258d%2597.html/#1","text":"\u4e0b\u9762\u7684\u670d\u52a1\u5668ip\u3001\u7528\u6237\u3001\u76ee\u5f55\u4e3a\u793a\u4f8b\uff0c\u6839\u636e\u5177\u4f53\u60c5\u51b5\u8bbe\u5b9a\u3002 \u5b89\u88c5activemq\u524d\uff0c\u8bf7\u786e\u4fdd\u5df2\u7ecf\u5b89\u88c5jdk1.7\u6216jdk1.8\u3002","title":"1. \u670d\u52a1\u5668\u89c4\u5212"},{"location":"OPENSOURCE/2017-05-05-activemq5-x-x%25e4%25b8%25bb%25e4%25bb%258e%25e5%25ae%2589%25e8%25a3%2585%25e6%258c%2587%25e5%258d%2597.html/#11","text":"\u64cd\u4f5c\u7cfb\u7edf: CentOS6.2+ \u6216 Redhat6.2+ 192.168.10.1 serv-a1 \u4e3b 192.168.10.2 serv-b1 \u4ece","title":"1.1 \u670d\u52a1\u5668\u5217\u8868"},{"location":"OPENSOURCE/2017-05-05-activemq5-x-x%25e4%25b8%25bb%25e4%25bb%258e%25e5%25ae%2589%25e8%25a3%2585%25e6%258c%2587%25e5%258d%2597.html/#12","text":"mqusr activemq\u7528\u6237","title":"1.2 \u7528\u6237\u89c4\u5212"},{"location":"OPENSOURCE/2017-05-05-activemq5-x-x%25e4%25b8%25bb%25e4%25bb%258e%25e5%25ae%2589%25e8%25a3%2585%25e6%258c%2587%25e5%258d%2597.html/#13","text":"\u76ee\u5f55 \u7528\u9014 \u5907\u6ce8 /opt \u5e94\u7528\u76ee\u5f55 owner: mqusr /opt/_archive \u5b89\u88c5\u7a0b\u5e8f\u5f52\u6863 /data \u6570\u636e\u76ee\u5f55 owner: mqusr /data/nas_data nas\u5171\u4eab\u76ee\u5f55","title":"1.3 \u76ee\u5f55\u89c4\u5212"},{"location":"OPENSOURCE/2017-05-05-activemq5-x-x%25e4%25b8%25bb%25e4%25bb%258e%25e5%25ae%2589%25e8%25a3%2585%25e6%258c%2587%25e5%258d%2597.html/#2-activemq-serv-a1-serv-b1","text":"\u4e0b\u9762\u4ee5serv-a1\u4e3a\u4f8b\u3002","title":"2. activemq \u5b89\u88c5\u81f3 serv-a1 \uff08\u4e3b\uff09, serv-b1\uff08\u4ece\uff09"},{"location":"OPENSOURCE/2017-05-05-activemq5-x-x%25e4%25b8%25bb%25e4%25bb%258e%25e5%25ae%2589%25e8%25a3%2585%25e6%258c%2587%25e5%258d%2597.html/#21","text":"[root@serv-a1 ~]# mkdir /data/nas_data/activemq [root@serv-a1 ~]# mkdir /data/nas_data/activemq/serv-a1 [root@serv-a1 ~]# mkdir /data/nas_data/activemq/serv-b1 [root@serv-a1 ~]# chown -R mqusr:mqusr /data/nas_data/activemq/ [root@serv-a1 ~]# su - mqusr","title":"2.1 \u5efa\u7acb\u6570\u636e\u76ee\u5f55"},{"location":"OPENSOURCE/2017-05-05-activemq5-x-x%25e4%25b8%25bb%25e4%25bb%258e%25e5%25ae%2589%25e8%25a3%2585%25e6%258c%2587%25e5%258d%2597.html/#22-activemq","text":"[mqusr@serv-a1 ~]$ cd /opt/ [mqusr@serv-a1 opt]$ tar -zxf apache-activemq-5.13.4-bin.tar.gz [mqusr@serv-a1 opt]$ mv apache-activemq-5.13.4/ activemq-5.13.4/","title":"2.2 \u89e3\u538bactivemq\u7a0b\u5e8f\u5305"},{"location":"OPENSOURCE/2017-05-05-activemq5-x-x%25e4%25b8%25bb%25e4%25bb%258e%25e5%25ae%2589%25e8%25a3%2585%25e6%258c%2587%25e5%258d%2597.html/#23-data","text":"[mqusr@serv-a1 opt]]$ cd activemq-5.13.4/ [mqusr@serv-a1 activemq-5.13.4]$ rm -rf data/ [mqusr@serv-a1 activemq-5.13.4]$ ln -s /data/nas_data/activemq/ data","title":"2.3 \u91cd\u5efadata\u76ee\u5f55 \uff08\u4e24\u53f0\u673a\u5171\u4eab\u76ee\u5f55\uff09"},{"location":"OPENSOURCE/2017-05-05-activemq5-x-x%25e4%25b8%25bb%25e4%25bb%258e%25e5%25ae%2589%25e8%25a3%2585%25e6%258c%2587%25e5%258d%2597.html/#24","text":"","title":"2.4 \u914d\u7f6e"},{"location":"OPENSOURCE/2017-05-05-activemq5-x-x%25e4%25b8%25bb%25e4%25bb%258e%25e5%25ae%2589%25e8%25a3%2585%25e6%258c%2587%25e5%258d%2597.html/#241-confactivemqxml","text":"[mqusr@serv-a1 activemq-5.13.4]$ vi conf/activemq.xml \u5b9a\u4f4d\u81f340\u884c\uff0c\u6dfb\u52a0 schedulerSupport=\"true\"\uff0c\u5e76\u4fdd\u5b58 \u6ce8 \uff1a\u4e24\u53f0\u673a\u5668\u7684brokerName\u4e0d\u4e00\u6837\uff0c\u914d\u7f6e\u4e3a\u673a\u5668\u540d\u5373\u53ef\u3002 40 <broker xmlns= \"http://activemq.apache.org/schema/core\" 41 brokerName= \"serv-a1\" dataDirectory= \"${activemq.data}\" 42 schedulerSupport= \"true\" >","title":"2.4.1 conf/activemq.xml"},{"location":"OPENSOURCE/2017-05-05-activemq5-x-x%25e4%25b8%25bb%25e4%25bb%258e%25e5%25ae%2589%25e8%25a3%2585%25e6%258c%2587%25e5%258d%2597.html/#242-binenv","text":"[mqusr@serv-a1 activemq-5.13.4]$ vi bin/env \u5206\u522b\u5b9a\u4f4d\u81f327\u3001102\u884c\uff0c\u8bbe\u7f6e ACTIVEMQ_OPTS_MEMORY\u3001ACTIVEMQ_PIDFILE \u6ce8 \uff1a\u5176\u4e2d\u7684serv-a1\u53d6\u673a\u5668\u540d 27 ACTIVEMQ_OPTS_MEMORY=\"-Xms4G -Xmx4G\" 102 ACTIVEMQ_PIDFILE=\"$ACTIVEMQ_DATA/serv-a1/activemq.pid\"","title":"2.4.2 bin/env"},{"location":"OPENSOURCE/2017-05-05-activemq5-x-x%25e4%25b8%25bb%25e4%25bb%258e%25e5%25ae%2589%25e8%25a3%2585%25e6%258c%2587%25e5%258d%2597.html/#243-conflog4jproperties","text":"[mqusr@serv-a1 activemq-5.13.4]$ vi conf/log4j.properties \u5206\u522b\u5b9a\u4f4d\u81f347\u300173\u884c\uff0c\u8bbe\u7f6elog\u6587\u4ef6 \u6ce8 \uff1a\u5176\u4e2d\u7684serv-a1\u53d6\u673a\u5668\u540d 47 log4j.appender.logfile.file=${activemq.base}/data/serv-a1/activemq.log 73 log4j.appender.audit.file=${activemq.base}/data/serv-a1/audit.log","title":"2.4.3 conf/log4j.properties"},{"location":"OPENSOURCE/2017-05-05-activemq5-x-x%25e4%25b8%25bb%25e4%25bb%258e%25e5%25ae%2589%25e8%25a3%2585%25e6%258c%2587%25e5%258d%2597.html/#244-confcredentialsproperties","text":"\u8bbe\u7f6e activemq \u8fde\u63a5\u5bc6\u7801 \uff08\u5f00\u53d1\u73af\u5883\u53ef\u9009\uff09 [mqusr@serv-a1 activemq-5.13.4]$ vi conf/credentials.properties activemq.username=sys activemq.password=changeMe","title":"2.4.4 conf/credentials.properties"},{"location":"OPENSOURCE/2017-05-05-activemq5-x-x%25e4%25b8%25bb%25e4%25bb%258e%25e5%25ae%2589%25e8%25a3%2585%25e6%258c%2587%25e5%258d%2597.html/#245-confjetty-realmproperties","text":"\u8bbe\u7f6eweb\u63a7\u5236\u53f0\u5bc6\u7801 \uff08\u5f00\u53d1\u73af\u5883\u53ef\u9009\uff09 [mqusr@serv-a1 activemq-5.13.4]$ vi conf/jetty-realm.properties admin: changeMe, admin","title":"2.4.5 conf/jetty-realm.properties"},{"location":"OPENSOURCE/2017-05-05-activemq5-x-x%25e4%25b8%25bb%25e4%25bb%258e%25e5%25ae%2589%25e8%25a3%2585%25e6%258c%2587%25e5%258d%2597.html/#25","text":"[mqusr@serv-a1 activemq-5.13.4]$ ./bin/activemq start \u6d4f\u89c8\u5668\u8bbf\u95eeweb\u63a7\u5236\u53f0 http://serv-a1:8161/admin/ \uff08\u7528\u6237\u5bc6\u7801 admin/changeMe\uff09","title":"2.5 \u542f\u52a8"},{"location":"OPENSOURCE/2017-05-05-activemq5-x-x%25e4%25b8%25bb%25e4%25bb%258e%25e5%25ae%2589%25e8%25a3%2585%25e6%258c%2587%25e5%258d%2597.html/#3","text":"activemq\u5b98\u7f51 http://activemq.apache.org/ \u5b89\u88c5\u6587\u4ef6\u4e0b\u8f7d\u9875\u9762 http://activemq.apache.org/download.html activemq cluster http://activemq.apache.org/clustering.html","title":"3. \u53c2\u8003\u8d44\u6599"},{"location":"OPENSOURCE/2017-05-21-%25e4%25bf%25ae%25e6%2594%25b9%25e4%25ba%2586ssh%25e9%25bb%2598%25e8%25ae%25a4%25e7%25ab%25af%25e5%258f%25a3%25e4%25b9%258b%25e5%2590%258e%25ef%25bc%258c%25e5%25a6%2582%25e4%25bd%2595%25e9%2585%258d%25e7%25bd%25aegit%25ef%25bc%259f.html/","tags":["git"],"text":"\u8f6c\u8f7d\u81ea\uff1a \u672c\u6587\u6807\u9898\uff1a\u4fee\u6539\u4e86SSH\u9ed8\u8ba4\u7aef\u53e3\u4e4b\u540e\uff0c\u5982\u4f55\u914d\u7f6egit\uff1f \u672c\u6587\u94fe\u63a5\uff1a http://zengrong.net/post/1544.htm \u7531\u4e8e\u5b89\u5168\u6216\u8005\u5176\u5b83\u539f\u56e0\uff0c\u6211\u4eec\u53ef\u80fd\u4f1a\u4fee\u6539\u9ed8\u8ba4\u7684SSH\u670d\u52a1\u7aef\u53e3\u53f7\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5df2\u6709\u7684git\u9879\u76ee\u5728pull\u6216\u8005push\u7684\u65f6\u5019\u4f1a\u62a5\u9519\u3002 \u73b0\u5728\u5047\u8bbe\u539f\u6765\u7684\u9879\u76ee\u7684remote\u8bbe\u7f6e\u4e3a git@domain.com:Projects/p1.git \uff0c\u5c06\u670d\u52a1\u5668SSH\u9ed8\u8ba4\u7aef\u53e3\u4fee\u6539\u4e3a3022\u540e\uff0c\u5bfc\u81f4push\u51fa\u9519\u3002 \u6709\u4e24\u4e2a\u89e3\u51b3\u529e\u6cd5\uff1a \u4e00\u3001\u76f4\u63a5\u4fee\u6539URL\u4e3aSSH://\u5f00\u5934 git remote set-url origin ssh://git@domain.com:3022/~/Projects/p1.git \u4e8c\u3001 \u4fee\u6539\u672c\u5730\u914d\u7f6e\u6587\u4ef6 cat>~/.ssh/config # \u6620\u5c04\u4e00\u4e2a\u522b\u540d host newdomain hostname domain.com port 3022 # ctrl+D \u4fee\u6539p1.git\u9879\u76ee\u4e0b\u7684git\u914d\u7f6e\u6587\u4ef6 git remote set-url origin git@newdomain:Projects/p1.git","title":"\u4fee\u6539\u4e86SSH\u9ed8\u8ba4\u7aef\u53e3\u4e4b\u540e\uff0c\u5982\u4f55\u914d\u7f6egit\uff1f"},{"location":"OPENSOURCE/2017-07-01-understand-jmeter-apdex.html/","tags":["jmeter","APDEX","performance","test","threshold"],"text":"1. Concept \u00b6 APDEX is explained here To compute it JMeter needs 2 values: - Satisfied count - Tolerating count Satisfied count is the Number of requests for which response time is lower than \"Toleration threshold\" Tolerating count is the Number of requests for which response time is higher than Toleration threshold but lower than \"Frustration threshold\" So JMeter let's you customize those 2 values as it depends on your SLR/SLA. APDEX = (SatisfiedCount + ToleratingCount / 2) / TotalSamples 2. How to set APDEX thresholds \u00b6 bin/user.properties \u00b6 $ pwd /Users/echo/apps/jmeter-3.2 $ cat bin/user.properties | grep threshold # Change this parameter if you want to override the APDEX satisfaction threshold. #jmeter.reportgenerator.apdex_satisfied_threshold=500 # Change this parameter if you want to override the APDEX tolerance threshold. #jmeter.reportgenerator.apdex_tolerated_threshold=1500 command line \u00b6 For exampe: CASE = testcast1 && ./bin/jmeter -n -t \"testcase/ $CASE .jmx\" -l \"output/ $CASE .log\" -o \"output/ $CASE \" -e -Jjmeter.reportgenerator.apdex_satisfied_threshold = 400 -Jjmeter.reportgenerator.apdex_tolerated_threshold = 1200 References \u00b6 http://jmeter.apache.org/usermanual/generating-dashboard.html https://en.wikipedia.org/wiki/Apdex https://stackoverflow.com/questions/39696457/can-anyone-help-me-to-understand-the-terms-toleration-threshold-and-frustrati","title":"Understand JMeter APDEX"},{"location":"OPENSOURCE/2017-07-01-understand-jmeter-apdex.html/#1-concept","text":"APDEX is explained here To compute it JMeter needs 2 values: - Satisfied count - Tolerating count Satisfied count is the Number of requests for which response time is lower than \"Toleration threshold\" Tolerating count is the Number of requests for which response time is higher than Toleration threshold but lower than \"Frustration threshold\" So JMeter let's you customize those 2 values as it depends on your SLR/SLA. APDEX = (SatisfiedCount + ToleratingCount / 2) / TotalSamples","title":"1. Concept"},{"location":"OPENSOURCE/2017-07-01-understand-jmeter-apdex.html/#2-how-to-set-apdex-thresholds","text":"","title":"2. How to set APDEX thresholds"},{"location":"OPENSOURCE/2017-07-01-understand-jmeter-apdex.html/#binuserproperties","text":"$ pwd /Users/echo/apps/jmeter-3.2 $ cat bin/user.properties | grep threshold # Change this parameter if you want to override the APDEX satisfaction threshold. #jmeter.reportgenerator.apdex_satisfied_threshold=500 # Change this parameter if you want to override the APDEX tolerance threshold. #jmeter.reportgenerator.apdex_tolerated_threshold=1500","title":"bin/user.properties"},{"location":"OPENSOURCE/2017-07-01-understand-jmeter-apdex.html/#command-line","text":"For exampe: CASE = testcast1 && ./bin/jmeter -n -t \"testcase/ $CASE .jmx\" -l \"output/ $CASE .log\" -o \"output/ $CASE \" -e -Jjmeter.reportgenerator.apdex_satisfied_threshold = 400 -Jjmeter.reportgenerator.apdex_tolerated_threshold = 1200","title":"command line"},{"location":"OPENSOURCE/2017-07-01-understand-jmeter-apdex.html/#references","text":"http://jmeter.apache.org/usermanual/generating-dashboard.html https://en.wikipedia.org/wiki/Apdex https://stackoverflow.com/questions/39696457/can-anyone-help-me-to-understand-the-terms-toleration-threshold-and-frustrati","title":"References"},{"location":"OPENSOURCE/2017-07-06-gradle-to-maven-conversion-and-vice-versa.html/","tags":["maven","gradle"],"text":"A N M Bazlur Bazlur Rahman July 20, 2014 Java , Tips How to convert maven to gradle The first thing is, you have to install gradle. Its easy. I know you can do it. Go to the installing guide: http://www.gradle.org/docs/current/userguide/installation.html Now the second step is to run \u2018 gradle init \u2018 in the directory containing the POM file. This will convert the maven build to a gradle build generating a setting.gradle file and one or ore more build.gradle files. Thats all. How to convert gradle to maven You just need to add a maven plugin in your build.gradle. Your build gradle should be like this- 1 2 3 4 5 6 7 8 9 10 apply plugin: 'java' apply plugin: 'maven' group = 'com.bazlur.app' // artifactId is taken by default, from folder name version = '0.1-SNAPSHOT' dependencies { compile 'commons-lang:commons-lang:2.3' } Now run \u2018 gradle install \u2018 in the build.gradle folder. Now you will find in the build/poms subfolder, a file called pom-default.xml which will contain the dependencies. Now its all yours, copy it, customise it add up new stuff. Source: https://codexplo.wordpress.com/2014/07/20/gradle-to-maven-conversion-and-vice-versa/","title":"Gradle to maven conversion and vice versa"},{"location":"OPENSOURCE/2017-07-27-git-list-remote-branches.html/","tags":["git","ls-remote"],"text":"Sometimes you may need to figure out what branches exist on a remote repository so you can pull them down and check them out, merge them into your local branches, etc. If you\u2019re using GitHub or gitweb to host your repository it\u2019s usually easy to determine the branch names, but if you need to get them in general or for scripts it\u2019s not exactly clear. UPDATE : The comments have enlightened me quite a bit\u2026there seems to always be more than one way to skin a cat using Git. The easiest way is just to use the git branch commands\u2019 various options. -a shows all local and remote branches, while -r shows only remote branches. $ git branch * master $ git branch -a * master origin/1-2-stable origin/2-0-stable origin/2-1-stable origin/2-2-stable origin/3-0-unstable origin/HEAD origin/master $ git branch -r origin/1-2-stable origin/2-0-stable origin/2-1-stable origin/2-2-stable origin/3-0-unstable origin/HEAD origin/master So, once you know the name of the branch it\u2019s quite simple to check them out. If you have color options on it\u2019s also quite easy to tell which branches aren\u2019t pulled down since they\u2019re listed in red. There\u2019s also another way to do figure out what branches are on your remote by actually using the remote related commands, git remote and git ls-remote . The former displays plenty of information about the remote in general and how it relates to your own repository, while the latter simply lists all references to branches and tags that it knows about. $ git remote show origin * remote origin URL: git://github.com/rails/rails.git Remote branch merged with 'git pull' while on branch master master Tracked remote branches 1-2-stable 2-0-stable 2-1-stable 2-2-stable 3-0-unstable master $ git ls-remote --heads origin 5b3f7563ae1b4a7160fda7fe34240d40c5777dcd refs/heads/1-2-stable 71926912a127da29530520d435c83c48778ac2b2 refs/heads/2-0-stable 2b158543247a150e8ec568becf360e7376f8ab84 refs/heads/2-1-stable b0792a3e7be88e3060af19bab01cd3d26d347e4c refs/heads/2-2-stable d6b9f8410c990b3d68d1970f1461a1d385d098d7 refs/heads/3-0-unstable f04346d8b999476113d5e5a30661e07899e3ff80 refs/heads/master The ls-remote command returns the SHA1 hash of the latest commit for that reference, so it is quite easy to parse out and get to the exact commit you need if you\u2019re doing some scripting. The --heads option lists only branch names since the command can list tags too. If you have any other uses for these commands or an easier way to figure out branches that live on a remote, comment away! Source: http://gitready.com/intermediate/2009/02/13/list-remote-branches.html","title":"git list remote branches"},{"location":"OPENSOURCE/2017-09-17-how-to-disable-console-logging-in-spring-boot.html/","tags":[],"text":"It turned out if I set the following property empty, the console logging is disabled: logging.pattern.console= Reference https://stackoverflow.com/questions/43918414/how-to-disable-console-logging-in-spring-boot","title":"How to disable console logging in spring-boot?"},{"location":"OPENSOURCE/2017-09-17-spring-boot-slf4j-logging-example.html/","tags":["springboot","logging","logback","log4j"],"text":"By mkyong | January 4, 2017 | Updated : April 17, 2017 | Viewed : 0 times +-57,224 pv/w By default, the SLF4j Logging is included in the Spring Boot starter package. application.properties spring-boot-web-project$ mvn dependency:tree + .. . +- org.springframework.boot:spring-boot-starter-logging:jar:1.4.2.RELEASE:compile [ INFO ] | | | +- ch.qos.logback:logback-classic:jar:1.1.7:compile [ INFO ] | | | | \\- ch.qos.logback:logback-core:jar:1.1.7:compile [ INFO ] | | | +- org.slf4j:jcl-over-slf4j:jar:1.7.21:compile [ INFO ] | | | +- org.slf4j:jul-to-slf4j:jar:1.7.21:compile [ INFO ] | | | \\- org.slf4j:log4j-over-slf4j:jar:1.7.21:compile + .. . Note Review this Spring Boot Logback XML template to understand the default logging pattern and configuration. 1. application.properties To enable logging, create a application.properties file in the root of the resources folder. 1.1 logging.level \u2013 define logging level, the logging will be output to console. application.properties logging.level.org.springframework.web = ERROR logging.level.com.mkyong = DEBUG 1.2 logging.file \u2013 define logging file, the logging will be output to a file and console. application.properties logging.level.org.springframework.web = ERROR logging.level.com.mkyong = DEBUG #output to a temp_folder/file logging.file = ${java.io.tmpdir} /application.log #output to a file #logging.file=/Users/mkyong/application.log 1.3 logging.pattern \u2013 define a custom logging pattern. application.properties logging.level.org.springframework.web = ERROR logging.level.com.mkyong = DEBUG # Logging pattern for the console logging.pattern.console = \"%d{yyyy-MM-dd HH:mm:ss} - %msg%n\" # Logging pattern for file logging.pattern.file = \"%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n\" logging.file = /Users/mkyong/application.log 2. application.yml This is the equivalent in YAML format. application.yml logging: level: org.springframework.web: ERROR com.mkyong: DEBUG pattern: console: \"%d{yyyy-MM-dd HH:mm:ss} - %msg%n\" file: \"%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n\" file: /Users/mkyong/application.log 3. Classic Logback.xml If you don\u2019t like the Spring Boot logging template, just create a standard logback.xml in the root of the resources folder or root of the classpath. This will override the Spring Boot logging template. logback.xml < configuration > < property name = \" DEV_HOME \" value = \" c:/logs \" /> < appender name = \" FILE-AUDIT \" class = \" ch.qos.logback.core.rolling.RollingFileAppender \" > < file > ${DEV_HOME}/debug.log file > < encoder class = \" ch.qos.logback.classic.encoder.PatternLayoutEncoder \" > < Pattern > %d{yyyy-MM-dd HH:mm:ss} - %msg%n Pattern > encoder > < rollingPolicy class = \" ch.qos.logback.core.rolling.TimeBasedRollingPolicy \" > < fileNamePattern > ${DEV_HOME}/archived/debug.%d{yyyy-MM-dd}.%i.log fileNamePattern > < timeBasedFileNamingAndTriggeringPolicy class = \" ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP \" > < maxFileSize > 10MB maxFileSize > timeBasedFileNamingAndTriggeringPolicy > rollingPolicy > appender > < logger name = \" com.mkyong \" level = \" debug \" additivity = \" false \" > < appender-ref ref = \" FILE-AUDIT \" /> logger > < root level = \" error \" > < appender-ref ref = \" FILE-AUDIT \" /> root > configuration > 4. Spring Boot logging by Profile Note Read this article \u2013 Profile-specific configuration Create a logback-spring.xml in the root of the classpath, to take advantage of the templating features provided by Spring Boot. In below example : If the profile is dev , logs to console and a rolling file. If the profile is prod , logs to a rolling file only. logback-spring.xml < configuration > < include resource = \" org/springframework/boot/logging/logback/defaults.xml \" /> < property name = \" LOG_FILE \" value = \" ${LOG_FILE:-${LOG_PATH:-${LOG_TEMP:-${java.io.tmpdir:-/tmp}}/}spring.log} \" /> < springProfile name = \" dev \" > < include resource = \" org/springframework/boot/logging/logback/console-appender.xml \" /> < appender name = \" ROLLING-FILE \" class = \" ch.qos.logback.core.rolling.RollingFileAppender \" > < encoder > < pattern > ${FILE_LOG_PATTERN} pattern > encoder > < file > ${LOG_FILE} file > < rollingPolicy class = \" ch.qos.logback.core.rolling.TimeBasedRollingPolicy \" > < fileNamePattern > ${LOG_FILE}.%d{yyyy-MM-dd}.log fileNamePattern > rollingPolicy > appender > < root level = \" ERROR \" > < appender-ref ref = \" CONSOLE \" /> < appender-ref ref = \" ROLLING-FILE \" /> root > springProfile > < springProfile name = \" prod \" > < appender name = \" ROLLING-FILE \" class = \" ch.qos.logback.core.rolling.RollingFileAppender \" > < encoder > < pattern > ${FILE_LOG_PATTERN} pattern > encoder > < file > ${LOG_FILE} file > < rollingPolicy class = \" ch.qos.logback.core.rolling.TimeBasedRollingPolicy \" > < fileNamePattern > ${LOG_FILE}.%d{yyyy-MM-dd}.%i.gz fileNamePattern > < timeBasedFileNamingAndTriggeringPolicy class = \" ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP \" > < maxFileSize > 10MB maxFileSize > timeBasedFileNamingAndTriggeringPolicy > rollingPolicy > appender > < root level = \" ERROR \" > < appender-ref ref = \" ROLLING-FILE \" /> root > springProfile > configuration > application.yml spring: profiles: active: prod logging: level: ROOT: ERROR org.springframework: ERROR org.springframework.data: ERROR com.mkyong: INFO org.mongodb: ERROR file: /Users/mkyong/application.log For non-web boot app, you can override the log file output like this : Console $ java -Dlogging.file = /home/mkyong/app/logs/app.log -jar boot-app.jar 5. Set Root Level application.properties # root logging level, warning : too much output logging.level. = DEBUG application.yml logging: level: ROOT: DEBUG Download Source Code Download It \u2013 spring-boot-web-slf4j-logging.zip (16 KB) References Spring Boot \u2013 How to Logging Spring Boot Logback XML template Spring Boot: How can I set the logging level with application.properties? logback.xml Examples Logback Home Source: https://www.mkyong.com/spring-boot/spring-boot-slf4j-logging-example/","title":"Spring Boot SLF4J Logging example"},{"location":"OPENSOURCE/2017-09-21-filter-and-rename-resources-with-maven.html/","tags":["maven"],"text":"Source : http://roufid.com/filter-and-rename-resources-with-maven/ 17 DEC, 2016 If you want to filter and copy your project resources to the output directory, the Apache Maven Resources Plugin is the best plugin to perform that. But sometimes you want to filter and rename resources with Maven and the last version of the Maven Resources Plugin (current 3.0.1) does not provide a direct way to do that. This tutorial will show a workaround to filter and rename resources with Maven. Project example Let\u2019s consider a file file - to - rename . txt located under src / main / which we want to filter and rename to renamed - file . txt . Below the project structure : Maven project structure The content of file - to - rename . txt : 1 2 3 firstname = $ { user . firstname } lastname = $ { user . lastname } date = $ { maven . build . timestamp } Content of pom . xml : 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 xmlns = \" http://maven.apache.org/POM/4.0.0 \" xmlns : xsi = \" http://www.w3.org/2001/XMLSchema-instance \" xsi : schemaLocation = \" http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd \" > 4.0.0 com.roufid.tutorial filter-copy-rename-resource-tutorial 0.0.1-SNAPSHOT pom Filter, copy and rename resource tutorial Radouane ROUFID org.apache.maven.plugins maven-resources-plugin 3.0.1 filter-resources process-resources copy-resources ${project.build.directory} true ${basedir}/src/main **/* com.coderplus.maven.plugins copy-rename-maven-plugin 1.0 copy-and-rename-file compile rename ${project.build.directory}/file-to-rename.txt ${project.build.directory}/renamed-file.txt Building the project Run a mvn install to build the project if you use command line or Right-Click -> Run As -> Maven install on Eclipse. After a refresh, below the new project structure : Maven project output directory And the content of renamed - file . txt is : 1 2 3 firstname = Radouane lastname = ROUFID date = 2016 - 12 - 06T10 : 19 : 19Z What happened ? The project build is on two step. First maven-resources-plugin is used at the copy - resources lifecycle phase to filter the resources located under / src / main and copy them to the target directory. Next, copy-rename-maven-plugin is used to rename the filtered output file file - to - rename . txt to renamed - file . txt . References Apache Maven resources plugin Copy Rename Maven Plugin","title":"Filter and rename resources with Maven"},{"location":"OPENSOURCE/2018-12-15-install-cloudstack-4-11-1-0-centos-7-5.html/","tags":["cloudstack","iaas","cloudnative"],"text":"1 Preparation \u00b6 1.1 \u8bbe\u7f6eselinux \u00b6 sed -i s#'SELINUX=enforcing'#'SELINUX=permissive'#g /etc/selinux/config setenforce 0 1.2 \u5b89\u88c5NTP\uff08\u65f6\u95f4\u540c\u6b65\uff09 \u00b6 yum -y install ntp systemctl enable ntpd 1.3 \u5b89\u88c5cloudstack.repo \u00b6 cat <<EOF > /etc/yum.repos.d/cloudstack.repo [cloudstack] name=cloudstack baseurl=http://cloudstack.apt-get.eu/centos/7/4.11/ enabled=1 gpgcheck=0 EOF 1.4 \u8bbe\u7f6e\u9632\u706b\u5899 \u00b6 firewall-cmd --permanent --add-port=111/tcp firewall-cmd --permanent --add-port=111/udp firewall-cmd --permanent --add-port=2049/tcp firewall-cmd --permanent --add-port=32803/tcp firewall-cmd --permanent --add-port=32769/udp firewall-cmd --permanent --add-port=892/tcp firewall-cmd --permanent --add-port=892/udp firewall-cmd --permanent --add-port=875/tcp firewall-cmd --permanent --add-port=875/udp firewall-cmd --permanent --add-port=662/tcp firewall-cmd --permanent --add-port=662/udp firewall-cmd --permanent --add-port=8080/tcp firewall-cmd --reload firewall-cmd --list-all 2 Installation \u00b6 2.1 \u5b89\u88c5cloudstack-management \u00b6 yum -y install cloudstack-management 2.2 \u5b89\u88c5MariaDB \u00b6 2.2.1 Install & config mariadb \u00b6 yum install mariadb mariadb-server vi /etc/my.cnf [mysqld] innodb_rollback_on_timeout=1 innodb_lock_wait_timeout=600 max_connections=350 log-bin=mysql-bin binlog-format = 'ROW' 2.2.2 \u521b\u5efadata\u76ee\u5f55 \u00b6 [root@panda lib]# mkdir -p /data/lib/mysql [root@panda lib]# chown mysql:mysql /data/lib/mysql/ [root@panda lib]# rmdir /var/lib/mysql/ [root@panda lib]# cd /var/lib && ln -s /data/lib/mysql/ . 2.2.3 \u542f\u52a8\u6570\u636e\u5e93\u5e76\u8bbe\u7f6e\u4e3a\u5f00\u673a\u542f\u52a8 \u00b6 systemctl start mariadb #\u542f\u52a8\u6570\u636e\u5e93 systemctl enable mariadb #\u5f00\u673a\u81ea\u542f\u52a8 2.2.4 \u521d\u59cb\u5316\u6570\u636e\u5e93 \u00b6 mysql_secure_installation #\u8bbe\u7f6e\u5bc6\u7801\u7136\u540e\u4e00\u8defyyyy \uff08yes\uff09 2.3 \u4f7f\u7528cloudstack-setup-databases\u521d\u59cb\u5316CloudStack\u6570\u636e\u5e93 \u00b6 cloudstack-setup-databases cloud:cloud@localhost --deploy-as=root:123456 -i 192.168.10.3 ## 192.168.10.3\u662f\u5f53\u524d\u7cfb\u7edf\u7684\u672c\u5730ip # \u91cd\u7f6e\u6570\u636e\u5e93\u5bc6\u7801123456 2.4 \u5b89\u88c5management\u670d\u52a1\u5668 \u00b6 cloudstack-setup-management # The --tomcat7 option is deprecated, CloudStack now uses embedded Jetty server. \u542f\u52a8cloudstack systemctl start cloudstack-management 2.5 \u5b89\u88c5\u4e0e\u914d\u7f6eNFS\u5b58\u50a8 \u00b6 yum -y install nfs-utils rpcbind 2.5.1 \u914d\u7f6e\u57df\u540d \u00b6 vi /etc/idmapd.conf Domain = echoyun.edu 2.5.2 \u51c6\u5907NFS\u76ee\u5f55 \u00b6 mkdir -p /data/cloudstack/{primary,secondary} 2.5.3 \u4fee\u6539NFS\u670d\u52a1\u53c2\u6570 \u00b6 # vim /etc/sysconfig/nfs MOUNTD_PORT=892 STATD_PORT=662 STATD_OUTGOING_PORT=2020 # vim /etc/modprobe.d/lockd.conf options lockd nlm_tcpport=32803 options lockd nlm_udpport=32769 2.5.4 \u914d\u7f6eexports \u00b6 vim /etc/exports /data/cloudstack/primary *(rw,async,no_root_squash,no_subtree_check) /data/cloudstack/secondary *(rw,async,no_root_squash,no_subtree_check) 2.5.5 \u8bbe\u7f6enfs\u6302\u8f7d \u00b6 vim /etc/nfsmount.conf Nfsvers=4 2.5.6 \u542f\u52a8nfs\u548crpcbind \u00b6 systemctl enable rpcbind systemctl enable nfs-server systemctl start rpcbind systemctl start nfs-server 2.5.7 \u6d4b\u8bd5\u6302\u8f7d \u00b6 mount -t nfs 192.168.10.3:/data/cloudstack/primary /mnt df -h #\u67e5\u770b\u6709\u4e86\u4ee3\u8868\u6210\u529f umount /mnt 2.6 \u4e0b\u8f7d\u7cfb\u7edfVM\u6a21\u677f \u00b6 /usr/share/cloudstack-common/scripts/storage/secondary/cloud-install-sys-tmplt -m /data/cloudstack/secondary -u http://cloudstack.apt-get.eu/systemvm/4.11/systemvmtemplate-4.11.1-kvm.qcow2.bz2 -h kvm -F 2.7 \u5b89\u88c5agent\uff08cloudstack\u4e3b\u673a\uff09 \u00b6 \u5982\u679c\u90e8\u7f72\u96c6\u7fa4\uff0c\u5907\u673a\u53ea\u9700\u8981\u76f4\u63a5\u90e8\u7f72agent. yum -y install cloudstack-agent 2.7.1 \u914d\u7f6e\u6587\u4ef6\u4fee\u6539 \u00b6 # vi /etc/libvirt/qemu.conf \u5e76\u53d6\u6d88\u5982\u4e0b\u884c\u7684\u6ce8\u91ca vnc_listen=0.0.0.0 2.7.2 \u914d\u7f6eKVM \u00b6 # vi /etc/libvirt/libvirtd.conf listen_tls = 0 listen_tcp = 1 tcp_port = \"16059\" auth_tcp = \"none\" mdns_adv = 0 # vi /etc/sysconfig/libvirtd LIBVIRTD_ARGS=\"--listen\" systemctl restart libvirtd systemctl enable libvirtd 2.7.3 \u914d\u7f6eagent \u00b6 vi /etc/cloudstack/agent/agent.properties host=192.168.10.3 2.7.4 \u914d\u7f6e\u7f51\u5361\uff08\u505a\u6865\u63a5\uff09 \u00b6 \u7f16\u8f91\u7b2c\u4e00\u5757\u7f51\u5361(em1) cat <<EOF > /etc/sysconfig/network-scripts/ifcfg-em1 DEVICE=em1 TYPE=Ethernet HWADDR=8c:ec:4b:9a:9d:11 BOOTPROTO=none ONBOOT=yes NM_CONTROLLED=no BRIDGE=cloudbr0 EOF \u7f51\u5361\u6865\u63a5\uff08\u540d\u5b57\u4e5f\u53ef\u4ee5\u81ea\u5b9a\u4e49\uff0c\u8981\u548c\u91cc\u8fb9\u914d\u7f6e\u5bf9\u5e94\u4e0a\uff09 cat <<EOF > /etc/sysconfig/network-scripts/ifcfg-cloudbr0 TYPE=Bridge BOOTPROTO=static DEVICE=cloudbr0 IPV6INIT=yes ONBOOT=yes IPADDR=192.168.10.3 NETMASK=255.255.255.0 GATEWAY=192.168.10.1 DNS1=223.5.5.5 DNS2=223.6.6.6 NM_CONTROLLED=no DELAY=0 EOF [root@panda lib]# cat /etc/sysconfig/network # Created by anaconda GATEWAY=192.168.10.1 2.7.5 \u521d\u59cb\u5316cloudstack-agent \u00b6 cloudstack-setup-agent #\u4e00\u8def\u56de\u8f66 [root@panda ~]# cloudstack-setup-agent Welcome to the CloudStack Agent Setup: Please input the Management Server Hostname/IP-Address:[192.168.10.3] Please input the Zone Id:[default] Please input the Pod Id:[default] Please input the Cluster Id:[default] Please input the Hypervisor type kvm/lxc:[kvm] Please choose which network used to create VM:[cloudbr0] Starting to configure your system: Configure SElinux ... [OK] Configure Network ... [OK] Configure Libvirt ... [OK] Configure Firewall ... [OK] Configure Nfs ... [OK] Configure cloudAgent ... [OK] CloudStack Agent setup is done! systemctl restart cloudstack-agent systemctl restart libvirtd 3 \u4e0b\u4e00\u6b65 \u00b6 \u67e5\u770b8080\u7aef\u53e3\u662f\u5426\u542f\u52a8 netstat -tunlp|grep 8080 \u6253\u5f00\u6d4f\u89c8\u5668\uff0c\u8fdb\u884c\u4e0b\u4e00\u6b65\u914d\u7f6e http://192.168.10.3:8080/client/ \u8d26\u53f7admin \u5bc6\u7801password Reference \u00b6 http://www.jackfan.top/posts/47209/","title":"Install CloudStack 4.11.1.0 on CentOS 7.5"},{"location":"OPENSOURCE/2018-12-15-install-cloudstack-4-11-1-0-centos-7-5.html/#1-preparation","text":"","title":"1 Preparation"},{"location":"OPENSOURCE/2018-12-15-install-cloudstack-4-11-1-0-centos-7-5.html/#11-selinux","text":"sed -i s#'SELINUX=enforcing'#'SELINUX=permissive'#g /etc/selinux/config setenforce 0","title":"1.1 \u8bbe\u7f6eselinux"},{"location":"OPENSOURCE/2018-12-15-install-cloudstack-4-11-1-0-centos-7-5.html/#12-ntp","text":"yum -y install ntp systemctl enable ntpd","title":"1.2 \u5b89\u88c5NTP\uff08\u65f6\u95f4\u540c\u6b65\uff09"},{"location":"OPENSOURCE/2018-12-15-install-cloudstack-4-11-1-0-centos-7-5.html/#13-cloudstackrepo","text":"cat <<EOF > /etc/yum.repos.d/cloudstack.repo [cloudstack] name=cloudstack baseurl=http://cloudstack.apt-get.eu/centos/7/4.11/ enabled=1 gpgcheck=0 EOF","title":"1.3 \u5b89\u88c5cloudstack.repo"},{"location":"OPENSOURCE/2018-12-15-install-cloudstack-4-11-1-0-centos-7-5.html/#14","text":"firewall-cmd --permanent --add-port=111/tcp firewall-cmd --permanent --add-port=111/udp firewall-cmd --permanent --add-port=2049/tcp firewall-cmd --permanent --add-port=32803/tcp firewall-cmd --permanent --add-port=32769/udp firewall-cmd --permanent --add-port=892/tcp firewall-cmd --permanent --add-port=892/udp firewall-cmd --permanent --add-port=875/tcp firewall-cmd --permanent --add-port=875/udp firewall-cmd --permanent --add-port=662/tcp firewall-cmd --permanent --add-port=662/udp firewall-cmd --permanent --add-port=8080/tcp firewall-cmd --reload firewall-cmd --list-all","title":"1.4 \u8bbe\u7f6e\u9632\u706b\u5899"},{"location":"OPENSOURCE/2018-12-15-install-cloudstack-4-11-1-0-centos-7-5.html/#2-installation","text":"","title":"2 Installation"},{"location":"OPENSOURCE/2018-12-15-install-cloudstack-4-11-1-0-centos-7-5.html/#21-cloudstack-management","text":"yum -y install cloudstack-management","title":"2.1 \u5b89\u88c5cloudstack-management"},{"location":"OPENSOURCE/2018-12-15-install-cloudstack-4-11-1-0-centos-7-5.html/#22-mariadb","text":"","title":"2.2 \u5b89\u88c5MariaDB"},{"location":"OPENSOURCE/2018-12-15-install-cloudstack-4-11-1-0-centos-7-5.html/#221-install-config-mariadb","text":"yum install mariadb mariadb-server vi /etc/my.cnf [mysqld] innodb_rollback_on_timeout=1 innodb_lock_wait_timeout=600 max_connections=350 log-bin=mysql-bin binlog-format = 'ROW'","title":"2.2.1 Install &amp; config mariadb"},{"location":"OPENSOURCE/2018-12-15-install-cloudstack-4-11-1-0-centos-7-5.html/#222-data","text":"[root@panda lib]# mkdir -p /data/lib/mysql [root@panda lib]# chown mysql:mysql /data/lib/mysql/ [root@panda lib]# rmdir /var/lib/mysql/ [root@panda lib]# cd /var/lib && ln -s /data/lib/mysql/ .","title":"2.2.2 \u521b\u5efadata\u76ee\u5f55"},{"location":"OPENSOURCE/2018-12-15-install-cloudstack-4-11-1-0-centos-7-5.html/#223","text":"systemctl start mariadb #\u542f\u52a8\u6570\u636e\u5e93 systemctl enable mariadb #\u5f00\u673a\u81ea\u542f\u52a8","title":"2.2.3 \u542f\u52a8\u6570\u636e\u5e93\u5e76\u8bbe\u7f6e\u4e3a\u5f00\u673a\u542f\u52a8"},{"location":"OPENSOURCE/2018-12-15-install-cloudstack-4-11-1-0-centos-7-5.html/#224","text":"mysql_secure_installation #\u8bbe\u7f6e\u5bc6\u7801\u7136\u540e\u4e00\u8defyyyy \uff08yes\uff09","title":"2.2.4 \u521d\u59cb\u5316\u6570\u636e\u5e93"},{"location":"OPENSOURCE/2018-12-15-install-cloudstack-4-11-1-0-centos-7-5.html/#23-cloudstack-setup-databasescloudstack","text":"cloudstack-setup-databases cloud:cloud@localhost --deploy-as=root:123456 -i 192.168.10.3 ## 192.168.10.3\u662f\u5f53\u524d\u7cfb\u7edf\u7684\u672c\u5730ip # \u91cd\u7f6e\u6570\u636e\u5e93\u5bc6\u7801123456","title":"2.3 \u4f7f\u7528cloudstack-setup-databases\u521d\u59cb\u5316CloudStack\u6570\u636e\u5e93"},{"location":"OPENSOURCE/2018-12-15-install-cloudstack-4-11-1-0-centos-7-5.html/#24-management","text":"cloudstack-setup-management # The --tomcat7 option is deprecated, CloudStack now uses embedded Jetty server. \u542f\u52a8cloudstack systemctl start cloudstack-management","title":"2.4 \u5b89\u88c5management\u670d\u52a1\u5668"},{"location":"OPENSOURCE/2018-12-15-install-cloudstack-4-11-1-0-centos-7-5.html/#25-nfs","text":"yum -y install nfs-utils rpcbind","title":"2.5 \u5b89\u88c5\u4e0e\u914d\u7f6eNFS\u5b58\u50a8"},{"location":"OPENSOURCE/2018-12-15-install-cloudstack-4-11-1-0-centos-7-5.html/#251","text":"vi /etc/idmapd.conf Domain = echoyun.edu","title":"2.5.1 \u914d\u7f6e\u57df\u540d"},{"location":"OPENSOURCE/2018-12-15-install-cloudstack-4-11-1-0-centos-7-5.html/#252-nfs","text":"mkdir -p /data/cloudstack/{primary,secondary}","title":"2.5.2 \u51c6\u5907NFS\u76ee\u5f55"},{"location":"OPENSOURCE/2018-12-15-install-cloudstack-4-11-1-0-centos-7-5.html/#253-nfs","text":"# vim /etc/sysconfig/nfs MOUNTD_PORT=892 STATD_PORT=662 STATD_OUTGOING_PORT=2020 # vim /etc/modprobe.d/lockd.conf options lockd nlm_tcpport=32803 options lockd nlm_udpport=32769","title":"2.5.3 \u4fee\u6539NFS\u670d\u52a1\u53c2\u6570"},{"location":"OPENSOURCE/2018-12-15-install-cloudstack-4-11-1-0-centos-7-5.html/#254-exports","text":"vim /etc/exports /data/cloudstack/primary *(rw,async,no_root_squash,no_subtree_check) /data/cloudstack/secondary *(rw,async,no_root_squash,no_subtree_check)","title":"2.5.4 \u914d\u7f6eexports"},{"location":"OPENSOURCE/2018-12-15-install-cloudstack-4-11-1-0-centos-7-5.html/#255-nfs","text":"vim /etc/nfsmount.conf Nfsvers=4","title":"2.5.5 \u8bbe\u7f6enfs\u6302\u8f7d"},{"location":"OPENSOURCE/2018-12-15-install-cloudstack-4-11-1-0-centos-7-5.html/#256-nfsrpcbind","text":"systemctl enable rpcbind systemctl enable nfs-server systemctl start rpcbind systemctl start nfs-server","title":"2.5.6 \u542f\u52a8nfs\u548crpcbind"},{"location":"OPENSOURCE/2018-12-15-install-cloudstack-4-11-1-0-centos-7-5.html/#257","text":"mount -t nfs 192.168.10.3:/data/cloudstack/primary /mnt df -h #\u67e5\u770b\u6709\u4e86\u4ee3\u8868\u6210\u529f umount /mnt","title":"2.5.7 \u6d4b\u8bd5\u6302\u8f7d"},{"location":"OPENSOURCE/2018-12-15-install-cloudstack-4-11-1-0-centos-7-5.html/#26-vm","text":"/usr/share/cloudstack-common/scripts/storage/secondary/cloud-install-sys-tmplt -m /data/cloudstack/secondary -u http://cloudstack.apt-get.eu/systemvm/4.11/systemvmtemplate-4.11.1-kvm.qcow2.bz2 -h kvm -F","title":"2.6 \u4e0b\u8f7d\u7cfb\u7edfVM\u6a21\u677f"},{"location":"OPENSOURCE/2018-12-15-install-cloudstack-4-11-1-0-centos-7-5.html/#27-agentcloudstack","text":"\u5982\u679c\u90e8\u7f72\u96c6\u7fa4\uff0c\u5907\u673a\u53ea\u9700\u8981\u76f4\u63a5\u90e8\u7f72agent. yum -y install cloudstack-agent","title":"2.7 \u5b89\u88c5agent\uff08cloudstack\u4e3b\u673a\uff09"},{"location":"OPENSOURCE/2018-12-15-install-cloudstack-4-11-1-0-centos-7-5.html/#271","text":"# vi /etc/libvirt/qemu.conf \u5e76\u53d6\u6d88\u5982\u4e0b\u884c\u7684\u6ce8\u91ca vnc_listen=0.0.0.0","title":"2.7.1 \u914d\u7f6e\u6587\u4ef6\u4fee\u6539"},{"location":"OPENSOURCE/2018-12-15-install-cloudstack-4-11-1-0-centos-7-5.html/#272-kvm","text":"# vi /etc/libvirt/libvirtd.conf listen_tls = 0 listen_tcp = 1 tcp_port = \"16059\" auth_tcp = \"none\" mdns_adv = 0 # vi /etc/sysconfig/libvirtd LIBVIRTD_ARGS=\"--listen\" systemctl restart libvirtd systemctl enable libvirtd","title":"2.7.2 \u914d\u7f6eKVM"},{"location":"OPENSOURCE/2018-12-15-install-cloudstack-4-11-1-0-centos-7-5.html/#273-agent","text":"vi /etc/cloudstack/agent/agent.properties host=192.168.10.3","title":"2.7.3 \u914d\u7f6eagent"},{"location":"OPENSOURCE/2018-12-15-install-cloudstack-4-11-1-0-centos-7-5.html/#274","text":"\u7f16\u8f91\u7b2c\u4e00\u5757\u7f51\u5361(em1) cat <<EOF > /etc/sysconfig/network-scripts/ifcfg-em1 DEVICE=em1 TYPE=Ethernet HWADDR=8c:ec:4b:9a:9d:11 BOOTPROTO=none ONBOOT=yes NM_CONTROLLED=no BRIDGE=cloudbr0 EOF \u7f51\u5361\u6865\u63a5\uff08\u540d\u5b57\u4e5f\u53ef\u4ee5\u81ea\u5b9a\u4e49\uff0c\u8981\u548c\u91cc\u8fb9\u914d\u7f6e\u5bf9\u5e94\u4e0a\uff09 cat <<EOF > /etc/sysconfig/network-scripts/ifcfg-cloudbr0 TYPE=Bridge BOOTPROTO=static DEVICE=cloudbr0 IPV6INIT=yes ONBOOT=yes IPADDR=192.168.10.3 NETMASK=255.255.255.0 GATEWAY=192.168.10.1 DNS1=223.5.5.5 DNS2=223.6.6.6 NM_CONTROLLED=no DELAY=0 EOF [root@panda lib]# cat /etc/sysconfig/network # Created by anaconda GATEWAY=192.168.10.1","title":"2.7.4 \u914d\u7f6e\u7f51\u5361\uff08\u505a\u6865\u63a5\uff09"},{"location":"OPENSOURCE/2018-12-15-install-cloudstack-4-11-1-0-centos-7-5.html/#275-cloudstack-agent","text":"cloudstack-setup-agent #\u4e00\u8def\u56de\u8f66 [root@panda ~]# cloudstack-setup-agent Welcome to the CloudStack Agent Setup: Please input the Management Server Hostname/IP-Address:[192.168.10.3] Please input the Zone Id:[default] Please input the Pod Id:[default] Please input the Cluster Id:[default] Please input the Hypervisor type kvm/lxc:[kvm] Please choose which network used to create VM:[cloudbr0] Starting to configure your system: Configure SElinux ... [OK] Configure Network ... [OK] Configure Libvirt ... [OK] Configure Firewall ... [OK] Configure Nfs ... [OK] Configure cloudAgent ... [OK] CloudStack Agent setup is done! systemctl restart cloudstack-agent systemctl restart libvirtd","title":"2.7.5 \u521d\u59cb\u5316cloudstack-agent"},{"location":"OPENSOURCE/2018-12-15-install-cloudstack-4-11-1-0-centos-7-5.html/#3","text":"\u67e5\u770b8080\u7aef\u53e3\u662f\u5426\u542f\u52a8 netstat -tunlp|grep 8080 \u6253\u5f00\u6d4f\u89c8\u5668\uff0c\u8fdb\u884c\u4e0b\u4e00\u6b65\u914d\u7f6e http://192.168.10.3:8080/client/ \u8d26\u53f7admin \u5bc6\u7801password","title":"3 \u4e0b\u4e00\u6b65"},{"location":"OPENSOURCE/2018-12-15-install-cloudstack-4-11-1-0-centos-7-5.html/#reference","text":"http://www.jackfan.top/posts/47209/","title":"Reference"},{"location":"OPENSOURCE/2019-10-16-install-mariadb-10-4-apache2httpd-2-4-php-7-3-on-centos-7-6.html/","tags":["MariaDB","apache2","httpd","PHP"],"text":"1. \u51c6\u5907 \u00b6 cat /etc/redhat-release # CentOS Linux release 7.6.1810 (Core) 2. \u5b89\u88c5Mariadb 10.4 \u00b6 cat | sudo tee /etc/yum.repos.d/mariadb.repo <<EOF [mariadb] name = MariaDB baseurl = https://yum.mariadb.org/10.4/rhel7-amd64 gpgkey=https://yum.mariadb.org/RPM-GPG-KEY-MariaDB gpgcheck=1 EOF sudo yum install MariaDB-server MariaDB-client sudo systemctl start mariadb sudo systemctl enable mariadb #\u8868\u540d\u5927\u5c0f\u5199\u4e0d\u654f\u611f sudo sed -i 's/\\[mysqld\\]/[mysqld]\\nlower_case_table_names=1/' /etc/my.cnf sudo mysql_secure_installation Create database . Let's take wordpress as an example: $ mysql - u root - p MariaDB [( none )] > CREATE DATABASE ` wordpress ` DEFAULT CHARACTER SET utf8 COLLATE utf8_bin ; MariaDB [( none )] > grant all on wordpress . * to wp @ 'localhost' identified by 'changeMe' ; 3. \u5b89\u88c5Apache2 \u00b6 sudo yum install httpd sudo systemctl enable httpd sudo systemctl start httpd sudo firewall-cmd --permanent --add-port = 80 /tcp sudo firewall-cmd --permanent --add-port = 443 /tcp sudo firewall-cmd --reload sudo firewall-cmd --list-all sudo chown -R apache:apache /var/www/html # ls -Z /var/www/html/ sudo chcon -R -t httpd_sys_rw_content_t /var/www/html/ # For reverse proxy sudo setsebool -P httpd_can_network_connect on 4. \u5b89\u88c5php 7.3 \u00b6 4.1 \u5b89\u88c5php \u00b6 sudo yum remove php* sudo yum -y install https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm sudo yum -y install http://rpms.remirepo.net/enterprise/remi-release-7.rpm sudo yum -y install yum-utils sudo yum-config-manager --enable remi-php73 sudo yum --enablerepo remi,epel install php php-mysql php-gd php-imagick php-bcmath php -v 4.2 httpd \u652f\u6301 php \u00b6 sudo vi /etc/httpd/conf/httpd.conf ...... ServerName your_domain:80 ...... <Directory /> AllowOverride none #Require all denied Require all granted </Directory> ...... <IfModule dir_module> DirectoryIndex index.html index.php </IfModule> AddType application/x-httpd-php .php ....... <Directory /var/www/html> ...... AllowOverride All ....... \u68c0\u67e5httpd.conf\u8bed\u6cd5 & \u91cd\u65b0\u52a0\u8f7d apachectl -t && sudo apachectl graceful 4.3 \u6d4b\u8bd5\u9875\u9762 \u00b6 echo -e '<?php\\necho \"Hello, PHP.\"\\n?>' | sudo tee /var/www/html/1.php Reference \u00b6 https://tecadmin.net/install-mariadb-10-centos-redhat/ centos\u5b89\u88c5php https://my.oschina.net/codercpf/blog/1825069 httpd\u652f\u6301php https://blog.51cto.com/shuzonglu/2074448 selinux contexts https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/selinux_users_and_administrators_guide/sect-security-enhanced_linux-working_with_selinux-selinux_contexts_labeling_files","title":"Install MariaDB 10.4 + Apache2(httpd) 2.4 + PHP 7.3 on CentOS 7.6"},{"location":"OPENSOURCE/2019-10-16-install-mariadb-10-4-apache2httpd-2-4-php-7-3-on-centos-7-6.html/#1","text":"cat /etc/redhat-release # CentOS Linux release 7.6.1810 (Core)","title":"1. \u51c6\u5907"},{"location":"OPENSOURCE/2019-10-16-install-mariadb-10-4-apache2httpd-2-4-php-7-3-on-centos-7-6.html/#2-mariadb-104","text":"cat | sudo tee /etc/yum.repos.d/mariadb.repo <<EOF [mariadb] name = MariaDB baseurl = https://yum.mariadb.org/10.4/rhel7-amd64 gpgkey=https://yum.mariadb.org/RPM-GPG-KEY-MariaDB gpgcheck=1 EOF sudo yum install MariaDB-server MariaDB-client sudo systemctl start mariadb sudo systemctl enable mariadb #\u8868\u540d\u5927\u5c0f\u5199\u4e0d\u654f\u611f sudo sed -i 's/\\[mysqld\\]/[mysqld]\\nlower_case_table_names=1/' /etc/my.cnf sudo mysql_secure_installation Create database . Let's take wordpress as an example: $ mysql - u root - p MariaDB [( none )] > CREATE DATABASE ` wordpress ` DEFAULT CHARACTER SET utf8 COLLATE utf8_bin ; MariaDB [( none )] > grant all on wordpress . * to wp @ 'localhost' identified by 'changeMe' ;","title":"2. \u5b89\u88c5Mariadb 10.4"},{"location":"OPENSOURCE/2019-10-16-install-mariadb-10-4-apache2httpd-2-4-php-7-3-on-centos-7-6.html/#3-apache2","text":"sudo yum install httpd sudo systemctl enable httpd sudo systemctl start httpd sudo firewall-cmd --permanent --add-port = 80 /tcp sudo firewall-cmd --permanent --add-port = 443 /tcp sudo firewall-cmd --reload sudo firewall-cmd --list-all sudo chown -R apache:apache /var/www/html # ls -Z /var/www/html/ sudo chcon -R -t httpd_sys_rw_content_t /var/www/html/ # For reverse proxy sudo setsebool -P httpd_can_network_connect on","title":"3. \u5b89\u88c5Apache2"},{"location":"OPENSOURCE/2019-10-16-install-mariadb-10-4-apache2httpd-2-4-php-7-3-on-centos-7-6.html/#4-php-73","text":"","title":"4. \u5b89\u88c5php 7.3"},{"location":"OPENSOURCE/2019-10-16-install-mariadb-10-4-apache2httpd-2-4-php-7-3-on-centos-7-6.html/#41-php","text":"sudo yum remove php* sudo yum -y install https://dl.fedoraproject.org/pub/epel/epel-release-latest-7.noarch.rpm sudo yum -y install http://rpms.remirepo.net/enterprise/remi-release-7.rpm sudo yum -y install yum-utils sudo yum-config-manager --enable remi-php73 sudo yum --enablerepo remi,epel install php php-mysql php-gd php-imagick php-bcmath php -v","title":"4.1 \u5b89\u88c5php"},{"location":"OPENSOURCE/2019-10-16-install-mariadb-10-4-apache2httpd-2-4-php-7-3-on-centos-7-6.html/#42-httpd-php","text":"sudo vi /etc/httpd/conf/httpd.conf ...... ServerName your_domain:80 ...... <Directory /> AllowOverride none #Require all denied Require all granted </Directory> ...... <IfModule dir_module> DirectoryIndex index.html index.php </IfModule> AddType application/x-httpd-php .php ....... <Directory /var/www/html> ...... AllowOverride All ....... \u68c0\u67e5httpd.conf\u8bed\u6cd5 & \u91cd\u65b0\u52a0\u8f7d apachectl -t && sudo apachectl graceful","title":"4.2 httpd \u652f\u6301 php"},{"location":"OPENSOURCE/2019-10-16-install-mariadb-10-4-apache2httpd-2-4-php-7-3-on-centos-7-6.html/#43","text":"echo -e '<?php\\necho \"Hello, PHP.\"\\n?>' | sudo tee /var/www/html/1.php","title":"4.3 \u6d4b\u8bd5\u9875\u9762"},{"location":"OPENSOURCE/2019-10-16-install-mariadb-10-4-apache2httpd-2-4-php-7-3-on-centos-7-6.html/#reference","text":"https://tecadmin.net/install-mariadb-10-centos-redhat/ centos\u5b89\u88c5php https://my.oschina.net/codercpf/blog/1825069 httpd\u652f\u6301php https://blog.51cto.com/shuzonglu/2074448 selinux contexts https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/7/html/selinux_users_and_administrators_guide/sect-security-enhanced_linux-working_with_selinux-selinux_contexts_labeling_files","title":"Reference"},{"location":"OPENSOURCE/2021-08-24-install-haproxy-1.8-keepalived-on-centos7/","tags":["Haproxy","Keepalived","centos"],"text":"1. Preparation \u00b6 1.1 KVMs \u00b6 2 KVMs Hostname vCPUs Memory Swap IP OS sudoer slb01 .k8s 2 2G 0 192.168.10.201 CentOS 7 echo slb02 .k8s 2 2G 0 192.168.10.202 CentOS 7 echo cluster .k8s - - - 192.168.10.200 - - NOTE: 192.168.10.200 is a virtual (HA) IP which points to slb01 or slb02. 1.2 Install Ansible on Host machine \u00b6 # Install ansible on host machine sudo yum install ansible 1.3 Password free Configuration \u00b6 cat <<EOF | sudo tee -a /etc/ansible/hosts [slb] slb01.k8s slb02.k8s EOF # Have a test ansible slb --ask-pass -u echo -m shell -a 'echo ok' # Password free for login ansible slb --ask-pass -u echo -m file -a \"path=.ssh state=directory mode=700\" ansible slb --ask-pass -u echo -m copy -a \"src=~/.ssh/id_rsa.pub dest=.ssh/authorized_keys mode=600\" # Password free for sudo ansible slb --ask-pass -u echo -b -m shell -a \"echo 'echo ALL=(ALL) NOPASSWD: ALL' >> /etc/sudoers\" # Now we can have a test as below ansible slb -u echo -m shell -a 'echo ok' 1.4 DNS via hosts file \u00b6 cat <<EOF > /tmp/add-hosts.sh cat <<EEE >> /etc/hosts 192.168.10.201 slb01.k8s 192.168.10.202 slb02.k8s # A virtual IP which points slb01 or slb02 192.168.10.200 cluster.k8s EEE EOF ansible k8s -u echo -b -m script -a \"/tmp/add-hosts.sh\" 2. Basic Configurations for servers \u00b6 2.1 Required ports (Firewall Configuration) \u00b6 ansible slb -u echo -b -m shell -a \"firewall-cmd --permanent --add-port=80/tcp --add-port=443/tcp --add-port=8081/tcp\" ansible slb -u echo -b -m shell -a \"firewall-cmd --reload\" 2.2 Set SELinux in permissive mode (effectively disabling it) \u00b6 cat <<EOF > /tmp/set-selinux.sh sudo setenforce 0 sudo sed -i 's/^SELINUX=enforcing$/SELINUX=permissive/' /etc/selinux/config EOF ansible slb -u echo -b -m script -a '/tmp/set-selinux.sh' 3. Install HAProxy + Keepalived on SLB servers \u00b6 3.1 Install HAProxy \u00b6 cat <<EOF > /tmp/install-haproxy.sh sudo yum install centos-release-scl -y sudo yum install rh-haproxy18 -y sudo scl enable rh-haproxy18 bash -y sudo systemctl enable rh-haproxy18-haproxy sudo systemctl start rh-haproxy18-haproxy EOF ansible slb -u echo -b -m script -a \"/tmp/install-haproxy.sh\" 3.2 Install Keepalived \u00b6 ansible slb -u echo -b -m shell -a \"yum install -y keepalived\" 4. Configuraton Example \u00b6 4.1 Self-signed Cert \u00b6 # e.g. openssl req -newkey rsa:2048 -nodes -sha256 -keyout example.key \\ -x509 -days 3650 -out example.crt \\ -subj \"/CN=example.com\" cat example.crt example.key > example.pem 4.2 Example of haproxy.cfg \u00b6 /etc/opt/rh/rh-haproxy18/haproxy/haproxy.cfg cat <<EOF > /tmp/haproxy.cfg #--------------------------------------------------------------------- # Example configuration for a possible web application. See the # full configuration options online. # # http://haproxy.1wt.eu/download/1.8/doc/configuration.txt # #--------------------------------------------------------------------- #--------------------------------------------------------------------- # Global settings #--------------------------------------------------------------------- global # to have these messages end up in /var/opt/rh/rh-haproxy18/log/haproxy.log you will # need to: # # 1) configure syslog to accept network log events. This is done # by adding the '-r' option to the SYSLOGD_OPTIONS in # /etc/sysconfig/syslog # # 2) configure local2 events to go to the /var/opt/rh/rh-haproxy18/log/haproxy.log # file. A line like the following can be added to # /etc/sysconfig/syslog # # local2.* /var/opt/rh/rh-haproxy18/log/haproxy.log # log 127.0.0.1 local2 chroot /var/opt/rh/rh-haproxy18/lib/haproxy pidfile /var/run/rh-haproxy18-haproxy.pid maxconn 4000 user haproxy group haproxy daemon # turn on stats unix socket stats socket /var/opt/rh/rh-haproxy18/lib/haproxy/stats # utilize system-wide crypto-policies #ssl-default-bind-ciphers PROFILE=SYSTEM #ssl-default-server-ciphers PROFILE=SYSTEM #--------------------------------------------------------------------- # common defaults that all the 'listen' and 'backend' sections will # use if not designated in their block #--------------------------------------------------------------------- defaults mode http log global #option httplog option dontlognull option http-server-close #option forwardfor except 127.0.0.0/8 option redispatch retries 3 timeout http-request 10s timeout queue 1m timeout connect 10s timeout client 1m timeout server 1m timeout http-keep-alive 10s timeout check 10s maxconn 3000 #--------------------------------------------------------------------- # main frontend which proxys to the backends #--------------------------------------------------------------------- frontend main #bind *:80 bind *:443 ssl crt /etc/ssl/certs/example.pem acl url_static path_beg -i /static /images /javascript /stylesheets acl url_static path_end -i .jpg .gif .png .css .js #use_backend static if url_static default_backend static #acl root_path path_reg ^/$ #--------------------------------------------------------------------- # static backend for serving up images, stylesheets and such #--------------------------------------------------------------------- backend static balance roundrobin server static 127.0.0.1:4331 check #--------------------------------------------------------------------- # round robin balancing between the various backends #--------------------------------------------------------------------- # listen k8sapi # bind *:6443 # mode tcp # balance roundrobin # option tcp-check # server master01 master01.k8s:6443 check # server master02 master02.k8s:6443 check # server master03 master03.k8s:6443 check #--------------------------------------------------------------------- # HAProxy Monitoring Config #--------------------------------------------------------------------- listen monitoring bind *:8081 #Haproxy Monitoring run on port 8081 mode http option forwardfor option httpclose stats enable stats show-legends stats refresh 5s stats uri /stats #URL for HAProxy monitoring #stats realm Haproxy Statistics stats auth howtoforge:howtoforge stats admin if TRUE EOF ansible slb -u echo -b -m copy -a \\ \"src=/tmp/haproxy.cfg dest=/etc/opt/rh/rh-haproxy18/haproxy/haproxy.cfg mode=600 owner=haproxy group=haproxy\" ansible slb -u echo -b -m copy -a \\ \"src=example.pem dest=/etc/ssl/certs/example.pem mode=600 owner=haproxy group=haproxy\" ansible slb -u echo -b -m shell -a \"systemctl restart rh-haproxy18-haproxy\" 4.3 Example of keepalived.conf \u00b6 /etc/keepalived/keepalived.conf cat <<EOF> /tmp/keepalived.conf global_defs { notification_email { admin@example.k8s } notification_email_from noreply1@example.k8s smtp_server localhost smtp_connect_timeout 30 } vrrp_script chk_haproxy { script \"pkill -0 haproxy\" # check the haproxy process interval 2 # every 2 seconds weight 2 # add 2 points if OK } vrrp_instance VI_1 { interface eth0 # interface to monitor state MASTER # MASTER on slb01, BACKUP on slb02 virtual_router_id 51 priority 100 # 100 on slb01, 99 on slb02 #IP Address of local machine. #NOTE: this is mandatory if multicast is forbidden in your network unicast_src_ip 192.168.122.201 unicast_peer { #IP Address of other machine(s). #NOTE1: this is mandatory if multicast is forbidden in your network. #NOTE2: multiple values can be issued here 192.168.122.202 } authentication { auth_type PASS auth_pass 1849 } virtual_ipaddress { 192.168.10.200/24 # virtual ip address } track_script { chk_haproxy } } EOF ansible slb -u echo -b -m copy -a \\ \"src=/tmp/keepalived.conf dest=/etc/keepalived/keepalived.conf mode=644\" Edit keepalived.conf on slb02.k8s # On slb02.k8s: # state BACKUP # priority 99 # unicast_src_ip 192.168.122.202 # unicast_peer { # 192.168.122.201 # } vi /etc/keepalived/keepalived.conf Enable & Restart keepalived ansible echoyun-slb -u echo -b -m shell -a \"systemctl enable keepalived\" ansible echoyun-slb -u echo -b -m shell -a \"systemctl restart keepalived\" 5. Access HAProxy stats page \u00b6 Now we can open HAProxy stats page in Browser # auth: howtoforge:howtoforge http://cluster.k8s:8081/stats/ Reference \u00b6 ansible/2.9/modules/list_of_commands_modules.html ansible/2.9/modules/copy_module.html lists.centos.org/pipermail/centos-announce/2018-June/022915.html thingsboard.io/docs/user-guide/install/pe/add-haproxy-rhel howtoforge.com/tutorial/how-to-setup-haproxy-as-load-balancer-for-nginx-on-centos-7 red_hat_enterprise_linux/7/html/load_balancer_administration/keepalived_install_example1 red_hat_enterprise_linux/7/html/load_balancer_administration/ch-initial-setup-VSA KeepAlived configuration for automatic switch of virtual IP","title":"Install Haproxy v1.8 and Keepalived on CentOS 7"},{"location":"OPENSOURCE/2021-08-24-install-haproxy-1.8-keepalived-on-centos7/#1-preparation","text":"","title":"1. Preparation"},{"location":"OPENSOURCE/2021-08-24-install-haproxy-1.8-keepalived-on-centos7/#11-kvms","text":"2 KVMs Hostname vCPUs Memory Swap IP OS sudoer slb01 .k8s 2 2G 0 192.168.10.201 CentOS 7 echo slb02 .k8s 2 2G 0 192.168.10.202 CentOS 7 echo cluster .k8s - - - 192.168.10.200 - - NOTE: 192.168.10.200 is a virtual (HA) IP which points to slb01 or slb02.","title":"1.1 KVMs"},{"location":"OPENSOURCE/2021-08-24-install-haproxy-1.8-keepalived-on-centos7/#12-install-ansible-on-host-machine","text":"# Install ansible on host machine sudo yum install ansible","title":"1.2 Install Ansible on Host machine"},{"location":"OPENSOURCE/2021-08-24-install-haproxy-1.8-keepalived-on-centos7/#13-password-free-configuration","text":"cat <<EOF | sudo tee -a /etc/ansible/hosts [slb] slb01.k8s slb02.k8s EOF # Have a test ansible slb --ask-pass -u echo -m shell -a 'echo ok' # Password free for login ansible slb --ask-pass -u echo -m file -a \"path=.ssh state=directory mode=700\" ansible slb --ask-pass -u echo -m copy -a \"src=~/.ssh/id_rsa.pub dest=.ssh/authorized_keys mode=600\" # Password free for sudo ansible slb --ask-pass -u echo -b -m shell -a \"echo 'echo ALL=(ALL) NOPASSWD: ALL' >> /etc/sudoers\" # Now we can have a test as below ansible slb -u echo -m shell -a 'echo ok'","title":"1.3 Password free Configuration"},{"location":"OPENSOURCE/2021-08-24-install-haproxy-1.8-keepalived-on-centos7/#14-dns-via-hosts-file","text":"cat <<EOF > /tmp/add-hosts.sh cat <<EEE >> /etc/hosts 192.168.10.201 slb01.k8s 192.168.10.202 slb02.k8s # A virtual IP which points slb01 or slb02 192.168.10.200 cluster.k8s EEE EOF ansible k8s -u echo -b -m script -a \"/tmp/add-hosts.sh\"","title":"1.4 DNS via hosts file"},{"location":"OPENSOURCE/2021-08-24-install-haproxy-1.8-keepalived-on-centos7/#2-basic-configurations-for-servers","text":"","title":"2. Basic Configurations for servers"},{"location":"OPENSOURCE/2021-08-24-install-haproxy-1.8-keepalived-on-centos7/#21-required-ports-firewall-configuration","text":"ansible slb -u echo -b -m shell -a \"firewall-cmd --permanent --add-port=80/tcp --add-port=443/tcp --add-port=8081/tcp\" ansible slb -u echo -b -m shell -a \"firewall-cmd --reload\"","title":"2.1 Required ports (Firewall Configuration)"},{"location":"OPENSOURCE/2021-08-24-install-haproxy-1.8-keepalived-on-centos7/#22-set-selinux-in-permissive-mode-effectively-disabling-it","text":"cat <<EOF > /tmp/set-selinux.sh sudo setenforce 0 sudo sed -i 's/^SELINUX=enforcing$/SELINUX=permissive/' /etc/selinux/config EOF ansible slb -u echo -b -m script -a '/tmp/set-selinux.sh'","title":"2.2 Set SELinux in permissive mode (effectively disabling it)"},{"location":"OPENSOURCE/2021-08-24-install-haproxy-1.8-keepalived-on-centos7/#3-install-haproxy-keepalived-on-slb-servers","text":"","title":"3. Install HAProxy + Keepalived on SLB servers"},{"location":"OPENSOURCE/2021-08-24-install-haproxy-1.8-keepalived-on-centos7/#31-install-haproxy","text":"cat <<EOF > /tmp/install-haproxy.sh sudo yum install centos-release-scl -y sudo yum install rh-haproxy18 -y sudo scl enable rh-haproxy18 bash -y sudo systemctl enable rh-haproxy18-haproxy sudo systemctl start rh-haproxy18-haproxy EOF ansible slb -u echo -b -m script -a \"/tmp/install-haproxy.sh\"","title":"3.1 Install HAProxy"},{"location":"OPENSOURCE/2021-08-24-install-haproxy-1.8-keepalived-on-centos7/#32-install-keepalived","text":"ansible slb -u echo -b -m shell -a \"yum install -y keepalived\"","title":"3.2 Install Keepalived"},{"location":"OPENSOURCE/2021-08-24-install-haproxy-1.8-keepalived-on-centos7/#4-configuraton-example","text":"","title":"4. Configuraton Example"},{"location":"OPENSOURCE/2021-08-24-install-haproxy-1.8-keepalived-on-centos7/#41-self-signed-cert","text":"# e.g. openssl req -newkey rsa:2048 -nodes -sha256 -keyout example.key \\ -x509 -days 3650 -out example.crt \\ -subj \"/CN=example.com\" cat example.crt example.key > example.pem","title":"4.1 Self-signed Cert"},{"location":"OPENSOURCE/2021-08-24-install-haproxy-1.8-keepalived-on-centos7/#42-example-of-haproxycfg","text":"/etc/opt/rh/rh-haproxy18/haproxy/haproxy.cfg cat <<EOF > /tmp/haproxy.cfg #--------------------------------------------------------------------- # Example configuration for a possible web application. See the # full configuration options online. # # http://haproxy.1wt.eu/download/1.8/doc/configuration.txt # #--------------------------------------------------------------------- #--------------------------------------------------------------------- # Global settings #--------------------------------------------------------------------- global # to have these messages end up in /var/opt/rh/rh-haproxy18/log/haproxy.log you will # need to: # # 1) configure syslog to accept network log events. This is done # by adding the '-r' option to the SYSLOGD_OPTIONS in # /etc/sysconfig/syslog # # 2) configure local2 events to go to the /var/opt/rh/rh-haproxy18/log/haproxy.log # file. A line like the following can be added to # /etc/sysconfig/syslog # # local2.* /var/opt/rh/rh-haproxy18/log/haproxy.log # log 127.0.0.1 local2 chroot /var/opt/rh/rh-haproxy18/lib/haproxy pidfile /var/run/rh-haproxy18-haproxy.pid maxconn 4000 user haproxy group haproxy daemon # turn on stats unix socket stats socket /var/opt/rh/rh-haproxy18/lib/haproxy/stats # utilize system-wide crypto-policies #ssl-default-bind-ciphers PROFILE=SYSTEM #ssl-default-server-ciphers PROFILE=SYSTEM #--------------------------------------------------------------------- # common defaults that all the 'listen' and 'backend' sections will # use if not designated in their block #--------------------------------------------------------------------- defaults mode http log global #option httplog option dontlognull option http-server-close #option forwardfor except 127.0.0.0/8 option redispatch retries 3 timeout http-request 10s timeout queue 1m timeout connect 10s timeout client 1m timeout server 1m timeout http-keep-alive 10s timeout check 10s maxconn 3000 #--------------------------------------------------------------------- # main frontend which proxys to the backends #--------------------------------------------------------------------- frontend main #bind *:80 bind *:443 ssl crt /etc/ssl/certs/example.pem acl url_static path_beg -i /static /images /javascript /stylesheets acl url_static path_end -i .jpg .gif .png .css .js #use_backend static if url_static default_backend static #acl root_path path_reg ^/$ #--------------------------------------------------------------------- # static backend for serving up images, stylesheets and such #--------------------------------------------------------------------- backend static balance roundrobin server static 127.0.0.1:4331 check #--------------------------------------------------------------------- # round robin balancing between the various backends #--------------------------------------------------------------------- # listen k8sapi # bind *:6443 # mode tcp # balance roundrobin # option tcp-check # server master01 master01.k8s:6443 check # server master02 master02.k8s:6443 check # server master03 master03.k8s:6443 check #--------------------------------------------------------------------- # HAProxy Monitoring Config #--------------------------------------------------------------------- listen monitoring bind *:8081 #Haproxy Monitoring run on port 8081 mode http option forwardfor option httpclose stats enable stats show-legends stats refresh 5s stats uri /stats #URL for HAProxy monitoring #stats realm Haproxy Statistics stats auth howtoforge:howtoforge stats admin if TRUE EOF ansible slb -u echo -b -m copy -a \\ \"src=/tmp/haproxy.cfg dest=/etc/opt/rh/rh-haproxy18/haproxy/haproxy.cfg mode=600 owner=haproxy group=haproxy\" ansible slb -u echo -b -m copy -a \\ \"src=example.pem dest=/etc/ssl/certs/example.pem mode=600 owner=haproxy group=haproxy\" ansible slb -u echo -b -m shell -a \"systemctl restart rh-haproxy18-haproxy\"","title":"4.2 Example of haproxy.cfg"},{"location":"OPENSOURCE/2021-08-24-install-haproxy-1.8-keepalived-on-centos7/#43-example-of-keepalivedconf","text":"/etc/keepalived/keepalived.conf cat <<EOF> /tmp/keepalived.conf global_defs { notification_email { admin@example.k8s } notification_email_from noreply1@example.k8s smtp_server localhost smtp_connect_timeout 30 } vrrp_script chk_haproxy { script \"pkill -0 haproxy\" # check the haproxy process interval 2 # every 2 seconds weight 2 # add 2 points if OK } vrrp_instance VI_1 { interface eth0 # interface to monitor state MASTER # MASTER on slb01, BACKUP on slb02 virtual_router_id 51 priority 100 # 100 on slb01, 99 on slb02 #IP Address of local machine. #NOTE: this is mandatory if multicast is forbidden in your network unicast_src_ip 192.168.122.201 unicast_peer { #IP Address of other machine(s). #NOTE1: this is mandatory if multicast is forbidden in your network. #NOTE2: multiple values can be issued here 192.168.122.202 } authentication { auth_type PASS auth_pass 1849 } virtual_ipaddress { 192.168.10.200/24 # virtual ip address } track_script { chk_haproxy } } EOF ansible slb -u echo -b -m copy -a \\ \"src=/tmp/keepalived.conf dest=/etc/keepalived/keepalived.conf mode=644\" Edit keepalived.conf on slb02.k8s # On slb02.k8s: # state BACKUP # priority 99 # unicast_src_ip 192.168.122.202 # unicast_peer { # 192.168.122.201 # } vi /etc/keepalived/keepalived.conf Enable & Restart keepalived ansible echoyun-slb -u echo -b -m shell -a \"systemctl enable keepalived\" ansible echoyun-slb -u echo -b -m shell -a \"systemctl restart keepalived\"","title":"4.3 Example of keepalived.conf"},{"location":"OPENSOURCE/2021-08-24-install-haproxy-1.8-keepalived-on-centos7/#5-access-haproxy-stats-page","text":"Now we can open HAProxy stats page in Browser # auth: howtoforge:howtoforge http://cluster.k8s:8081/stats/","title":"5. Access HAProxy stats page"},{"location":"OPENSOURCE/2021-08-24-install-haproxy-1.8-keepalived-on-centos7/#reference","text":"ansible/2.9/modules/list_of_commands_modules.html ansible/2.9/modules/copy_module.html lists.centos.org/pipermail/centos-announce/2018-June/022915.html thingsboard.io/docs/user-guide/install/pe/add-haproxy-rhel howtoforge.com/tutorial/how-to-setup-haproxy-as-load-balancer-for-nginx-on-centos-7 red_hat_enterprise_linux/7/html/load_balancer_administration/keepalived_install_example1 red_hat_enterprise_linux/7/html/load_balancer_administration/ch-initial-setup-VSA KeepAlived configuration for automatic switch of virtual IP","title":"Reference"},{"location":"OPENSOURCE/2021-08-26-install-k8s-1.22-ha-clusters-on-centos7/","tags":["k8s","kubernetes","centos","cloudnative"],"text":"1. Preparation \u00b6 1.1 KVMs \u00b6 8 KVMs Hostname vCPUs Memory Swap IP OS sudoer master01 .k8s 2 2G 0 192.168.10.191 CentOS 7 echo master02 .k8s 2 2G 0 192.168.10.192 CentOS 7 echo master03 .k8s 2 2G 0 192.168.10.193 CentOS 7 echo minion01 .k8s 2 8G 0 192.168.10.101 CentOS 7 echo minion02 .k8s 2 8G 0 192.168.10.102 CentOS 7 echo minion03 .k8s 2 8G 0 192.168.10.103 CentOS 7 echo slb01 .k8s 2 2G 0 192.168.10.201 CentOS 7 echo slb02 .k8s 2 2G 0 192.168.10.202 CentOS 7 echo cluster .k8s - - - 192.168.10.200 - - NOTE: 192.168.10.200 is a virtual (HA) IP which points to slb01 or slb02. 1.2 Install Ansible on Host machine \u00b6 # Install ansible on host machine sudo yum install ansible 1.3 Password free configuration \u00b6 cat <<EOF | sudo tee -a /etc/ansible/hosts [k8s] master01.k8s master02.k8s master03.k8s minion01.k8s minion02.k8s minion03.k8s [k8s-master] master01.k8s master02.k8s master03.k8s [k8s-minion] minion01.k8s minion02.k8s minion03.k8s EOF # Have a test ansible k8s --ask-pass -u echo -m shell -a 'echo ok' # Password free for login ansible k8s --ask-pass -u echo -m file -a \"path=.ssh state=directory mode=700\" ansible k8s --ask-pass -u echo -m copy -a \"src=~/.ssh/id_rsa.pub dest=.ssh/authorized_keys mode=600\" # Password free for sudo ansible k8s --ask-pass -u echo -b -m shell -a \"echo 'echo ALL=(ALL) NOPASSWD: ALL' >> /etc/sudoers\" # Now we can have a test as below ansible k8s -u echo -m shell -a 'echo ok' 1.4 DNS via hosts file \u00b6 cat <<EOF > /tmp/add-hosts.sh cat <<EEE >> /etc/hosts 192.168.10.191 master01.k8s 192.168.10.192 master02.k8s 192.168.10.193 master03.k8s 192.168.10.101 minion01.k8s 192.168.10.102 minion02.k8s 192.168.10.103 minion03.k8s 192.168.10.201 slb01.k8s 192.168.10.202 slb02.k8s # A virtual IP which points slb01 or slb02 192.168.10.200 cluster.k8s EEE EOF ansible k8s -u echo -b -m script -a \"/tmp/add-hosts.sh\" 2. Basic configurations for servers \u00b6 2.1 Firewall configuration (required ports) \u00b6 NOTE: eth0 , 192.168.10.0/24 may be changed according to your own environment. cat <<EOF > /tmp/required-ports.sh # Possible other interfaces instead of eth0 firewall-cmd --permanent --zone=trusted --add-interface=eth0 # Your internal network firewall-cmd --permanent --zone=trusted --add-source=192.168.10.0/24 # Flannel firewall-cmd --permanent --zone=trusted --add-interface=flannel.1 # POD cidr firewall-cmd --permanent --zone=trusted --add-source=10.244.0.0/16 # Service cidr firewall-cmd --permanent --zone=trusted --add-source=10.96.0.0/16 firewall-cmd --permanent --add-port=6443/tcp firewall-cmd --permanent --add-port=2379-2380/tcp firewall-cmd --permanent --add-port=10250-10252/tcp firewall-cmd --permanent --add-port=30000-32767/tcp firewall-cmd --reload EOF ansible k8s -u echo -b -m script -a '/tmp/required-ports.sh' 2.2 Set SELinux in permissive mode (effectively disabling it) \u00b6 cat <<EOF > /tmp/set-selinux.sh sudo setenforce 0 sudo sed -i 's/^SELINUX=enforcing$/SELINUX=permissive/' /etc/selinux/config EOF ansible k8s -u echo -b -m script -a ' /tmp/set-selinux.sh 2.3 Disable swap \u00b6 You MUST disable swap in order for the kubelet to work properly. ansible k8s -u echo -b -m shell -a 'swapoff -a' ansible k8s -u echo -b -m shell -a 'sed -i -e \"s:/dev/mapper/centos-swap:#/dev/mapper/centos-swap:\" /etc/fstab' 2.4 Verify the MAC address and product_uuid are unique for every node \u00b6 ansible k8s -u echo -m shell -a '/usr/sbin/ip link | grep link/ether' ansible k8s -u echo -b -m shell -a 'cat /sys/class/dmi/id/product_uuid' 2.5 Letting iptables see bridged traffic \u00b6 # Make sure that the br_netfilter module is loaded ansible k8s -u echo -m shell -a '/usr/sbin/lsmod | grep br_netfilter' # To load it explicitly ansible k8s -u echo -b -m shell -a 'modprobe br_netfilter' # Ensure net.bridge.bridge-nf-call-iptables is set to 1 in your sysctl config cat <<EEE > /tmp/ensure-bridge-nf.sh cat <<EOF | sudo tee /etc/modules-load.d/k8s.conf br_netfilter EOF cat <<EOF | sudo tee /etc/sysctl.d/k8s.conf net.bridge.bridge-nf-call-ip6tables = 1 net.bridge.bridge-nf-call-iptables = 1 EOF sudo sysctl --system EEE ansible k8s -u echo -b -m script -a '/tmp/ensure-bridge-nf.sh' 2.6 Sysctl for KVM \u00b6 cat <<EEE > /tmp/set-sysctl.sh cat <<EOF | sudo tee /etc/sysctl.d/kvm.conf net.ipv4.conf.default.rp_filter=0 net.ipv4.conf.all.rp_filter=0 net.ipv4.conf.all.proxy_arp = 1 EOF sudo sysctl --system EEE ansible k8s -u echo -b -m script -a '/tmp/set-sysctl.sh' 3. Install docker-ce as the container runtime \u00b6 3.1 Install container-selinux \u00b6 ansible k8s -u echo -m shell -a \\ 'sudo yum --enablerepo=extras install -y container-selinux' 3.2 Check docker-ce version \u00b6 yum --showduplicates list docker-ce 3.3 Install docker-ce \u00b6 NOTE: Use your mirror of dockerhub cat <<EEE > /tmp/install-docker.sh # Install Docker CE 18.06 from Docker's CentOS repositories: ## Install prerequisites. yum -y install yum-utils device-mapper-persistent-data lvm2 ## Add docker repository. yum-config-manager \\ --add-repo \\ https://download.docker.com/linux/centos/docker-ce.repo ## Install docker. yum -y install docker-ce-18.06.1.ce-3.el7 systemctl enable docker # Setup daemon. mkdir -p /etc/docker/ cat > /etc/docker/daemon.json <<EOF { # NOTE: Use your mirror of dockerhub \"registry-mirrors\": [\"https://z7sy3gme.mirror.aliyuncs.com\"], \"exec-opts\": [\"native.cgroupdriver=systemd\"], \"log-driver\": \"json-file\", \"log-opts\": { \"max-size\": \"100m\" }, \"storage-driver\": \"overlay2\", \"storage-opts\": [ \"overlay2.override_kernel_check=true\" ] } EOF mkdir -p /etc/systemd/system/docker.service.d # Restart docker. systemctl daemon-reload systemctl restart docker EEE ansible k8s -u echo -b -m script -a '/tmp/install-docker.sh' 4. Install HAProxy + Keepalived as the Load Balancer \u00b6 See Install Haproxy v1.8 and Keepalived on CentOS 7 for the installation. Config HAProxy, add a listen for k8sapi cat << EEE > /tmp/k8sapi-proxy.sh cat << EOF | sudo tee -a /etc/opt/rh/rh-haproxy18/haproxy/haproxy.cfg listen k8sapi bind *:6443 mode tcp balance roundrobin option tcp-check server master01 master01.k8s:6443 check server master02 master02.k8s:6443 check server master03 master03.k8s:6443 check EOF EEE ansible slb -u echo -b -m script -a '/tmp/k8sapi-proxy.sh' Restart HAProxy ansible slb -u echo -b -m shell -a \"systemctl restart rh-haproxy18-haproxy\" 5. Install kubeadm, kubelet and kubectl \u00b6 NOTE: Use your own baseurl and gpgkey cat <<EEE > /tmp/install-kubeadm.sh cat <<EOF | sudo tee /etc/yum.repos.d/kubernetes.repo [kubernetes] name=Kubernetes baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64 enabled=1 gpgcheck=1 repo_gpgcheck=1 gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg exclude=kubelet kubeadm kubectl EOF yum install -y kubelet kubeadm kubectl --disableexcludes=kubernetes systemctl enable --now kubelet EEE ansible k8s -u echo -b -m script -a '/tmp/install-kubeadm.sh' Check kubeadm version ansible k8s -u echo -m shell -a 'kubeadm version | awk -F, \"{print \\$3}\"' 6. Creating HA clusters with kubeadm \u00b6 Ping cluster.k8s ping cluster.k8s -c 5 6.1 Init cluster on master01.k8s \u00b6 For flannel pod network (see 6.3 ), the argument --pod-network-cidr=10.244.0.0/16 should be provided. sudo kubeadm init --control-plane-endpoint \"cluster.k8s:6443\" --upload-certs --pod-network-cidr = 10 .244.0.0/16 Output: [ init ] Using Kubernetes version: v1.22.1 ...... Your Kubernetes control-plane has initialized successfully! To start using your cluster, you need to run the following as a regular user: mkdir -p $HOME /.kube sudo cp -i /etc/kubernetes/admin.conf $HOME /.kube/config sudo chown $( id -u ) : $( id -g ) $HOME /.kube/config Alternatively, if you are the root user, you can run: export KUBECONFIG = /etc/kubernetes/admin.conf You should now deploy a pod network to the cluster. Run \"kubectl apply -f [podnetwork].yaml\" with one of the options listed at: https://kubernetes.io/docs/concepts/cluster-administration/addons/ You can now join any number of the control-plane node running the following command on each as root: kubeadm join cluster.k8s:6443 --token aswx9l.y6nmyeh3u3urvmgt \\ --discovery-token-ca-cert-hash sha256:246676b26c3215a836ea4b55d61437edd62cc7a3a6fceca8c4cb40070fad9d88 \\ --control-plane --certificate-key 5f6b55ca0aef4b76322dec1076313e0cb0ba19e1c3f1254cf68af3d3c8fabad6 Please note that the certificate-key gives access to cluster sensitive data, keep it secret! As a safeguard, uploaded-certs will be deleted in two hours ; If necessary, you can use \"kubeadm init phase upload-certs --upload-certs\" to reload certs afterward. Then you can join any number of worker nodes by running the following on each as root: kubeadm join cluster.k8s:6443 --token aswx9l.y6nmyeh3u3urvmgt \\ --discovery-token-ca-cert-hash sha256:246676b26c3215a836ea4b55d61437edd62cc7a3a6fceca8c4cb40070fad9d88 6.2 Create $HOME/.kube/config on master01.k8s \u00b6 mkdir -p $HOME /.kube sudo cp -i /etc/kubernetes/admin.conf $HOME /.kube/config sudo chown $( id -u ) : $( id -g ) $HOME /.kube/config 6.3 Deploy a pod network (flannel) to the cluster \u00b6 On master01.k8s kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml 6.4 Join the control-plane node \u00b6 On master02.k8s, master03.k8s # e.g. sudo kubeadm join cluster.k8s:6443 --token aswx9l.y6nmyeh3u3urvmgt \\ --discovery-token-ca-cert-hash sha256:246676b26c3215a836ea4b55d61437edd62cc7a3a6fceca8c4cb40070fad9d88 \\ --control-plane --certificate-key 5f6b55ca0aef4b76322dec1076313e0cb0ba19e1c3f1254cf68af3d3c8fabad6 Output: [ preflight ] Running pre-flight checks [ preflight ] Reading configuration from the cluster... [ preflight ] FYI: You can look at this config file with 'kubectl -n kube-system get cm kubeadm-config -o yaml' ...... This node has joined the cluster and a new control plane instance was created: * Certificate signing request was sent to apiserver and approval was received. * The Kubelet was informed of the new secure connection details. * Control plane ( master ) label and taint were applied to the new node. * The Kubernetes control plane instances scaled up. * A new etcd member was added to the local/stacked etcd cluster. To start administering your cluster from this node, you need to run the following as a regular user: mkdir -p $HOME /.kube sudo cp -i /etc/kubernetes/admin.conf $HOME /.kube/config sudo chown $( id -u ) : $( id -g ) $HOME /.kube/config Run 'kubectl get nodes' to see this node join the cluster. 6.5 Join worker nodes \u00b6 On minion01.k8s, minion02.k8s, minion03.k8s # e.g. sudo kubeadm join cluster.k8s:6443 --token aswx9l.y6nmyeh3u3urvmgt \\ --discovery-token-ca-cert-hash sha256:246676b26c3215a836ea4b55d61437edd62cc7a3a6fceca8c4cb40070fad9d88 Output: [ preflight ] Running pre-flight checks [ preflight ] Reading configuration from the cluster... [ preflight ] FYI: You can look at this config file with 'kubectl -n kube-system get cm kubeadm-config -o yaml' [ kubelet-start ] Writing kubelet configuration to file \"/var/lib/kubelet/config.yaml\" [ kubelet-start ] Writing kubelet environment file with flags to file \"/var/lib/kubelet/kubeadm-flags.env\" [ kubelet-start ] Starting the kubelet [ kubelet-start ] Waiting for the kubelet to perform the TLS Bootstrap... This node has joined the cluster: * Certificate signing request was sent to apiserver and a response was received. * The Kubelet was informed of the new secure connection details. Run 'kubectl get nodes' on the control-plane to see this node join the cluster. 6.6 Check the cluster \u00b6 On master01.k8s. Check the nodes kubectl get nodes Output: NAME STATUS ROLES AGE VERSION master01.k8s Ready control-plane,master 3h52m v1.22.1 master02.k8s Ready control-plane,master 28m v1.22.1 master03.k8s Ready control-plane,master 4m35s v1.22.1 minion01.k8s Ready <none> 39s v1.22.1 minion02.k8s Ready <none> 75s v1.22.1 minion03.k8s Ready <none> 2m51s v1.22.1 Check the pods kubectl get pod --all-namespaces Output: NAMESPACE NAME READY STATUS RESTARTS AGE kube-system coredns-78fcd69978-79fxq 1 /1 Running 0 33m kube-system coredns-78fcd69978-x65cm 1 /1 Running 0 33m kube-system etcd-master01.k8s 1 /1 Running 2 33m kube-system etcd-master02.k8s 1 /1 Running 7 30m kube-system etcd-master03.k8s 1 /1 Running 0 6m24s kube-system kube-apiserver-master01.k8s 1 /1 Running 3 33m kube-system kube-apiserver-master02.k8s 1 /1 Running 7 30m kube-system kube-apiserver-master03.k8s 1 /1 Running 3 30m kube-system kube-controller-manager-master01.k8s 1 /1 Running 1 ( 7m19s ago ) 33m kube-system kube-controller-manager-master02.k8s 1 /1 Running 1 30m kube-system kube-controller-manager-master03.k8s 1 /1 Running 1 30m kube-system kube-flannel-ds-88wbk 1 /1 Running 0 4m19s kube-system kube-flannel-ds-fznsw 1 /1 Running 0 4m56s kube-system kube-flannel-ds-kln22 1 /1 Running 0 3m39s kube-system kube-flannel-ds-n2hfp 1 /1 Running 0 18m kube-system kube-flannel-ds-n2qc4 1 /1 Running 0 18m kube-system kube-flannel-ds-qhh5q 1 /1 Running 0 18m kube-system kube-proxy-9hdxz 1 /1 Running 1 30m kube-system kube-proxy-cptvt 1 /1 Running 0 3m39s kube-system kube-proxy-hw4wm 1 /1 Running 0 4m18s kube-system kube-proxy-rcj7c 1 /1 Running 0 4m56s kube-system kube-proxy-tbq7p 1 /1 Running 1 32m kube-system kube-proxy-vmrqc 1 /1 Running 0 33m kube-system kube-scheduler-master01.k8s 1 /1 Running 5 ( 7m19s ago ) 33m kube-system kube-scheduler-master02.k8s 1 /1 Running 3 30m kube-system kube-scheduler-master03.k8s 1 /1 Running 2 30m Cluster Info kubectl cluster-info Output: Kubernetes control plane is running at https://cluster.k8s:6443 CoreDNS is running at https://cluster.k8s:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy To further debug and diagnose cluster problems, use 'kubectl cluster-info dump' . Reference \u00b6 docs/setup/production-environment/tools/kubeadm/install-kubeadm docs/setup/production-environment/tools/kubeadm/high-availability docs/ha-considerations.md docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/#pod-network docs/concepts/cluster-administration/networking/ github.com/flannel-io/flannel Pods cannot resolve DNS","title":"Install Kubernetes (k8s) v1.22 Highly Available Clusters on CentOS 7"},{"location":"OPENSOURCE/2021-08-26-install-k8s-1.22-ha-clusters-on-centos7/#1-preparation","text":"","title":"1. Preparation"},{"location":"OPENSOURCE/2021-08-26-install-k8s-1.22-ha-clusters-on-centos7/#11-kvms","text":"8 KVMs Hostname vCPUs Memory Swap IP OS sudoer master01 .k8s 2 2G 0 192.168.10.191 CentOS 7 echo master02 .k8s 2 2G 0 192.168.10.192 CentOS 7 echo master03 .k8s 2 2G 0 192.168.10.193 CentOS 7 echo minion01 .k8s 2 8G 0 192.168.10.101 CentOS 7 echo minion02 .k8s 2 8G 0 192.168.10.102 CentOS 7 echo minion03 .k8s 2 8G 0 192.168.10.103 CentOS 7 echo slb01 .k8s 2 2G 0 192.168.10.201 CentOS 7 echo slb02 .k8s 2 2G 0 192.168.10.202 CentOS 7 echo cluster .k8s - - - 192.168.10.200 - - NOTE: 192.168.10.200 is a virtual (HA) IP which points to slb01 or slb02.","title":"1.1 KVMs"},{"location":"OPENSOURCE/2021-08-26-install-k8s-1.22-ha-clusters-on-centos7/#12-install-ansible-on-host-machine","text":"# Install ansible on host machine sudo yum install ansible","title":"1.2 Install Ansible on Host machine"},{"location":"OPENSOURCE/2021-08-26-install-k8s-1.22-ha-clusters-on-centos7/#13-password-free-configuration","text":"cat <<EOF | sudo tee -a /etc/ansible/hosts [k8s] master01.k8s master02.k8s master03.k8s minion01.k8s minion02.k8s minion03.k8s [k8s-master] master01.k8s master02.k8s master03.k8s [k8s-minion] minion01.k8s minion02.k8s minion03.k8s EOF # Have a test ansible k8s --ask-pass -u echo -m shell -a 'echo ok' # Password free for login ansible k8s --ask-pass -u echo -m file -a \"path=.ssh state=directory mode=700\" ansible k8s --ask-pass -u echo -m copy -a \"src=~/.ssh/id_rsa.pub dest=.ssh/authorized_keys mode=600\" # Password free for sudo ansible k8s --ask-pass -u echo -b -m shell -a \"echo 'echo ALL=(ALL) NOPASSWD: ALL' >> /etc/sudoers\" # Now we can have a test as below ansible k8s -u echo -m shell -a 'echo ok'","title":"1.3 Password free configuration"},{"location":"OPENSOURCE/2021-08-26-install-k8s-1.22-ha-clusters-on-centos7/#14-dns-via-hosts-file","text":"cat <<EOF > /tmp/add-hosts.sh cat <<EEE >> /etc/hosts 192.168.10.191 master01.k8s 192.168.10.192 master02.k8s 192.168.10.193 master03.k8s 192.168.10.101 minion01.k8s 192.168.10.102 minion02.k8s 192.168.10.103 minion03.k8s 192.168.10.201 slb01.k8s 192.168.10.202 slb02.k8s # A virtual IP which points slb01 or slb02 192.168.10.200 cluster.k8s EEE EOF ansible k8s -u echo -b -m script -a \"/tmp/add-hosts.sh\"","title":"1.4 DNS via hosts file"},{"location":"OPENSOURCE/2021-08-26-install-k8s-1.22-ha-clusters-on-centos7/#2-basic-configurations-for-servers","text":"","title":"2. Basic configurations for servers"},{"location":"OPENSOURCE/2021-08-26-install-k8s-1.22-ha-clusters-on-centos7/#21-firewall-configuration-required-ports","text":"NOTE: eth0 , 192.168.10.0/24 may be changed according to your own environment. cat <<EOF > /tmp/required-ports.sh # Possible other interfaces instead of eth0 firewall-cmd --permanent --zone=trusted --add-interface=eth0 # Your internal network firewall-cmd --permanent --zone=trusted --add-source=192.168.10.0/24 # Flannel firewall-cmd --permanent --zone=trusted --add-interface=flannel.1 # POD cidr firewall-cmd --permanent --zone=trusted --add-source=10.244.0.0/16 # Service cidr firewall-cmd --permanent --zone=trusted --add-source=10.96.0.0/16 firewall-cmd --permanent --add-port=6443/tcp firewall-cmd --permanent --add-port=2379-2380/tcp firewall-cmd --permanent --add-port=10250-10252/tcp firewall-cmd --permanent --add-port=30000-32767/tcp firewall-cmd --reload EOF ansible k8s -u echo -b -m script -a '/tmp/required-ports.sh'","title":"2.1 Firewall configuration (required ports)"},{"location":"OPENSOURCE/2021-08-26-install-k8s-1.22-ha-clusters-on-centos7/#22-set-selinux-in-permissive-mode-effectively-disabling-it","text":"cat <<EOF > /tmp/set-selinux.sh sudo setenforce 0 sudo sed -i 's/^SELINUX=enforcing$/SELINUX=permissive/' /etc/selinux/config EOF ansible k8s -u echo -b -m script -a ' /tmp/set-selinux.sh","title":"2.2 Set SELinux in permissive mode (effectively disabling it)"},{"location":"OPENSOURCE/2021-08-26-install-k8s-1.22-ha-clusters-on-centos7/#23-disable-swap","text":"You MUST disable swap in order for the kubelet to work properly. ansible k8s -u echo -b -m shell -a 'swapoff -a' ansible k8s -u echo -b -m shell -a 'sed -i -e \"s:/dev/mapper/centos-swap:#/dev/mapper/centos-swap:\" /etc/fstab'","title":"2.3 Disable swap"},{"location":"OPENSOURCE/2021-08-26-install-k8s-1.22-ha-clusters-on-centos7/#24-verify-the-mac-address-and-product_uuid-are-unique-for-every-node","text":"ansible k8s -u echo -m shell -a '/usr/sbin/ip link | grep link/ether' ansible k8s -u echo -b -m shell -a 'cat /sys/class/dmi/id/product_uuid'","title":"2.4 Verify the MAC address and product_uuid are unique for every node"},{"location":"OPENSOURCE/2021-08-26-install-k8s-1.22-ha-clusters-on-centos7/#25-letting-iptables-see-bridged-traffic","text":"# Make sure that the br_netfilter module is loaded ansible k8s -u echo -m shell -a '/usr/sbin/lsmod | grep br_netfilter' # To load it explicitly ansible k8s -u echo -b -m shell -a 'modprobe br_netfilter' # Ensure net.bridge.bridge-nf-call-iptables is set to 1 in your sysctl config cat <<EEE > /tmp/ensure-bridge-nf.sh cat <<EOF | sudo tee /etc/modules-load.d/k8s.conf br_netfilter EOF cat <<EOF | sudo tee /etc/sysctl.d/k8s.conf net.bridge.bridge-nf-call-ip6tables = 1 net.bridge.bridge-nf-call-iptables = 1 EOF sudo sysctl --system EEE ansible k8s -u echo -b -m script -a '/tmp/ensure-bridge-nf.sh'","title":"2.5 Letting iptables see bridged traffic"},{"location":"OPENSOURCE/2021-08-26-install-k8s-1.22-ha-clusters-on-centos7/#26-sysctl-for-kvm","text":"cat <<EEE > /tmp/set-sysctl.sh cat <<EOF | sudo tee /etc/sysctl.d/kvm.conf net.ipv4.conf.default.rp_filter=0 net.ipv4.conf.all.rp_filter=0 net.ipv4.conf.all.proxy_arp = 1 EOF sudo sysctl --system EEE ansible k8s -u echo -b -m script -a '/tmp/set-sysctl.sh'","title":"2.6 Sysctl for KVM"},{"location":"OPENSOURCE/2021-08-26-install-k8s-1.22-ha-clusters-on-centos7/#3-install-docker-ce-as-the-container-runtime","text":"","title":"3. Install docker-ce as the container runtime"},{"location":"OPENSOURCE/2021-08-26-install-k8s-1.22-ha-clusters-on-centos7/#31-install-container-selinux","text":"ansible k8s -u echo -m shell -a \\ 'sudo yum --enablerepo=extras install -y container-selinux'","title":"3.1 Install container-selinux"},{"location":"OPENSOURCE/2021-08-26-install-k8s-1.22-ha-clusters-on-centos7/#32-check-docker-ce-version","text":"yum --showduplicates list docker-ce","title":"3.2 Check docker-ce version"},{"location":"OPENSOURCE/2021-08-26-install-k8s-1.22-ha-clusters-on-centos7/#33-install-docker-ce","text":"NOTE: Use your mirror of dockerhub cat <<EEE > /tmp/install-docker.sh # Install Docker CE 18.06 from Docker's CentOS repositories: ## Install prerequisites. yum -y install yum-utils device-mapper-persistent-data lvm2 ## Add docker repository. yum-config-manager \\ --add-repo \\ https://download.docker.com/linux/centos/docker-ce.repo ## Install docker. yum -y install docker-ce-18.06.1.ce-3.el7 systemctl enable docker # Setup daemon. mkdir -p /etc/docker/ cat > /etc/docker/daemon.json <<EOF { # NOTE: Use your mirror of dockerhub \"registry-mirrors\": [\"https://z7sy3gme.mirror.aliyuncs.com\"], \"exec-opts\": [\"native.cgroupdriver=systemd\"], \"log-driver\": \"json-file\", \"log-opts\": { \"max-size\": \"100m\" }, \"storage-driver\": \"overlay2\", \"storage-opts\": [ \"overlay2.override_kernel_check=true\" ] } EOF mkdir -p /etc/systemd/system/docker.service.d # Restart docker. systemctl daemon-reload systemctl restart docker EEE ansible k8s -u echo -b -m script -a '/tmp/install-docker.sh'","title":"3.3 Install docker-ce"},{"location":"OPENSOURCE/2021-08-26-install-k8s-1.22-ha-clusters-on-centos7/#4-install-haproxy-keepalived-as-the-load-balancer","text":"See Install Haproxy v1.8 and Keepalived on CentOS 7 for the installation. Config HAProxy, add a listen for k8sapi cat << EEE > /tmp/k8sapi-proxy.sh cat << EOF | sudo tee -a /etc/opt/rh/rh-haproxy18/haproxy/haproxy.cfg listen k8sapi bind *:6443 mode tcp balance roundrobin option tcp-check server master01 master01.k8s:6443 check server master02 master02.k8s:6443 check server master03 master03.k8s:6443 check EOF EEE ansible slb -u echo -b -m script -a '/tmp/k8sapi-proxy.sh' Restart HAProxy ansible slb -u echo -b -m shell -a \"systemctl restart rh-haproxy18-haproxy\"","title":"4. Install HAProxy + Keepalived as the Load Balancer"},{"location":"OPENSOURCE/2021-08-26-install-k8s-1.22-ha-clusters-on-centos7/#5-install-kubeadm-kubelet-and-kubectl","text":"NOTE: Use your own baseurl and gpgkey cat <<EEE > /tmp/install-kubeadm.sh cat <<EOF | sudo tee /etc/yum.repos.d/kubernetes.repo [kubernetes] name=Kubernetes baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64 enabled=1 gpgcheck=1 repo_gpgcheck=1 gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg exclude=kubelet kubeadm kubectl EOF yum install -y kubelet kubeadm kubectl --disableexcludes=kubernetes systemctl enable --now kubelet EEE ansible k8s -u echo -b -m script -a '/tmp/install-kubeadm.sh' Check kubeadm version ansible k8s -u echo -m shell -a 'kubeadm version | awk -F, \"{print \\$3}\"'","title":"5. Install kubeadm, kubelet and kubectl"},{"location":"OPENSOURCE/2021-08-26-install-k8s-1.22-ha-clusters-on-centos7/#6-creating-ha-clusters-with-kubeadm","text":"Ping cluster.k8s ping cluster.k8s -c 5","title":"6. Creating HA clusters with kubeadm"},{"location":"OPENSOURCE/2021-08-26-install-k8s-1.22-ha-clusters-on-centos7/#61-init-cluster-on-master01k8s","text":"For flannel pod network (see 6.3 ), the argument --pod-network-cidr=10.244.0.0/16 should be provided. sudo kubeadm init --control-plane-endpoint \"cluster.k8s:6443\" --upload-certs --pod-network-cidr = 10 .244.0.0/16 Output: [ init ] Using Kubernetes version: v1.22.1 ...... Your Kubernetes control-plane has initialized successfully! To start using your cluster, you need to run the following as a regular user: mkdir -p $HOME /.kube sudo cp -i /etc/kubernetes/admin.conf $HOME /.kube/config sudo chown $( id -u ) : $( id -g ) $HOME /.kube/config Alternatively, if you are the root user, you can run: export KUBECONFIG = /etc/kubernetes/admin.conf You should now deploy a pod network to the cluster. Run \"kubectl apply -f [podnetwork].yaml\" with one of the options listed at: https://kubernetes.io/docs/concepts/cluster-administration/addons/ You can now join any number of the control-plane node running the following command on each as root: kubeadm join cluster.k8s:6443 --token aswx9l.y6nmyeh3u3urvmgt \\ --discovery-token-ca-cert-hash sha256:246676b26c3215a836ea4b55d61437edd62cc7a3a6fceca8c4cb40070fad9d88 \\ --control-plane --certificate-key 5f6b55ca0aef4b76322dec1076313e0cb0ba19e1c3f1254cf68af3d3c8fabad6 Please note that the certificate-key gives access to cluster sensitive data, keep it secret! As a safeguard, uploaded-certs will be deleted in two hours ; If necessary, you can use \"kubeadm init phase upload-certs --upload-certs\" to reload certs afterward. Then you can join any number of worker nodes by running the following on each as root: kubeadm join cluster.k8s:6443 --token aswx9l.y6nmyeh3u3urvmgt \\ --discovery-token-ca-cert-hash sha256:246676b26c3215a836ea4b55d61437edd62cc7a3a6fceca8c4cb40070fad9d88","title":"6.1 Init cluster on master01.k8s"},{"location":"OPENSOURCE/2021-08-26-install-k8s-1.22-ha-clusters-on-centos7/#62-create-homekubeconfig-on-master01k8s","text":"mkdir -p $HOME /.kube sudo cp -i /etc/kubernetes/admin.conf $HOME /.kube/config sudo chown $( id -u ) : $( id -g ) $HOME /.kube/config","title":"6.2 Create $HOME/.kube/config on master01.k8s"},{"location":"OPENSOURCE/2021-08-26-install-k8s-1.22-ha-clusters-on-centos7/#63-deploy-a-pod-network-flannel-to-the-cluster","text":"On master01.k8s kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml","title":"6.3 Deploy a pod network (flannel) to the cluster"},{"location":"OPENSOURCE/2021-08-26-install-k8s-1.22-ha-clusters-on-centos7/#64-join-the-control-plane-node","text":"On master02.k8s, master03.k8s # e.g. sudo kubeadm join cluster.k8s:6443 --token aswx9l.y6nmyeh3u3urvmgt \\ --discovery-token-ca-cert-hash sha256:246676b26c3215a836ea4b55d61437edd62cc7a3a6fceca8c4cb40070fad9d88 \\ --control-plane --certificate-key 5f6b55ca0aef4b76322dec1076313e0cb0ba19e1c3f1254cf68af3d3c8fabad6 Output: [ preflight ] Running pre-flight checks [ preflight ] Reading configuration from the cluster... [ preflight ] FYI: You can look at this config file with 'kubectl -n kube-system get cm kubeadm-config -o yaml' ...... This node has joined the cluster and a new control plane instance was created: * Certificate signing request was sent to apiserver and approval was received. * The Kubelet was informed of the new secure connection details. * Control plane ( master ) label and taint were applied to the new node. * The Kubernetes control plane instances scaled up. * A new etcd member was added to the local/stacked etcd cluster. To start administering your cluster from this node, you need to run the following as a regular user: mkdir -p $HOME /.kube sudo cp -i /etc/kubernetes/admin.conf $HOME /.kube/config sudo chown $( id -u ) : $( id -g ) $HOME /.kube/config Run 'kubectl get nodes' to see this node join the cluster.","title":"6.4 Join the control-plane node"},{"location":"OPENSOURCE/2021-08-26-install-k8s-1.22-ha-clusters-on-centos7/#65-join-worker-nodes","text":"On minion01.k8s, minion02.k8s, minion03.k8s # e.g. sudo kubeadm join cluster.k8s:6443 --token aswx9l.y6nmyeh3u3urvmgt \\ --discovery-token-ca-cert-hash sha256:246676b26c3215a836ea4b55d61437edd62cc7a3a6fceca8c4cb40070fad9d88 Output: [ preflight ] Running pre-flight checks [ preflight ] Reading configuration from the cluster... [ preflight ] FYI: You can look at this config file with 'kubectl -n kube-system get cm kubeadm-config -o yaml' [ kubelet-start ] Writing kubelet configuration to file \"/var/lib/kubelet/config.yaml\" [ kubelet-start ] Writing kubelet environment file with flags to file \"/var/lib/kubelet/kubeadm-flags.env\" [ kubelet-start ] Starting the kubelet [ kubelet-start ] Waiting for the kubelet to perform the TLS Bootstrap... This node has joined the cluster: * Certificate signing request was sent to apiserver and a response was received. * The Kubelet was informed of the new secure connection details. Run 'kubectl get nodes' on the control-plane to see this node join the cluster.","title":"6.5 Join worker nodes"},{"location":"OPENSOURCE/2021-08-26-install-k8s-1.22-ha-clusters-on-centos7/#66-check-the-cluster","text":"On master01.k8s. Check the nodes kubectl get nodes Output: NAME STATUS ROLES AGE VERSION master01.k8s Ready control-plane,master 3h52m v1.22.1 master02.k8s Ready control-plane,master 28m v1.22.1 master03.k8s Ready control-plane,master 4m35s v1.22.1 minion01.k8s Ready <none> 39s v1.22.1 minion02.k8s Ready <none> 75s v1.22.1 minion03.k8s Ready <none> 2m51s v1.22.1 Check the pods kubectl get pod --all-namespaces Output: NAMESPACE NAME READY STATUS RESTARTS AGE kube-system coredns-78fcd69978-79fxq 1 /1 Running 0 33m kube-system coredns-78fcd69978-x65cm 1 /1 Running 0 33m kube-system etcd-master01.k8s 1 /1 Running 2 33m kube-system etcd-master02.k8s 1 /1 Running 7 30m kube-system etcd-master03.k8s 1 /1 Running 0 6m24s kube-system kube-apiserver-master01.k8s 1 /1 Running 3 33m kube-system kube-apiserver-master02.k8s 1 /1 Running 7 30m kube-system kube-apiserver-master03.k8s 1 /1 Running 3 30m kube-system kube-controller-manager-master01.k8s 1 /1 Running 1 ( 7m19s ago ) 33m kube-system kube-controller-manager-master02.k8s 1 /1 Running 1 30m kube-system kube-controller-manager-master03.k8s 1 /1 Running 1 30m kube-system kube-flannel-ds-88wbk 1 /1 Running 0 4m19s kube-system kube-flannel-ds-fznsw 1 /1 Running 0 4m56s kube-system kube-flannel-ds-kln22 1 /1 Running 0 3m39s kube-system kube-flannel-ds-n2hfp 1 /1 Running 0 18m kube-system kube-flannel-ds-n2qc4 1 /1 Running 0 18m kube-system kube-flannel-ds-qhh5q 1 /1 Running 0 18m kube-system kube-proxy-9hdxz 1 /1 Running 1 30m kube-system kube-proxy-cptvt 1 /1 Running 0 3m39s kube-system kube-proxy-hw4wm 1 /1 Running 0 4m18s kube-system kube-proxy-rcj7c 1 /1 Running 0 4m56s kube-system kube-proxy-tbq7p 1 /1 Running 1 32m kube-system kube-proxy-vmrqc 1 /1 Running 0 33m kube-system kube-scheduler-master01.k8s 1 /1 Running 5 ( 7m19s ago ) 33m kube-system kube-scheduler-master02.k8s 1 /1 Running 3 30m kube-system kube-scheduler-master03.k8s 1 /1 Running 2 30m Cluster Info kubectl cluster-info Output: Kubernetes control plane is running at https://cluster.k8s:6443 CoreDNS is running at https://cluster.k8s:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy To further debug and diagnose cluster problems, use 'kubectl cluster-info dump' .","title":"6.6 Check the cluster"},{"location":"OPENSOURCE/2021-08-26-install-k8s-1.22-ha-clusters-on-centos7/#reference","text":"docs/setup/production-environment/tools/kubeadm/install-kubeadm docs/setup/production-environment/tools/kubeadm/high-availability docs/ha-considerations.md docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/#pod-network docs/concepts/cluster-administration/networking/ github.com/flannel-io/flannel Pods cannot resolve DNS","title":"Reference"},{"location":"OPENSOURCE/2021-08-28-deploy-dashboard-on-k8s-1.22/","tags":["k8s","kubernetes","dashboard","cloudnative"],"text":"1. Install kubectl on control server \u00b6 1.1 Install kubectl \u00b6 cat <<EOF | sudo tee /etc/yum.repos.d/kubernetes.repo [kubernetes] name=Kubernetes baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64 enabled=1 gpgcheck=1 repo_gpgcheck=1 gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg exclude=kubelet kubeadm kubectl EOF yum install -y kubectl --disableexcludes = kubernetes 1.2 Create ~/.kube/config file \u00b6 mkdir -p ~/.kube scp echo@master01.k8s:~/.kube/config ~/.kube/config 1.3 Check the kubectl version \u00b6 kubectl version --short Output: Client Version: v1.22.1 Server Version: v1.22.1 2. Deploy dashborad \u00b6 2.1 Deploy dashborad \u00b6 kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.3.1/aio/deploy/recommended.yaml Output: namespace/kubernetes-dashboard created serviceaccount/kubernetes-dashboard created service/kubernetes-dashboard created secret/kubernetes-dashboard-certs created secret/kubernetes-dashboard-csrf created secret/kubernetes-dashboard-key-holder created configmap/kubernetes-dashboard-settings created role.rbac.authorization.k8s.io/kubernetes-dashboard created clusterrole.rbac.authorization.k8s.io/kubernetes-dashboard created rolebinding.rbac.authorization.k8s.io/kubernetes-dashboard created clusterrolebinding.rbac.authorization.k8s.io/kubernetes-dashboard created deployment.apps/kubernetes-dashboard created service/dashboard-metrics-scraper created Warning: spec.template.metadata.annotations [ seccomp.security.alpha.kubernetes.io/pod ] : deprecated since v1.19 ; use the \"seccompProfile\" field instead deployment.apps/dashboard-metrics-scraper created 2.2 Check the pods & services \u00b6 kubectl get pod -n kubernetes-dashboard ; echo ; kubectl get svc -n kubernetes-dashboard Output: NAME READY STATUS RESTARTS AGE dashboard-metrics-scraper-856586f554-tgrhf 1 /1 Running 0 5m25s kubernetes-dashboard-67484c44f6-zzc8m 1 /1 Running 0 5m27s NAME TYPE CLUSTER-IP EXTERNAL-IP PORT ( S ) AGE dashboard-metrics-scraper ClusterIP 10 .108.194.211 <none> 8000 /TCP 5m29s kubernetes-dashboard ClusterIP 10 .109.50.222 <none> 443 /TCP 5m33s 3. Expose dashboard using NodePort \u00b6 3.1 Reconfigure kubernetes-dashboard servcie \u00b6 Reconfigure kubernetes-dashboard servcie with fixed nodePort 32700 cat << EOF | kubectl apply -f - kind: Service apiVersion: v1 metadata: labels: k8s-app: kubernetes-dashboard name: kubernetes-dashboard namespace: kubernetes-dashboard spec: type: NodePort ports: - port: 443 targetPort: 8443 nodePort: 32700 selector: k8s-app: kubernetes-dashboard EOF Output: service/kubernetes-dashboard configured 3.2 Check the services \u00b6 kubectl get svc -n kubernetes-dashboard Output: NAME TYPE CLUSTER-IP EXTERNAL-IP PORT ( S ) AGE dashboard-metrics-scraper ClusterIP 10 .108.194.211 <none> 8000 /TCP 141m kubernetes-dashboard NodePort 10 .109.50.222 <none> 443 :32700/TCP 141m 4. Create a ServiceAccount \u00b6 Create a root service account my-dashboard-sa like this # Create the service account in the current namespace # (we assume default) kubectl create serviceaccount my-dashboard-sa # Give that service account root on the cluster kubectl create clusterrolebinding my-dashboard-sa \\ --clusterrole = cluster-admin \\ --serviceaccount = default:my-dashboard-sa Get the token in that service account # Find the secret that was created to hold the token for the SA tokenname = ` kubectl get secrets | grep my-dashboard-sa-token | awk '{print $1}' ` # Show the contents of the secret to extract the token kubectl describe secret $tokenname | awk '$1==\"token:\"{print $2}' 5. Access the dashboard in a web browser \u00b6 Now we can visit the dashboard via https://master01.k8s:32700/ in a web browser. And put that token in the login screen for authentication. Reference \u00b6 Install Kubernetes (k8s) v1.22 Highly Available Clusters on CentOS 7 docs/tasks/access-application-cluster/web-ui-dashboard/ blog.heptio.com/on-securing-the-kubernetes-dashboard","title":"Deploy dashboard on Kubernetes (k8s) v1.22"},{"location":"OPENSOURCE/2021-08-28-deploy-dashboard-on-k8s-1.22/#1-install-kubectl-on-control-server","text":"","title":"1. Install kubectl on control server"},{"location":"OPENSOURCE/2021-08-28-deploy-dashboard-on-k8s-1.22/#11-install-kubectl","text":"cat <<EOF | sudo tee /etc/yum.repos.d/kubernetes.repo [kubernetes] name=Kubernetes baseurl=https://mirrors.aliyun.com/kubernetes/yum/repos/kubernetes-el7-x86_64 enabled=1 gpgcheck=1 repo_gpgcheck=1 gpgkey=https://mirrors.aliyun.com/kubernetes/yum/doc/yum-key.gpg https://mirrors.aliyun.com/kubernetes/yum/doc/rpm-package-key.gpg exclude=kubelet kubeadm kubectl EOF yum install -y kubectl --disableexcludes = kubernetes","title":"1.1 Install kubectl"},{"location":"OPENSOURCE/2021-08-28-deploy-dashboard-on-k8s-1.22/#12-create-kubeconfig-file","text":"mkdir -p ~/.kube scp echo@master01.k8s:~/.kube/config ~/.kube/config","title":"1.2 Create ~/.kube/config file"},{"location":"OPENSOURCE/2021-08-28-deploy-dashboard-on-k8s-1.22/#13-check-the-kubectl-version","text":"kubectl version --short Output: Client Version: v1.22.1 Server Version: v1.22.1","title":"1.3 Check the kubectl version"},{"location":"OPENSOURCE/2021-08-28-deploy-dashboard-on-k8s-1.22/#2-deploy-dashborad","text":"","title":"2. Deploy dashborad"},{"location":"OPENSOURCE/2021-08-28-deploy-dashboard-on-k8s-1.22/#21-deploy-dashborad","text":"kubectl apply -f https://raw.githubusercontent.com/kubernetes/dashboard/v2.3.1/aio/deploy/recommended.yaml Output: namespace/kubernetes-dashboard created serviceaccount/kubernetes-dashboard created service/kubernetes-dashboard created secret/kubernetes-dashboard-certs created secret/kubernetes-dashboard-csrf created secret/kubernetes-dashboard-key-holder created configmap/kubernetes-dashboard-settings created role.rbac.authorization.k8s.io/kubernetes-dashboard created clusterrole.rbac.authorization.k8s.io/kubernetes-dashboard created rolebinding.rbac.authorization.k8s.io/kubernetes-dashboard created clusterrolebinding.rbac.authorization.k8s.io/kubernetes-dashboard created deployment.apps/kubernetes-dashboard created service/dashboard-metrics-scraper created Warning: spec.template.metadata.annotations [ seccomp.security.alpha.kubernetes.io/pod ] : deprecated since v1.19 ; use the \"seccompProfile\" field instead deployment.apps/dashboard-metrics-scraper created","title":"2.1 Deploy dashborad"},{"location":"OPENSOURCE/2021-08-28-deploy-dashboard-on-k8s-1.22/#22-check-the-pods-services","text":"kubectl get pod -n kubernetes-dashboard ; echo ; kubectl get svc -n kubernetes-dashboard Output: NAME READY STATUS RESTARTS AGE dashboard-metrics-scraper-856586f554-tgrhf 1 /1 Running 0 5m25s kubernetes-dashboard-67484c44f6-zzc8m 1 /1 Running 0 5m27s NAME TYPE CLUSTER-IP EXTERNAL-IP PORT ( S ) AGE dashboard-metrics-scraper ClusterIP 10 .108.194.211 <none> 8000 /TCP 5m29s kubernetes-dashboard ClusterIP 10 .109.50.222 <none> 443 /TCP 5m33s","title":"2.2 Check the pods &amp; services"},{"location":"OPENSOURCE/2021-08-28-deploy-dashboard-on-k8s-1.22/#3-expose-dashboard-using-nodeport","text":"","title":"3. Expose dashboard using NodePort"},{"location":"OPENSOURCE/2021-08-28-deploy-dashboard-on-k8s-1.22/#31-reconfigure-kubernetes-dashboard-servcie","text":"Reconfigure kubernetes-dashboard servcie with fixed nodePort 32700 cat << EOF | kubectl apply -f - kind: Service apiVersion: v1 metadata: labels: k8s-app: kubernetes-dashboard name: kubernetes-dashboard namespace: kubernetes-dashboard spec: type: NodePort ports: - port: 443 targetPort: 8443 nodePort: 32700 selector: k8s-app: kubernetes-dashboard EOF Output: service/kubernetes-dashboard configured","title":"3.1 Reconfigure kubernetes-dashboard servcie"},{"location":"OPENSOURCE/2021-08-28-deploy-dashboard-on-k8s-1.22/#32-check-the-services","text":"kubectl get svc -n kubernetes-dashboard Output: NAME TYPE CLUSTER-IP EXTERNAL-IP PORT ( S ) AGE dashboard-metrics-scraper ClusterIP 10 .108.194.211 <none> 8000 /TCP 141m kubernetes-dashboard NodePort 10 .109.50.222 <none> 443 :32700/TCP 141m","title":"3.2 Check the services"},{"location":"OPENSOURCE/2021-08-28-deploy-dashboard-on-k8s-1.22/#4-create-a-serviceaccount","text":"Create a root service account my-dashboard-sa like this # Create the service account in the current namespace # (we assume default) kubectl create serviceaccount my-dashboard-sa # Give that service account root on the cluster kubectl create clusterrolebinding my-dashboard-sa \\ --clusterrole = cluster-admin \\ --serviceaccount = default:my-dashboard-sa Get the token in that service account # Find the secret that was created to hold the token for the SA tokenname = ` kubectl get secrets | grep my-dashboard-sa-token | awk '{print $1}' ` # Show the contents of the secret to extract the token kubectl describe secret $tokenname | awk '$1==\"token:\"{print $2}'","title":"4. Create a ServiceAccount"},{"location":"OPENSOURCE/2021-08-28-deploy-dashboard-on-k8s-1.22/#5-access-the-dashboard-in-a-web-browser","text":"Now we can visit the dashboard via https://master01.k8s:32700/ in a web browser. And put that token in the login screen for authentication.","title":"5. Access the dashboard in a web browser"},{"location":"OPENSOURCE/2021-08-28-deploy-dashboard-on-k8s-1.22/#reference","text":"Install Kubernetes (k8s) v1.22 Highly Available Clusters on CentOS 7 docs/tasks/access-application-cluster/web-ui-dashboard/ blog.heptio.com/on-securing-the-kubernetes-dashboard","title":"Reference"},{"location":"OPENSOURCE/2021-09-04-create-a-self-hosted-helm-chart-and-deploy-it-to-k8s-1.22/","tags":["k8s","kubernetes","cloudnative","helm","chart"],"text":"1. Concepts \u00b6 Here are the descriptions from helm.sh : A Chart is a Helm package. It contains all of the resource definitions necessary to run an application, tool, or service inside of a Kubernetes cluster. Think of it like the Kubernetes equivalent of a Homebrew formula, an Apt dpkg, or a Yum RPM file. A Repository is the place where charts can be collected and shared. It's like Perl's CPAN archive or the Fedora Package Database, but for Kubernetes packages. A Release is an instance of a chart running in a Kubernetes cluster. One chart can often be installed many times into the same cluster. And each time it is installed, a new release is created. Consider a MySQL chart. If you want two databases running in your cluster, you can install that chart twice. Each one will have its own release, which will in turn have its own release name. Helm installs charts into Kubernetes, creating a new release for each installation. And to find new charts, you can search Helm chart repositories. 2. Install kubectl & helm \u00b6 2.1 Install kubectl \u00b6 See install-kubectl-on-control-server . 2.2 Install helm \u00b6 See github.com/helm/helm/releases for helm releases. For linux amd64 server: wget https://get.helm.sh/helm-v3.6.3-linux-amd64.tar.gz tar -zxvf helm-v3.6.3-linux-amd64.tar.gz sudo mv linux-amd64/helm /usr/local/bin/helm For macOS: brew install helm Check version helm version Output: version.BuildInfo { Version: \"v3.6.3\" , GitCommit: \"d506314abfb5d21419df8c7e7e68012379db2354\" , GitTreeState: \"clean\" , GoVersion: \"go1.16.5\" } 3. Create a helm chart \u00b6 To get started with a new chart, the best way is to use helm create command to initialize a new chart. The following command create a chart named hello : helm create hello Let's take a look at the file structure of this chart by using tree -a hello command: hello \u251c\u2500\u2500 .helmignore \u251c\u2500\u2500 Chart.yaml \u251c\u2500\u2500 charts \u251c\u2500\u2500 templates \u2502 \u251c\u2500\u2500 NOTES.txt \u2502 \u251c\u2500\u2500 _helpers.tpl \u2502 \u251c\u2500\u2500 deployment.yaml \u2502 \u251c\u2500\u2500 hpa.yaml \u2502 \u251c\u2500\u2500 ingress.yaml \u2502 \u251c\u2500\u2500 service.yaml \u2502 \u251c\u2500\u2500 serviceaccount.yaml \u2502 \u2514\u2500\u2500 tests \u2502 \u2514\u2500\u2500 test-connection.yaml \u2514\u2500\u2500 values.yaml Now we can continue to complete this chart by editing the files above or adding some other files (such as template file or README.md etc.). See the-chart-file-structure for more information about the chart file structure. See charts/hello for more information about this example chart. By now, we can: Locally render templates by using helm template ./hello Deploy the example chart by using helm install my-hello-1 ./hello And test the connection by using helm test my-hello-1 But we can go further: Add README.md for a chart Package a chart Host charts by creating a chart repository Publish a chart repository to artifacthub.io 4. Host helm charts using Github Page \u00b6 4.1 Create a github repo for helm charts \u00b6 First let's create a empty repo on Github, for example, named charts , take main as the default branch. And clone it to your local server. git clone git@github.com:<YOUR_GITHUB_USERNAME>/charts.git cd charts Then create a directory named charts under the root path of this repo, place chart hello under the new created directory. Also create LICENSE and README.md files as you wish. By now the file structure of the repo like below: . \u251c\u2500\u2500 LICENSE \u251c\u2500\u2500 README.md \u2514\u2500\u2500 charts \u2514\u2500\u2500 hello \u251c\u2500\u2500 .helmignore \u251c\u2500\u2500 Chart.yaml \u251c\u2500\u2500 templates \u2502 \u251c\u2500\u2500 NOTES.txt \u2502 \u251c\u2500\u2500 _helpers.tpl \u2502 \u251c\u2500\u2500 deployment.yaml \u2502 \u251c\u2500\u2500 hpa.yaml \u2502 \u251c\u2500\u2500 ingress.yaml \u2502 \u251c\u2500\u2500 service.yaml \u2502 \u251c\u2500\u2500 serviceaccount.yaml \u2502 \u2514\u2500\u2500 tests \u2502 \u2514\u2500\u2500 test-connection.yaml \u2514\u2500\u2500 values.yaml 4.2 Prepare for creating README.md for a chart \u00b6 There is a tool named chart-doc-gen used for generating README.md for a chart. First let's create a file named doc.yml and place it to charts/hello directory. e.g. project : name : Hello World shortName : Hello url : https://github.com/cloudecho/hello-world-go description : A hello-world program written in go lang. app : hello repository : url : https://cloudecho.github.io/charts/ name : cloudecho chart : name : hello version : 0.1.0 values : \"-- generate from values file --\" valuesExample : \"-- generate from values file --\" prerequisites : - \"Kubernetes v1.14+\" release : name : my-hello namespace : default Then append the text doc.yml into charts/hello/.helmignore file to avoid doc.yml to be packaged. Download the latest chart-doc-gen from github.com/kubepack/chart-doc-gen/releases and install it (e.g. copy it to /usr/local/bin/ ). 4.3 Create gh-pages branch for Github Page \u00b6 Create gh-pages branch and simultaneously switch to that branch. git checkout -b gh-pages Merge branch main into gh-pages : git merge main Now we can use chart-doc-gen to generate README.md file for chart hello : cd charts chart-doc-gen \\ -d = hello/doc.yml \\ -v = hello/values.yaml \\ > hello/README.md cd .. 4.4 Package and index helm charts \u00b6 Use the following command to package hello chart and index all the charts: helm package charts/hello helm repo index . --url https://<YOUR_GITHUB_USERNAME>.github.io/charts/ Check the chart package file ( hello-0.1.0.tgz ) and index.yaml file by using tree -L 1 : . \u251c\u2500\u2500 LICENSE \u251c\u2500\u2500 README.md \u251c\u2500\u2500 charts \u251c\u2500\u2500 hello-0.1.0.tgz \u2514\u2500\u2500 index.yaml We can also: check the content of index.xml by using cat index.yml command. check the content of hello-0.1.0.tgz by using tar -tvf hello-0.1.0.tgz command. 4.5 Make it simple by creating a Makefile \u00b6 Here are some works to update the repo for charts: On main branch: editing existing chart, e.g. charts/hello creating new chart, e.g. helm create charts/another-chart edit doc.yml / .helmignore Merge branch main into gh-pages On gh-pages branch: generationg README.md file for each chart package each chart index all the charts Let's create a Makefile file on gh-pages branch to simplify some works above (point 2-3: merge, doc, package and index), then we can do those works by using a single make command: e.g. CHARTS = $( shell ls charts ) default : index merge : GIT_MERGE_AUTOEDIT = no git merge main doc : $( foreach c, $( CHARTS ) , chart-doc-gen \\ -d = charts/ $( c ) /doc.yml \\ -v = charts/ $( c ) /values.yaml \\ > charts/ $( c ) /README.md ) package : merge doc $( foreach c, $( CHARTS ) , helm package charts/ $( c )) index : package helm repo index . --url https://cloudecho.github.io/charts/ See cloudecho/charts for more information about this example. 4.6 Settings for chart repository on Github site \u00b6 After pushing all the changes to remote git server (github site), let's have a look at the settings for chart repository on Github site. Open a web browser, go to https://github.com/ / /settings/pages Select gh-pages branch and /(root) directory as the source. (suggesstion) Make Enforce HTTPS checked. Source Branch: gh-pages /(root) [x] Enforce HTTPS Please refer to docs.github.com/en/pages for more information about Github Page. 5. Publish helm charts to artifacthub.io \u00b6 This is optional but very convenient for opensource charts as helping people to search and find your charts. Here are the steps: Go to https://artifacthub.io/ in a web browser Sign in, for example, with Github Go to the Control Panel/Repositories ( artifacthub.io/control-panel/repositories ) Click the ADD button on the right, select Helm charts as the kind, input the Name and Url , for example Kind Helm charts Name <YOUR_GITHUB_USERNAME> Url https://<YOUR_GITHUB_USERNAME>.github.io/charts/ Click the ADD button on the bottom to complete. Now we'll get an ID for this chart repository. To tell Artifact Hub that you're the owner of this chart repository, create a file named artifacthub-repo.yml and place it to the root path of the github repo for charts. The content of the file is like this: # Artifact Hub repository metadata file # # Some settings like the verified publisher flag or the ignored packages won't # be applied until the next time the repository is processed. Please keep in # mind that the repository won't be processed if it has not changed since the # last time it was processed. Depending on the repository kind, this is checked # in a different way. For Helm http based repositories, we consider it has # changed if the `index.yaml` file changes. For git based repositories, it does # when the hash of the last commit in the branch you set up changes. This does # NOT apply to ownership claim operations, which are processed immediately. # repositoryID : <repositoryid_from_artifacthub> owners : # (optional, used to claim repository ownership) - name : <your_username> email : <your_email> Once the chart repositry is processed by Artifact Hub, we can search our charts on the site. Also We can use helm search hub xxx command to search our charts. e.g. helm search hub hello 6. Deploy a chart into kubernetes \u00b6 As an example, let's follow the instruction of hello chart to deploy hello chart to an existing kubernetes. First, add a chart repo: helm repo add cloudecho https://cloudecho.github.io/charts/ helm repo update helm install my-hello cloudecho/hello -n default --version=0.1.0 Here is the Output : NAME: my-hello LAST DEPLOYED: Sat Sep 4 10:20:28 2021 NAMESPACE: default STATUS: deployed REVISION: 1 NOTES: 1. Get the application URL by running these commands: export POD_NAME=$(kubectl get pods --namespace default -l \"app.kubernetes.io/name=hello,app.kubernetes.io/instance=my-hello\" -o jsonpath=\"{.items[0].metadata.name}\") export CONTAINER_PORT=$(kubectl get pod --namespace default $POD_NAME -o jsonpath=\"{.spec.containers[0].ports[0].containerPort}\") echo \"Visit http://127.0.0.1:8080 to use your application\" kubectl --namespace default port-forward $POD_NAME 8080:$CONTAINER_PORT After running those commands above ( NOTES/1 ): Forwarding from 127.0.0.1:8080 -> 8080 Forwarding from [::1]:8080 -> 8080 Open another terminal, and input curl localhost:8080 command: Hello, World! 2021-09-04 02:28:56.8191115 +0000 UTC Reference \u00b6 helm.sh/docs/intro/quickstart helm.sh/docs/intro/using_helm/ helm.sh/docs/topics/charts helm.sh/docs/topics/chart_repository/#store-charts-in-your-chart-repository github.com/kubepack/chart-doc-gen","title":"Create a self-hosted helm chart and deploy it to kubernetes (v1.22)"},{"location":"OPENSOURCE/2021-09-04-create-a-self-hosted-helm-chart-and-deploy-it-to-k8s-1.22/#1-concepts","text":"Here are the descriptions from helm.sh : A Chart is a Helm package. It contains all of the resource definitions necessary to run an application, tool, or service inside of a Kubernetes cluster. Think of it like the Kubernetes equivalent of a Homebrew formula, an Apt dpkg, or a Yum RPM file. A Repository is the place where charts can be collected and shared. It's like Perl's CPAN archive or the Fedora Package Database, but for Kubernetes packages. A Release is an instance of a chart running in a Kubernetes cluster. One chart can often be installed many times into the same cluster. And each time it is installed, a new release is created. Consider a MySQL chart. If you want two databases running in your cluster, you can install that chart twice. Each one will have its own release, which will in turn have its own release name. Helm installs charts into Kubernetes, creating a new release for each installation. And to find new charts, you can search Helm chart repositories.","title":"1. Concepts"},{"location":"OPENSOURCE/2021-09-04-create-a-self-hosted-helm-chart-and-deploy-it-to-k8s-1.22/#2-install-kubectl-helm","text":"","title":"2. Install kubectl &amp; helm"},{"location":"OPENSOURCE/2021-09-04-create-a-self-hosted-helm-chart-and-deploy-it-to-k8s-1.22/#21-install-kubectl","text":"See install-kubectl-on-control-server .","title":"2.1 Install kubectl"},{"location":"OPENSOURCE/2021-09-04-create-a-self-hosted-helm-chart-and-deploy-it-to-k8s-1.22/#22-install-helm","text":"See github.com/helm/helm/releases for helm releases. For linux amd64 server: wget https://get.helm.sh/helm-v3.6.3-linux-amd64.tar.gz tar -zxvf helm-v3.6.3-linux-amd64.tar.gz sudo mv linux-amd64/helm /usr/local/bin/helm For macOS: brew install helm Check version helm version Output: version.BuildInfo { Version: \"v3.6.3\" , GitCommit: \"d506314abfb5d21419df8c7e7e68012379db2354\" , GitTreeState: \"clean\" , GoVersion: \"go1.16.5\" }","title":"2.2 Install helm"},{"location":"OPENSOURCE/2021-09-04-create-a-self-hosted-helm-chart-and-deploy-it-to-k8s-1.22/#3-create-a-helm-chart","text":"To get started with a new chart, the best way is to use helm create command to initialize a new chart. The following command create a chart named hello : helm create hello Let's take a look at the file structure of this chart by using tree -a hello command: hello \u251c\u2500\u2500 .helmignore \u251c\u2500\u2500 Chart.yaml \u251c\u2500\u2500 charts \u251c\u2500\u2500 templates \u2502 \u251c\u2500\u2500 NOTES.txt \u2502 \u251c\u2500\u2500 _helpers.tpl \u2502 \u251c\u2500\u2500 deployment.yaml \u2502 \u251c\u2500\u2500 hpa.yaml \u2502 \u251c\u2500\u2500 ingress.yaml \u2502 \u251c\u2500\u2500 service.yaml \u2502 \u251c\u2500\u2500 serviceaccount.yaml \u2502 \u2514\u2500\u2500 tests \u2502 \u2514\u2500\u2500 test-connection.yaml \u2514\u2500\u2500 values.yaml Now we can continue to complete this chart by editing the files above or adding some other files (such as template file or README.md etc.). See the-chart-file-structure for more information about the chart file structure. See charts/hello for more information about this example chart. By now, we can: Locally render templates by using helm template ./hello Deploy the example chart by using helm install my-hello-1 ./hello And test the connection by using helm test my-hello-1 But we can go further: Add README.md for a chart Package a chart Host charts by creating a chart repository Publish a chart repository to artifacthub.io","title":"3. Create a helm chart"},{"location":"OPENSOURCE/2021-09-04-create-a-self-hosted-helm-chart-and-deploy-it-to-k8s-1.22/#4-host-helm-charts-using-github-page","text":"","title":"4. Host helm charts using Github Page"},{"location":"OPENSOURCE/2021-09-04-create-a-self-hosted-helm-chart-and-deploy-it-to-k8s-1.22/#41-create-a-github-repo-for-helm-charts","text":"First let's create a empty repo on Github, for example, named charts , take main as the default branch. And clone it to your local server. git clone git@github.com:<YOUR_GITHUB_USERNAME>/charts.git cd charts Then create a directory named charts under the root path of this repo, place chart hello under the new created directory. Also create LICENSE and README.md files as you wish. By now the file structure of the repo like below: . \u251c\u2500\u2500 LICENSE \u251c\u2500\u2500 README.md \u2514\u2500\u2500 charts \u2514\u2500\u2500 hello \u251c\u2500\u2500 .helmignore \u251c\u2500\u2500 Chart.yaml \u251c\u2500\u2500 templates \u2502 \u251c\u2500\u2500 NOTES.txt \u2502 \u251c\u2500\u2500 _helpers.tpl \u2502 \u251c\u2500\u2500 deployment.yaml \u2502 \u251c\u2500\u2500 hpa.yaml \u2502 \u251c\u2500\u2500 ingress.yaml \u2502 \u251c\u2500\u2500 service.yaml \u2502 \u251c\u2500\u2500 serviceaccount.yaml \u2502 \u2514\u2500\u2500 tests \u2502 \u2514\u2500\u2500 test-connection.yaml \u2514\u2500\u2500 values.yaml","title":"4.1 Create a github repo for helm charts"},{"location":"OPENSOURCE/2021-09-04-create-a-self-hosted-helm-chart-and-deploy-it-to-k8s-1.22/#42-prepare-for-creating-readmemd-for-a-chart","text":"There is a tool named chart-doc-gen used for generating README.md for a chart. First let's create a file named doc.yml and place it to charts/hello directory. e.g. project : name : Hello World shortName : Hello url : https://github.com/cloudecho/hello-world-go description : A hello-world program written in go lang. app : hello repository : url : https://cloudecho.github.io/charts/ name : cloudecho chart : name : hello version : 0.1.0 values : \"-- generate from values file --\" valuesExample : \"-- generate from values file --\" prerequisites : - \"Kubernetes v1.14+\" release : name : my-hello namespace : default Then append the text doc.yml into charts/hello/.helmignore file to avoid doc.yml to be packaged. Download the latest chart-doc-gen from github.com/kubepack/chart-doc-gen/releases and install it (e.g. copy it to /usr/local/bin/ ).","title":"4.2 Prepare for creating README.md for a chart"},{"location":"OPENSOURCE/2021-09-04-create-a-self-hosted-helm-chart-and-deploy-it-to-k8s-1.22/#43-create-gh-pages-branch-for-github-page","text":"Create gh-pages branch and simultaneously switch to that branch. git checkout -b gh-pages Merge branch main into gh-pages : git merge main Now we can use chart-doc-gen to generate README.md file for chart hello : cd charts chart-doc-gen \\ -d = hello/doc.yml \\ -v = hello/values.yaml \\ > hello/README.md cd ..","title":"4.3 Create gh-pages branch for Github Page"},{"location":"OPENSOURCE/2021-09-04-create-a-self-hosted-helm-chart-and-deploy-it-to-k8s-1.22/#44-package-and-index-helm-charts","text":"Use the following command to package hello chart and index all the charts: helm package charts/hello helm repo index . --url https://<YOUR_GITHUB_USERNAME>.github.io/charts/ Check the chart package file ( hello-0.1.0.tgz ) and index.yaml file by using tree -L 1 : . \u251c\u2500\u2500 LICENSE \u251c\u2500\u2500 README.md \u251c\u2500\u2500 charts \u251c\u2500\u2500 hello-0.1.0.tgz \u2514\u2500\u2500 index.yaml We can also: check the content of index.xml by using cat index.yml command. check the content of hello-0.1.0.tgz by using tar -tvf hello-0.1.0.tgz command.","title":"4.4 Package and index helm charts"},{"location":"OPENSOURCE/2021-09-04-create-a-self-hosted-helm-chart-and-deploy-it-to-k8s-1.22/#45-make-it-simple-by-creating-a-makefile","text":"Here are some works to update the repo for charts: On main branch: editing existing chart, e.g. charts/hello creating new chart, e.g. helm create charts/another-chart edit doc.yml / .helmignore Merge branch main into gh-pages On gh-pages branch: generationg README.md file for each chart package each chart index all the charts Let's create a Makefile file on gh-pages branch to simplify some works above (point 2-3: merge, doc, package and index), then we can do those works by using a single make command: e.g. CHARTS = $( shell ls charts ) default : index merge : GIT_MERGE_AUTOEDIT = no git merge main doc : $( foreach c, $( CHARTS ) , chart-doc-gen \\ -d = charts/ $( c ) /doc.yml \\ -v = charts/ $( c ) /values.yaml \\ > charts/ $( c ) /README.md ) package : merge doc $( foreach c, $( CHARTS ) , helm package charts/ $( c )) index : package helm repo index . --url https://cloudecho.github.io/charts/ See cloudecho/charts for more information about this example.","title":"4.5 Make it simple by creating a Makefile"},{"location":"OPENSOURCE/2021-09-04-create-a-self-hosted-helm-chart-and-deploy-it-to-k8s-1.22/#46-settings-for-chart-repository-on-github-site","text":"After pushing all the changes to remote git server (github site), let's have a look at the settings for chart repository on Github site. Open a web browser, go to https://github.com/ / /settings/pages Select gh-pages branch and /(root) directory as the source. (suggesstion) Make Enforce HTTPS checked. Source Branch: gh-pages /(root) [x] Enforce HTTPS Please refer to docs.github.com/en/pages for more information about Github Page.","title":"4.6 Settings for chart repository on Github site"},{"location":"OPENSOURCE/2021-09-04-create-a-self-hosted-helm-chart-and-deploy-it-to-k8s-1.22/#5-publish-helm-charts-to-artifacthubio","text":"This is optional but very convenient for opensource charts as helping people to search and find your charts. Here are the steps: Go to https://artifacthub.io/ in a web browser Sign in, for example, with Github Go to the Control Panel/Repositories ( artifacthub.io/control-panel/repositories ) Click the ADD button on the right, select Helm charts as the kind, input the Name and Url , for example Kind Helm charts Name <YOUR_GITHUB_USERNAME> Url https://<YOUR_GITHUB_USERNAME>.github.io/charts/ Click the ADD button on the bottom to complete. Now we'll get an ID for this chart repository. To tell Artifact Hub that you're the owner of this chart repository, create a file named artifacthub-repo.yml and place it to the root path of the github repo for charts. The content of the file is like this: # Artifact Hub repository metadata file # # Some settings like the verified publisher flag or the ignored packages won't # be applied until the next time the repository is processed. Please keep in # mind that the repository won't be processed if it has not changed since the # last time it was processed. Depending on the repository kind, this is checked # in a different way. For Helm http based repositories, we consider it has # changed if the `index.yaml` file changes. For git based repositories, it does # when the hash of the last commit in the branch you set up changes. This does # NOT apply to ownership claim operations, which are processed immediately. # repositoryID : <repositoryid_from_artifacthub> owners : # (optional, used to claim repository ownership) - name : <your_username> email : <your_email> Once the chart repositry is processed by Artifact Hub, we can search our charts on the site. Also We can use helm search hub xxx command to search our charts. e.g. helm search hub hello","title":"5. Publish helm charts to artifacthub.io"},{"location":"OPENSOURCE/2021-09-04-create-a-self-hosted-helm-chart-and-deploy-it-to-k8s-1.22/#6-deploy-a-chart-into-kubernetes","text":"As an example, let's follow the instruction of hello chart to deploy hello chart to an existing kubernetes. First, add a chart repo: helm repo add cloudecho https://cloudecho.github.io/charts/ helm repo update helm install my-hello cloudecho/hello -n default --version=0.1.0 Here is the Output : NAME: my-hello LAST DEPLOYED: Sat Sep 4 10:20:28 2021 NAMESPACE: default STATUS: deployed REVISION: 1 NOTES: 1. Get the application URL by running these commands: export POD_NAME=$(kubectl get pods --namespace default -l \"app.kubernetes.io/name=hello,app.kubernetes.io/instance=my-hello\" -o jsonpath=\"{.items[0].metadata.name}\") export CONTAINER_PORT=$(kubectl get pod --namespace default $POD_NAME -o jsonpath=\"{.spec.containers[0].ports[0].containerPort}\") echo \"Visit http://127.0.0.1:8080 to use your application\" kubectl --namespace default port-forward $POD_NAME 8080:$CONTAINER_PORT After running those commands above ( NOTES/1 ): Forwarding from 127.0.0.1:8080 -> 8080 Forwarding from [::1]:8080 -> 8080 Open another terminal, and input curl localhost:8080 command: Hello, World! 2021-09-04 02:28:56.8191115 +0000 UTC","title":"6. Deploy a chart into kubernetes"},{"location":"OPENSOURCE/2021-09-04-create-a-self-hosted-helm-chart-and-deploy-it-to-k8s-1.22/#reference","text":"helm.sh/docs/intro/quickstart helm.sh/docs/intro/using_helm/ helm.sh/docs/topics/charts helm.sh/docs/topics/chart_repository/#store-charts-in-your-chart-repository github.com/kubepack/chart-doc-gen","title":"Reference"},{"location":"OPENSOURCE/2021-11-01-javase17-gctuning/","tags":["java","jvm","gc","tuning"],"text":"Java Platform, Standard Edition HotSpot Virtual Machine Garbage Collection Tuning Guide Release 17 F41050-01 September 2021 This guide describes the garbage collection methods included in the Java HotSpot Virtual Machine (Java HotSpot VM) and helps you determine which one is the best for your needs. See https://docs.oracle.com/en/java/javase/17/gctuning/ PDF","title":"HotSpot Virtual Machine Garbage Collection Tuning Guide (Release 17)"},{"location":"OPENSOURCE/2021-11-09-getting-started-with-docker-swarm-mode/","tags":["docker","swarm","cloudnative"],"text":"1. Preparation \u00b6 1.1 KVMs \u00b6 3 KVMs Hostname vCPUs Memory Swap IP OS sudoer minion01 .k8s 2 8G 0 192.168.122.101 CentOS 7 echo minion02 .k8s 2 8G 0 192.168.122.102 CentOS 7 echo minion03 .k8s 2 8G 0 192.168.122.103 CentOS 7 echo 1.2 Install Ansible on Host machine \u00b6 # Install ansible on host machine sudo yum install ansible 1.3 Password free configuration \u00b6 cat <<EOF | sudo tee -a /etc/ansible/hosts [swarm-nodes] minion01.k8s minion02.k8s minion03.k8s EOF # Have a test ansible swarm-nodes --ask-pass -u echo -m shell -a 'echo ok' # Password free for login ansible swarm-nodes --ask-pass -u echo -m file -a \"path=.ssh state=directory mode=700\" ansible swarm-nodes --ask-pass -u echo -m copy -a \"src=~/.ssh/id_rsa.pub dest=.ssh/authorized_keys mode=600\" # Password free for sudo ansible swarm-nodes --ask-pass -u echo -b -m shell -a \"echo 'echo ALL=(ALL) NOPASSWD: ALL' >> /etc/sudoers\" # Now we can have a test as below ansible swarm-nodes -u echo -m shell -a 'echo ok' 1.4 DNS via hosts file \u00b6 cat <<EOF > /tmp/add-hosts.sh cat <<EEE >> /etc/hosts 192.168.122.101 minion01.k8s 192.168.122.102 minion02.k8s 192.168.122.103 minion03.k8s EEE EOF ansible swarm-nodes -u echo -b -m script -a \"/tmp/add-hosts.sh\" 2. Open protocols and ports between the hosts \u00b6 The following ports must be available. On some systems, these ports are open by default. TCP port 2377 for cluster management communications TCP and UDP port 7946 for communication among nodes UDP port 4789 for overlay network traffic If you plan on creating an overlay network with encryption (--opt encrypted), you also need to ensure ip protocol 50 (ESP) traffic is allowed cat <<EOF > /tmp/required-ports.sh firewall-cmd --permanent --add-port=2377/tcp firewall-cmd --permanent --add-port=7946/tcp --add-port=7946/udp firewall-cmd --permanent --add-port=4789/udp # NOTE: published ports (for demo use) firewall-cmd --permanent --add-port=30000-32767/tcp firewall-cmd --reload EOF ansible swarm-nodes -u echo -b -m script -a '/tmp/required-ports.sh' 3. Install docker-ce as the container runtime \u00b6 3.1 Install container-selinux \u00b6 ansible swarm-nodes -u echo -m shell -a \\ 'sudo yum --enablerepo=extras install -y container-selinux' 3.2 Check docker-ce version \u00b6 yum --showduplicates list docker-ce 3.3 Install docker-ce \u00b6 NOTE: Use your mirror of dockerhub cat <<EEE > /tmp/install-docker.sh # Install Docker CE 18.06 from Docker's CentOS repositories: ## Install prerequisites. yum -y install yum-utils device-mapper-persistent-data lvm2 ## Add docker repository. yum-config-manager \\ --add-repo \\ https://download.docker.com/linux/centos/docker-ce.repo ## Install docker. yum -y install docker-ce-18.06.1.ce-3.el7 systemctl enable docker # Setup daemon. mkdir -p /etc/docker/ cat > /etc/docker/daemon.json <<EOF { # NOTE: Use your mirror of dockerhub \"registry-mirrors\": [\"https://z7sy3gme.mirror.aliyuncs.com\"], \"exec-opts\": [\"native.cgroupdriver=systemd\"], \"log-driver\": \"json-file\", \"log-opts\": { \"max-size\": \"100m\" }, \"storage-driver\": \"overlay2\", \"storage-opts\": [ \"overlay2.override_kernel_check=true\" ] } EOF mkdir -p /etc/systemd/system/docker.service.d # Restart docker. systemctl daemon-reload systemctl restart docker EEE ansible swarm-nodes -u echo -b -m script -a '/tmp/install-docker.sh' 4 Getting started with swarm mode \u00b6 Swarm mode overview Swarm mode key concepts 4.1 Create a new swarm \u00b6 On minon01.k8s: $ sudo docker swarm init --advertise-addr 192 .168.122.101 Swarm initialized: current node ( 3zvaz0q6iz91oe92zsfn79rl9 ) is now a manager. To add a worker to this swarm, run the following command: docker swarm join --token SWMTKN-1-1vf3r7evq3f28kl0jmki57xdo6yfnwpnivyee53y1otjemeu5u-3mrpqzlbdyjiwgqehsjff5cfy 192 .168.122.101:2377 To add a manager to this swarm, run 'docker swarm join-token manager' and follow the instructions. On minon02.k8s, minon03.k8s: $ sudo docker swarm join --token SWMTKN-1-1vf3r7evq3f28kl0jmki57xdo6yfnwpnivyee53y1otjemeu5u-3mrpqzlbdyjiwgqehsjff5cfy 192 .168.122.101:2377 This node joined a swarm as a worker. 4.1.1 View the current state of the swarm \u00b6 [ echo@minion01 ~ ] $ sudo docker info ... ... Server Version: 18 .06.1-ce Storage Driver: overlay2 Backing Filesystem: xfs Supports d_type: true Native Overlay Diff: true Logging Driver: json-file Cgroup Driver: systemd Plugins: Volume: local Network: bridge host macvlan null overlay Log: awslogs fluentd gcplogs gelf journald json-file logentries splunk syslog Swarm: active NodeID: 3zvaz0q6iz91oe92zsfn79rl9 Is Manager: true ClusterID: 9yfajds9vesoci8h3y6kryftq Managers: 1 Nodes: 3 ... ... 4.1.2 View information about nodes \u00b6 [ echo@minion01 ~ ] $ sudo docker node ls ID HOSTNAME STATUS AVAILABILITY MANAGER STATUS ENGINE VERSION 3zvaz0q6iz91oe92zsfn79rl9 * minion01.k8s Ready Active Leader 18 .06.1-ce m4ppispuk9ssenwfb547vlfx7 minion02.k8s Ready Active 18 .06.1-ce utczs0xf0k8asv5xhk53h8dhw minion03.k8s Ready Active 18 .06.1-ce NOTE : - The * next to the node ID indicates that you\u2019re currently connected on this node. - Swarm management commands like docker node ls only work on manager nodes. 4.2 Deploy a service \u00b6 e.g. $ sudo docker service create --replicas 1 --name helloworld cloudecho/hello vct016qjdzf5vglo6zgjq0w79 overall progress: 1 out of 1 tasks 1 /1: running [================================================== > ] verify: Service converged [echo@minion01 ~]$ sudo docker service ls ID NAME MODE REPLICAS IMAGE PORTS vct016qjdzf5 helloworld replicated 1/1 cloudecho/hello:latest 4.3 Inspect a service on the swarm \u00b6 e.g. sudo docker service inspect --pretty helloworld sudo docker service ps helloworld sudo docker ps See docs.docker.com/engine/swarm/swarm-tutorial/inspect-service/ for more information. 4.4 Scale the service in the swarm \u00b6 e.g. [ echo@minion01 ~ ] $ sudo docker service scale helloworld = 3 helloworld scaled to 3 overall progress: 3 out of 3 tasks 1 /3: running [================================================== > ] 2 /3: running [================================================== > ] 3 /3: running [================================================== > ] verify: Service converged [echo@minion01 ~]$ sudo docker service ps helloworld ID NAME IMAGE NODE DESIRED STATE CURRENT STATE ERROR PORTS pejk5rws46iu helloworld.1 cloudecho/hello:latest minion01.k8s Running Running about an hour ago ayddx4mm23du helloworld.2 cloudecho/hello:latest minion02.k8s Running Running 8 minutes ago oun32xdz6fi1 helloworld.3 cloudecho/hello:latest minion03.k8s Running Running 7 minutes ago See docs.docker.com/engine/swarm/swarm-tutorial/scale-service/ for more information. 4.5 Delete the service running on the swarm \u00b6 e.g. sudo docker service rm helloworld 4.6 Apply rolling updates to a service \u00b6 See docs.docker.com/engine/swarm/swarm-tutorial/rolling-update/ 4.7 Drain a node on the swarm \u00b6 In earlier steps of the tutorial, all the nodes have been running with ACTIVE availability. The swarm manager can assign tasks to any ACTIVE node, so up to now all nodes have been available to receive tasks. Sometimes, such as planned maintenance times, you need to set a node to DRAIN availability. DRAIN availability prevents a node from receiving new tasks from the swarm manager. It also means the manager stops tasks running on the node and launches replica tasks on a node with ACTIVE availability. See docs.docker.com/engine/swarm/swarm-tutorial/drain-node/ for more information. 4.8 Publish a port for a service \u00b6 e.g. $ sudo docker service create --replicas 1 --name helloworld --publish published = 30001 ,target = 8080 cloudecho/hello Publish a port for an existing service: e.g. [ echo@minion01 ~ ] $ sudo docker service update helloworld --publish-add published = 30001 ,target = 8080 helloworld overall progress: 3 out of 3 tasks 1 /3: running [================================================== > ] 2 /3: running [================================================== > ] 3 /3: running [================================================== > ] verify: Service converged [ echo@minion01 ~ ] $ sudo docker service ls ID NAME MODE REPLICAS IMAGE PORTS vct016qjdzf5 helloworld replicated 3 /3 cloudecho/hello:latest *:30001->8080/tcp Have a test using curl : [ echo@minion01 ~ ] $ curl http://minion02.k8s:30001 Hello, World! 2021 -11-09 09 :03:59.794006337 +0000 UTC See https://docs.docker.com/engine/swarm/ingress/ for more information. Reference \u00b6 docs.docker.com/engine/swarm/ docs.docker.com/engine/swarm/key-concepts/ docs.docker.com/engine/swarm/swarm-tutorial/ docs.docker.com/engine/swarm/ingress/","title":"Getting started with docker swarm mode"},{"location":"OPENSOURCE/2021-11-09-getting-started-with-docker-swarm-mode/#1-preparation","text":"","title":"1. Preparation"},{"location":"OPENSOURCE/2021-11-09-getting-started-with-docker-swarm-mode/#11-kvms","text":"3 KVMs Hostname vCPUs Memory Swap IP OS sudoer minion01 .k8s 2 8G 0 192.168.122.101 CentOS 7 echo minion02 .k8s 2 8G 0 192.168.122.102 CentOS 7 echo minion03 .k8s 2 8G 0 192.168.122.103 CentOS 7 echo","title":"1.1 KVMs"},{"location":"OPENSOURCE/2021-11-09-getting-started-with-docker-swarm-mode/#12-install-ansible-on-host-machine","text":"# Install ansible on host machine sudo yum install ansible","title":"1.2 Install Ansible on Host machine"},{"location":"OPENSOURCE/2021-11-09-getting-started-with-docker-swarm-mode/#13-password-free-configuration","text":"cat <<EOF | sudo tee -a /etc/ansible/hosts [swarm-nodes] minion01.k8s minion02.k8s minion03.k8s EOF # Have a test ansible swarm-nodes --ask-pass -u echo -m shell -a 'echo ok' # Password free for login ansible swarm-nodes --ask-pass -u echo -m file -a \"path=.ssh state=directory mode=700\" ansible swarm-nodes --ask-pass -u echo -m copy -a \"src=~/.ssh/id_rsa.pub dest=.ssh/authorized_keys mode=600\" # Password free for sudo ansible swarm-nodes --ask-pass -u echo -b -m shell -a \"echo 'echo ALL=(ALL) NOPASSWD: ALL' >> /etc/sudoers\" # Now we can have a test as below ansible swarm-nodes -u echo -m shell -a 'echo ok'","title":"1.3 Password free configuration"},{"location":"OPENSOURCE/2021-11-09-getting-started-with-docker-swarm-mode/#14-dns-via-hosts-file","text":"cat <<EOF > /tmp/add-hosts.sh cat <<EEE >> /etc/hosts 192.168.122.101 minion01.k8s 192.168.122.102 minion02.k8s 192.168.122.103 minion03.k8s EEE EOF ansible swarm-nodes -u echo -b -m script -a \"/tmp/add-hosts.sh\"","title":"1.4 DNS via hosts file"},{"location":"OPENSOURCE/2021-11-09-getting-started-with-docker-swarm-mode/#2-open-protocols-and-ports-between-the-hosts","text":"The following ports must be available. On some systems, these ports are open by default. TCP port 2377 for cluster management communications TCP and UDP port 7946 for communication among nodes UDP port 4789 for overlay network traffic If you plan on creating an overlay network with encryption (--opt encrypted), you also need to ensure ip protocol 50 (ESP) traffic is allowed cat <<EOF > /tmp/required-ports.sh firewall-cmd --permanent --add-port=2377/tcp firewall-cmd --permanent --add-port=7946/tcp --add-port=7946/udp firewall-cmd --permanent --add-port=4789/udp # NOTE: published ports (for demo use) firewall-cmd --permanent --add-port=30000-32767/tcp firewall-cmd --reload EOF ansible swarm-nodes -u echo -b -m script -a '/tmp/required-ports.sh'","title":"2. Open protocols and ports between the hosts"},{"location":"OPENSOURCE/2021-11-09-getting-started-with-docker-swarm-mode/#3-install-docker-ce-as-the-container-runtime","text":"","title":"3. Install docker-ce as the container runtime"},{"location":"OPENSOURCE/2021-11-09-getting-started-with-docker-swarm-mode/#31-install-container-selinux","text":"ansible swarm-nodes -u echo -m shell -a \\ 'sudo yum --enablerepo=extras install -y container-selinux'","title":"3.1 Install container-selinux"},{"location":"OPENSOURCE/2021-11-09-getting-started-with-docker-swarm-mode/#32-check-docker-ce-version","text":"yum --showduplicates list docker-ce","title":"3.2 Check docker-ce version"},{"location":"OPENSOURCE/2021-11-09-getting-started-with-docker-swarm-mode/#33-install-docker-ce","text":"NOTE: Use your mirror of dockerhub cat <<EEE > /tmp/install-docker.sh # Install Docker CE 18.06 from Docker's CentOS repositories: ## Install prerequisites. yum -y install yum-utils device-mapper-persistent-data lvm2 ## Add docker repository. yum-config-manager \\ --add-repo \\ https://download.docker.com/linux/centos/docker-ce.repo ## Install docker. yum -y install docker-ce-18.06.1.ce-3.el7 systemctl enable docker # Setup daemon. mkdir -p /etc/docker/ cat > /etc/docker/daemon.json <<EOF { # NOTE: Use your mirror of dockerhub \"registry-mirrors\": [\"https://z7sy3gme.mirror.aliyuncs.com\"], \"exec-opts\": [\"native.cgroupdriver=systemd\"], \"log-driver\": \"json-file\", \"log-opts\": { \"max-size\": \"100m\" }, \"storage-driver\": \"overlay2\", \"storage-opts\": [ \"overlay2.override_kernel_check=true\" ] } EOF mkdir -p /etc/systemd/system/docker.service.d # Restart docker. systemctl daemon-reload systemctl restart docker EEE ansible swarm-nodes -u echo -b -m script -a '/tmp/install-docker.sh'","title":"3.3 Install docker-ce"},{"location":"OPENSOURCE/2021-11-09-getting-started-with-docker-swarm-mode/#4-getting-started-with-swarm-mode","text":"Swarm mode overview Swarm mode key concepts","title":"4 Getting started with swarm mode"},{"location":"OPENSOURCE/2021-11-09-getting-started-with-docker-swarm-mode/#41-create-a-new-swarm","text":"On minon01.k8s: $ sudo docker swarm init --advertise-addr 192 .168.122.101 Swarm initialized: current node ( 3zvaz0q6iz91oe92zsfn79rl9 ) is now a manager. To add a worker to this swarm, run the following command: docker swarm join --token SWMTKN-1-1vf3r7evq3f28kl0jmki57xdo6yfnwpnivyee53y1otjemeu5u-3mrpqzlbdyjiwgqehsjff5cfy 192 .168.122.101:2377 To add a manager to this swarm, run 'docker swarm join-token manager' and follow the instructions. On minon02.k8s, minon03.k8s: $ sudo docker swarm join --token SWMTKN-1-1vf3r7evq3f28kl0jmki57xdo6yfnwpnivyee53y1otjemeu5u-3mrpqzlbdyjiwgqehsjff5cfy 192 .168.122.101:2377 This node joined a swarm as a worker.","title":"4.1 Create a new swarm"},{"location":"OPENSOURCE/2021-11-09-getting-started-with-docker-swarm-mode/#411-view-the-current-state-of-the-swarm","text":"[ echo@minion01 ~ ] $ sudo docker info ... ... Server Version: 18 .06.1-ce Storage Driver: overlay2 Backing Filesystem: xfs Supports d_type: true Native Overlay Diff: true Logging Driver: json-file Cgroup Driver: systemd Plugins: Volume: local Network: bridge host macvlan null overlay Log: awslogs fluentd gcplogs gelf journald json-file logentries splunk syslog Swarm: active NodeID: 3zvaz0q6iz91oe92zsfn79rl9 Is Manager: true ClusterID: 9yfajds9vesoci8h3y6kryftq Managers: 1 Nodes: 3 ... ...","title":"4.1.1 View the current state of the swarm"},{"location":"OPENSOURCE/2021-11-09-getting-started-with-docker-swarm-mode/#412-view-information-about-nodes","text":"[ echo@minion01 ~ ] $ sudo docker node ls ID HOSTNAME STATUS AVAILABILITY MANAGER STATUS ENGINE VERSION 3zvaz0q6iz91oe92zsfn79rl9 * minion01.k8s Ready Active Leader 18 .06.1-ce m4ppispuk9ssenwfb547vlfx7 minion02.k8s Ready Active 18 .06.1-ce utczs0xf0k8asv5xhk53h8dhw minion03.k8s Ready Active 18 .06.1-ce NOTE : - The * next to the node ID indicates that you\u2019re currently connected on this node. - Swarm management commands like docker node ls only work on manager nodes.","title":"4.1.2 View information about nodes"},{"location":"OPENSOURCE/2021-11-09-getting-started-with-docker-swarm-mode/#42-deploy-a-service","text":"e.g. $ sudo docker service create --replicas 1 --name helloworld cloudecho/hello vct016qjdzf5vglo6zgjq0w79 overall progress: 1 out of 1 tasks 1 /1: running [================================================== > ] verify: Service converged [echo@minion01 ~]$ sudo docker service ls ID NAME MODE REPLICAS IMAGE PORTS vct016qjdzf5 helloworld replicated 1/1 cloudecho/hello:latest","title":"4.2 Deploy a service"},{"location":"OPENSOURCE/2021-11-09-getting-started-with-docker-swarm-mode/#43-inspect-a-service-on-the-swarm","text":"e.g. sudo docker service inspect --pretty helloworld sudo docker service ps helloworld sudo docker ps See docs.docker.com/engine/swarm/swarm-tutorial/inspect-service/ for more information.","title":"4.3 Inspect a service on the swarm"},{"location":"OPENSOURCE/2021-11-09-getting-started-with-docker-swarm-mode/#44-scale-the-service-in-the-swarm","text":"e.g. [ echo@minion01 ~ ] $ sudo docker service scale helloworld = 3 helloworld scaled to 3 overall progress: 3 out of 3 tasks 1 /3: running [================================================== > ] 2 /3: running [================================================== > ] 3 /3: running [================================================== > ] verify: Service converged [echo@minion01 ~]$ sudo docker service ps helloworld ID NAME IMAGE NODE DESIRED STATE CURRENT STATE ERROR PORTS pejk5rws46iu helloworld.1 cloudecho/hello:latest minion01.k8s Running Running about an hour ago ayddx4mm23du helloworld.2 cloudecho/hello:latest minion02.k8s Running Running 8 minutes ago oun32xdz6fi1 helloworld.3 cloudecho/hello:latest minion03.k8s Running Running 7 minutes ago See docs.docker.com/engine/swarm/swarm-tutorial/scale-service/ for more information.","title":"4.4 Scale the service in the swarm"},{"location":"OPENSOURCE/2021-11-09-getting-started-with-docker-swarm-mode/#45-delete-the-service-running-on-the-swarm","text":"e.g. sudo docker service rm helloworld","title":"4.5 Delete the service running on the swarm"},{"location":"OPENSOURCE/2021-11-09-getting-started-with-docker-swarm-mode/#46-apply-rolling-updates-to-a-service","text":"See docs.docker.com/engine/swarm/swarm-tutorial/rolling-update/","title":"4.6 Apply rolling updates to a service"},{"location":"OPENSOURCE/2021-11-09-getting-started-with-docker-swarm-mode/#47-drain-a-node-on-the-swarm","text":"In earlier steps of the tutorial, all the nodes have been running with ACTIVE availability. The swarm manager can assign tasks to any ACTIVE node, so up to now all nodes have been available to receive tasks. Sometimes, such as planned maintenance times, you need to set a node to DRAIN availability. DRAIN availability prevents a node from receiving new tasks from the swarm manager. It also means the manager stops tasks running on the node and launches replica tasks on a node with ACTIVE availability. See docs.docker.com/engine/swarm/swarm-tutorial/drain-node/ for more information.","title":"4.7 Drain a node on the swarm"},{"location":"OPENSOURCE/2021-11-09-getting-started-with-docker-swarm-mode/#48-publish-a-port-for-a-service","text":"e.g. $ sudo docker service create --replicas 1 --name helloworld --publish published = 30001 ,target = 8080 cloudecho/hello Publish a port for an existing service: e.g. [ echo@minion01 ~ ] $ sudo docker service update helloworld --publish-add published = 30001 ,target = 8080 helloworld overall progress: 3 out of 3 tasks 1 /3: running [================================================== > ] 2 /3: running [================================================== > ] 3 /3: running [================================================== > ] verify: Service converged [ echo@minion01 ~ ] $ sudo docker service ls ID NAME MODE REPLICAS IMAGE PORTS vct016qjdzf5 helloworld replicated 3 /3 cloudecho/hello:latest *:30001->8080/tcp Have a test using curl : [ echo@minion01 ~ ] $ curl http://minion02.k8s:30001 Hello, World! 2021 -11-09 09 :03:59.794006337 +0000 UTC See https://docs.docker.com/engine/swarm/ingress/ for more information.","title":"4.8 Publish a port for a service"},{"location":"OPENSOURCE/2021-11-09-getting-started-with-docker-swarm-mode/#reference","text":"docs.docker.com/engine/swarm/ docs.docker.com/engine/swarm/key-concepts/ docs.docker.com/engine/swarm/swarm-tutorial/ docs.docker.com/engine/swarm/ingress/","title":"Reference"},{"location":"OPENSOURCE/2021-11-29-install-glusterfs-on-centos7/","tags":["glusterfs","centos"],"text":"1. Preparation \u00b6 1.1 KVMs \u00b6 3 KVMs Hostname vCPUs Memory Swap IP OS sudoer Data Storage gluster01 2 2G 0 192.168.122.191 CentOS 7 echo 100G gluster02 2 2G 0 192.168.122.192 CentOS 7 echo 100G gluster03 2 2G 0 192.168.122.193 CentOS 7 echo 100G Attach a disk image on those KVMs accordingly if needed. Here are the steps. STEP 1. Create the new disk images On the host server # Where your disk images store in cd /data/vm_storage/ # Create the new disk image sudo qemu-img create -f raw gluster01-disk1-100G 100G sudo qemu-img create -f raw gluster02-disk1-100G 100G sudo qemu-img create -f raw gluster03-disk1-100G 100G sudo chown qemu:qemu gluster { 01 ,02,03 } -disk1-100G STEP 2. Attach the disk to the virtual machine sudo virsh attach-disk gluster01 /data/vm_storage/gluster01-disk1-100G vdb --cache none sudo virsh attach-disk gluster02 /data/vm_storage/gluster02-disk1-100G vdb --cache none sudo virsh attach-disk gluster03 /data/vm_storage/gluster03-disk1-100G vdb --cache none NOTE: If you already have a /dev/vdb disk you need to change vdb to a free device like /dev/vdc and so on. NOTE: For attaching permanently the disk image to the VM, you should edit the VM configuration file, e.g. sudo virsh edit gluster01 , add the following XML fragment into the <devices> section: <disk type= 'file' device= 'disk' > <driver name= 'qemu' type= 'raw' /> <source file= '/data/vm_storage/gluster01-disk1-100G' /> <target dev= 'vdb' bus= 'virtio' /> <address type= 'pci' domain= '0x0000' bus= '0x00' slot= '0x09' function= '0x0' /> </disk> STEP 3. Partitioning the disk drive in VMs On KVM gluster{01,02,03} Login into KVM gluster{01,02,03}. sudo fdisk -l | grep /dev/vd sudo fdisk /dev/vdb Type n for a new partition. Type p for a primary partition. Choose an available partition number 1 . Enter the default first cylinder by pressing Enter . Choose the entire disk is allocated by pressing Enter . Finally type p to verify new partition. Enter w to write changes and quit. 1.2 Install Ansible on the host machine \u00b6 # Install ansible on host machine sudo yum install ansible 1.3 Password free configuration \u00b6 cat <<EOF | sudo tee -a /etc/hosts 192.168.122.191 gluster01 192.168.122.192 gluster02 192.168.122.193 gluster03 EOF cat <<EOF | sudo tee -a /etc/ansible/hosts [gluster] gluster01 gluster02 gluster03 EOF # Have a test ansible gluster --ask-pass -u echo -m shell -a 'echo ok' # Password free for login ansible gluster --ask-pass -u echo -m file -a \"path=.ssh state=directory mode=700\" ansible gluster --ask-pass -u echo -m copy -a \"src=~/.ssh/id_rsa.pub dest=.ssh/authorized_keys mode=600\" # Password free for sudo ansible gluster --ask-pass -u echo -b -m shell -a \"echo 'echo ALL=(ALL) NOPASSWD: ALL' >> /etc/sudoers\" # Now we can have a test as below ansible gluster -u echo -m shell -a 'echo ok' 1.4 DNS via hosts file \u00b6 cat <<EOF > /tmp/add-hosts.sh cat <<EEE >> /etc/hosts 192.168.122.191 gluster01 192.168.122.192 gluster02 192.168.122.193 gluster03 EEE EOF ansible gluster -u echo -b -m script -a \"/tmp/add-hosts.sh\" 2. Configure the firewall \u00b6 Ensure that TCP and UDP ports 24007 and 24008 are open on all Gluster servers. Apart from these ports, you need to open one port for each brick starting from port 49152 (instead of 24009 onwards as with previous releases). cat <<EOF > /tmp/required-ports.sh firewall-cmd --permanent --add-port=24007-24008/tcp --add-port=24007-24008/udp firewall-cmd --permanent --add-port=49152-50151/tcp firewall-cmd --reload EOF ansible gluster -u echo -b -m script -a '/tmp/required-ports.sh' 3. Format and mount the device of gluster brick \u00b6 NOTE: Assume that the brick will be residing on /dev/vdb1 . On the host server: cat <<EOF > /tmp/mount-brick.sh mkfs.xfs -i size=512 /dev/vdb1 mkdir -p /data/brick1 echo '/dev/vdb1 /data/brick1 xfs defaults 1 2' >> /etc/fstab mount -a EOF ansible gluster -u echo -b -m script -a '/tmp/mount-brick.sh' 4. Installing GlusterFS \u00b6 4.1 Install the software \u00b6 On the host server Lookup centos glusterfs software packages yum search centos-release-gluster Install Gluster 9 packages ( centos-release-gluster9 ) cat <<EOF > /tmp/install-gluster.sh yum install centos-release-gluster9 -y yum install glusterfs gluster-cli glusterfs-libs glusterfs-server -y EOF ansible gluster -u echo -b -m script -a '/tmp/install-gluster.sh' Login into gluster01 Check the installed software packages. $ rpm -qa | grep gluster libglusterfs0-9.4-1.el7.x86_64 glusterfs-9.4-1.el7.x86_64 glusterfs-server-9.4-1.el7.x86_64 centos-release-gluster9-1.0-1.el7.noarch glusterfs-client-xlators-9.4-1.el7.x86_64 libglusterd0-9.4-1.el7.x86_64 glusterfs-fuse-9.4-1.el7.x86_64 glusterfs-cli-9.4-1.el7.x86_64 4.2 Enable & start the glusterd service \u00b6 cat <<EOF > /tmp/start-glusterd.sh systemctl enable glusterd.service systemctl start glusterd.service EOF ansible gluster -u echo -b -m script -a '/tmp/start-glusterd.sh' 4.3 Configure the trusted pool \u00b6 From gluster01 sudo gluster peer probe gluster02 sudo gluster peer probe gluster03 Check the peer status $ sudo gluster peer status Number of Peers: 2 Hostname: gluster02 Uuid: 3313ad84-ca67-4b8b-8aa3-a0aaa104591e State: Peer in Cluster ( Connected ) Hostname: gluster03 Uuid: 3ed0ee52-9af5-4f81-a15b-f841c5ab1754 State: Peer in Cluster ( Connected ) $ sudo gluster pool list UUID Hostname State 3313ad84-ca67-4b8b-8aa3-a0aaa104591e gluster02 Connected 3ed0ee52-9af5-4f81-a15b-f841c5ab1754 gluster03 Connected 49d29ad7-afe1-49e5-9fe4-497688f1426c localhost Connected 5. Set up a GlusterFS volume \u00b6 5.1 Set up a volume named gv0 \u00b6 On the host server ansible gluster -u echo -b -m shell -a 'mkdir -p /data/brick1/gv0' From gluster01 Create a replicated volume by specifing the parameter replica to be 3: sudo gluster volume create gv0 replica 3 \\ gluster01:/data/brick1/gv0 \\ gluster02:/data/brick1/gv0 \\ gluster03:/data/brick1/gv0 #OUTPUT: #volume create: gv0: success: please start the volume to access data sudo gluster volume start gv0 #OUTPUT: #volume start: gv0: success Confirm that the volume shows \" Started \": $ sudo gluster volume info Volume Name: gv0 Type: Replicate Volume ID: cd783e4a-a569-4cf2-894e-98cf1a7f180b Status: Started Snapshot Count: 0 Number of Bricks: 1 x 3 = 3 Transport-type: tcp Bricks: Brick1: gluster01:/data/brick1/gv0 Brick2: gluster02:/data/brick1/gv0 Brick3: gluster03:/data/brick1/gv0 Options Reconfigured: cluster.granular-entry-heal: on storage.fips-mode-rchecksum: on transport.address-family: inet nfs.disable: on performance.client-io-threads: off NOTE: If the volume does not show \" Started \", the files under /var/log/glusterfs/glusterd.log should be checked in order to debug and diagnose the situation. These logs can be looked at on one or, all the servers configured. 5.2 Testing the volume \u00b6 From gluster01 sudo mkdir -p /mnt/gv0 sudo mount -t glusterfs gluster01:/gv0 /mnt/gv0 for i in ` seq -w 1 10 ` ; do sudo cp -rp /etc/hosts /mnt/gv0/copy-test- $i ; done First, check the client mount point: ls -lA /mnt/gv0/copy* | wc -l You should see 10 files returned. Next, check the GlusterFS brick mount points on each server ( gluster{01,02,03} ): ls -lA /data/brick1/gv0/copy* NOTE: Typically, you would do this from an external machine, known as a \"client\". It requires additional packages to be installed on the client machine. e.g. sudo yum install centos-release-gluster9 -y sudo yum install glusterfs glusterfs-fuse -y Reference \u00b6 how-to-add-disk-image-to-kvm-virtual-machine-with-virsh-command Quick-Start-Guide/Quickstart Quick-Start-Guide/Architecture Administrator-Guide/Setting-Up-Clients Administrator-Guide/Split-brain-and-ways-to-deal-with-it","title":"Install Glusterfs on Centos 7"},{"location":"OPENSOURCE/2021-11-29-install-glusterfs-on-centos7/#1-preparation","text":"","title":"1. Preparation"},{"location":"OPENSOURCE/2021-11-29-install-glusterfs-on-centos7/#11-kvms","text":"3 KVMs Hostname vCPUs Memory Swap IP OS sudoer Data Storage gluster01 2 2G 0 192.168.122.191 CentOS 7 echo 100G gluster02 2 2G 0 192.168.122.192 CentOS 7 echo 100G gluster03 2 2G 0 192.168.122.193 CentOS 7 echo 100G Attach a disk image on those KVMs accordingly if needed. Here are the steps. STEP 1. Create the new disk images On the host server # Where your disk images store in cd /data/vm_storage/ # Create the new disk image sudo qemu-img create -f raw gluster01-disk1-100G 100G sudo qemu-img create -f raw gluster02-disk1-100G 100G sudo qemu-img create -f raw gluster03-disk1-100G 100G sudo chown qemu:qemu gluster { 01 ,02,03 } -disk1-100G STEP 2. Attach the disk to the virtual machine sudo virsh attach-disk gluster01 /data/vm_storage/gluster01-disk1-100G vdb --cache none sudo virsh attach-disk gluster02 /data/vm_storage/gluster02-disk1-100G vdb --cache none sudo virsh attach-disk gluster03 /data/vm_storage/gluster03-disk1-100G vdb --cache none NOTE: If you already have a /dev/vdb disk you need to change vdb to a free device like /dev/vdc and so on. NOTE: For attaching permanently the disk image to the VM, you should edit the VM configuration file, e.g. sudo virsh edit gluster01 , add the following XML fragment into the <devices> section: <disk type= 'file' device= 'disk' > <driver name= 'qemu' type= 'raw' /> <source file= '/data/vm_storage/gluster01-disk1-100G' /> <target dev= 'vdb' bus= 'virtio' /> <address type= 'pci' domain= '0x0000' bus= '0x00' slot= '0x09' function= '0x0' /> </disk> STEP 3. Partitioning the disk drive in VMs On KVM gluster{01,02,03} Login into KVM gluster{01,02,03}. sudo fdisk -l | grep /dev/vd sudo fdisk /dev/vdb Type n for a new partition. Type p for a primary partition. Choose an available partition number 1 . Enter the default first cylinder by pressing Enter . Choose the entire disk is allocated by pressing Enter . Finally type p to verify new partition. Enter w to write changes and quit.","title":"1.1 KVMs"},{"location":"OPENSOURCE/2021-11-29-install-glusterfs-on-centos7/#12-install-ansible-on-the-host-machine","text":"# Install ansible on host machine sudo yum install ansible","title":"1.2 Install Ansible on the host machine"},{"location":"OPENSOURCE/2021-11-29-install-glusterfs-on-centos7/#13-password-free-configuration","text":"cat <<EOF | sudo tee -a /etc/hosts 192.168.122.191 gluster01 192.168.122.192 gluster02 192.168.122.193 gluster03 EOF cat <<EOF | sudo tee -a /etc/ansible/hosts [gluster] gluster01 gluster02 gluster03 EOF # Have a test ansible gluster --ask-pass -u echo -m shell -a 'echo ok' # Password free for login ansible gluster --ask-pass -u echo -m file -a \"path=.ssh state=directory mode=700\" ansible gluster --ask-pass -u echo -m copy -a \"src=~/.ssh/id_rsa.pub dest=.ssh/authorized_keys mode=600\" # Password free for sudo ansible gluster --ask-pass -u echo -b -m shell -a \"echo 'echo ALL=(ALL) NOPASSWD: ALL' >> /etc/sudoers\" # Now we can have a test as below ansible gluster -u echo -m shell -a 'echo ok'","title":"1.3 Password free configuration"},{"location":"OPENSOURCE/2021-11-29-install-glusterfs-on-centos7/#14-dns-via-hosts-file","text":"cat <<EOF > /tmp/add-hosts.sh cat <<EEE >> /etc/hosts 192.168.122.191 gluster01 192.168.122.192 gluster02 192.168.122.193 gluster03 EEE EOF ansible gluster -u echo -b -m script -a \"/tmp/add-hosts.sh\"","title":"1.4 DNS via hosts file"},{"location":"OPENSOURCE/2021-11-29-install-glusterfs-on-centos7/#2-configure-the-firewall","text":"Ensure that TCP and UDP ports 24007 and 24008 are open on all Gluster servers. Apart from these ports, you need to open one port for each brick starting from port 49152 (instead of 24009 onwards as with previous releases). cat <<EOF > /tmp/required-ports.sh firewall-cmd --permanent --add-port=24007-24008/tcp --add-port=24007-24008/udp firewall-cmd --permanent --add-port=49152-50151/tcp firewall-cmd --reload EOF ansible gluster -u echo -b -m script -a '/tmp/required-ports.sh'","title":"2. Configure the firewall"},{"location":"OPENSOURCE/2021-11-29-install-glusterfs-on-centos7/#3-format-and-mount-the-device-of-gluster-brick","text":"NOTE: Assume that the brick will be residing on /dev/vdb1 . On the host server: cat <<EOF > /tmp/mount-brick.sh mkfs.xfs -i size=512 /dev/vdb1 mkdir -p /data/brick1 echo '/dev/vdb1 /data/brick1 xfs defaults 1 2' >> /etc/fstab mount -a EOF ansible gluster -u echo -b -m script -a '/tmp/mount-brick.sh'","title":"3. Format and mount the device of gluster brick"},{"location":"OPENSOURCE/2021-11-29-install-glusterfs-on-centos7/#4-installing-glusterfs","text":"","title":"4. Installing GlusterFS"},{"location":"OPENSOURCE/2021-11-29-install-glusterfs-on-centos7/#41-install-the-software","text":"On the host server Lookup centos glusterfs software packages yum search centos-release-gluster Install Gluster 9 packages ( centos-release-gluster9 ) cat <<EOF > /tmp/install-gluster.sh yum install centos-release-gluster9 -y yum install glusterfs gluster-cli glusterfs-libs glusterfs-server -y EOF ansible gluster -u echo -b -m script -a '/tmp/install-gluster.sh' Login into gluster01 Check the installed software packages. $ rpm -qa | grep gluster libglusterfs0-9.4-1.el7.x86_64 glusterfs-9.4-1.el7.x86_64 glusterfs-server-9.4-1.el7.x86_64 centos-release-gluster9-1.0-1.el7.noarch glusterfs-client-xlators-9.4-1.el7.x86_64 libglusterd0-9.4-1.el7.x86_64 glusterfs-fuse-9.4-1.el7.x86_64 glusterfs-cli-9.4-1.el7.x86_64","title":"4.1 Install the software"},{"location":"OPENSOURCE/2021-11-29-install-glusterfs-on-centos7/#42-enable-start-the-glusterd-service","text":"cat <<EOF > /tmp/start-glusterd.sh systemctl enable glusterd.service systemctl start glusterd.service EOF ansible gluster -u echo -b -m script -a '/tmp/start-glusterd.sh'","title":"4.2 Enable &amp; start the glusterd service"},{"location":"OPENSOURCE/2021-11-29-install-glusterfs-on-centos7/#43-configure-the-trusted-pool","text":"From gluster01 sudo gluster peer probe gluster02 sudo gluster peer probe gluster03 Check the peer status $ sudo gluster peer status Number of Peers: 2 Hostname: gluster02 Uuid: 3313ad84-ca67-4b8b-8aa3-a0aaa104591e State: Peer in Cluster ( Connected ) Hostname: gluster03 Uuid: 3ed0ee52-9af5-4f81-a15b-f841c5ab1754 State: Peer in Cluster ( Connected ) $ sudo gluster pool list UUID Hostname State 3313ad84-ca67-4b8b-8aa3-a0aaa104591e gluster02 Connected 3ed0ee52-9af5-4f81-a15b-f841c5ab1754 gluster03 Connected 49d29ad7-afe1-49e5-9fe4-497688f1426c localhost Connected","title":"4.3 Configure the trusted pool"},{"location":"OPENSOURCE/2021-11-29-install-glusterfs-on-centos7/#5-set-up-a-glusterfs-volume","text":"","title":"5. Set up a GlusterFS volume"},{"location":"OPENSOURCE/2021-11-29-install-glusterfs-on-centos7/#51-set-up-a-volume-named-gv0","text":"On the host server ansible gluster -u echo -b -m shell -a 'mkdir -p /data/brick1/gv0' From gluster01 Create a replicated volume by specifing the parameter replica to be 3: sudo gluster volume create gv0 replica 3 \\ gluster01:/data/brick1/gv0 \\ gluster02:/data/brick1/gv0 \\ gluster03:/data/brick1/gv0 #OUTPUT: #volume create: gv0: success: please start the volume to access data sudo gluster volume start gv0 #OUTPUT: #volume start: gv0: success Confirm that the volume shows \" Started \": $ sudo gluster volume info Volume Name: gv0 Type: Replicate Volume ID: cd783e4a-a569-4cf2-894e-98cf1a7f180b Status: Started Snapshot Count: 0 Number of Bricks: 1 x 3 = 3 Transport-type: tcp Bricks: Brick1: gluster01:/data/brick1/gv0 Brick2: gluster02:/data/brick1/gv0 Brick3: gluster03:/data/brick1/gv0 Options Reconfigured: cluster.granular-entry-heal: on storage.fips-mode-rchecksum: on transport.address-family: inet nfs.disable: on performance.client-io-threads: off NOTE: If the volume does not show \" Started \", the files under /var/log/glusterfs/glusterd.log should be checked in order to debug and diagnose the situation. These logs can be looked at on one or, all the servers configured.","title":"5.1 Set up a volume named gv0"},{"location":"OPENSOURCE/2021-11-29-install-glusterfs-on-centos7/#52-testing-the-volume","text":"From gluster01 sudo mkdir -p /mnt/gv0 sudo mount -t glusterfs gluster01:/gv0 /mnt/gv0 for i in ` seq -w 1 10 ` ; do sudo cp -rp /etc/hosts /mnt/gv0/copy-test- $i ; done First, check the client mount point: ls -lA /mnt/gv0/copy* | wc -l You should see 10 files returned. Next, check the GlusterFS brick mount points on each server ( gluster{01,02,03} ): ls -lA /data/brick1/gv0/copy* NOTE: Typically, you would do this from an external machine, known as a \"client\". It requires additional packages to be installed on the client machine. e.g. sudo yum install centos-release-gluster9 -y sudo yum install glusterfs glusterfs-fuse -y","title":"5.2 Testing the volume"},{"location":"OPENSOURCE/2021-11-29-install-glusterfs-on-centos7/#reference","text":"how-to-add-disk-image-to-kvm-virtual-machine-with-virsh-command Quick-Start-Guide/Quickstart Quick-Start-Guide/Architecture Administrator-Guide/Setting-Up-Clients Administrator-Guide/Split-brain-and-ways-to-deal-with-it","title":"Reference"},{"location":"OPENSOURCE/2021-11-30-glusterfs-for-persistent-docker-volumes/","tags":["glusterfs","docker"],"text":"1. Preparation \u00b6 1.1 KVMs \u00b6 6 KVMs Hostname vCPUs Memory Swap IP OS sudoer Data Storage gluster01 2 2G 0 192.168.122.191 CentOS 7 echo 100G, /data/brick1 gluster02 2 2G 0 192.168.122.192 CentOS 7 echo 100G, /data/brick1 gluster03 2 2G 0 192.168.122.193 CentOS 7 echo 100G, /data/brick1 minion01 .k8s 2 8G 0 192.168.122.101 CentOS 7 echo minion02 .k8s 2 8G 0 192.168.122.102 CentOS 7 echo minion03 .k8s 2 8G 0 192.168.122.103 CentOS 7 echo swarm-nodes /etc/ansible/hosts [swarm-nodes] minion01.k8s minion02.k8s minion03.k8s 1.2 Installing GlusterFS and docker swarm \u00b6 For installing GlusterFS, please refer to Install Glusterfs on Centos 7 . For getting started with docker warm, please refer to Getting started with docker swarm mode . 1.3 DNS via hosts file \u00b6 From the host server cat <<EOF > /tmp/add-hosts.sh cat <<EEE >> /etc/hosts 192.168.122.191 gluster01 192.168.122.192 gluster02 192.168.122.193 gluster03 EEE EOF ansible swarm-nodes -u echo -b -m script -a \"/tmp/add-hosts.sh\" 2. Creating a GlusterFS volume \u00b6 2.1 Create and start a GlusterFS volume \u00b6 From the host server ansible gluster -u echo -b -m shell -a 'mkdir -p /data/brick1/gfs' From gluster01 Create and start the replicated volume gfs : sudo gluster volume create gfs replica 3 \\ gluster01:/data/brick1/gfs \\ gluster02:/data/brick1/gfs \\ gluster03:/data/brick1/gfs sudo gluster volume start gfs sudo gluster volume info gfs 2.2 Mount the gfs volume locally \u00b6 On all Gluster hosts, mount the gfs volume locally. From the host server cat <<EOF > /tmp/mount-gfs.sh mkdir -p /mnt/gfs echo 'localhost:/gfs /mnt/gfs glusterfs defaults,_netdev 0 0' >> /etc/fstab mount -a EOF ansible gluster -u echo -b -m script -a '/tmp/mount-gfs.sh' cat <<EOF > /tmp/fix-mount.sh mkdir -p /usr/local/sbin cat <<EEE > /usr/local/sbin/check-gfs.sh #!/bin/sh while true; do df | grep /mnt/gfs > /dev/null if [[ \\\\\\$? -eq 0 ]]; then exit 0 fi sleep 3 mount -a -t glusterfs done EEE chmod +x /usr/local/sbin/check-gfs.sh cat <<EEE > /etc/systemd/system/glusterfsmounts.service [Unit] Description=Glustermounting Requires=glusterd.service [Service] Type=simple RemainAfterExit=true ExecStartPre=/usr/sbin/gluster volume status gfs ExecStart=/usr/local/sbin/check-gfs.sh Restart=on-failure RestartSec=3 [Install] WantedBy=multi-user.target EEE systemctl daemon-reload systemctl enable glusterfsmounts EOF ansible gluster -u echo -b -m script -a '/tmp/fix-mount.sh' On gluser01 server $ df -h | grep gfs localhost:/gfs 100G 1 .1G 99G 2 % /mnt/gfs 3. Install the GlusterFS volume plugin for Docker \u00b6 The GlusterFS plugin for Docker must be installed across all Swarm nodes, one by one. cat <<EOF > /tmp/gfs-plugin.sh docker plugin install --alias glusterfs \\ mochoa/glusterfs-volume-plugin \\ --grant-all-permissions --disable docker plugin set glusterfs SERVERS=gluster01,gluster02,gluster03 docker plugin enable glusterfs EOF ansible swarm-nodes -u echo -b -m script -a '/tmp/gfs-plugin.sh' 4. Deploy a stack consisting of 1 simple service with a GlusterFS volume \u00b6 4.1 Create a subdiectory at the root of the GlusterFS volume \u00b6 From gluster01 server, create a subdirectory named vol1 at the root of the GlusterFS volume. sudo mkdir -p /mnt/gfs/vol1 4.2 Deploy a stack \u00b6 From any Swarm node, create a stack file named docker-compose.yml . cat <<EOF > docker-compose.yml version : \"3.7\" services : foo : image : alpine command : ping localhost networks : - net volumes : - vol1:/tmp networks : net : driver : overlay volumes : vol1 : driver : glusterfs name : \"gfs/vol1\" EOF Deploy the stack. $ sudo docker stack deploy -c docker-compose.yml test Creating network test_net Creating service test_foo Check the stack. $ sudo docker stack list NAME SERVICES ORCHESTRATOR test 1 Swarm $ sudo docker stack services test ID NAME MODE REPLICAS IMAGE PORTS zer9ypz8ghqo test_foo replicated 1 /1 alpine:latest 4.3 Write some test data to the docker volume backed by GlusterFS \u00b6 STEP1. Find out which of the Swarm nodes the test_foo service is running on. $ sudo docker service ps test_foo ID NAME IMAGE NODE DESIRED STATE CURRENT STATE ERROR PORTS beqjzsj3yznd test_foo.1 alpine:latest minion01.k8s Running Running 5 minutes ago STEP2. Switch to the terminal for that Swarm node and find the container ID of the test_foo service. container_id = $( sudo docker ps | grep test_foo | awk '{print $1}' ) STEP3. Exec into the container\u2019s /bin/sh shell. sudo docker exec -it $container_id /bin/sh STEP4. Write some test data to /tmp Write 1G of test data to /tmp . / # echo 'dd if=/dev/zero of=/tmp/test.bin bs=1024k count=1000' > test.sh / # time sh test.sh 1000+0 records in 1000+0 records out real 0m 3.35s user 0m 0.00s sys 0m 1.02s From any Gluster server (e.g. gluster01 ), list out the test data. $ ls -lh /mnt/gfs/vol1/ -rw-r--r--. 1 root root 1000M Nov 30 12 :26 test.bin Reference \u00b6 Install Glusterfs on Centos 7 Getting started with docker swarm mode autoize.com/glusterfs-for-persistent-docker-volumes github.com/marcelo-ochoa/docker-volume-plugins serverfault.com/questions/800494/glusterfs-mount-on-boot-on-clustered-servers-rhel-7","title":"GlusterFS for Persistent Docker Volumes"},{"location":"OPENSOURCE/2021-11-30-glusterfs-for-persistent-docker-volumes/#1-preparation","text":"","title":"1. Preparation"},{"location":"OPENSOURCE/2021-11-30-glusterfs-for-persistent-docker-volumes/#11-kvms","text":"6 KVMs Hostname vCPUs Memory Swap IP OS sudoer Data Storage gluster01 2 2G 0 192.168.122.191 CentOS 7 echo 100G, /data/brick1 gluster02 2 2G 0 192.168.122.192 CentOS 7 echo 100G, /data/brick1 gluster03 2 2G 0 192.168.122.193 CentOS 7 echo 100G, /data/brick1 minion01 .k8s 2 8G 0 192.168.122.101 CentOS 7 echo minion02 .k8s 2 8G 0 192.168.122.102 CentOS 7 echo minion03 .k8s 2 8G 0 192.168.122.103 CentOS 7 echo swarm-nodes /etc/ansible/hosts [swarm-nodes] minion01.k8s minion02.k8s minion03.k8s","title":"1.1 KVMs"},{"location":"OPENSOURCE/2021-11-30-glusterfs-for-persistent-docker-volumes/#12-installing-glusterfs-and-docker-swarm","text":"For installing GlusterFS, please refer to Install Glusterfs on Centos 7 . For getting started with docker warm, please refer to Getting started with docker swarm mode .","title":"1.2 Installing GlusterFS and docker swarm"},{"location":"OPENSOURCE/2021-11-30-glusterfs-for-persistent-docker-volumes/#13-dns-via-hosts-file","text":"From the host server cat <<EOF > /tmp/add-hosts.sh cat <<EEE >> /etc/hosts 192.168.122.191 gluster01 192.168.122.192 gluster02 192.168.122.193 gluster03 EEE EOF ansible swarm-nodes -u echo -b -m script -a \"/tmp/add-hosts.sh\"","title":"1.3 DNS via hosts file"},{"location":"OPENSOURCE/2021-11-30-glusterfs-for-persistent-docker-volumes/#2-creating-a-glusterfs-volume","text":"","title":"2. Creating a GlusterFS volume"},{"location":"OPENSOURCE/2021-11-30-glusterfs-for-persistent-docker-volumes/#21-create-and-start-a-glusterfs-volume","text":"From the host server ansible gluster -u echo -b -m shell -a 'mkdir -p /data/brick1/gfs' From gluster01 Create and start the replicated volume gfs : sudo gluster volume create gfs replica 3 \\ gluster01:/data/brick1/gfs \\ gluster02:/data/brick1/gfs \\ gluster03:/data/brick1/gfs sudo gluster volume start gfs sudo gluster volume info gfs","title":"2.1 Create and start a GlusterFS volume"},{"location":"OPENSOURCE/2021-11-30-glusterfs-for-persistent-docker-volumes/#22-mount-the-gfs-volume-locally","text":"On all Gluster hosts, mount the gfs volume locally. From the host server cat <<EOF > /tmp/mount-gfs.sh mkdir -p /mnt/gfs echo 'localhost:/gfs /mnt/gfs glusterfs defaults,_netdev 0 0' >> /etc/fstab mount -a EOF ansible gluster -u echo -b -m script -a '/tmp/mount-gfs.sh' cat <<EOF > /tmp/fix-mount.sh mkdir -p /usr/local/sbin cat <<EEE > /usr/local/sbin/check-gfs.sh #!/bin/sh while true; do df | grep /mnt/gfs > /dev/null if [[ \\\\\\$? -eq 0 ]]; then exit 0 fi sleep 3 mount -a -t glusterfs done EEE chmod +x /usr/local/sbin/check-gfs.sh cat <<EEE > /etc/systemd/system/glusterfsmounts.service [Unit] Description=Glustermounting Requires=glusterd.service [Service] Type=simple RemainAfterExit=true ExecStartPre=/usr/sbin/gluster volume status gfs ExecStart=/usr/local/sbin/check-gfs.sh Restart=on-failure RestartSec=3 [Install] WantedBy=multi-user.target EEE systemctl daemon-reload systemctl enable glusterfsmounts EOF ansible gluster -u echo -b -m script -a '/tmp/fix-mount.sh' On gluser01 server $ df -h | grep gfs localhost:/gfs 100G 1 .1G 99G 2 % /mnt/gfs","title":"2.2 Mount the gfs volume locally"},{"location":"OPENSOURCE/2021-11-30-glusterfs-for-persistent-docker-volumes/#3-install-the-glusterfs-volume-plugin-for-docker","text":"The GlusterFS plugin for Docker must be installed across all Swarm nodes, one by one. cat <<EOF > /tmp/gfs-plugin.sh docker plugin install --alias glusterfs \\ mochoa/glusterfs-volume-plugin \\ --grant-all-permissions --disable docker plugin set glusterfs SERVERS=gluster01,gluster02,gluster03 docker plugin enable glusterfs EOF ansible swarm-nodes -u echo -b -m script -a '/tmp/gfs-plugin.sh'","title":"3. Install the GlusterFS volume plugin for Docker"},{"location":"OPENSOURCE/2021-11-30-glusterfs-for-persistent-docker-volumes/#4-deploy-a-stack-consisting-of-1-simple-service-with-a-glusterfs-volume","text":"","title":"4. Deploy a stack consisting of 1 simple service with a GlusterFS volume"},{"location":"OPENSOURCE/2021-11-30-glusterfs-for-persistent-docker-volumes/#41-create-a-subdiectory-at-the-root-of-the-glusterfs-volume","text":"From gluster01 server, create a subdirectory named vol1 at the root of the GlusterFS volume. sudo mkdir -p /mnt/gfs/vol1","title":"4.1 Create a subdiectory at the root of the GlusterFS volume"},{"location":"OPENSOURCE/2021-11-30-glusterfs-for-persistent-docker-volumes/#42-deploy-a-stack","text":"From any Swarm node, create a stack file named docker-compose.yml . cat <<EOF > docker-compose.yml version : \"3.7\" services : foo : image : alpine command : ping localhost networks : - net volumes : - vol1:/tmp networks : net : driver : overlay volumes : vol1 : driver : glusterfs name : \"gfs/vol1\" EOF Deploy the stack. $ sudo docker stack deploy -c docker-compose.yml test Creating network test_net Creating service test_foo Check the stack. $ sudo docker stack list NAME SERVICES ORCHESTRATOR test 1 Swarm $ sudo docker stack services test ID NAME MODE REPLICAS IMAGE PORTS zer9ypz8ghqo test_foo replicated 1 /1 alpine:latest","title":"4.2 Deploy a stack"},{"location":"OPENSOURCE/2021-11-30-glusterfs-for-persistent-docker-volumes/#43-write-some-test-data-to-the-docker-volume-backed-by-glusterfs","text":"STEP1. Find out which of the Swarm nodes the test_foo service is running on. $ sudo docker service ps test_foo ID NAME IMAGE NODE DESIRED STATE CURRENT STATE ERROR PORTS beqjzsj3yznd test_foo.1 alpine:latest minion01.k8s Running Running 5 minutes ago STEP2. Switch to the terminal for that Swarm node and find the container ID of the test_foo service. container_id = $( sudo docker ps | grep test_foo | awk '{print $1}' ) STEP3. Exec into the container\u2019s /bin/sh shell. sudo docker exec -it $container_id /bin/sh STEP4. Write some test data to /tmp Write 1G of test data to /tmp . / # echo 'dd if=/dev/zero of=/tmp/test.bin bs=1024k count=1000' > test.sh / # time sh test.sh 1000+0 records in 1000+0 records out real 0m 3.35s user 0m 0.00s sys 0m 1.02s From any Gluster server (e.g. gluster01 ), list out the test data. $ ls -lh /mnt/gfs/vol1/ -rw-r--r--. 1 root root 1000M Nov 30 12 :26 test.bin","title":"4.3 Write some test data to the docker volume backed by GlusterFS"},{"location":"OPENSOURCE/2021-11-30-glusterfs-for-persistent-docker-volumes/#reference","text":"Install Glusterfs on Centos 7 Getting started with docker swarm mode autoize.com/glusterfs-for-persistent-docker-volumes github.com/marcelo-ochoa/docker-volume-plugins serverfault.com/questions/800494/glusterfs-mount-on-boot-on-clustered-servers-rhel-7","title":"Reference"},{"location":"OPENSOURCE/2022-04-25-install-k8s-1.23-cluster-on-ubuntu-18lts/","tags":["k8s","kubernetes","centos","cloudnative"],"text":"1. Preparation \u00b6 1.1 VMs (Vagrant) \u00b6 4 VMs Hostname vCPUs Memory Swap IP OS sudoer master01 2 8G 0 192.168.56.200 CentOS 7 vagrant minion01 2 8G 0 192.168.56.101 CentOS 7 vagrant minion02 2 8G 0 192.168.56.102 CentOS 7 vagrant minion03 2 8G 0 192.168.56.103 CentOS 7 vagrant /etc/hosts /etc/hosts 192.168.56.200 master01 192.168.56.101 minion01 192.168.56.102 minion02 192.168.56.103 minion03 192.168.10.200 k8s-cluster $ vagrant status Current machine states: master01 running ( virtualbox ) minion01 running ( virtualbox ) minion02 running ( virtualbox ) minion03 running ( virtualbox ) Vagrantfile Vagrantfile Vagrant . configure ( \"2\" ) do | config | config . vm . provider :libvirt do | libvirt | libvirt . cpu_mode = \"host-passthrough\" libvirt . cpus = 2 libvirt . disk_bus = \"virtio\" libvirt . disk_driver :cache => \"writeback\" libvirt . driver = \"kvm\" libvirt . memory = 8192 libvirt . memorybacking :access , :mode => \"shared\" libvirt . nested = true libvirt . nic_model_type = \"virtio\" libvirt . storage :file , bus : \"virtio\" , cache : \"writeback\" libvirt . video_type = \"virtio\" end config . vm . provider :virtualbox do | virtualbox | virtualbox . cpus = 2 virtualbox . memory = 8192 virtualbox . customize [ \"modifyvm\" , :id , \"--cpu-profile\" , \"host\" ] virtualbox . customize [ \"modifyvm\" , :id , \"--nested-hw-virt\" , \"on\" ] end config . vm . define \"master01\" do | master01 | master01 . vm . hostname = \"master01\" master01 . vm . box = \"hashicorp/bionic64\" master01 . vm . network \"private_network\" , ip : \"192.168.56.200\" master01 . vm . provider \"virtualbox\" do | vb | vb . customize [ 'modifyvm' , :id , '--natnet1' , '20.0.51.0/24' ] end end config . vm . define \"minion01\" do | minion01 | minion01 . vm . hostname = \"minion01\" minion01 . vm . box = \"hashicorp/bionic64\" minion01 . vm . network \"private_network\" , ip : \"192.168.56.101\" minion01 . vm . provider \"virtualbox\" do | vb | vb . customize [ 'modifyvm' , :id , '--natnet1' , '20.0.52.0/24' ] end end config . vm . define \"minion02\" do | minion02 | minion02 . vm . hostname = \"minion02\" minion02 . vm . box = \"hashicorp/bionic64\" minion02 . vm . network \"private_network\" , ip : \"192.168.56.102\" minion02 . vm . provider \"virtualbox\" do | vb | vb . customize [ 'modifyvm' , :id , '--natnet1' , '20.0.53.0/24' ] end end config . vm . define \"minion03\" do | minion03 | minion03 . vm . hostname = \"minion03\" minion03 . vm . box = \"hashicorp/bionic64\" minion03 . vm . network \"private_network\" , ip : \"192.168.56.103\" minion03 . vm . provider \"virtualbox\" do | vb | vb . customize [ 'modifyvm' , :id , '--natnet1' , '20.0.54.0/24' ] end end end Please refer to Introduction to Vagrant for more information about Vagrant. 1.2 SSH config \u00b6 vagrant ssh-config | tee -a ~/.ssh/config Create a script foreach-node.sh . foreach-node.sh foreach-node.sh #/bin/sh NODES = \"master01 minion01 minion02 minion03\" CMD = \"exec\" if [[ \" $1 \" == \"-h\" ]] ; then echo \" $0 -n [NODES] -m [exec|script] [command_or_scriptfile]\" exit 0 fi while [[ $# > 0 ]] ; do if [[ \" $1 \" == \"-n\" ]] ; then NODES = \" $2 \" shift 2 elif [[ \" $1 \" == \"-m\" ]] ; then CMD = \" $2 \" shift 2 else break fi done SUBCMD = \" $* \" if [[ -z \" $SUBCMD \" ]] ; then SUBCMD = \"echo OK\" fi for node in $NODES ; do if [[ \" $CMD \" == \"exec\" ]] ; then echo -n \" $node \" ssh $node $SUBCMD elif [[ \" $CMD \" == \"script\" ]] ; then echo \" $node ...\" if [[ ! -f $SUBCMD ]] ; then echo \" $SUBCMD not exists\" exit 1 fi scp $SUBCMD $node :/tmp/a.sh ssh $node \"chmod +x /tmp/a.sh && sudo /tmp/a.sh\" fi done chmod +x foreach-node.sh # have a check ./foreach-node.sh 1.3 DNS via hosts file \u00b6 cat <<EOF > /tmp/add-hosts.sh cat <<EEE >> /etc/hosts 192.168.56.200 master01 192.168.56.101 minion01 192.168.56.102 minion02 192.168.56.103 minion03 192.168.56.200 k8s-cluster EEE EOF ./foreach-node.sh \"sudo sed -ie s/127.0.2.1/#127.0.2.1/ /etc/hosts\" ./foreach-node.sh -m script /tmp/add-hosts.sh 2. Basic configurations for servers \u00b6 2.1 Check firewall configuration \u00b6 $ ./foreach-node.sh sudo ufw status master01 Status: inactive minion01 Status: inactive minion02 Status: inactive minion03 Status: inactive 2.2 Set SELinux in permissive mode (effectively disabling it) \u00b6 $ ./foreach-node.sh 'sudo sestatus' master01 sudo: sestatus: command not found minion01 sudo: sestatus: command not found minion02 sudo: sestatus: command not found minion03 sudo: sestatus: command not found 2.3 Disable swap \u00b6 You MUST disable swap in order for the kubelet to work properly. ./foreach-node.sh sudo swapoff -a ./foreach-node.sh 'sudo sed -ie \"s:/dev/disk/by-uuid/\\(.*\\) none swap sw 0 0:#/dev/disk/by-uuid/\\1 none swap sw 0 0:\" /etc/fstab' 2.4 Verify the MAC address and product_uuid are unique for every node \u00b6 ./foreach-node.sh 'ip link | grep link/ether' ./foreach-node.sh sudo cat /sys/class/dmi/id/product_uuid 2.5 Letting iptables see bridged traffic \u00b6 # Make sure that the br_netfilter module is loaded ./foreach-node.sh 'lsmod | grep br_netfilter' # To load it explicitly ./foreach-node.sh 'sudo modprobe br_netfilter' # Ensure net.bridge.bridge-nf-call-iptables is set to 1 in your sysctl config cat <<EEE > /tmp/ensure-bridge-nf.sh cat <<EOF | sudo tee /etc/modules-load.d/k8s.conf br_netfilter EOF cat <<EOF | sudo tee /etc/sysctl.d/k8s.conf net.bridge.bridge-nf-call-ip6tables = 1 net.bridge.bridge-nf-call-iptables = 1 EOF sudo sysctl --system EEE ./foreach-node.sh -m script /tmp/ensure-bridge-nf.sh 2.6 Sysctl for KVM \u00b6 cat <<EEE > /tmp/set-sysctl.sh cat <<EOF | sudo tee /etc/sysctl.d/kvm.conf net.ipv4.conf.default.rp_filter=0 net.ipv4.conf.all.rp_filter=0 net.ipv4.conf.all.proxy_arp = 1 EOF sudo sysctl --system EEE ./foreach-node.sh -m script /tmp/set-sysctl.sh 3. Install docker-ce as the container runtime \u00b6 3.1 Install Docker Engine \u00b6 cat <<EOF > /tmp/install-docker.sh ##Set up the repository sudo apt-get update sudo apt-get install -y \\ ca-certificates \\ curl \\ gnupg \\ lsb-release curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg echo \\ \"deb [arch=\\$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \\ \\$(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null ##Install Docker Engine sudo apt-get update sudo apt-get install -y docker-ce docker-ce-cli containerd.io EOF ./foreach-node.sh -m script /tmp/install-docker.sh cat <<EOF > /tmp/patch.sh mkdir -p /etc/docker/ mkdir -p /etc/systemd/system/docker.service.d cat > /etc/docker/daemon.json <<EEE { \"exec-opts\": [\"native.cgroupdriver=systemd\"], \"log-driver\": \"json-file\", \"log-opts\": { \"max-size\": \"100m\" }, \"storage-driver\": \"overlay2\", \"storage-opts\": [ \"overlay2.override_kernel_check=true\" ] } EEE # Restart docker. systemctl daemon-reload systemctl restart docker EOF ./foreach-node.sh -m script /tmp/patch.sh See: - https://github.com/schoolofdevops/kubernetes-labguide/issues/10 - https://docs.docker.com/engine/install/ubuntu/ 3.2 Verify that Docker Engine is installed correctly \u00b6 Running the hello-world image. ./foreach-node.sh sudo docker run hello-world 4. Install kubeadm, kubelet and kubectl \u00b6 NOTE: Use your own url for apt-key.gpg and apt repository cat <<EEE > /tmp/install-kubeadm.sh sudo apt-get update sudo apt-get install -y apt-transport-https ca-certificates curl sudo curl -fsSLo /usr/share/keyrings/kubernetes-archive-keyring.gpg https://mirrors.aliyun.com/kubernetes/apt/doc/apt-key.gpg # Add the Kubernetes apt repository echo \"deb [signed-by=/usr/share/keyrings/kubernetes-archive-keyring.gpg] https://mirrors.aliyun.com/kubernetes/apt/ kubernetes-xenial main\" | sudo tee /etc/apt/sources.list.d/kubernetes.list # Install kubelet, kubeadm and kubectl, and pin their version sudo apt-get update sudo apt-get install -y kubelet kubeadm kubectl sudo apt-mark hold kubelet kubeadm kubectl EEE ./foreach-node.sh -m script /tmp/install-kubeadm.sh Check kubeadm version $ ./foreach-node.sh 'kubeadm version | awk -F, \"{print \\$3}\"' master01 GitVersion: \"v1.23.6\" minion01 GitVersion: \"v1.23.6\" minion02 GitVersion: \"v1.23.6\" minion03 GitVersion: \"v1.23.6\" See: https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/install-kubeadm/ 5. Creating k8s cluster with kubeadm \u00b6 Ping k8s-cluster ./foreach-node.sh ping k8s-cluster -c 1 5.1 Pull images \u00b6 Pull the following images: $ sudo kubeadm config images list k8s.gcr.io/kube-apiserver:v1.23.6 k8s.gcr.io/kube-controller-manager:v1.23.6 k8s.gcr.io/kube-scheduler:v1.23.6 k8s.gcr.io/kube-proxy:v1.23.6 k8s.gcr.io/pause:3.6 k8s.gcr.io/etcd:3.5.1-0 k8s.gcr.io/coredns/coredns:v1.8.6 5.2 Init cluster on master01 \u00b6 For flannel pod network (see 5.4 ), the argument --pod-network-cidr=10.244.0.0/16 should be provided. sudo kubeadm init \\ --control-plane-endpoint \"k8s-cluster:6443\" \\ --apiserver-advertise-address \"192.168.56.200\" \\ --pod-network-cidr = 10 .244.0.0/16 Output [ init ] Using Kubernetes version: v1.23.6 [ preflight ] Running pre-flight checks [ preflight ] Pulling images required for setting up a Kubernetes cluster [ preflight ] This might take a minute or two, depending on the speed of your internet connection [ preflight ] You can also perform this action in beforehand using 'kubeadm config images pull' [ certs ] Using certificateDir folder \"/etc/kubernetes/pki\" [ certs ] Generating \"ca\" certificate and key [ certs ] Generating \"apiserver\" certificate and key [ certs ] apiserver serving cert is signed for DNS names [ k8s-cluster kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local master01 ] and IPs [ 10 .96.0.1 192 .168.56.200 ] [ certs ] Generating \"apiserver-kubelet-client\" certificate and key [ certs ] Generating \"front-proxy-ca\" certificate and key [ certs ] Generating \"front-proxy-client\" certificate and key [ certs ] Generating \"etcd/ca\" certificate and key [ certs ] Generating \"etcd/server\" certificate and key [ certs ] etcd/server serving cert is signed for DNS names [ localhost master01 ] and IPs [ 192 .168.56.200 127 .0.0.1 ::1 ] [ certs ] Generating \"etcd/peer\" certificate and key [ certs ] etcd/peer serving cert is signed for DNS names [ localhost master01 ] and IPs [ 192 .168.56.200 127 .0.0.1 ::1 ] [ certs ] Generating \"etcd/healthcheck-client\" certificate and key [ certs ] Generating \"apiserver-etcd-client\" certificate and key [ certs ] Generating \"sa\" key and public key [ kubeconfig ] Using kubeconfig folder \"/etc/kubernetes\" [ kubeconfig ] Writing \"admin.conf\" kubeconfig file [ kubeconfig ] Writing \"kubelet.conf\" kubeconfig file [ kubeconfig ] Writing \"controller-manager.conf\" kubeconfig file [ kubeconfig ] Writing \"scheduler.conf\" kubeconfig file [ kubelet-start ] Writing kubelet environment file with flags to file \"/var/lib/kubelet/kubeadm-flags.env\" [ kubelet-start ] Writing kubelet configuration to file \"/var/lib/kubelet/config.yaml\" [ kubelet-start ] Starting the kubelet [ control-plane ] Using manifest folder \"/etc/kubernetes/manifests\" [ control-plane ] Creating static Pod manifest for \"kube-apiserver\" [ control-plane ] Creating static Pod manifest for \"kube-controller-manager\" [ control-plane ] Creating static Pod manifest for \"kube-scheduler\" [ etcd ] Creating static Pod manifest for local etcd in \"/etc/kubernetes/manifests\" [ wait-control-plane ] Waiting for the kubelet to boot up the control plane as static Pods from directory \"/etc/kubernetes/manifests\" . This can take up to 4m0s [ apiclient ] All control plane components are healthy after 5 .001770 seconds [ upload-config ] Storing the configuration used in ConfigMap \"kubeadm-config\" in the \"kube-system\" Namespace [ kubelet ] Creating a ConfigMap \"kubelet-config-1.23\" in namespace kube-system with the configuration for the kubelets in the cluster NOTE: The \"kubelet-config-1.23\" naming of the kubelet ConfigMap is deprecated. Once the UnversionedKubeletConfigMap feature gate graduates to Beta the default name will become just \"kubelet-config\" . Kubeadm upgrade will handle this transition transparently. [ upload-certs ] Skipping phase. Please see --upload-certs [ mark-control-plane ] Marking the node master01 as control-plane by adding the labels: [ node-role.kubernetes.io/master ( deprecated ) node-role.kubernetes.io/control-plane node.kubernetes.io/exclude-from-external-load-balancers ] [ mark-control-plane ] Marking the node master01 as control-plane by adding the taints [ node-role.kubernetes.io/master:NoSchedule ] [ bootstrap-token ] Using token: eu2pzh.mbow7h16pv2bnl4i [ bootstrap-token ] Configuring bootstrap tokens, cluster-info ConfigMap, RBAC Roles [ bootstrap-token ] configured RBAC rules to allow Node Bootstrap tokens to get nodes [ bootstrap-token ] configured RBAC rules to allow Node Bootstrap tokens to post CSRs in order for nodes to get long term certificate credentials [ bootstrap-token ] configured RBAC rules to allow the csrapprover controller automatically approve CSRs from a Node Bootstrap Token [ bootstrap-token ] configured RBAC rules to allow certificate rotation for all node client certificates in the cluster [ bootstrap-token ] Creating the \"cluster-info\" ConfigMap in the \"kube-public\" namespace [ kubelet-finalize ] Updating \"/etc/kubernetes/kubelet.conf\" to point to a rotatable kubelet client certificate and key [ addons ] Applied essential addon: CoreDNS [ addons ] Applied essential addon: kube-proxy Your Kubernetes control-plane has initialized successfully! To start using your cluster, you need to run the following as a regular user: mkdir -p $HOME /.kube sudo cp -i /etc/kubernetes/admin.conf $HOME /.kube/config sudo chown $( id -u ) : $( id -g ) $HOME /.kube/config Alternatively, if you are the root user, you can run: export KUBECONFIG = /etc/kubernetes/admin.conf You should now deploy a pod network to the cluster. Run \"kubectl apply -f [podnetwork].yaml\" with one of the options listed at: https://kubernetes.io/docs/concepts/cluster-administration/addons/ You can now join any number of control-plane nodes by copying certificate authorities and service account keys on each node and then running the following as root: kubeadm join k8s-cluster:6443 --token eu2pzh.mbow7h16pv2bnl4i \\ --discovery-token-ca-cert-hash sha256:021b945cecea1f592acf107b27fc7aba098b58a4bba0295aa96118a13b81e19f \\ --control-plane Then you can join any number of worker nodes by running the following on each as root: kubeadm join k8s-cluster:6443 --token eu2pzh.mbow7h16pv2bnl4i \\ --discovery-token-ca-cert-hash sha256:021b945cecea1f592acf107b27fc7aba098b58a4bba0295aa96118a13b81e19f 5.3 Create $HOME/.kube/config on master01 (or any server with kubectl installed) \u00b6 mkdir -p $HOME /.kube sudo cp -i /etc/kubernetes/admin.conf $HOME /.kube/config sudo chown $( id -u ) : $( id -g ) $HOME /.kube/config See also Install and Set Up kubectl on Linux 5.4 Deploy a pod network (flannel) to the cluster \u00b6 On master01 kubectl apply -f https://raw.githubusercontent.com/flannel-io/flannel/v0.17.0/Documentation/kube-flannel.yml Check cluster status kubectl get pod -A kubectl get node 5.5 Join the control-plane node \u00b6 (omit..) Please refer to the output of kubeadm init . See also Install Kubernetes (k8s) v1.22 Highly Available Clusters on CentOS 7 5.6 Join worker nodes \u00b6 On minion01, minion02, minion03 # e.g. ./foreach-node.sh -n \"minion01 minion02 minion03\" \\ sudo kubeadm join k8s-cluster:6443 --token eu2pzh.mbow7h16pv2bnl4i \\ --discovery-token-ca-cert-hash sha256:021b945cecea1f592acf107b27fc7aba098b58a4bba0295aa96118a13b81e19f Output [ preflight ] Running pre-flight checks [ preflight ] Reading configuration from the cluster... [ preflight ] FYI: You can look at this config file with 'kubectl -n kube-system get cm kubeadm-config -o yaml' W0425 13 :33:32.424506 24882 utils.go:69 ] The recommended value for \"resolvConf\" in \"KubeletConfiguration\" is: /run/systemd/resolve/resolv.conf ; the provided value is: /run/systemd/resolve/resolv.conf [ kubelet-start ] Writing kubelet configuration to file \"/var/lib/kubelet/config.yaml\" [ kubelet-start ] Writing kubelet environment file with flags to file \"/var/lib/kubelet/kubeadm-flags.env\" [ kubelet-start ] Starting the kubelet [ kubelet-start ] Waiting for the kubelet to perform the TLS Bootstrap... This node has joined the cluster: * Certificate signing request was sent to apiserver and a response was received. * The Kubelet was informed of the new secure connection details. Run 'kubectl get nodes' on the control-plane to see this node join the cluster. 5.7 Check the cluster \u00b6 On master01.k8s. Check the nodes kubectl get nodes Output: NAME STATUS ROLES AGE VERSION master01 Ready control-plane,master 30m v1.23.6 minion01 Ready <none> 109s v1.23.6 minion02 Ready <none> 102s v1.23.6 minion03 Ready <none> 95s v1.23.6 Check the pods kubectl get pod -A Output: NAMESPACE NAME READY STATUS RESTARTS AGE kube-system coredns-64897985d-cts4b 1 /1 Running 0 30m kube-system coredns-64897985d-fvqrg 1 /1 Running 0 30m kube-system etcd-master01 1 /1 Running 1 31m kube-system kube-apiserver-master01 1 /1 Running 1 31m kube-system kube-controller-manager-master01 1 /1 Running 1 31m kube-system kube-flannel-ds-mm65t 1 /1 Running 0 2m33s kube-system kube-flannel-ds-sf85z 1 /1 Running 0 2m26s kube-system kube-flannel-ds-vr67h 1 /1 Running 0 13m kube-system kube-flannel-ds-xg8qb 1 /1 Running 0 2m40s kube-system kube-proxy-2xlqw 1 /1 Running 0 2m33s kube-system kube-proxy-66n5q 1 /1 Running 0 30m kube-system kube-proxy-vxv4c 1 /1 Running 0 2m40s kube-system kube-proxy-wvvgs 1 /1 Running 0 2m26s kube-system kube-scheduler-master01 1 /1 Running 1 31m Cluster Info kubectl cluster-info Output: Kubernetes control plane is running at https://k8s-cluster:6443 CoreDNS is running at https://k8s-cluster:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy To further debug and diagnose cluster problems, use 'kubectl cluster-info dump' . 5.8 \"No route to host\" \u00b6 If you met \"No route to host\" in the k8s cluster, try to fix the route as below, and then redeploy the flannel pod network. ./foreach-node.sh -n master01 \\ 'sudo ip route del default ; sudo ip route add default via 192.168.56.200 dev eth1' ./foreach-node.sh -n minion01 \\ 'sudo ip route del default ; sudo ip route add default via 192.168.56.101 dev eth1' ./foreach-node.sh -n minion02 \\ 'sudo ip route del default ; sudo ip route add default via 192.168.56.102 dev eth1' ./foreach-node.sh -n minion03 \\ 'sudo ip route del default ; sudo ip route add default via 192.168.56.103 dev eth1' ./foreach-node.sh ip route Reset the IP route. ./foreach-node.sh -n master01 \\ 'sudo ip route del default ; sudo ip route add default via 20.0.51.2 dev eth0 proto dhcp src 20.0.51.15 metric 100' ./foreach-node.sh -n minion01 \\ 'sudo ip route del default ; sudo ip route add default via 20.0.52.2 dev eth0 proto dhcp src 20.0.52.15 metric 100' ./foreach-node.sh -n minion02 \\ 'sudo ip route del default ; sudo ip route add default via 20.0.53.2 dev eth0 proto dhcp src 20.0.53.15 metric 100' ./foreach-node.sh -n minion03 \\ 'sudo ip route del default ; sudo ip route add default via 20.0.54.2 dev eth0 proto dhcp src 20.0.54.15 metric 100' See also: https://serverfault.com/questions/123553/how-to-set-the-preferred-network-interface-in-linux Reference \u00b6 docs/setup/production-environment/tools/kubeadm/install-kubeadm docs/setup/production-environment/tools/kubeadm/high-availability docs/ha-considerations.md docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/#pod-network docs/concepts/cluster-administration/networking/ github.com/flannel-io/flannel Pods cannot resolve DNS","title":"Install Kubernetes (k8s) v1.23 Cluster on Ubuntu 18.04 LTS"},{"location":"OPENSOURCE/2022-04-25-install-k8s-1.23-cluster-on-ubuntu-18lts/#1-preparation","text":"","title":"1. Preparation"},{"location":"OPENSOURCE/2022-04-25-install-k8s-1.23-cluster-on-ubuntu-18lts/#11-vms-vagrant","text":"4 VMs Hostname vCPUs Memory Swap IP OS sudoer master01 2 8G 0 192.168.56.200 CentOS 7 vagrant minion01 2 8G 0 192.168.56.101 CentOS 7 vagrant minion02 2 8G 0 192.168.56.102 CentOS 7 vagrant minion03 2 8G 0 192.168.56.103 CentOS 7 vagrant /etc/hosts /etc/hosts 192.168.56.200 master01 192.168.56.101 minion01 192.168.56.102 minion02 192.168.56.103 minion03 192.168.10.200 k8s-cluster $ vagrant status Current machine states: master01 running ( virtualbox ) minion01 running ( virtualbox ) minion02 running ( virtualbox ) minion03 running ( virtualbox ) Vagrantfile Vagrantfile Vagrant . configure ( \"2\" ) do | config | config . vm . provider :libvirt do | libvirt | libvirt . cpu_mode = \"host-passthrough\" libvirt . cpus = 2 libvirt . disk_bus = \"virtio\" libvirt . disk_driver :cache => \"writeback\" libvirt . driver = \"kvm\" libvirt . memory = 8192 libvirt . memorybacking :access , :mode => \"shared\" libvirt . nested = true libvirt . nic_model_type = \"virtio\" libvirt . storage :file , bus : \"virtio\" , cache : \"writeback\" libvirt . video_type = \"virtio\" end config . vm . provider :virtualbox do | virtualbox | virtualbox . cpus = 2 virtualbox . memory = 8192 virtualbox . customize [ \"modifyvm\" , :id , \"--cpu-profile\" , \"host\" ] virtualbox . customize [ \"modifyvm\" , :id , \"--nested-hw-virt\" , \"on\" ] end config . vm . define \"master01\" do | master01 | master01 . vm . hostname = \"master01\" master01 . vm . box = \"hashicorp/bionic64\" master01 . vm . network \"private_network\" , ip : \"192.168.56.200\" master01 . vm . provider \"virtualbox\" do | vb | vb . customize [ 'modifyvm' , :id , '--natnet1' , '20.0.51.0/24' ] end end config . vm . define \"minion01\" do | minion01 | minion01 . vm . hostname = \"minion01\" minion01 . vm . box = \"hashicorp/bionic64\" minion01 . vm . network \"private_network\" , ip : \"192.168.56.101\" minion01 . vm . provider \"virtualbox\" do | vb | vb . customize [ 'modifyvm' , :id , '--natnet1' , '20.0.52.0/24' ] end end config . vm . define \"minion02\" do | minion02 | minion02 . vm . hostname = \"minion02\" minion02 . vm . box = \"hashicorp/bionic64\" minion02 . vm . network \"private_network\" , ip : \"192.168.56.102\" minion02 . vm . provider \"virtualbox\" do | vb | vb . customize [ 'modifyvm' , :id , '--natnet1' , '20.0.53.0/24' ] end end config . vm . define \"minion03\" do | minion03 | minion03 . vm . hostname = \"minion03\" minion03 . vm . box = \"hashicorp/bionic64\" minion03 . vm . network \"private_network\" , ip : \"192.168.56.103\" minion03 . vm . provider \"virtualbox\" do | vb | vb . customize [ 'modifyvm' , :id , '--natnet1' , '20.0.54.0/24' ] end end end Please refer to Introduction to Vagrant for more information about Vagrant.","title":"1.1 VMs (Vagrant)"},{"location":"OPENSOURCE/2022-04-25-install-k8s-1.23-cluster-on-ubuntu-18lts/#12-ssh-config","text":"vagrant ssh-config | tee -a ~/.ssh/config Create a script foreach-node.sh . foreach-node.sh foreach-node.sh #/bin/sh NODES = \"master01 minion01 minion02 minion03\" CMD = \"exec\" if [[ \" $1 \" == \"-h\" ]] ; then echo \" $0 -n [NODES] -m [exec|script] [command_or_scriptfile]\" exit 0 fi while [[ $# > 0 ]] ; do if [[ \" $1 \" == \"-n\" ]] ; then NODES = \" $2 \" shift 2 elif [[ \" $1 \" == \"-m\" ]] ; then CMD = \" $2 \" shift 2 else break fi done SUBCMD = \" $* \" if [[ -z \" $SUBCMD \" ]] ; then SUBCMD = \"echo OK\" fi for node in $NODES ; do if [[ \" $CMD \" == \"exec\" ]] ; then echo -n \" $node \" ssh $node $SUBCMD elif [[ \" $CMD \" == \"script\" ]] ; then echo \" $node ...\" if [[ ! -f $SUBCMD ]] ; then echo \" $SUBCMD not exists\" exit 1 fi scp $SUBCMD $node :/tmp/a.sh ssh $node \"chmod +x /tmp/a.sh && sudo /tmp/a.sh\" fi done chmod +x foreach-node.sh # have a check ./foreach-node.sh","title":"1.2 SSH config"},{"location":"OPENSOURCE/2022-04-25-install-k8s-1.23-cluster-on-ubuntu-18lts/#13-dns-via-hosts-file","text":"cat <<EOF > /tmp/add-hosts.sh cat <<EEE >> /etc/hosts 192.168.56.200 master01 192.168.56.101 minion01 192.168.56.102 minion02 192.168.56.103 minion03 192.168.56.200 k8s-cluster EEE EOF ./foreach-node.sh \"sudo sed -ie s/127.0.2.1/#127.0.2.1/ /etc/hosts\" ./foreach-node.sh -m script /tmp/add-hosts.sh","title":"1.3 DNS via hosts file"},{"location":"OPENSOURCE/2022-04-25-install-k8s-1.23-cluster-on-ubuntu-18lts/#2-basic-configurations-for-servers","text":"","title":"2. Basic configurations for servers"},{"location":"OPENSOURCE/2022-04-25-install-k8s-1.23-cluster-on-ubuntu-18lts/#21-check-firewall-configuration","text":"$ ./foreach-node.sh sudo ufw status master01 Status: inactive minion01 Status: inactive minion02 Status: inactive minion03 Status: inactive","title":"2.1 Check firewall configuration"},{"location":"OPENSOURCE/2022-04-25-install-k8s-1.23-cluster-on-ubuntu-18lts/#22-set-selinux-in-permissive-mode-effectively-disabling-it","text":"$ ./foreach-node.sh 'sudo sestatus' master01 sudo: sestatus: command not found minion01 sudo: sestatus: command not found minion02 sudo: sestatus: command not found minion03 sudo: sestatus: command not found","title":"2.2 Set SELinux in permissive mode (effectively disabling it)"},{"location":"OPENSOURCE/2022-04-25-install-k8s-1.23-cluster-on-ubuntu-18lts/#23-disable-swap","text":"You MUST disable swap in order for the kubelet to work properly. ./foreach-node.sh sudo swapoff -a ./foreach-node.sh 'sudo sed -ie \"s:/dev/disk/by-uuid/\\(.*\\) none swap sw 0 0:#/dev/disk/by-uuid/\\1 none swap sw 0 0:\" /etc/fstab'","title":"2.3 Disable swap"},{"location":"OPENSOURCE/2022-04-25-install-k8s-1.23-cluster-on-ubuntu-18lts/#24-verify-the-mac-address-and-product_uuid-are-unique-for-every-node","text":"./foreach-node.sh 'ip link | grep link/ether' ./foreach-node.sh sudo cat /sys/class/dmi/id/product_uuid","title":"2.4 Verify the MAC address and product_uuid are unique for every node"},{"location":"OPENSOURCE/2022-04-25-install-k8s-1.23-cluster-on-ubuntu-18lts/#25-letting-iptables-see-bridged-traffic","text":"# Make sure that the br_netfilter module is loaded ./foreach-node.sh 'lsmod | grep br_netfilter' # To load it explicitly ./foreach-node.sh 'sudo modprobe br_netfilter' # Ensure net.bridge.bridge-nf-call-iptables is set to 1 in your sysctl config cat <<EEE > /tmp/ensure-bridge-nf.sh cat <<EOF | sudo tee /etc/modules-load.d/k8s.conf br_netfilter EOF cat <<EOF | sudo tee /etc/sysctl.d/k8s.conf net.bridge.bridge-nf-call-ip6tables = 1 net.bridge.bridge-nf-call-iptables = 1 EOF sudo sysctl --system EEE ./foreach-node.sh -m script /tmp/ensure-bridge-nf.sh","title":"2.5 Letting iptables see bridged traffic"},{"location":"OPENSOURCE/2022-04-25-install-k8s-1.23-cluster-on-ubuntu-18lts/#26-sysctl-for-kvm","text":"cat <<EEE > /tmp/set-sysctl.sh cat <<EOF | sudo tee /etc/sysctl.d/kvm.conf net.ipv4.conf.default.rp_filter=0 net.ipv4.conf.all.rp_filter=0 net.ipv4.conf.all.proxy_arp = 1 EOF sudo sysctl --system EEE ./foreach-node.sh -m script /tmp/set-sysctl.sh","title":"2.6 Sysctl for KVM"},{"location":"OPENSOURCE/2022-04-25-install-k8s-1.23-cluster-on-ubuntu-18lts/#3-install-docker-ce-as-the-container-runtime","text":"","title":"3. Install docker-ce as the container runtime"},{"location":"OPENSOURCE/2022-04-25-install-k8s-1.23-cluster-on-ubuntu-18lts/#31-install-docker-engine","text":"cat <<EOF > /tmp/install-docker.sh ##Set up the repository sudo apt-get update sudo apt-get install -y \\ ca-certificates \\ curl \\ gnupg \\ lsb-release curl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /usr/share/keyrings/docker-archive-keyring.gpg echo \\ \"deb [arch=\\$(dpkg --print-architecture) signed-by=/usr/share/keyrings/docker-archive-keyring.gpg] https://download.docker.com/linux/ubuntu \\ \\$(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list > /dev/null ##Install Docker Engine sudo apt-get update sudo apt-get install -y docker-ce docker-ce-cli containerd.io EOF ./foreach-node.sh -m script /tmp/install-docker.sh cat <<EOF > /tmp/patch.sh mkdir -p /etc/docker/ mkdir -p /etc/systemd/system/docker.service.d cat > /etc/docker/daemon.json <<EEE { \"exec-opts\": [\"native.cgroupdriver=systemd\"], \"log-driver\": \"json-file\", \"log-opts\": { \"max-size\": \"100m\" }, \"storage-driver\": \"overlay2\", \"storage-opts\": [ \"overlay2.override_kernel_check=true\" ] } EEE # Restart docker. systemctl daemon-reload systemctl restart docker EOF ./foreach-node.sh -m script /tmp/patch.sh See: - https://github.com/schoolofdevops/kubernetes-labguide/issues/10 - https://docs.docker.com/engine/install/ubuntu/","title":"3.1 Install Docker Engine"},{"location":"OPENSOURCE/2022-04-25-install-k8s-1.23-cluster-on-ubuntu-18lts/#32-verify-that-docker-engine-is-installed-correctly","text":"Running the hello-world image. ./foreach-node.sh sudo docker run hello-world","title":"3.2 Verify that Docker Engine is installed correctly"},{"location":"OPENSOURCE/2022-04-25-install-k8s-1.23-cluster-on-ubuntu-18lts/#4-install-kubeadm-kubelet-and-kubectl","text":"NOTE: Use your own url for apt-key.gpg and apt repository cat <<EEE > /tmp/install-kubeadm.sh sudo apt-get update sudo apt-get install -y apt-transport-https ca-certificates curl sudo curl -fsSLo /usr/share/keyrings/kubernetes-archive-keyring.gpg https://mirrors.aliyun.com/kubernetes/apt/doc/apt-key.gpg # Add the Kubernetes apt repository echo \"deb [signed-by=/usr/share/keyrings/kubernetes-archive-keyring.gpg] https://mirrors.aliyun.com/kubernetes/apt/ kubernetes-xenial main\" | sudo tee /etc/apt/sources.list.d/kubernetes.list # Install kubelet, kubeadm and kubectl, and pin their version sudo apt-get update sudo apt-get install -y kubelet kubeadm kubectl sudo apt-mark hold kubelet kubeadm kubectl EEE ./foreach-node.sh -m script /tmp/install-kubeadm.sh Check kubeadm version $ ./foreach-node.sh 'kubeadm version | awk -F, \"{print \\$3}\"' master01 GitVersion: \"v1.23.6\" minion01 GitVersion: \"v1.23.6\" minion02 GitVersion: \"v1.23.6\" minion03 GitVersion: \"v1.23.6\" See: https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/install-kubeadm/","title":"4. Install kubeadm, kubelet and kubectl"},{"location":"OPENSOURCE/2022-04-25-install-k8s-1.23-cluster-on-ubuntu-18lts/#5-creating-k8s-cluster-with-kubeadm","text":"Ping k8s-cluster ./foreach-node.sh ping k8s-cluster -c 1","title":"5. Creating k8s cluster with kubeadm"},{"location":"OPENSOURCE/2022-04-25-install-k8s-1.23-cluster-on-ubuntu-18lts/#51-pull-images","text":"Pull the following images: $ sudo kubeadm config images list k8s.gcr.io/kube-apiserver:v1.23.6 k8s.gcr.io/kube-controller-manager:v1.23.6 k8s.gcr.io/kube-scheduler:v1.23.6 k8s.gcr.io/kube-proxy:v1.23.6 k8s.gcr.io/pause:3.6 k8s.gcr.io/etcd:3.5.1-0 k8s.gcr.io/coredns/coredns:v1.8.6","title":"5.1 Pull images"},{"location":"OPENSOURCE/2022-04-25-install-k8s-1.23-cluster-on-ubuntu-18lts/#52-init-cluster-on-master01","text":"For flannel pod network (see 5.4 ), the argument --pod-network-cidr=10.244.0.0/16 should be provided. sudo kubeadm init \\ --control-plane-endpoint \"k8s-cluster:6443\" \\ --apiserver-advertise-address \"192.168.56.200\" \\ --pod-network-cidr = 10 .244.0.0/16 Output [ init ] Using Kubernetes version: v1.23.6 [ preflight ] Running pre-flight checks [ preflight ] Pulling images required for setting up a Kubernetes cluster [ preflight ] This might take a minute or two, depending on the speed of your internet connection [ preflight ] You can also perform this action in beforehand using 'kubeadm config images pull' [ certs ] Using certificateDir folder \"/etc/kubernetes/pki\" [ certs ] Generating \"ca\" certificate and key [ certs ] Generating \"apiserver\" certificate and key [ certs ] apiserver serving cert is signed for DNS names [ k8s-cluster kubernetes kubernetes.default kubernetes.default.svc kubernetes.default.svc.cluster.local master01 ] and IPs [ 10 .96.0.1 192 .168.56.200 ] [ certs ] Generating \"apiserver-kubelet-client\" certificate and key [ certs ] Generating \"front-proxy-ca\" certificate and key [ certs ] Generating \"front-proxy-client\" certificate and key [ certs ] Generating \"etcd/ca\" certificate and key [ certs ] Generating \"etcd/server\" certificate and key [ certs ] etcd/server serving cert is signed for DNS names [ localhost master01 ] and IPs [ 192 .168.56.200 127 .0.0.1 ::1 ] [ certs ] Generating \"etcd/peer\" certificate and key [ certs ] etcd/peer serving cert is signed for DNS names [ localhost master01 ] and IPs [ 192 .168.56.200 127 .0.0.1 ::1 ] [ certs ] Generating \"etcd/healthcheck-client\" certificate and key [ certs ] Generating \"apiserver-etcd-client\" certificate and key [ certs ] Generating \"sa\" key and public key [ kubeconfig ] Using kubeconfig folder \"/etc/kubernetes\" [ kubeconfig ] Writing \"admin.conf\" kubeconfig file [ kubeconfig ] Writing \"kubelet.conf\" kubeconfig file [ kubeconfig ] Writing \"controller-manager.conf\" kubeconfig file [ kubeconfig ] Writing \"scheduler.conf\" kubeconfig file [ kubelet-start ] Writing kubelet environment file with flags to file \"/var/lib/kubelet/kubeadm-flags.env\" [ kubelet-start ] Writing kubelet configuration to file \"/var/lib/kubelet/config.yaml\" [ kubelet-start ] Starting the kubelet [ control-plane ] Using manifest folder \"/etc/kubernetes/manifests\" [ control-plane ] Creating static Pod manifest for \"kube-apiserver\" [ control-plane ] Creating static Pod manifest for \"kube-controller-manager\" [ control-plane ] Creating static Pod manifest for \"kube-scheduler\" [ etcd ] Creating static Pod manifest for local etcd in \"/etc/kubernetes/manifests\" [ wait-control-plane ] Waiting for the kubelet to boot up the control plane as static Pods from directory \"/etc/kubernetes/manifests\" . This can take up to 4m0s [ apiclient ] All control plane components are healthy after 5 .001770 seconds [ upload-config ] Storing the configuration used in ConfigMap \"kubeadm-config\" in the \"kube-system\" Namespace [ kubelet ] Creating a ConfigMap \"kubelet-config-1.23\" in namespace kube-system with the configuration for the kubelets in the cluster NOTE: The \"kubelet-config-1.23\" naming of the kubelet ConfigMap is deprecated. Once the UnversionedKubeletConfigMap feature gate graduates to Beta the default name will become just \"kubelet-config\" . Kubeadm upgrade will handle this transition transparently. [ upload-certs ] Skipping phase. Please see --upload-certs [ mark-control-plane ] Marking the node master01 as control-plane by adding the labels: [ node-role.kubernetes.io/master ( deprecated ) node-role.kubernetes.io/control-plane node.kubernetes.io/exclude-from-external-load-balancers ] [ mark-control-plane ] Marking the node master01 as control-plane by adding the taints [ node-role.kubernetes.io/master:NoSchedule ] [ bootstrap-token ] Using token: eu2pzh.mbow7h16pv2bnl4i [ bootstrap-token ] Configuring bootstrap tokens, cluster-info ConfigMap, RBAC Roles [ bootstrap-token ] configured RBAC rules to allow Node Bootstrap tokens to get nodes [ bootstrap-token ] configured RBAC rules to allow Node Bootstrap tokens to post CSRs in order for nodes to get long term certificate credentials [ bootstrap-token ] configured RBAC rules to allow the csrapprover controller automatically approve CSRs from a Node Bootstrap Token [ bootstrap-token ] configured RBAC rules to allow certificate rotation for all node client certificates in the cluster [ bootstrap-token ] Creating the \"cluster-info\" ConfigMap in the \"kube-public\" namespace [ kubelet-finalize ] Updating \"/etc/kubernetes/kubelet.conf\" to point to a rotatable kubelet client certificate and key [ addons ] Applied essential addon: CoreDNS [ addons ] Applied essential addon: kube-proxy Your Kubernetes control-plane has initialized successfully! To start using your cluster, you need to run the following as a regular user: mkdir -p $HOME /.kube sudo cp -i /etc/kubernetes/admin.conf $HOME /.kube/config sudo chown $( id -u ) : $( id -g ) $HOME /.kube/config Alternatively, if you are the root user, you can run: export KUBECONFIG = /etc/kubernetes/admin.conf You should now deploy a pod network to the cluster. Run \"kubectl apply -f [podnetwork].yaml\" with one of the options listed at: https://kubernetes.io/docs/concepts/cluster-administration/addons/ You can now join any number of control-plane nodes by copying certificate authorities and service account keys on each node and then running the following as root: kubeadm join k8s-cluster:6443 --token eu2pzh.mbow7h16pv2bnl4i \\ --discovery-token-ca-cert-hash sha256:021b945cecea1f592acf107b27fc7aba098b58a4bba0295aa96118a13b81e19f \\ --control-plane Then you can join any number of worker nodes by running the following on each as root: kubeadm join k8s-cluster:6443 --token eu2pzh.mbow7h16pv2bnl4i \\ --discovery-token-ca-cert-hash sha256:021b945cecea1f592acf107b27fc7aba098b58a4bba0295aa96118a13b81e19f","title":"5.2 Init cluster on master01"},{"location":"OPENSOURCE/2022-04-25-install-k8s-1.23-cluster-on-ubuntu-18lts/#53-create-homekubeconfig-on-master01-or-any-server-with-kubectl-installed","text":"mkdir -p $HOME /.kube sudo cp -i /etc/kubernetes/admin.conf $HOME /.kube/config sudo chown $( id -u ) : $( id -g ) $HOME /.kube/config See also Install and Set Up kubectl on Linux","title":"5.3 Create $HOME/.kube/config on master01 (or any server with kubectl installed)"},{"location":"OPENSOURCE/2022-04-25-install-k8s-1.23-cluster-on-ubuntu-18lts/#54-deploy-a-pod-network-flannel-to-the-cluster","text":"On master01 kubectl apply -f https://raw.githubusercontent.com/flannel-io/flannel/v0.17.0/Documentation/kube-flannel.yml Check cluster status kubectl get pod -A kubectl get node","title":"5.4 Deploy a pod network (flannel) to the cluster"},{"location":"OPENSOURCE/2022-04-25-install-k8s-1.23-cluster-on-ubuntu-18lts/#55-join-the-control-plane-node","text":"(omit..) Please refer to the output of kubeadm init . See also Install Kubernetes (k8s) v1.22 Highly Available Clusters on CentOS 7","title":"5.5 Join the control-plane node"},{"location":"OPENSOURCE/2022-04-25-install-k8s-1.23-cluster-on-ubuntu-18lts/#56-join-worker-nodes","text":"On minion01, minion02, minion03 # e.g. ./foreach-node.sh -n \"minion01 minion02 minion03\" \\ sudo kubeadm join k8s-cluster:6443 --token eu2pzh.mbow7h16pv2bnl4i \\ --discovery-token-ca-cert-hash sha256:021b945cecea1f592acf107b27fc7aba098b58a4bba0295aa96118a13b81e19f Output [ preflight ] Running pre-flight checks [ preflight ] Reading configuration from the cluster... [ preflight ] FYI: You can look at this config file with 'kubectl -n kube-system get cm kubeadm-config -o yaml' W0425 13 :33:32.424506 24882 utils.go:69 ] The recommended value for \"resolvConf\" in \"KubeletConfiguration\" is: /run/systemd/resolve/resolv.conf ; the provided value is: /run/systemd/resolve/resolv.conf [ kubelet-start ] Writing kubelet configuration to file \"/var/lib/kubelet/config.yaml\" [ kubelet-start ] Writing kubelet environment file with flags to file \"/var/lib/kubelet/kubeadm-flags.env\" [ kubelet-start ] Starting the kubelet [ kubelet-start ] Waiting for the kubelet to perform the TLS Bootstrap... This node has joined the cluster: * Certificate signing request was sent to apiserver and a response was received. * The Kubelet was informed of the new secure connection details. Run 'kubectl get nodes' on the control-plane to see this node join the cluster.","title":"5.6 Join worker nodes"},{"location":"OPENSOURCE/2022-04-25-install-k8s-1.23-cluster-on-ubuntu-18lts/#57-check-the-cluster","text":"On master01.k8s. Check the nodes kubectl get nodes Output: NAME STATUS ROLES AGE VERSION master01 Ready control-plane,master 30m v1.23.6 minion01 Ready <none> 109s v1.23.6 minion02 Ready <none> 102s v1.23.6 minion03 Ready <none> 95s v1.23.6 Check the pods kubectl get pod -A Output: NAMESPACE NAME READY STATUS RESTARTS AGE kube-system coredns-64897985d-cts4b 1 /1 Running 0 30m kube-system coredns-64897985d-fvqrg 1 /1 Running 0 30m kube-system etcd-master01 1 /1 Running 1 31m kube-system kube-apiserver-master01 1 /1 Running 1 31m kube-system kube-controller-manager-master01 1 /1 Running 1 31m kube-system kube-flannel-ds-mm65t 1 /1 Running 0 2m33s kube-system kube-flannel-ds-sf85z 1 /1 Running 0 2m26s kube-system kube-flannel-ds-vr67h 1 /1 Running 0 13m kube-system kube-flannel-ds-xg8qb 1 /1 Running 0 2m40s kube-system kube-proxy-2xlqw 1 /1 Running 0 2m33s kube-system kube-proxy-66n5q 1 /1 Running 0 30m kube-system kube-proxy-vxv4c 1 /1 Running 0 2m40s kube-system kube-proxy-wvvgs 1 /1 Running 0 2m26s kube-system kube-scheduler-master01 1 /1 Running 1 31m Cluster Info kubectl cluster-info Output: Kubernetes control plane is running at https://k8s-cluster:6443 CoreDNS is running at https://k8s-cluster:6443/api/v1/namespaces/kube-system/services/kube-dns:dns/proxy To further debug and diagnose cluster problems, use 'kubectl cluster-info dump' .","title":"5.7 Check the cluster"},{"location":"OPENSOURCE/2022-04-25-install-k8s-1.23-cluster-on-ubuntu-18lts/#58-no-route-to-host","text":"If you met \"No route to host\" in the k8s cluster, try to fix the route as below, and then redeploy the flannel pod network. ./foreach-node.sh -n master01 \\ 'sudo ip route del default ; sudo ip route add default via 192.168.56.200 dev eth1' ./foreach-node.sh -n minion01 \\ 'sudo ip route del default ; sudo ip route add default via 192.168.56.101 dev eth1' ./foreach-node.sh -n minion02 \\ 'sudo ip route del default ; sudo ip route add default via 192.168.56.102 dev eth1' ./foreach-node.sh -n minion03 \\ 'sudo ip route del default ; sudo ip route add default via 192.168.56.103 dev eth1' ./foreach-node.sh ip route Reset the IP route. ./foreach-node.sh -n master01 \\ 'sudo ip route del default ; sudo ip route add default via 20.0.51.2 dev eth0 proto dhcp src 20.0.51.15 metric 100' ./foreach-node.sh -n minion01 \\ 'sudo ip route del default ; sudo ip route add default via 20.0.52.2 dev eth0 proto dhcp src 20.0.52.15 metric 100' ./foreach-node.sh -n minion02 \\ 'sudo ip route del default ; sudo ip route add default via 20.0.53.2 dev eth0 proto dhcp src 20.0.53.15 metric 100' ./foreach-node.sh -n minion03 \\ 'sudo ip route del default ; sudo ip route add default via 20.0.54.2 dev eth0 proto dhcp src 20.0.54.15 metric 100' See also: https://serverfault.com/questions/123553/how-to-set-the-preferred-network-interface-in-linux","title":"5.8 \"No route to host\""},{"location":"OPENSOURCE/2022-04-25-install-k8s-1.23-cluster-on-ubuntu-18lts/#reference","text":"docs/setup/production-environment/tools/kubeadm/install-kubeadm docs/setup/production-environment/tools/kubeadm/high-availability docs/ha-considerations.md docs/setup/production-environment/tools/kubeadm/create-cluster-kubeadm/#pod-network docs/concepts/cluster-administration/networking/ github.com/flannel-io/flannel Pods cannot resolve DNS","title":"Reference"},{"location":"UTILITIES/2015-09-25-fdiskmountfstab-%25e5%2591%25bd%25e4%25bb%25a4%25e8%25af%25b4%25e6%2598%258e.html/","tags":[],"text":"\u4e00\u3001fdisk \u64cd\u4f5c\u786c\u76d8\u7684\u547d\u4ee4 [root@localhost]# fdisk \u8bbe\u5907 \u4f8b\u5982\u6211\u4eec\u901a\u8fc7 fdisk -l \u5f97\u77e5 /dev/sda\u8bbe\u5907\uff1b\u6211\u4eec\u5982\u679c\u60f3\u518d\u6dfb\u52a0\u6216\u8005\u5220\u9664\u4e00\u4e9b\u5206\u533a\uff0c\u53ef\u4ee5\u7528 [root@localhost]# fdisk /dev/sda 1\u3001fdisk \u7684\u8bf4\u660e \u5f53\u6211\u4eec\u901a\u8fc7 fdisk \u8bbe\u5907\uff0c\u8fdb\u5165\u76f8\u5e94\u8bbe\u5907\u7684\u64cd\u4f5c\u65f6\uff0c\u4f1a\u53d1\u73b0\u6709\u5982\u4e0b\u7684\u63d0\u793a [root@localhost]# fdisk /dev/sda Command (m for help): \u5728\u8fd9\u91cc\u6309m \uff0c\u5c31\u4f1a\u8f93\u51fa\u5e2e\u52a9\uff1b Command action a toggle a bootable flag b edit bsd disklabel c toggle the dos compatibility flag d delete a partition \u6ce8\uff1a\u8fd9\u662f\u5220\u9664\u4e00\u4e2a\u5206\u533a\u7684\u52a8\u4f5c\uff1b l list known partition types \u6ce8\uff1al\u662f\u5217\u51fa\u5206\u533a\u7c7b\u578b\uff0c\u4ee5\u4f9b\u6211\u4eec\u8bbe\u7f6e\u76f8\u5e94\u5206\u533a\u7684\u7c7b\u578b\uff1b m print this menu \u6ce8\uff1am \u662f\u5217\u51fa\u5e2e\u52a9\u4fe1\u606f\uff1b n add a new partition \u6ce8\uff1a\u6dfb\u52a0\u4e00\u4e2a\u5206\u533a\uff1b o create a new empty DOS partition table p print the partition table \u6ce8\uff1ap\u5217\u51fa\u5206\u533a\u8868\uff1b q quit without saving changes \u6ce8\uff1a\u4e0d\u4fdd\u5b58\u9000\u51fa\uff1b s create a new empty Sun disklabel t change a partition's system id \u6ce8\uff1at \u6539\u53d8\u5206\u533a\u7c7b\u578b\uff1b u change display/entry units v verify the partition table w write table to disk and exit \u6ce8\uff1a\u628a\u5206\u533a\u8868\u5199\u5165\u786c\u76d8\u5e76\u9000\u51fa\uff1b x extra functionality (experts only) \u6ce8\uff1a\u6269\u5c55\u5e94\u7528\uff0c\u4e13\u5bb6\u529f\u80fd\uff1b 2\u3001\u5217\u51fa\u5f53\u524d\u64cd\u4f5c\u786c\u76d8\u7684\u5206\u533a\u60c5\u51b5\uff0c\u7528p Command (m for help): p Disk /dev/sda: 1035 MB, 1035730944 bytes 256 heads, 63 sectors/track, 125 cylinders Units = cylinders of 16128 * 512 = 8257536 bytes Device Boot Start End Blocks Id System /dev/sda1 1 25 201568+ c W95 FAT32 (LBA) /dev/sda2 26 125 806400 5 Extended /dev/sda5 26 50 201568+ 83 Linux /dev/sda6 51 76 200781 83 Linux 3\u3001\u901a\u8fc7fdisk\u7684d\u6307\u4ee4\u6765\u5220\u9664\u4e00\u4e2a\u5206\u533a Command (m for help): p \u6ce8\uff1a\u5217\u51fa\u5206\u533a\u60c5\u51b5\uff1b Disk /dev/sda: 1035 MB, 1035730944 bytes 256 heads, 63 sectors/track, 125 cylinders Units = cylinders of 16128 * 512 = 8257536 bytes Device Boot Start End Blocks Id System /dev/sda1 1 25 201568+ c W95 FAT32 (LBA) /dev/sda2 26 125 806400 5 Extended /dev/sda5 26 50 201568+ 83 Linux /dev/sda6 51 76 200781 83 Linux Command (m for help): d \u6ce8\uff1a\u6267\u884c\u5220\u9664\u5206\u533a\u6307\u5b9a\uff1b Partition number (1-6): 6 \u6ce8\uff1a\u6211\u60f3\u5220\u9664 sda6 \uff0c\u5c31\u5728\u8fd9\u91cc\u8f93\u5165 6 \uff1b Command (m for help): p \u6ce8\uff1a\u518d\u67e5\u770b\u4e00\u4e0b\u786c\u76d8\u5206\u533a\u60c5\u51b5\uff0c\u770b\u662f\u5426\u5220\u9664\u4e86\uff1f Disk /dev/sda: 1035 MB, 1035730944 bytes 256 heads, 63 sectors/track, 125 cylinders Units = cylinders of 16128 * 512 = 8257536 bytes Device Boot Start End Blocks Id System /dev/sda1 1 25 201568+ c W95 FAT32 (LBA) /dev/sda2 26 125 806400 5 Extended /dev/sda5 26 50 201568+ 83 Linux Command (m for help): \u8b66\u544a \uff1a\u5220\u9664\u5206\u533a\u65f6\u8981\u5c0f\u5fc3\uff0c\u8bf7\u770b\u597d\u5206\u533a\u7684\u5e8f\u53f7\uff0c\u5982\u679c\u60a8\u5220\u9664\u4e86\u6269\u5c55\u5206\u533a\uff0c\u6269\u5c55\u5206\u533a\u4e4b\u4e0b\u7684\u903b\u8f91\u5206\u533a\u90fd\u4f1a\u5220\u9664\uff1b\u6240\u4ee5\u64cd\u4f5c\u65f6\u4e00\u5b9a\u8981\u5c0f\u5fc3\uff1b\u5982\u679c\u77e5\u9053\u81ea\u5df1\u64cd\u4f5c\u9519\u4e86\uff0c\u8bf7\u4e0d\u8981\u60ca\u614c\uff0c\u7528q\u4e0d\u4fdd\u5b58\u9000\u51fa\uff1b\u5207\u8bb0\u5207\u8bb0\uff01\uff01\uff01\uff01\u5728\u5206\u533a\u64cd\u4f5c\u9519\u4e86\u4e4b\u65f6\uff0c\u5343\u4e07\u4e0d\u8981\u8f93\u5165w\u4fdd\u5b58\u9000\u51fa\uff01\uff01\uff01 4\u3001\u901a\u8fc7fdisk\u7684n\u6307\u4ee4\u589e\u52a0\u4e00\u4e2a\u5206\u533a Command (m for help): p Disk /dev/sda: 1035 MB, 1035730944 bytes 256 heads, 63 sectors/track, 125 cylinders Units = cylinders of 16128 * 512 = 8257536 bytes Device Boot Start End Blocks Id System /dev/sda1 1 25 201568+ c W95 FAT32 (LBA) /dev/sda2 26 125 806400 5 Extended /dev/sda5 26 50 201568+ 83 Linux Command (m for help): n \u6ce8\uff1a\u589e\u52a0\u4e00\u4e2a\u5206\u533a\uff1b Command action l logical (5 or over) \u6ce8\uff1a\u589e\u52a0\u903b\u8f91\u5206\u533a\uff0c\u5206\u533a\u7f16\u53f7\u8981\u5927\u4e8e5\uff1b\u4e3a\u4ec0\u4e48\u8981\u5927\u4e8e5\uff0c\u56e0\u4e3a\u5df2\u7ecf\u6709sda5\u4e86\uff1b p primary partition (1-4) \u6ce8\uff1a\u589e\u52a0\u4e00\u4e2a\u4e3b\u5206\u533a\uff1b\u7f16\u53f7\u4ece 1-4 \uff1b\u4f46sda1 \u548csda2\u90fd\u88ab\u5360\u7528\uff0c\u6240\u4ee5\u53ea\u80fd\u4ece3\u5f00\u59cb\uff1b p Partition number (1-4): 3 No free sectors available \u6ce8\uff1a\u5931\u8d25\u4e2d\uff0c\u4e3a\u4ec0\u4e48\u5931\u8d25\uff1f \u6ce8\uff1a\u6211\u8bd5\u56fe\u589e\u52a0\u4e00\u4e2a\u4e3b\u5206\u533a\uff0c\u770b\u6765\u662f\u5931\u8d25\u4e86\uff0c\u4e3a\u4ec0\u4e48\u5931\u8d25\uff1f\u56e0\u4e3a\u6211\u4eec\u770b\u5230\u4e3b\u5206\u533a+\u6269\u5c55\u5206\u533a\u628a\u6574\u4e2a\u78c1\u76d8\u90fd\u7528\u5149\u4e86\uff0c\u770b\u6269\u5c55\u5206\u533a\u7684End\u7684\u503c\uff0c\u518d\u770b\u4e00\u4e0b p\u8f93\u51fa\u4fe1\u606f\u4e2d\u6709125 cylinders\uff1b \u6240\u4ee5\u6211\u4eec\u53ea\u80fd\u589e\u52a0\u903b\u8f91\u5206\u533a\u4e86 Command (m for help): n Command action l logical (5 or over) p primary partition (1-4) l \u6ce8\uff1a\u5728\u8fd9\u91cc\u8f93\u5165l\uff0c\u5c31\u8fdb\u5165\u5212\u5206\u903b\u8f91\u5206\u533a\u9636\u6bb5\u4e86\uff1b First cylinder (51-125, default 51): \u6ce8\uff1a\u8fd9\u4e2a\u5c31\u662f\u5206\u533a\u7684Start \u503c\uff1b\u8fd9\u91cc\u6700\u597d\u76f4\u63a5\u6309\u56de\u8f66\uff0c\u5982\u679c\u60a8\u8f93\u5165\u4e86\u4e00\u4e2a\u975e\u9ed8\u8ba4\u7684\u6570\u5b57\uff0c\u4f1a\u9020\u6210\u7a7a\u95f4\u6d6a\u8d39\uff1b Using default value 51 Last cylinder or +size or +sizeM or +sizeK (51-125, default 125): +200M \u6ce8\uff1a\u8fd9\u4e2a\u662f\u5b9a\u4e49\u5206\u533a\u5927\u5c0f\u7684\uff0c+200M \u5c31\u662f\u5927\u5c0f\u4e3a200M \uff1b\u5f53\u7136\u60a8\u4e5f\u53ef\u4ee5\u6839\u636ep\u63d0\u793a\u7684\u5355\u4f4dcylinder\u7684\u5927\u5c0f\u6765\u7b97\uff0c\u7136\u540e\u6765\u6307\u5b9a End\u7684\u6570\u503c\u3002\u56de\u5934\u770b\u770b\u662f\u600e\u4e48\u7b97\u7684\uff1b\u8fd8\u662f\u7528+200M\u8fd9\u4e2a\u529e\u6cd5\u6765\u6dfb\u52a0\uff0c\u8fd9\u6837\u80fd\u76f4\u89c2\u4e00\u70b9\u3002\u5982\u679c\u60a8\u60f3\u6dfb\u52a0\u4e00\u4e2a10G\u5de6\u53f3\u5927\u5c0f\u7684\u5206\u533a\uff0c\u8bf7\u8f93\u5165 +10000M \uff1b Command (m for help): 5\u3001\u901a\u8fc7fdisk\u7684t\u6307\u4ee4\u6307\u5b9a\u5206\u533a\u7c7b\u578b Command (m for help): t \u6ce8\uff1a\u901a\u8fc7t\u6765\u6307\u5b9a\u5206\u533a\u7c7b\u578b\uff1b Partition number (1-6): 6 \u6ce8\uff1a\u8981\u6539\u53d8\u54ea\u4e2a\u5206\u533a\u7c7b\u578b\u5462\uff1f\u6211\u6307\u5b9a\u4e866\uff0c\u5176\u5b9e\u4e5f\u5c31\u662fsda6 Hex code (type L to list codes):L \u6ce8\uff1a\u5728\u8fd9\u91cc\u8f93\u5165L\uff0c\u5c31\u53ef\u4ee5\u67e5\u770b\u5206\u533a\u7c7b\u578b\u7684id\u4e86\uff1b Hex code (type L to list codes): b \u6ce8\uff1a\u5982\u679c\u6211\u60f3\u8ba9\u8fd9\u4e2a\u5206\u533a\u662f W95 FAT32 \u7c7b\u578b\u7684\uff0c\u901a\u8fc7L\u67e5\u770b\u5f97\u77e5 b\u662f\u8868\u793a\u7684\u662f\uff0c\u6240\u4ee5\u8f93\u5165\u4e86b\uff1b Changed system type of partition 6 to b (W95 FAT32) \u6ce8\uff1a\u7cfb\u7edf\u4fe1\u606f\uff0c\u6539\u53d8\u6210\u529f\uff1b\u662f\u5426\u662f\u6539\u53d8\u4e86\uff0c\u8bf7\u7528p\u67e5\u770b\uff1b Command (m for help): p Disk /dev/sda: 1035 MB, 1035730944 bytes 256 heads, 63 sectors/track, 125 cylinders Units = cylinders of 16128 * 512 = 8257536 bytes Device Boot Start End Blocks Id System /dev/sda1 1 25 201568+ c W95 FAT32 (LBA) /dev/sda2 26 125 806400 5 Extended /dev/sda5 26 50 201568+ 83 Linux /dev/sda6 51 75 201568+ b W95 FAT32 6\u3001fdisk \u7684\u9000\u51fa\uff0c\u7528q\u6216\u8005 w \u5176\u4e2d q\u662f \u4e0d\u4fdd\u5b58\u9000\u51fa\uff0cw\u662f\u4fdd\u5b58\u9000\u51fa Command (m for help): w \u6216 Command (m for help): q \u4e8c\u3001\u4e00\u4e2a\u6dfb\u52a0\u5206\u533a\u7684\u4f8b\u5b50 \u672c\u4f8b\u4e2d\u6211\u4eec\u4f1a\u6dfb\u52a0\u4e24\u4e2a200M\u7684\u4e3b\u5206\u533a\uff0c\u5176\u5b83\u4e3a\u6269\u5c55\u5206\u533a\uff0c\u5728\u6269\u5c55\u5206\u533a\u4e2d\u6211\u4eec\u6dfb\u52a0\u4e24\u4e2a200M\u5927\u5c0f\u7684\u903b\u8f91\u5206\u533a Command (m for help): p \u6ce8\uff1a\u5217\u51fa\u5206\u533a\u8868\uff1b Disk /dev/sda: 1035 MB, 1035730944 bytes 256 heads, 63 sectors/track, 125 cylinders Units = cylinders of 16128 * 512 = 8257536 bytes Device Boot Start End Blocks Id System Command (m for help): n \u6ce8\uff1a\u6dfb\u52a0\u5206\u533a\uff1b Command action e extended p primary partition (1-4) p \u6ce8\uff1a\u6dfb\u52a0\u4e3b\u5206\u533a\uff1b Partition number (1-4): 1 \u6ce8\uff1a\u6dfb\u52a0\u4e3b\u5206\u533a1\uff1b First cylinder (1-125, default 1): \u6ce8\uff1a\u76f4\u63a5\u56de\u8f66\uff0c\u4e3b\u5206\u533a1\u7684\u8d77\u59cb\u4f4d\u7f6e\uff1b\u9ed8\u8ba4\u4e3a1,\u9ed8\u8ba4\u5c31\u597d\uff1b Using default value 1 Last cylinder or +size or +sizeM or +sizeK (1-125, default 125): +200M \u6ce8\uff1a\u6307\u5b9a\u5206\u533a\u5927\u5c0f\uff0c\u7528+200M\u6765\u6307\u5b9a\u5927\u5c0f\u4e3a200M Command (m for help): n \u6ce8\uff1a\u6dfb\u52a0\u65b0\u5206\u533a\uff1b Command action e extended p primary partition (1-4) p \u6ce8\uff1a\u6dfb\u52a0\u4e3b\u5206\u533a Partition number (1-4): 2 \u6ce8\uff1a\u6dfb\u52a0\u4e3b\u5206\u533a2\uff1b First cylinder (26-125, default 26): Using default value 26 Last cylinder or +size or +sizeM or +sizeK (26-125, default 125): +200M \u6ce8\uff1a\u6307\u5b9a\u5206\u533a\u5927\u5c0f\uff0c\u7528+200M\u6765\u6307\u5b9a\u5927\u5c0f\u4e3a200M Command (m for help): n Command action e extended p primary partition (1-4) e \u6ce8\uff1a\u6dfb\u52a0\u6269\u5c55\u5206\u533a\uff1b Partition number (1-4): 3 \u6ce8\uff1a\u6307\u5b9a\u4e3a3 \uff0c\u56e0\u4e3a\u4e3b\u5206\u533a\u5df2\u7ecf\u5206\u4e86\u4e24\u4e2a\u4e86\uff0c\u8fd9\u4e2a\u4e5f\u7b97\u4e3b\u5206\u533a\uff0c\u4ece3\u5f00\u59cb\uff1b First cylinder (51-125, default 51): \u6ce8\uff1a\u76f4\u63a5\u56de\u8f66\uff1b Using default value 51 Last cylinder or +size or +sizeM or +sizeK (51-125, default 125): \u6ce8\uff1a\u76f4\u63a5\u56de\u8f66\uff0c\u628a\u5176\u4f59\u7684\u6240\u6709\u7a7a\u95f4\u90fd\u7ed9\u6269\u5c55\u5206\u533a\uff1b Using default value 125 Command (m for help): p Disk /dev/sda: 1035 MB, 1035730944 bytes 256 heads, 63 sectors/track, 125 cylinders Units = cylinders of 16128 * 512 = 8257536 bytes Device Boot Start End Blocks Id System /dev/sda1 1 25 201568+ 83 Linux /dev/sda2 26 50 201600 83 Linux /dev/sda3 51 125 604800 5 Extended Command (m for help): n Command action l logical (5 or over) p primary partition (1-4) l \u6ce8\uff1a\u6dfb\u52a0\u903b\u8f91\u5206\u533a\uff1b First cylinder (51-125, default 51): Using default value 51 Last cylinder or +size or +sizeM or +sizeK (51-125, default 125): +200M \u6ce8\uff1a\u6dfb\u52a0\u4e00\u4e2a\u5927\u5c0f\u4e3a200M\u5927\u5c0f\u7684\u5206\u533a\uff1b Command (m for help): n Command action l logical (5 or over) p primary partition (1-4) l \u6ce8\uff1a\u6dfb\u52a0\u4e00\u4e2a\u903b\u8f91\u5206\u533a\uff1b First cylinder (76-125, default 76): Using default value 76 Last cylinder or +size or +sizeM or +sizeK (76-125, default 125): +200M \u6ce8\uff1a\u6dfb\u52a0\u4e00\u4e2a\u5927\u5c0f\u4e3a200M\u5927\u5c0f\u7684\u5206\u533a\uff1b Command (m for help): p \u5217\u51fa\u5206\u533a\u8868\uff1b Disk /dev/sda: 1035 MB, 1035730944 bytes 256 heads, 63 sectors/track, 125 cylinders Units = cylinders of 16128 * 512 = 8257536 bytes Device Boot Start End Blocks Id System /dev/sda1 1 25 201568+ 83 Linux /dev/sda2 26 50 201600 83 Linux /dev/sda3 51 125 604800 5 Extended /dev/sda5 51 75 201568+ 83 Linux /dev/sda6 76 100 201568+ 83 Linux \u7136\u540e\u6211\u4eec\u6839\u636e\u524d\u9762\u6240\u8bf4\u901a\u8fc7t\u6307\u4ee4\u6765\u6539\u53d8\u5206\u533a\u7c7b\u578b\uff1b \u6700\u540e\u4e0d\u8981\u5fd8\u8bb0w\u4fdd\u5b58\u9000\u51fa \u683c\u5f0f\u5316\u5206\u533a&\u6302\u8f7d \u4e09\u3001\u5bf9\u5206\u533a\u8fdb\u884c\u683c\u5f0f\u5316\uff0c\u4ee5\u53ca\u52a0\u8f7d \u5148\u63d0\u793a\u4e00\u4e0b\uff1b\u7528 mkfs.bfs mkfs.ext2 mkfs.jfs mkfs.msdos mkfs.vfatmkfs.cramfs mkfs.ext3 mkfs.ext4 mkfs.minix mkfs.reiserfs mkfs.xfs \u7b49\u547d\u4ee4\u6765\u683c\u5f0f\u5316\u5206\u533a\uff0c\u6bd4\u5982\u6211\u60f3\u683c\u5f0f\u5316 sda6\u4e3aext4\u6587\u4ef6\u7cfb\u7edf\uff0c\u5219\u8f93\u5165\uff1b [root@localhost]# mkfs.ext4 /dev/sda6 \u5982\u679c\u6211\u60f3\u52a0\u8f7d sda6\u5230\u76ee\u524d\u7cfb\u7edf\u6765\u5b58\u53d6\u6587\u4ef6\uff0c\u5e94\u8be5\u6709mount \u547d\u4ee4\uff0c\u4f46\u9996\u5148\u60a8\u5f97\u5efa\u4e00\u4e2a\u6302\u8f7d\u76ee\u5f55\uff1b\u6bd4\u5982 /mnt/sda6 \uff1b [root@localhost]# mkdir /mnt/sda6 [root@localhost]# mount /dev/sda6 /mnt/sda6 [root@localhost]# df -lh Filesystem \u5bb9\u91cf \u5df2\u7528 \u53ef\u7528 \u5df2\u7528% \u6302\u8f7d\u70b9 /dev/hda8 11G 8.4G 2.0G 81% / /dev/shm 236M 0 236M 0% /dev/shm /dev/hda10 16G 6.9G 8.3G 46% /mnt/hda10 /dev/sda6 191M 5.6M 176M 4% /mnt/sda6 \u8fd9\u6837\u6211\u4eec\u5c31\u80fd\u8fdb\u5165 /mnt/sda6\u76ee\u5f55\uff0c\u7136\u540e\u5b58\u53d6\u6587\u4ef6\u4e86\u3002 \u56db\u3001\u6302\u8f7d\u548c\u5378\u8f7d Linux\u7cfb\u7edf\u5728\u4f7f\u7528\u5149\u76d8\u3001\u8f6f\u76d8\u6216U\u76d8\u65f6\uff0c\u5fc5\u987b\u5148\u6267\u884c\u6302\u8f7d\uff08mount\uff09\u547d\u4ee4\u3002\u6302\u8f7d\u547d\u4ee4\u4f1a\u5c06\u8fd9\u4e9b\u5b58\u50a8\u4ecb\u8d28\u6307\u5b9a\u6210\u7cfb\u7edf\u4e2d\u7684\u67d0\u4e2a\u76ee\u5f55\uff0c\u4ee5\u540e\u76f4\u63a5\u8bbf\u95ee\u76f8\u5e94\u76ee\u5f55\u5373\u53ef\u8bfb\u5199\u5b58\u50a8\u4ecb\u8d28\u4e0a\u7684\u6570\u636e\u3002 1.\u6302\u8f7d\u5149\u76d8 \u6302\u8f7d\u5149\u76d8\u7684\u547d\u4ee4\u5982\u4e0b\uff1a # mount -t is09660 /dev/cdrom /mnt/cdrom \u8be5\u547d\u4ee4\u5c06\u5149\u76d8\u6302\u8f7d\u5230/mnt/cdrom\u76ee\u5f55\uff0c\u4f7f\u7528\u201cls /mnt/cdrom\u201d\u547d\u4ee4\u5373\u53ef\u663e\u793a\u5149\u76d8\u4e2d\u6570\u636e\u548c\u6587\u4ef6\u3002 \u5378\u8f7d\u5149\u76d8\u7684\u547d\u4ee4\u5982\u4e0b\uff1a # umount /mnt/cdrom 2.\u6302\u8f7d\u8f6f\u76d8 \u5c06\u8f6f\u76d8\u6302\u8f7d\u5230/mnt/floppy\u76ee\u5f55\u7684\u547d\u4ee4\u5982\u4e0b\uff1a # mount /dev/fd0 /mnt/floppy \u5378\u8f7d\u8f6f\u76d8\u7684\u547d\u4ee4\u5982\u4e0b\uff1a #umount /mnt/floppy 3.\u6302\u8f7dU\u76d8 \u6302\u8f7dU\u76d8\u76f8\u5bf9\u590d\u6742\u4e00\u4e9b\u3002 \u9996\u5148\u4f7f\u7528\u201cfdisk -l\u201d\u547d\u4ee4\u67e5\u770b\u5916\u6302\u95ea\u5b58\u7684\u8bbe\u5907\u53f7\uff0c\u4e00\u822c\u4e3a/dev/sda1\u3002\u7136\u540e\u7528\u201cmkdir /mnt/usb\u201d\u547d\u4ee4\u5efa\u7acb\u4e00\u4e2a\u6302\u8f7dU\u76d8\u7528\u7684\u76ee\u5f55\u3002\u4e4b\u540e\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u6302\u8f7dFAT\u683c\u5f0f\u7684U\u76d8\uff1a # mount -t msdos /dev/sda1 /mnt/usb \u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u6302\u8f7dFAT32\u683c\u5f0f\u7684U\u76d8\uff1a # mount -t vfat /dev/sda1 /mnt/usb 4.\u6302\u8f7d\u5916\u6302\u786c\u76d8\u5206\u533a \u6302\u8f7d\u5916\u6302\u786c\u76d8\u5206\u533a\uff08FAT32\u683c\u5f0f\uff09\u540c\u6837\u9700\u8981\u5148\u7528\u201cfdisk -1\u201d\u67e5\u770b\u5916\u6302\u7684\u786c\u76d8\u5206\u533a\u8bbe\u5907\u53f7\uff0c\u5047\u8bbe\u4e3a/dev/hda1\u3002\u5efa\u7acb/mnt/vfat\u6302\u8f7d\u76ee\u5f55\u540e\uff0c\u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u8fdb\u884c\u6302\u8f7d\uff1a # mount -t vfat /dev/hda1 /mnt/vfat \u6ce8\u610f\uff0c\u9ed8\u8ba4\u60c5\u51b5\u4e0bLinux\u53ea\u5141\u8bb8root\u7528\u6237\u6267\u884cmount\u547d\u4ee4\u3002\u5982\u679c\u60f3\u8ba9\u4e00\u822c\u7528\u6237\u4e5f\u80fd\u6302\u8f7d\uff0c\u5e76\u4e14\u5e0c\u671b\u5728\u7cfb\u7edf\u542f\u52a8\u65f6\u81ea\u52a8\u6302\u8f7d\u5149\u76d8\u6216\u8f6f\u76d8\uff0c\u9700\u8981\u4fee\u6539/etc/fstab\u914d\u7f6e\u6587\u4ef6\uff0c\u52a0\u5165\u4ee5\u4e0b\u5185\u5bb9\uff1a LABEL=/ /\u3000ext3\u3000\u3000\u3000defaults\u3000\u30001 1 /dev/cdrom/mnt/cdrom iSo9660 auto,owner,kudzu,ro,user 0 0 /dev/fdo\u3000/mnt/floppy auto\u3000auto,owner,kudzu,ro,user 0 0 \u5176\u4e2d\uff0c\u201cuser\u201d\u8868\u793a\u5c06mount\u547d\u4ee4\u8d4b\u4e88\u4e00\u822c\u7528\u6237\u4f7f\u7528\u3002 /etc/fstab\u6587\u4ef6\u5728Linux\u7684\u5e2e\u52a9\u624b\u518c\u4e2d\u8bb2\u5f97\u5f88\u8be6\u7ec6\uff0c\u8bfb\u8005\u4e0d\u59a8\u770b\u4e00\u770b\u3002 \u4e94\u3001fstab\u8bf4\u660e fstab\u4e2d\u5b58\u653e\u4e86\u4e0e\u5206\u533a\u6709\u5173\u7684\u91cd\u8981\u4fe1\u606f\uff0c\u5176\u4e2d\u6bcf\u4e00\u884c\u4e3a\u4e00\u4e2a\u5206\u533a\u8bb0\u5f55\uff0c\u6bcf\u4e00\u884c\u53c8\u53ef\u5206\u4e3a\u516d\u4e2a\u90e8\u4efd\uff0c\u4e0b\u9762\u4ee5/dev/hda7 / ext2 defaults 1 1\u4e3a\u4f8b\u9010\u4e2a\u8bf4\u660e\uff1a 1. \u7b2c\u4e00\u9879\u662f\u60a8\u60f3\u8981mount\u7684\u50a8\u5b58\u88c5\u7f6e\u7684\u5b9e\u4f53\u4f4d\u7f6e\uff0c\u5982hdb\u6216\u5982\u4e0a\u4f8b\u7684/dev/hda7\u3002 2. \u7b2c\u4e8c\u9879\u5c31\u662f\u60a8\u60f3\u8981\u5c06\u5176\u52a0\u5165\u81f3\u54ea\u4e2a\u76ee\u5f55\u4f4d\u7f6e\uff0c\u5982/home\u6216\u5982\u4e0a\u4f8b\u7684/,\u8fd9\u5176\u5b9e\u5c31\u662f\u5728\u5b89\u88c5\u65f6\u63d0\u793a\u7684\u6302\u5165\u70b9\u3002 3. \u7b2c\u4e09\u9879\u5c31\u662f\u6240\u8c13\u7684local filesystem\uff0c\u5176\u5305\u542b\u4e86\u4ee5\u4e0b\u683c\u5f0f\uff1a\u5982ext\u3001ext2\u3001msdos\u3001iso9660\u3001nfs\u3001swap\u7b49\uff0c\u6216\u5982\u4e0a\u4f8b\u7684ext2\uff0c\u53ef\u4ee5\u53c2\u89c1/proc/filesystems\u8bf4\u660e\u3002 4. \u7b2c\u56db\u9879\u5c31\u662f\u60a8mount\u65f6\uff0c\u6240\u8981\u8bbe\u5b9a\u7684\u72b6\u6001\uff0c\u5982ro\uff08\u53ea\u8bfb\uff09\u6216\u5982\u4e0a\u4f8b\u7684defaults\uff08\u5305\u62ec\u4e86\u5176\u5b83\u53c2\u6570\u5982rw\u3001suid\u3001exec\u3001auto\u3001nouser\u3001async\uff09\uff0c\u53ef\u4ee5\u53c2\u89c1\u300cmount nfs\u300d\u3002 5. \u7b2c\u4e94\u9879\u662f\u63d0\u4f9bDUMP\u529f\u80fd\uff0c\u5728\u7cfb\u7edfDUMP\u65f6\u662f\u5426\u9700\u8981BACKUP\u7684\u6807\u5fd7\u4f4d\uff0c\u5176\u5185\u5b9a\u503c\u662f0\u3002 6. \u7b2c\u516d\u9879\u662f\u8bbe\u5b9a\u6b64filesystem\u662f\u5426\u8981\u5728\u5f00\u673a\u65f6\u505acheck\u7684\u52a8\u4f5c\uff0c\u9664\u4e86root\u7684filesystem\u5176\u5fc5\u8981\u7684check\u4e3a1\u4e4b\u5916\uff0c\u5176\u5b83\u7686\u53ef\u89c6\u9700\u8981\u8bbe\u5b9a\uff0c\u5185\u5b9a\u503c\u662f0\u3002 \u9644\u5b8c\u6574\u7684fstab\u793a\u4f8b\uff1a [root@localhost ~]# cat /etc/fstab # # /etc/fstab # Created by anaconda on Thu Aug 14 21:16:42 2014 # # Accessible filesystems, by reference, are maintained under '/dev/disk' # See man pages fstab(5), findfs(8), mount(8) and/or blkid(8) for more info # UUID=94e4e384-0ace-437f-bc96-057dd64f42ee / ext4 defaults,barrier=0 1 1 tmpfs /dev/shm tmpfs defaults 0 0 devpts /dev/pts devpts gid=5,mode=620 0 0 sysfs /sys sysfs defaults 0 0 proc /proc proc defaults 0 0 /dev/xvdb1 /data ext4 defaults 0 0 \u300e\u6458\u81ea\u300f\u4e92\u8054\u7f51","title":"fdisk+mount+fstab \u547d\u4ee4\u8bf4\u660e"},{"location":"UTILITIES/2015-09-26-turn-any-linux-computer-into-socks5-proxy-in-one-command.html/","tags":[],"text":"I thought I'd do a shorter article on catonmat this time. It goes hand in hand with my upcoming article series on \"100% technical guide to anonymity\" and it's much easier to write larger articles in smaller pieces. Then I can edit them together and produce the final article. This article will be interesting for those who didn't know it already -- you can turn any Linux computer into a SOCKS5 (and SOCKS4) proxy in just one command: ssh -N -D 0.0.0.0:1080 localhost And it doesn't require root privileges. The ssh command starts up dynamic -D port forwarding on port 1080 and talks to the clients via SOCSK5 or SOCKS4 protocols, just like a regular SOCKS5 proxy would! The -N option makes sure ssh stays idle and doesn't execute any commands on localhost. If you also wish the command to go into background as a daemon, then add -f option: ssh -f -N -D 0.0.0.0:1080 localhost To use it, just make your software use SOCKS5 proxy on your Linux computer's IP, port 1080, and you're done, all your requests now get proxied. Access control can be implemented via iptables . For example, to allow only people from the ip 1.2.3.4 to use the SOCKS5 proxy, add the following iptables rules: iptables -A INPUT --src 1.2.3.4 -p tcp --dport 1080 -j ACCEPT iptables -A INPUT -p tcp --dport 1080 -j REJECT The first rule says, allow anyone from 1.2.3.4 to connect to port 1080 , and the other rule says, deny everyone else from connecting to port 1080 . Surely, executing iptables requires root privileges. If you don't have root privileges, and you don't want to leave your proxy open (and you really don't want to do that), you'll have to use some kind of a simple TCP proxy wrapper to do access control. Here, I wrote one in Perl. It's called tcp-proxy.pl and it uses IO::Socket::INET to abstract sockets, and IO::Select to do connection multiplexing. #!/usr/bin/perl # use warnings ; use strict ; use IO::Socket:: INET ; use IO:: Select ; my @allowed_ips = ( '1.2.3.4' , '5.6.7.8' , '127.0.0.1' , '192.168.1.2' ); my $ioset = IO:: Select -> new ; my %socket_map ; my $debug = 1 ; sub new_conn { my ( $host , $port ) = @_ ; return IO::Socket:: INET -> new ( PeerAddr => $host , PeerPort => $port ) || die \"Unable to connect to $host:$port: $!\" ; } sub new_server { my ( $host , $port ) = @_ ; my $server = IO::Socket:: INET -> new ( LocalAddr => $host , LocalPort => $port , ReuseAddr => 1 , Listen => 100 ) || die \"Unable to listen on $host:$port: $!\" ; } sub new_connection { my $server = shift ; my $client = $server -> accept ; my $client_ip = client_ip ( $client ); unless ( client_allowed ( $client )) { print \"Connection from $client_ip denied.\\n\" if $debug ; $client -> close ; return ; } print \"Connection from $client_ip accepted.\\n\" if $debug ; my $remote = new_conn ( 'localhost' , 55555 ); $ioset -> add ( $client ); $ioset -> add ( $remote ); $socket_map { $client } = $remote ; $socket_map { $remote } = $client ; } sub close_connection { my $client = shift ; my $client_ip = client_ip ( $client ); my $remote = $socket_map { $client }; $ioset -> remove ( $client ); $ioset -> remove ( $remote ); delete $socket_map { $client }; delete $socket_map { $remote }; $client -> close ; $remote -> close ; print \"Connection from $client_ip closed.\\n\" if $debug ; } sub client_ip { my $client = shift ; return inet_ntoa ( $client -> sockaddr ); } sub client_allowed { my $client = shift ; my $client_ip = client_ip ( $client ); return grep { $_ eq $client_ip } @allowed_ips ; } print \"Starting a server on 0.0.0.0:1080\\n\" ; my $server = new_server ( '0.0.0.0' , 1080 ); $ioset -> add ( $server ); while ( 1 ) { for my $socket ( $ioset -> can_read ) { if ( $socket == $server ) { new_connection ( $server ); } else { next unless exists $socket_map { $socket }; my $remote = $socket_map { $socket }; my $buffer ; my $read = $socket -> sysread ( $buffer , 4096 ); if ( $read ) { $remote -> syswrite ( $buffer ); } else { close_connection ( $socket ); } } } } To use it, you'll have to make a change to the previous configuration. Instead of running ssh SOCKS5 proxy on 0.0.0.0:1080 , you'll need to run it on localhost:55555 , ssh -f -N -D 55555 localhost After that, run the tcp-proxy.pl , perl tcp-proxy.pl & The TCP proxy will start listening on 0.0.0.0:1080 and will redirect only the allowed IPs in @allowed_ips list to localhost:55555 . Another possibility is to use another computer instead of your own as exit node. What I mean is you can do the following: ssh -f -N -D 1080 other_computer.com This will set up a SOCKS5 proxy on localhost:1080 but when you use it, ssh will automatically tunnel your requests (encrypted) via other_computer.com . This way you can hide what you're doing on the Internet from anyone who might be sniffing your link. They will see that you're doing something but the traffic will be encrypted so they won't be able to tell what you're doing. That's it. You're now the proxy king! Download tcp-proxy.pl Download link: tcp proxy (tcp-proxy.pl) Download URL: http://www.catonmat.net/download/tcp-proxy.pl Downloaded: 6262 times I also pushed the tcp-proxy.pl to GitHub: tcp-proxy.pl on GitHub . This project is also pretty nifty to generalize and make a program that redirects between any number of hosts:ports, not just two. PS. I will probably also write \"A definitive guide to ssh port forwarding\" some time in the future because it's an interesting but little understood topic. \u300e\u6458\u81ea\u300fhttp://blog.urfix.com/25-ssh-commands-tricks/","title":"Turn any Linux computer into SOCKS5 proxy in one command"},{"location":"UTILITIES/2015-11-27-ubuntu-%25e6%2596%2587%25e4%25bb%25b6%25e5%2585%25b1%25e4%25ba%25ab-samba%25e6%259c%258d%25e5%258a%25a1.html/","tags":["ubuntu","samba"],"text":"\u6587\u4ef6\u5171\u4eab samba\u670d\u52a1\uff0c\u5b83\u662f\u4e00\u4e2a\u5728linux\u548cunix\u4e0a\u5b9e\u73b0SMB\u534f\u8bae\u7684\u4e00\u4e2a\u514d\u8d39\u8f6f\u4ef6\uff0cSMB\u534f\u8bae\u5168\u79f0\u53eb\u505aServer Message Block\uff08\u4fe1\u606f\u670d\u52a1\u5757\uff09\uff0c\u5b83\u53ef\u4ee5\u5728\u5c40\u57df\u7f51\u4e0a\u5171\u4eab\u6587\u4ef6\u548c\u6253\u5370\u673a\u7684\u4e00\u79cd\u534f\u8bae\uff0c\u529f\u80fd\u5f88\u5f3a\u5927\u3002\u6211\u91c7\u7528\u7684\u662f\u8fd9\u79cd\u65b9\u6cd5\u3002 \u9996\u5148\uff0c\u5b89\u88c5smb\uff1a\u6267\u884c\u4e0b\u5217\u547d\u4ee4 sudo apt-get install samba sudo apt-get install smbfs \u5982\u679c\u63d0\u793a\u627e\u4e0d\u5230\u8f6f\u4ef6\u7684\u8bdd\uff0cupdate,upgrade\u4e00\u6b21\u5e94\u8be5\u5c31\u884c\u3002 \u7136\u540e\uff0c\u7ec8\u7aef\u4e2d\u6267\u884cshares-admin\u547d\u4ee4\uff0c\u53ef\u80fd\u4e5f\u4f1a\u63d0\u793a\u5148\u88c5\u76f8\u5e94\u7684tools\uff0c\u6309\u63d0\u793a\u88c5\u5c31\u884c \u5728\u754c\u9762\u4e2d\uff0c\u5148\u6267\u884cunlock\u64cd\u4f5c\uff0c\u518d\u6dfb\u52a0\u4e00\u4e2a\u5171\u4eab\u6587\u4ef6\u5939\uff0c\u5982\u56fe\u6240\u793a \u5171\u4eab\u4e4b\u540e\uff0c\u5982\u679c\u4e0d\u505a\u4efb\u4f55\u8bbe\u7f6e\uff0c\u5219mac os\u53ef\u4ee5\u8fde\u63a5\u5230ubuntu\u865a\u62df\u673a\uff0c\u4f46\u8981\u63d0\u793a\u7528\u6237\u540d\u548c\u5bc6\u7801\uff0c\u6b64\u65f6\u4e0d\u8bba\u8f93\u5165\u4ec0\u4e48\u90fd\u65e0\u6cd5\u8bbf\u95ee\u5171\u4eab\u7684\u5185\u5bb9\u3002 \u5b9e\u73b0\u533f\u540d\u8bbf\u95ee\u9700\u8981\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u3002 \u4fee\u6539\u914d\u7f6e\u6587\u4ef6smb.conf\uff1a\u6267\u884c\u547d\u4ee4 sudo nano /etc/samba/smb.conf \u5728\u5176\u4e2d\u641c\u7d22\u5230\"security=user\" \u6539\u4e3a \"securtiy=share\"\uff0c\u5e76\u5c06\u8be5\u884c\u5934 # \u6ce8\u91ca\u53bb\u6389\u3002 \u91cd\u542fsamba\uff08sudo /etc/init.d/samba restart\uff09\u6216\u91cd\u542f\u865a\u62df\u673a\u3002 \u8fd9\u65f6\u5df2\u7ecf\u80fd\u5728mac os\u7684\u6587\u4ef6\u76ee\u5f55\u4e0b\u770b\u5230 \u5171\u4eab\u7684... \u6761\u76ee\uff0c\u5982\u56fe\u6240\u793a \u4e0d\u8fc7\uff0c\u8fd9\u4e2a\u65f6\u5019\u53ea\u80fd\u8bfb\uff0c\u4e0d\u80fd\u5199\uff0c\u5982\u679c\u8fd8\u8981\u5199\u5165\u7684\u8bdd\uff0c\u6267\u884c\u547d\u4ee4 chmod 777 /home/lemon/Downloads \uff08\u8fd9\u91cc\u7684\u8def\u5f84\u662f\u6211\u5171\u4eab\u6587\u4ef6\u7684\u8def\u5f84\uff09\uff0c\u5230\u8fd9\u91cc\u5df2\u7ecf\u53ef\u4ee5\u4efb\u610f\u7684\u8bfb\u53d6\u5199\u5165\u4e86\u3002 \u6458\u81ea\u300c\u4e92\u8054\u7f51\u300d","title":"Ubuntu \u6587\u4ef6\u5171\u4eab samba\u670d\u52a1"},{"location":"UTILITIES/2015-11-29-iptables%25e7%25ab%25af%25e5%258f%25a3%25e6%2598%25a0%25e5%25b0%2584%25e8%25af%25a6%25e8%25a7%25a3.html/","tags":["iptables"],"text":"\u672c\u6587\u4f5c\u8005\uff1a\u5f20\u5929\u6210 zhangtiancheng#gmail.com \u8f6c\u53d1\u8bf7\u6ce8\u660e\u51fa\u5904\u3002 iptables\u662f\u4e00\u4e2aLinux\u4e0b\u4f18\u79c0\u7684nat+\u9632\u706b\u5899\u5de5\u5177\uff0c\u6211\u4f7f\u7528\u8be5\u5de5\u5177\u4ee5\u8f83\u4f4e\u914d\u7f6e\u7684\u4f20\u7edfpc\u914d\u7f6e\u4e86\u4e00\u4e2a\u7075\u6d3b\u5f3a\u52b2\u7684\u9632\u706b\u5899+nat\u7cfb\u7edf,\u5c0f\u6709\u5fc3\u5f97\uff0c\u770b\u4e86\u7f51\u4e0a\u4e5f\u6709\u5f88\u591a\u8fd9\u65b9\u9762\u7684\u6587\u7ae0\uff0c\u4f46\u662f\u4f3c\u4e4e\u8981\u4e48\u8bf4\u7684\u6bd4\u8f83\u5c11\uff0c\u8981\u4e48\u5c31\u662f\u6bd4\u8f83\u504f\uff0c\u5185\u5bb9\u4e0d\u5168\uff0c\u5bb9\u6613\u8bef\u5bfc\uff0c\u6211\u7814\u7a76\u4e86\u4e00\u6bb5\u65f6\u95f4\u7684iptables\u540c\u65f6\u4e5f\u7528\u4e86\u5f88\u4e45\uff0c\u6709\u70b9\u6ef4\u7ecf\u9a8c\uff0c\u5199\u6765\u4f9b\u5927\u5bb6\u53c2\u8003\uff0c\u540c\u65f6\u4e5f\u5907\u65e5\u540e\u81ea\u5df1\u7ffb\u9605\u3002 \u9996\u5148\u8981\u8bf4\u660e\u7684\u662f\uff0ciptables\u64cd\u4f5c\u7684\u662f2.4\u4ee5\u4e0a\u5185\u6838\u7684netfilter.\u6240\u4ee5\u9700\u8981linux\u7684\u5185\u6838\u57282.4\u4ee5\u4e0a\u3002\u5176\u529f\u80fd\u4e0e\u5b89\u5168\u6027\u8fdc\u8fdc\u6bd4\u5176\u524d\u8f88 ipfwadm,ipchains\u5f3a\u5927\uff0ciptables\u5927\u81f4\u662f\u5de5\u4f5c\u5728OSI\u4e03\u5c42\u7684\u4e8c\u3001\u4e09\u3001\u56db\u5c42\uff0c\u5176\u524d\u8f88ipchains\u4e0d\u80fd\u5355\u72ec\u5b9e\u73b0\u5bf9tcp/udp port\u4ee5\u53ca\u5bf9mac\u5730\u5740\u7684\u7684\u5b9a\u4e49\u4e0e\u64cd\u4f5c\uff0c\u6240\u4ee5\u6211\u60f3ipchains\u5e94\u8be5\u662f\u4ec5\u4ec5\u5de5\u4f5c\u5728\u4e09\u5c42\u4e0a\u7684\u3002 \u6211\u4eec\u5148\u7b80\u5355\u4ecb\u7ecd\u4e00\u4e0bnetfilter\u7684\u5927\u81f4\u5de5\u4f5c\u6d41\u7a0b\uff0c\u4e5f\u5c31\u662f\u4e00\u4e2a\u6570\u636e\u5305\uff08\u6216\u8005\u53eb\u5206\u7ec4\u3001packet,\u6211\u4e2a\u4eba\u4e60\u60ef\u53eb\u5305\uff09\u5728\u5230\u8fbelinux\u7684\u7f51\u7edc\u63a5\u53e3\u7684\u65f6\u5019\uff08\u7f51\u5361\uff09\u5982\u4f55\u5904\u7406\u8fd9\u4e2a\u5305\uff0c\u7136\u540e\u518d\u4ecb\u7ecd\u4e00\u4e0b\u5982\u4f55\u7528iptables\u6539\u53d8\u6216\u8005\u8bf4\u63a7\u5236\u5bf9\u8fd9\u4e2a\u6570\u636e\u5305\u8fdb\u884c\u64cd\u4f5c\u3002netfilter\u5185\u90e8\u5206\u4e3a\u4e09\u4e2a\u8868\uff0c\u5206\u522b\u662f filter,nat,mangle\uff0c\u6bcf\u4e2a\u8868\u53c8\u6709\u4e0d\u540c\u7684\u64cd\u4f5c\u94fe\uff08Chains\uff09\u3002\u5728filter\uff08\u8fc7\u6ee4\uff09\u8868\u4e2d\uff0c\u4e5f\u5c31\u662f\u4ed6\u7684\u9632\u706b\u5899\u529f\u80fd\u7684\u8fd9\u4e2a\u8868\uff0c\u5b9a\u4e49\u4e86\u4e09\u4e2a Chain\u3002\u5206\u522b\u662fINPUT,FORWARD,OUTPUT\u3002\u4e5f\u5c31\u662f\u5bf9\u5305\u7684\u5165\u3001\u8f6c\u53d1\u3001\u51fa\u8fdb\u884c\u5b9a\u4e49\u7684\u4e09\u4e2a\u8fc7\u6ee4\u94fe\u3002\u5bf9\u4e8e\u8fd9\u4e2afilter\u8868\u7684\u64cd\u4f5c\u548c\u63a7\u5236\u4e5f\u662f\u6211\u4eec\u5b9e\u73b0\u9632\u706b\u5899\u529f\u80fd\u7684\u4e00\u4e2a\u91cd\u8981\u624b\u6bb5\uff1b\u5728nat(Network Address Translation\u3001\u7f51\u7edc\u5730\u5740\u7ffb\u8bd1)\u8868\u4e2d\uff0c\u4e5f\u5c31\u662f\u6211\u4eec\u7528\u4ee5\u5b9e\u73b0\u5730\u5740\u8f6c\u6362\u548c\u7aef\u53e3\u8f6c\u53d1\u529f\u80fd\u7684\u8fd9\u4e2a\u8868\uff0c\u5b9a\u4e49\u4e86PREROUTING, POSTROUTING,OUTPUT\u4e09\u4e2a\u94fe,\u4e0b\u9762\u6211\u4eec\u4f1a\u5bf9\u8fd9\u4e09\u4e2a\u94fe\u4f5c\u8be6\u7ec6\u7684\u8bf4\u660e\uff1b\u800cnetfilter\u7684mangle\u8868\u5219\u662f\u4e00\u4e2a\u81ea\u5b9a\u4e49\u8868\uff0c\u91cc\u9762\u5305\u62ec\u4e0a\u9762\u7684filter\u4ee5\u53canat\u8868\u4e2d\u7684\u5404\u79cdchains,\u5b83\u53ef\u4ee5\u8ba9\u6211\u4eec\u8fdb\u884c\u4e00\u4e9b\u81ea\u5b9a\u4e49\u7684\u64cd\u4f5c\uff0c\u540c\u65f6\u8fd9\u4e2amangle\u8868\u4e2d\u7684chains\u5728netfilter\u5bf9\u5305\u7684\u5904\u7406\u6d41\u7a0b\u4e2d\u5904\u5728\u4e00\u4e2a\u6bd4\u8f83\u4f18\u5148\u7684\u4f4d\u7f6e\uff0c\u4e0b\u9762\u6709\u4e00\u5f20\u56fe\u6e05\u6670\u7684\u63cf\u7ed8\u4e86netfilter\u5bf9\u5305\u7684\u5904\u7406\u6d41\u7a0b\uff08\u8be5\u56fe\u6458\u81ea\u7f51\u4e0a\uff0c\u4e0d\u77e5\u4f5c\u8005\u662f\u8c01\uff0c\u5728\u6b64\u6df1\u8868\u656c\u610f\uff01\uff09\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u7528\u4e0d\u5230\u8fd9\u4e2amangle\u8868\uff0c\u5728\u8fd9\u91cc\u6211\u4eec\u5c31\u4e0d\u505a\u4ecb\u7ecd\u4e86\u3002 \u5927\u5bb6\u53ef\u4ee5\u770b\u5230\uff0cPREROUTING\u8fd9\u4e2achain\u5728\u6700\u524d\u9762\uff0c\u5f53\u4e00\u4e2a\u5305\u6765\u5230linux\u7684\u7f51\u7edc\u63a5\u53e3\u7684\u65f6\u5019\u5148\u8fc7mangle\u7684PREROUTING,\u7136\u540e\u662f nat\u7684PREROUTING,\u4ece\u8fd9\u4e2achain\u7684\u540d\u5b57\u6211\u4eec\u53ef\u4ee5\u770b\u51fa\uff0c\u8fd9\u4e2achain\u662f\u5728\u8def\u7531\u4e4b\u524d(pre-routing)\u8981\u8fc7\u7684\u3002\u4e3a\u4ec0\u4e48\u8981\u5728\u8def\u7531\u4e4b\u524d\u8fc7\u5462\uff1f\u5927\u5bb6\u53ef\u4ee5\u770b\u5230\u8fd9\u4e2a\u56fe\u4e0a\uff0c\u4e0a\u9762\u6709\u4e00\u4e2a\u83f1\u5f62\u7684\u90e8\u5206\u53ebROUTING,\u8fd9\u4e2aROUTING\u90e8\u5206\u5c31\u662fLinux\u7684route box,\u4e5f\u5c31\u662f\u8def\u7531\u7cfb\u7edf\uff0c\u5b83\u540c\u6837\u6709\u5f88\u9ad8\u6df1\u7684\u529f\u80fd\uff0c\u53ef\u4ee5\u5b9e\u73b0\u7b56\u7565\u8def\u7531\u7b49\u7b49\u4e00\u4e9b\u9ad8\u7ea7\u7279\u6027\uff0c\u6b64\u5904\u6211\u4eec\u4e0d\u505a\u8be6\u7ec6\u89e3\u91ca\u3002\u5355\u8bf4\u8fd9\u4e2aPREROUTING\u94fe\uff0c\u56e0\u4e3a\u5728\u8fd9\u4e2a\u94fe\u91cc\u9762\u6211\u4eec\u5bf9\u5305\u7684\u64cd\u4f5c\u662fDNAT,\u4e5f\u5c31\u662f\u6539\u53d8\u76ee\u7684\u5730\u5740\u548c\uff08\u6216\u7aef\u53e3\uff09\uff0c\u901a\u5e38\u7528\u5728\u7aef\u53e3\u8f6c\u53d1\uff0c\u6216\u8005nat\u5230\u5185\u7f51\u7684DMZ\u533a\uff0c\u4e5f\u5c31\u662f\u8bf4\u5f53\u4e00\u4e2a\u5305\u8fc7\u6765\u7684\u65f6\u5019\u6211\u4eec\u8981\u6539\u53d8\u5b83\u7684\u76ee\u7684\u5730\u5740\uff0c\u5927\u5bb6\u53ef\u4ee5\u60f3\u60f3,\u5982\u679c\u4e00\u4e2a\u5305\u5728\u6539\u53d8\u76ee\u7684\u5730\u5740\u4e4b\u524d\u5c31\u88ab\u6254\u8fdb\u4e86route box,\u8ba9\u7cfb\u7edf\u9009\u597d\u8def\u4e4b\u540e\u518d\u6539\u53d8\u76ee\u7684\u5730\u5740\uff0c\u90a3\u4e48\u9009\u8def\u5c31\u53ef\u80fd\u662f\u9519\u7684\uff0c\u6216\u8005\u8bf4\u6beb\u65e0\u610f\u4e49\u4e86\uff0c\u6240\u4ee5\uff0cPREROUTING\u8fd9\u4e2aChain\u4e00\u5b9a\u8981\u5728\u8fdbRouting \u4e4b\u524d\u505a\u3002\u6bd4\u5982\u8bf4\uff0c\u6211\u4eec\u7684\u516c\u7f51ip\u662f60.1.1.1/24,\u4f4d\u4e8elinux\u4e2d\u7684eth0,\u5185\u7f51ip\u662f10.1.1.1/24\u4f4d\u4e8elinux\u4e2d\u7684eth1, \u6211\u4eec\u7684\u5185\u7f51\u6709\u4e00\u53f0web\u670d\u52a1\u5668\uff0c\u5730\u5740\u662f10.1.1.2/24,\u6211\u4eec\u600e\u4e48\u6837\u80fd\u8ba9internet\u7528\u6237\u901a\u8fc7\u8fd9\u4e2a\u516c\u7f51ip\u8bbf\u95ee\u6211\u4eec\u5185\u90e8\u7684\u8fd9\u4e2aweb\u670d\u52a1\u5668\u5462\uff1f\u6211\u4eec\u5c31\u53ef\u4ee5\u5728\u8fd9\u4e2aPREROUTING\u94fe\u4e0a\u9762\u5b9a\u4e49\u4e00\u4e2a\u89c4\u5219\uff0c\u628a\u8bbf\u95ee60.1.1.1:80\u7684\u7528\u6237\u7684\u76ee\u7684\u5730\u5740\u6539\u53d8\u4e00\u4e0b\uff0c\u6539\u53d8\u4e3a10.1.1.2:80,\u8fd9\u6837\u5c31\u5b9e\u73b0\u4e86internet\u7528\u6237\u5bf9\u5185\u7f51\u670d\u52a1\u5668\u7684\u8bbf\u95ee\u4e86\uff0c\u5f53\u7136\u4e86\uff0c\u8fd9\u4e2a\u7aef\u53e3\u662f\u6bd4\u8f83\u7075\u6d3b\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u5b9a\u4e49\u4efb\u4f55\u4e00\u4e2a\u7aef\u53e3\u7684\u8f6c\u53d1\uff0c\u4e0d\u4e00\u5b9a\u662f80-->80\uff0c\u5177\u4f53\u7684\u547d\u4ee4\u6211\u4eec\u5728\u4e0b\u9762\u7684\u4f8b\u5b50\u4e2d\u4ecb\u7ecd\uff0c\u8fd9\u91cc\u6211\u4eec\u53ea\u8c08\u6d41\u7a0b\u4e0e\u6982\u5ff5\u4e0a\u7684\u5b9e\u73b0\u65b9\u6cd5\u3002 \u597d\u4e86\uff0c\u6211\u4eec\u63a5\u7740\u5f80\u4e0b\u8d70\uff0c\u8fd9\u4e2a\u5305\u5df2\u7ecf\u8fc7\u4e86\u4e24\u4e2aPREROUTING\u94fe\u4e86\uff0c\u8fd9\u4e2a\u65f6\u5019\uff0c\u51fa\u73b0\u4e86\u4e00\u4e2a\u5206\u652f\u8f6c\u6298\u7684\u5730\u65b9\uff0c\u4e5f\u5c31\u662f\u56fe\u4e2d\u4e0b\u65b9\u7684\u90a3\u4e2a\u83f1\u5f62\uff08FORWARD\uff09,\u8f6c\u53d1\uff01\u8fd9\u91cc\u6709\u4e00\u4e2a\u5bf9\u76ee\u7684\u5730\u5740\u7684\u5224\u65ad\uff08\u8fd9\u91cc\u540c\u6837\u8bf4\u660e\u4e86PREROUTING\u4e00\u5b9a\u8981\u5728\u6700\u5148\uff0c\u4e0d\u4ec5\u8981\u5728route box\u4e4b\u524d\uff0c\u751a\u81f3\u662f\u8fd9\u4e2a\u5bf9\u76ee\u7684\u5730\u5740\u7684\u5224\u65ad\u4e4b\u524d\uff0c\u56e0\u4e3a\u6211\u4eec\u53ef\u80fd\u505a\u4e00\u4e2a\u53bb\u67d0\u67d0\u67d0ip\u7684\u5730\u65b9\u8f6c\u5230\u81ea\u5df1\u7684ip\u7684\u89c4\u5219\uff0c\u6240\u4ee5PREROUTING\u662f\u6700\u5148\u5904\u7406\u8fd9\u4e2a\u5305\u7684 Chain\uff09\uff01\u5982\u679c\u5305\u7684\u76ee\u7684\u5730\u662f\u672c\u673aip,\u90a3\u4e48\u5305\u5411\u4e0a\u8d70\uff0c\u8d70\u5165INPUT\u94fe\u5904\u7406\uff0c\u7136\u540e\u8fdb\u5165LOCAL PROCESS,\u5982\u679c\u975e\u672c\u5730\uff0c\u90a3\u4e48\u5c31\u8fdb\u5165FORWARD\u94fe\u8fdb\u884c\u8fc7\u6ee4\uff0c\u6211\u4eec\u5728\u8fd9\u91cc\u5c31\u4e0d\u4ecb\u7ecdINPUT,OUTPUT\u7684\u5904\u7406\u4e86\uff0c\u56e0\u4e3a\u90a3\u4e3b\u8981\u662f\u5bf9\u4e8e\u672c\u673a\u5b89\u5168\u7684\u4e00\u79cd\u5904\u7406\uff0c\u6211\u4eec\u8fd9\u91cc\u4e3b\u8981\u8bf4\u5bf9\u8f6c\u53d1\u7684\u8fc7\u6ee4\u548cnat\u7684\u5b9e\u73b0\u3002 \u8fd9\u91cc\u7684FORWARD\u6211\u7b80\u5355\u8bf4\u4e00\u4e0b\uff0c\u5f53linux\u6536\u5230\u4e86\u4e00\u4e2a\u76ee\u7684ip\u5730\u5740\u4e0d\u662f\u672c\u5730\u7684\u5305\uff0cLinux\u4f1a\u628a\u8fd9\u4e2a\u5305\u4e22\u5f03\uff0c\u56e0\u4e3a\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cLinux\u7684\u4e09\u5c42\u5305\u8f6c\u53d1\u529f\u80fd\u662f\u5173\u95ed\u7684\uff0c\u5982\u679c\u8981\u8ba9\u6211\u4eec\u7684linux\u5b9e\u73b0\u8f6c\u53d1\uff0c\u5219\u9700\u8981\u6253\u5f00\u8fd9\u4e2a\u8f6c\u53d1\u529f\u80fd\uff0c\u53ef\u4ee5\u6539\u53d8\u5b83\u7684\u4e00\u4e2a\u7cfb\u7edf\u53c2\u6570\uff0c\u4f7f\u7528sysctl net.ipv4.ip_forward=1\u6216\u8005echo \"1\" > /proc/sys/net/ipv4/ip_forward\u547d\u4ee4\u6253\u5f00\u8f6c\u53d1\u529f\u80fd\u3002\u597d\u4e86\uff0c\u5728\u8fd9\u91cc\u6211\u4eec\u8ba9linux\u5141\u8bb8\u8f6c\u53d1\uff0c\u8fd9\u4e2a\u5305\u7684\u76ee\u7684\u5730\u5740\u4e5f\u4e0d\u662f\u672c\u673a\uff0c\u90a3\u4e48\u5b83\u5c06\u63a5\u7740\u8d70\u5165FORWARD\u94fe\uff0c\u5728FORWARD\u94fe\u91cc\u9762\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5b9a\u4e49\u8be6\u7ec6\u7684\u89c4\u5219\uff0c\u4e5f\u5c31\u662f\u662f\u5426\u5141\u8bb8\u4ed6\u901a\u8fc7\uff0c\u6216\u8005\u5bf9\u8fd9\u4e2a\u5305\u7684\u65b9\u5411\u6d41\u7a0b\u8fdb\u884c\u4e00\u4e9b\u6539\u53d8\uff0c\u8fd9\u4e5f\u662f\u6211\u4eec\u5b9e\u73b0\u8bbf\u95ee\u63a7\u5236\u7684\u5730\u65b9\uff0c\u8fd9\u91cc\u540c\u6837\u4e5f\u662fMangle_FORWARD\u7136\u540efilter_FORWARD,\u6211\u4eec\u64cd\u4f5c\u4efb\u4f55\u4e00\u4e2a\u94fe\u90fd\u4f1a\u5f71\u54cd\u5230\u8fd9\u4e2a\u5305\u7684\u547d\u8fd0\uff0c\u5728\u4e0b\u9762\u7684\u4ecb\u7ecd\u4e2d\uff0c\u6211\u4eec\u5c31\u5ffd\u7565\u6389mangle\u8868\uff0c\u6211\u4eec\u57fa\u672c\u7528\u4e0d\u5230\u64cd\u4f5c\u5b83\uff0c\u6240\u4ee5\u6211\u4eec\u5047\u8bbe\u5b83\u662f\u900f\u660e\u7684\u3002\u5047\u8bbe\u8fd9\u4e2a\u5305\u88ab\u6211\u4eec\u7684\u89c4\u5219\u653e\u8fc7\u53bb\u4e86\uff0c\u4e5f\u5c31\u662fACCEPT\u4e86\uff0c\u5b83\u5c06\u8fdb\u5165POSTROUTING\u90e8\u5206\uff0c\u6ce8\u610f\uff01\u8fd9\u91cc\u6211\u6ce8\u610f\u5230\u4e00\u4e2a\u7ec6\u8282\u95ee\u9898\uff0c\u4e5f\u5c31\u662f\u4e0a\u9762\u7684\u56fe\u4e2d\u6570\u636e\u5305\u8fc7\u4e86FORWARD\u94fe\u4e4b\u540e\u76f4\u63a5\u8fdb\u5165\u4e86POSTROUITNG \u94fe\uff0c\u6211\u89c9\u5f97\u8fd9\u4e2d\u95f4\u7f3a\u5c11\u4e00\u4e2a\u73af\u8282\uff0c\u4e5f\u5c31\u662froute box,\u5bf9\u4e8e\u8f6c\u53d1\u7684\u5305\u6765\u8bf4\uff0clinux\u540c\u6837\u9700\u8981\u5728\u9009\u8def\uff08\u8def\u7531\uff09\u4e4b\u540e\u624d\u80fd\u5c06\u5b83\u9001\u51fa\uff0c\u8fd9\u4e2a\u56fe\u5374\u6ca1\u6709\u6807\u660e\u8fd9\u4e00\u70b9\uff0c\u6211\u8ba4\u4e3a\u5b83\u662f\u5728\u8fc7\u4e86route box\u4e4b\u540e\u624d\u8fdb\u5165\u7684POSTROUITNG,\u5f53\u7136\u4e86\uff0c\u8fd9\u5bf9\u4e8e\u6211\u4eec\u8ba8\u8bbaiptables\u7684\u8fc7\u6ee4\u8f6c\u53d1\u6765\u8bf4\u4e0d\u662f\u5f88\u91cd\u8981\uff0c\u53ea\u662f\u6211\u89c9\u5f97\u6d41\u7a0b\u4e0a\u6709\u8fd9\u4e2a\u95ee\u9898\uff0c\u8fd8\u662f\u8981\u8bf4\u660e\u4e00\u4e0b\u3002 \u540c\u6837\u7684\uff0c\u6211\u4eec\u5728\u8fd9\u91cc\u4ece\u540d\u5b57\u5c31\u53ef\u4ee5\u770b\u51fa\uff0c\u8fd9\u4e2aPOSTROUTING\u94fe\u5e94\u8be5\u662f\u8def\u7531\u4e4b\u540e\u7684\u4e00\u4e2a\u94fe\uff0c\u4e5f\u5c31\u662f\u8fd9\u4e2a\u5305\u8981\u9001\u51fa\u8fd9\u53f0Linux\u7684\u6700\u540e\u4e00\u4e2a\u73af\u8282\u4e86\uff0c\u8fd9\u4e5f\u662f\u6781\u5176\u91cd\u8981\u7684\u4e00\u4e2a\u73af\u8282\uff01\uff01\u8fd9\u4e2a\u65f6\u5019linux\u5df2\u7ecf\u5b8c\u6210(has done..^_^)\u4e86\u5bf9\u8fd9\u4e2a\u5305\u7684\u8def\u7531\uff08\u9009\u8def\u5de5\u4f5c\uff09\uff0c\u5df2\u7ecf\u627e\u5230\u4e86\u5408\u9002\u7684\u63a5\u53e3\u9001\u51fa\u8fd9\u4e2a\u5305\u4e86\uff0c\u5728\u8fd9\u4e2a\u94fe\u91cc\u9762\u6211\u4eec\u8981\u8fdb\u884c\u91cd\u8981\u7684\u64cd\u4f5c\uff0c\u5c31\u662f\u88abLinux\u79f0\u4e3a SNAT\u7684\u4e00\u4e2a\u52a8\u4f5c\uff0c\u4fee\u6539\u6e90ip\u5730\u5740\uff01\u4e3a\u4ec0\u4e48\u4fee\u6539\u6e90ip\u5730\u5740\uff1f\u5f88\u591a\u60c5\u51b5\u9700\u8981\u4fee\u6539\u6e90\u5730\u5740\u963f\uff0c\u6700\u5e38\u89c1\u7684\u5c31\u662f\u6211\u4eec\u5185\u7f51\u591a\u53f0\u673a\u5668\u9700\u8981\u5171\u4eab\u4e00\u4e2a\u6216\u51e0\u4e2a\u516c\u7f51ip\u8bbf\u95ee internet,\u56e0\u4e3a\u6211\u4eec\u7684\u5185\u7f51\u5730\u5740\u662f\u79c1\u6709\u7684\uff0c\u5047\u5982\u5c31\u8ba9linux\u7ed9\u8def\u7531\u51fa\u53bb\uff0c\u6e90\u5730\u5740\u4e5f\u4e0d\u53d8\uff0c\u8fd9\u4e2a\u5305\u5e94\u8be5\u80fd\u8bbf\u95ee\u5230\u76ee\u7684\u5730\uff0c\u4f46\u662f\u5374\u56de\u4e0d\u6765\uff0c\u56e0\u4e3a internet\u4e0a\u7684N\u591a\u4e2a\u8def\u7531\u8282\u70b9\u4e0d\u4f1a\u8f6c\u53d1\u79c1\u6709\u5730\u5740\u7684\u6570\u636e\u5305\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e0d\u7528\u5408\u6cd5ip,\u6211\u4eec\u7684\u6570\u636e\u5305\u6709\u53bb\u65e0\u56de\u3002\u6709\u4eba\u4f1a\u8bf4\uff1a\u201c\u65e2\u7136\u662f\u8fd9\u6837\uff0c\u6211\u5c31\u4e0d\u7528\u79c1\u6709 ip\u4e86\uff0c\u6211\u81ea\u5df1\u5206\u914d\u81ea\u5df1\u5408\u6cd5\u7684\u5730\u5740\u4e0d\u884c\u5417\uff1f\u90a3\u6837\u5305\u5c31\u4f1a\u56de\u6765\u4e86\u5427\uff1f\u201d\u7b54\u6848\u662f\u5426\u5b9a\u7684\uff0cip\u5730\u5740\u662fICANN\u6765\u5206\u914d\u7684\uff0c\u4f60\u7684\u6570\u636e\u5305\u6216\u8bb8\u80fd\u53d1\u5230\u76ee\u7684\u5730\uff0c\u4f46\u662f\u56de\u6765\u7684\u65f6\u5019\u4eba\u5bb6\u53ef\u4e0d\u4f1a\u8f6c\u5230\u4f60\u90a3\u91cc\uff0cinternet\u4e0a\u7684\u8def\u7531\u5668\u4e2d\u7684\u8def\u7531\u4fe1\u606f\u4f1a\u628a\u8fd9\u4e2a\u8fd4\u56de\u5305\u9001\u5230\u90a3\u4e2a\u5408\u6cd5\u7684\u83b7\u5f97ip\u7684\u5730\u65b9\u53bb\uff0c\u4f60\u540c\u6837\u6536\u4e0d\u5230,\u800c\u4f60\u8fd9\u79cd\u884c\u4e3a\u6709\u53ef\u80fd\u88ab\u5b9a\u4e49\u4e3a\u4e00\u79cdip\u6b3a\u9a97\uff0c\u5f88\u591a\u8bbe\u5907\u4f1a\u628a\u8fd9\u6837\u7684\u5305\u5728\u63a5\u5165\u7aef\u5c31\u7ed9\u6ee4\u6389\u4e86\uff0c\u53ef\u80fd\u90fd\u5230\u4e0d\u4e86\u4f60\u8981\u8bbf\u95ee\u7684\u90a3\u4e2a\u670d\u52a1\u5668\uff0c\u5475\u5475\u3002 \u90a3\u4e48Linux\u5982\u4f55\u505aSNAT\u5462\uff1f\u6bd4\u5982\u4e00\u4e2a\u5185\u7f51\u768410.1.1.11\u7684pc\u8bbf\u95ee202.2.2.2\u7684\u4e00\u4e2aweb\u670d\u52a1\u5668\uff0clinux\u7684\u5185\u7f51\u63a5\u53e310.1.1.1\u5728\u6536\u5230\u8fd9\u4e2a\u5305\u4e4b\u540e\u628a\u539f\u6765\u7684PC\u7684 ip10.1.1.11\u6539\u53d8\u4e3a60.1.1.1\u7684\u5408\u6cd5\u5730\u5740\u7136\u540e\u9001\u51fa\uff0c\u540c\u65f6\u5728\u81ea\u5df1\u7684ip_conntrack\u8868\u91cc\u9762\u505a\u4e00\u4e2a\u8bb0\u5f55,\u8bb0\u4f4f\u662f\u5185\u7f51\u7684\u54ea\u4e00\u4e2aip\u7684\u54ea\u4e2a\u7aef\u53e3\u8bbf\u95ee\u7684\u8fd9\u4e2aweb\u670d\u52a1\u5668\uff0c\u81ea\u5df1\u628a\u5b83\u7684\u6e90\u5730\u5740\u6539\u6210\u591a\u5c11\u4e86\uff0c\u7aef\u53e3\u6539\u6210\u591a\u5c11\u4e86\uff0c\u4ee5\u4fbf\u8fd9\u4e2aweb\u670d\u52a1\u5668\u8fd4\u56de\u6570\u636e\u5305\u7684\u65f6\u5019linux\u5c06\u5b83\u51c6\u786e\u7684\u9001\u56de\u7ed9\u53d1\u9001\u8bf7\u6c42\u7684\u8fd9\u4e2apc. \u5927\u4f53\u7684\u6570\u636e\u8f6c\u53d1\u6d41\u7a0b\u6211\u4eec\u8bf4\u5b8c\u4e86,\u6211\u4eec\u770b\u770biptables\u4f7f\u7528\u4ec0\u4e48\u6837\u7684\u53c2\u6570\u6765\u5b8c\u6210\u8fd9\u4e9b\u64cd\u4f5c\u3002 \u5728\u63cf\u8ff0\u8fd9\u4e9b\u5177\u4f53\u7684\u64cd\u4f5c\u4e4b\u524d\uff0c\u6211\u8fd8\u8981\u8bf4\u51e0\u4e2a\u6211\u5bf9iptables\u7684\u6982\u5ff5\u7684\u7406\u89e3\uff08\u672a\u5fc5\u5b8c\u5168\u6b63\u786e\uff09\uff0c\u8fd9\u5c06\u6709\u52a9\u4e8e\u5927\u5bb6\u7406\u89e3\u8fd9\u4e9b\u89c4\u5219\uff0c\u4ee5\u5b9e\u73b0\u66f4\u7cbe\u786e\u7684\u63a7\u5236\u3002\u4e0a\u6587\u4e2d\u6211\u4eec\u63d0\u5230\u8fc7\uff0c\u5bf9\u5305\u7684\u63a7\u5236\u662f\u7531\u6211\u4eec\u5728\u4e0d\u540c\u7684Chain(\u94fe)\u4e0a\u9762\u6dfb\u52a0\u4e0d\u540c\u7684\u89c4\u5219\u6765\u5b9e\u73b0\u7684\uff0c\u6bd4\u5982\u6211\u4eec\u5bf9\u8fc7\u6ee4\u8868\uff08filter table\uff09\u6dfb\u52a0\u89c4\u5219\u6765\u6267\u884c\u5bf9\u5305\u7684\u64cd\u63a7\u3002\u90a3\u4e48\u65e2\u7136\u53eb\u94fe\uff0c\u4e00\u5b9a\u5c31\u662f\u4e00\u6761\u6216\u8005\u591a\u6761\u89c4\u5219\u7ec4\u6210\u7684\u4e86\uff0c\u8fd9\u65f6\u5c31\u6709\u4e00\u4e2a\u95ee\u9898\u4e86\uff0c\u5982\u679c\u591a\u4e2a\u89c4\u5219\u5bf9\u540c\u4e00\u79cd\u5305\u8fdb\u884c\u4e86\u5b9a\u4e49\uff0c\u4f1a\u53d1\u751f\u4ec0\u4e48\u4e8b\u60c5\u5462\uff1f\u5728Chain\u4e2d\uff0c\u6240\u6709\u7684\u89c4\u5219\u90fd\u662f\u4ece\u4e0a\u5411\u4e0b\u6765\u6267\u884c\u7684\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u5339\u914d\u4e86\u7b2c\u4e00\u884c\uff0c\u90a3\u4e48\u5c31\u6309\u7167\u7b2c\u4e00\u884c\u7684\u89c4\u5219\u6267\u884c\uff0c\u4e00\u884c\u4e00\u884c\u7684\u5f80\u4e0b\u627e\uff0c\u76f4\u5230\u627e\u5230\u7b26\u5408\u8fd9\u4e2a\u7c7b\u578b\u7684\u5305\u7684\u89c4\u5219\u4e3a\u6b62\u3002\u5982\u679c\u627e\u4e86\u4e00\u904d\u6ca1\u6709\u627e\u5230\u7b26\u5408\u8fd9\u4e2a\u5305\u7684\u89c4\u5219\u600e\u4e48\u529e\u5462\uff1fitpables\u91cc\u9762\u6709\u4e00\u4e2a\u6982\u5ff5\uff0c\u5c31\u662fPolicy,\u4e5f\u5c31\u662f\u7b56\u7565\u3002\u4e00\u8bf4\u8fd9\u4e2a\u4e1c\u897f\u5927\u5bb6\u53ef\u80fd\u5c31\u4f1a\u89c9\u5f97\u6bd4\u8f83\u9ebb\u70e6\uff0c\u4ec0\u4e48\u7b56\u7565\u963f\uff0c\u6211\u5bf9\u4e8e\u5b83\u7684\u7406\u89e3\u5c31\u662f\u6240\u8c13\u8fd9\u4e2a\u7b56\u7565\u5c31\u662fchain\u4e2d\u7684\u6700\u540e\u4e00\u6761\u89c4\u5219\uff0c\u4e5f\u5c31\u662f\u8bf4\u5982\u679c\u627e\u4e86\u4e00\u904d\u627e\u4e0d\u5230\u7b26\u5408\u5904\u7406\u8fd9\u4e2a\u5305\u7684\u89c4\u5219\uff0c\u5c31\u6309\u7167policy\u6765\u529e\u3002\u8fd9\u6837\u7406\u89e3\u8d77\u6765\u5c31\u5bb9\u6613\u591a\u4e86\u3002iptables \u4f7f\u7528-P\u6765\u8bbe\u7f6eChain\u7684\u7b56\u7565\u3002 \u597d\u4e86\uff0c\u6211\u4eec\u8a00\u5f52\u6b63\u4f20\uff0c\u6765\u8bf4\u8bf4iptables\u5230\u5e95\u600e\u6837\u5b9e\u73b0\u5bf9\u5305\u7684\u63a7\u5236 \u5148\u4ecb\u7ecd\u4e00\u4e0biptables\u5982\u4f55\u64cd\u4f5c\u94fe \u5bf9\u94fe\u7684\u64cd\u4f5c\u5c31\u90a3\u4e48\u51e0\u79cd\uff0c-I(\u63d2\u5165) -A(\u8ffd\u52a0) -R(\u66ff\u6362) -D\uff08\u5220\u9664\uff09 -L\uff08\u5217\u8868\u663e\u793a\uff09 \u8fd9\u91cc\u8981\u8bf4\u660e\u7684\u5c31\u662f-I\u5c06\u4f1a\u628a\u89c4\u5219\u653e\u5728\u7b2c\u4e00\u884c\uff0c-A\u5c06\u4f1a\u653e\u5728\u6700\u540e\u4e00\u884c\u3002 \u6bd4\u5982\u6211\u4eec\u8981\u6dfb\u52a0\u4e00\u4e2a\u89c4\u5219\u5230filter\u8868\u7684FORWARD\u94fe iptables -t filter -A FORWARD -s 10.1.1.11 -d 202.1.1.1 -j ACCEPT \u4e0a\u9762\u7684\u547d\u4ee4\u610f\u601d\u4e3a\uff1a\u8ffd\u52a0\u4e00\u4e2a\u89c4\u5219\u81f3filter\u8868\u4e2d\u7684FORWARD\u94fe\u5c3e\uff0c\u5141\u8bb8\uff08-j ACCEPT\uff09\u6e90\u5730\u5740\u4e3a10.1.1.11\u76ee\u7684\u5730\u5740\u4e3a202.1.1.1\u7684\u6570\u636e\u5305\u901a\u8fc7\u3002\u5176\u4e2d-t\u540e\u9762\u8ddf\u7684\u662f\u8868\u540d\uff0c\u5728-A\u540e\u9762\u8ddfChain\u540d\uff0c\u540e\u9762\u7684\u5c0f\u5199\u7684 -s\u4e3a\u6e90\u5730\u5740\uff0c-d\u4e3a\u76ee\u7684\u5730\u5740\uff0c-j\u4e3a\u5904\u7406\u65b9\u5411\u3002 \u5728iptables\u4e2d\uff0c\u9ed8\u8ba4\u7684\u8868\u540d\u5c31\u662ffilter\uff0c\u6240\u4ee5\u8fd9\u91cc\u53ef\u4ee5\u7701\u7565-t filter\u76f4\u63a5\u5199\u6210:iptables -A FORWARD -s 10.1.1.11 -d 202.1.1.1 -j ACCEPT iptables\u4e2d\u7684\u5339\u914d\u53c2\u6570\uff1a \u6211\u4eec\u5728\u8fd9\u91cc\u5c31\u4ecb\u7ecd\u51e0\u79cd\u5e38\u7528\u7684\u53c2\u6570\uff0c\u8be6\u7ec6\u5730\u7528\u6cd5\u53ef\u4ee5man iptables\u770b\u5b83\u7684\u8054\u673a\u6587\u6863\uff0c\u4f60\u4f1a\u6709\u610f\u5916\u7684\u6536\u83b7\u3002 -s\u5339\u914d\u6e90\u5730\u5740 -d\u5339\u914d\u76ee\u7684\u5730\u5740 -p\u534f\u8bae\u5339\u914d -i\u5165\u63a5\u53e3\u5339\u914d -o\u51fa\u63a5\u53e3\u5339\u914d --sport\uff0c--dport\u6e90\u548c\u76ee\u7684\u7aef\u53e3\u5339\u914d -j\u8df3\u8f6c,\u4e5f\u5c31\u662f\u5305\u7684\u65b9\u5411 \u5176\u4e2d\u8fd8\u6709\u4e00\u4e2a!\u53c2\u6570\uff0c\u4f7f\u7528!\u5c31\u662f\u53d6\u53cd\u7684\u610f\u601d\u3002\u4e0b\u9762\u6211\u4eec\u7b80\u5355\u4e3e\u51e0\u4e2a\u4f8b\u5b50\u4ecb\u7ecd\u4e00\u4e0b\u3002 -s\u8fd9\u4e2a\u53c2\u6570\u5462\u5c31\u662f\u6307\u5b9a\u6e90\u5730\u5740\u7684\uff0c\u5982\u679c\u4f7f\u7528\u8fd9\u4e2a\u53c2\u6570\u4e5f\u5c31\u662f\u544a\u8bc9netfilter\uff0c\u5bf9\u4e8e\u7b26\u5408\u8fd9\u6837\u4e00\u4e2a\u6e90\u5730\u5740\u7684\u5305\u600e\u4e48\u53bb\u5904\u7406\uff0c\u53ef\u4ee5\u6307\u5b9a\u67d0\u4e00\u4e2a\u5355\u64adip\u5730\u5740\uff0c\u4e5f\u53ef\u4ee5\u6307\u5b9a\u4e00\u4e2a\u7f51\u7edc\uff0c\u5982\u679c\u5355\u4e2a\u7684ip\u5730\u5740\u5176\u5b9e\u9690\u542b\u4e86\u4e00\u4e2a32\u4f4d\u7684\u5b50\u7f51\u63a9\u7801\uff0c\u6bd4\u5982-s 10.1.1.11 \u5176\u5b9e\u5c31\u662f-s 10.1.1.11/32 \u540c\u6837\u6211\u4eec\u53ef\u4ee5\u6307\u5b9a\u4e0d\u540c\u7684\u63a9\u7801\u7528\u4ee5\u5b9e\u73b0\u6e90\u7f51\u7edc\u5730\u5740\u7684\u89c4\u5219\uff0c\u6bd4\u5982\u4e00\u4e2aC\u7c7b\u5730\u5740\u6211\u4eec\u53ef\u4ee5\u7528-s 10.1.1.0/24\u6765\u6307\u5b9a\u3002 -d\u53c2\u6570\u4e0e-s\u683c\u5f0f\u4e00\u6837\u3002 -i\u53c2\u6570\u662f\u6307\u5b9a\u5165\u63a5\u53e3\u7684\u7f51\u7edc\u63a5\u53e3\uff0c\u6bd4\u5982\u6211\u4ec5\u4ec5\u5141\u8bb8\u4eceeth3\u63a5\u53e3\u8fc7\u6765\u7684\u5305\u901a\u8fc7FORWARD\u94fe\uff0c\u5c31\u53ef\u4ee5\u8fd9\u6837\u6307\u5b9aiptables -A FORWARD -i eth3 -j ACCEPT -o\u662f\u51fa\u63a5\u53e3,\u4e0e\u4e0a\u540c. \u6211\u4eec\u4e0b\u9762\u7528\u4e00\u4e9b\u7b80\u5355\u7684\u5b9e\u4f8b\u6765step by step\u770b\u770biptables\u7684\u5177\u4f53\u914d\u7f6e\u65b9\u6cd5\u3002 \u5b9e\u4f8b\u4e00\uff1a\u7b80\u5355\u7684nat\u8def\u7531\u5668 \u73af\u5883\u4ecb\u7ecd\uff1a linux 2.4 + 2\u4e2a\u7f51\u7edc\u63a5\u53e3 Lan\u53e3:10.1.1.254/24 eth0 Wan\u53e3:60.1.1.1/24 eth1 \u76ee\u7684\uff1a\u5b9e\u73b0\u5185\u7f51\u4e2d\u7684\u8282\u70b9\uff0810.1.1.0/24\uff09\u53ef\u63a7\u7684\u8bbf\u95eeinternet\u3002 \u9996\u5148\u5c06Lan\u7684\u8282\u70b9pc\u7684\u7f51\u5173\u6307\u541110.1.1.254 \u786e\u5b9a\u4f60\u7684linux\u7684ip\u914d\u7f6e\u65e0\u8bef\uff0c\u53ef\u4ee5\u6b63\u786e\u7684ping\u901a\u5185\u5916\u7684\u5730\u5740\u3002\u540c\u65f6\u7528route\u547d\u4ee4\u67e5\u770blinux\u7684\u672c\u5730\u8def\u7531\u8868\uff0c\u786e\u8ba4\u6307\u5b9a\u4e86\u53ef\u7528\u7684ISP\u63d0\u4f9b\u7684\u9ed8\u8ba4\u7f51\u5173\u3002 \u4f7f\u7528sysctl net.ipv4.ip_forward=1\u6253\u5f00linux\u7684\u8f6c\u53d1\u529f\u80fd\u3002 iptables -P FORWARD DROP \u5c06FORWARD\u94fe\u7684\u7b56\u7565\u8bbe\u7f6e\u4e3aDROP\uff0c\u8fd9\u6837\u505a\u7684\u76ee\u7684\u662f\u505a\u5230\u5bf9\u5185\u7f51ip\u7684\u63a7\u5236\uff0c\u4f60\u5141\u8bb8\u54ea\u4e00\u4e2a\u8bbf\u95eeinternet\u5c31\u53ef\u4ee5\u589e\u52a0\u4e00\u4e2a\u89c4\u5219\uff0c\u4e0d\u5728\u89c4\u5219\u4e2d\u7684ip\u5c06\u65e0\u6cd5\u8bbf\u95eeinternet. iptables -A FORWARD -m state --state ESTABLISHED,RELATED -j ACCEPT \u8fd9\u6761\u89c4\u5219\u89c4\u5b9a\u5141\u8bb8\u4efb\u4f55\u5730\u5740\u5230\u4efb\u4f55\u5730\u5740\u7684\u786e\u8ba4\u5305\u548c\u5173\u8054\u5305\u901a\u8fc7\u3002\u4e00\u5b9a\u8981\u52a0\u8fd9\u4e00\u6761\uff0c\u5426\u5219\u4f60\u53ea\u5141\u8bb8lan IP\u8bbf\u95ee\u6ca1\u6709\u7528\uff0c\u81f3\u4e8e\u4e3a\u4ec0\u4e48\uff0c\u4e0b\u9762\u6211\u4eec\u518d\u8be6\u7ec6\u8bf4\u3002 iptables -t nat -A POSTROUTING -s 10.1.1.0/24 -j SNAT --to 60.1.1.1 \u8fd9\u6761\u89c4\u5219\u505a\u4e86\u4e00\u4e2aSNAT\uff0c\u4e5f\u5c31\u662f\u6e90\u5730\u5740\u8f6c\u6362\uff0c\u5c06\u6765\u81ea10.1.1.0/24\u7684\u5730\u5740\u8f6c\u6362\u4e3a60.1.1.1 \u6709\u8fd9\u51e0\u6761\u89c4\u5219\uff0c\u4e00\u4e2a\u7b80\u5355\u7684nat\u8def\u7531\u5668\u5c31\u5b9e\u73b0\u4e86\u3002\u8fd9\u65f6\u4f60\u53ef\u4ee5\u5c06\u5141\u8bb8\u8bbf\u95ee\u7684ip\u6dfb\u52a0\u81f3FORWARD\u94fe\uff0c\u4ed6\u4eec\u5c31\u80fd\u8bbf\u95eeinternet\u4e86\u3002 \u6bd4\u5982\u6211\u60f3\u8ba910.1.1.9\u8fd9\u4e2a\u5730\u5740\u8bbf\u95eeinternet,\u90a3\u4e48\u4f60\u5c31\u52a0\u5982\u4e0b\u7684\u547d\u4ee4\u5c31\u53ef\u4ee5\u4e86\u3002 iptables -A FORWARD -s 10.1.1.9 -j ACCEPT \u4e5f\u53ef\u4ee5\u7cbe\u786e\u63a7\u5236\u4ed6\u7684\u8bbf\u95ee\u5730\u5740,\u6bd4\u5982\u6211\u5c31\u5141\u8bb810.1.1.99\u8bbf\u95ee3.3.3.3\u8fd9\u4e2aip iptables -A FORWARD -s 10.1.1.99 -d 3.3.3.3 -j ACCEPT \u6216\u8005\u53ea\u5141\u8bb8\u4ed6\u4eec\u8bbf\u95ee80\u7aef\u53e3\u3002 iptables -A FORWARD -s 10.1.1.0/24 -p tcp --dport http -j ACCEPT \u66f4\u591a\u7684\u63a7\u5236\u53ef\u4ee5\u81ea\u5df1\u7075\u6d3b\u53bb\u505a,\u6216\u8005\u67e5\u9605iptables\u7684\u8054\u673a\u6587\u6863\u3002 \u5b9e\u4f8b\u4e8c\uff1a\u7aef\u53e3\u8f6c\u53d1 \u73af\u5883\u4ecb\u7ecd\uff1a linux 2.4 + 2\u4e2a\u7f51\u7edc\u63a5\u53e3 Lan\u53e3:10.1.1.254/24 eth0 Lan\u5185web server: 10.1.1.1:80 Lan\u5185ftp server: 10.1.1.2:21 Wan\u53e3:60.1.1.1/24 eth1 \u76ee\u7684\uff1a\u5bf9\u5185\u90e8server\u8fdb\u884c\u7aef\u53e3\u8f6c\u53d1\u5b9e\u73b0internet\u7528\u6237\u8bbf\u95ee\u5185\u7f51\u670d\u52a1\u5668 \u540c\u6837\u786e\u8ba4\u4f60\u7684linux\u7684\u5404\u9879\u914d\u7f6e\u6b63\u5e38\uff0c\u80fd\u591f\u8bbf\u95ee\u5185\u5916\u7f51\u3002 iptables -P FORWARD DROP iptables -A FORWARD -m state --state ESTABLISHED,RELATED -j ACCEPT \u4e5f\u9700\u8981\u52a0\u5165\u786e\u8ba4\u5305\u548c\u5173\u8054\u5305\u7684\u5141\u8bb8\u901a\u8fc7 \u5982\u679c\u4f60\u8981\u628a\u8bbf\u95ee60.1.1.1:80\u7684\u6570\u636e\u5305\u8f6c\u53d1\u5230Lan\u5185web server,\u7528\u4e0b\u9762\u7684\u547d\u4ee4 iptables -t nat -A PREROUTING -d 60.1.1.1 -p tcp --dport 80 -j DNAT --to 10.1.1.1:80 ftp\u670d\u52a1\u4e5f\u540c\u6837\uff0c\u547d\u4ee4\u5982\u4e0b\uff1a iptables -t nat -A PREROUTING -d 60.1.1.1 -p tcp --dport 21 -j DNAT --to 10.1.1.2:21 \u597d\u4e86\uff0c\u547d\u4ee4\u5b8c\u6210\u4e86\uff0c\u7aef\u53e3\u8f6c\u53d1\u4e5f\u505a\u5b8c\u4e86\uff0c\u672c\u4f8b\u80fd\u4e0d\u80fd\u8f6c\u53d1\u5462\uff1f\u4e0d\u80fd\uff0c\u4e3a\u4ec0\u4e48\u5462\uff1f\u6211\u4e0b\u9762\u8be6\u7ec6\u5206\u6790\u4e00\u4e0b\u3002\u5bf9\u4e8eiptables\u597d\u50cf\u5f80\u5916\u8bbf\u95ee\u7684\u914d\u7f6e\u6bd4\u8f83\u5bb9\u6613\uff0c\u800c\u5bf9\u5185\u7684\u8f6c\u53d1\u4f3c\u4e4e\u5c31\u6709\u4e00\u4e9b\u95ee\u9898\u4e86\uff0c\u5728\u4e00\u5f00\u59cb\u7684\u65f6\u5019\u6211\u5c31\u5148\u8bf4\u4e86\u4e00\u4e9b\u5173\u4e8enetfilter\u7684\u6d41\u7a0b\u95ee\u9898\uff0c\u90a3\u4e48\u6211\u5c31\u7b80\u5355\u8bf4\u8bf4\u505a\u4e86\u8fd9\u4e9b\u914d\u7f6e\u4e4b\u540e\u4e3a\u4ec0\u4e48\u6709\u53ef\u80fd\u8fd8\u4e0d\u884c\u5462\uff1f \u80fd\u5f15\u8d77\u8fd9\u4e2a\u914d\u7f6e\u5931\u8d25\u7684\u539f\u56e0\u6709\u5f88\u591a\uff0c\u6211\u4eec\u4e00\u4e2a\u4e2a\u7684\u6765\u8bf4\uff1a \u7b2c\u4e00\uff0c\u672c\u4f8b\u4e2d\uff0c\u6211\u4eec\u7684FORWARD\u7b56\u7565\u662fDROP,\u90a3\u4e48\u4e5f\u5c31\u662f\u8bf4\uff0c\u6ca1\u6709\u7b26\u5408\u89c4\u5219\u7684\u5305\u5c06\u88ab\u4e22\u5f03\uff0c\u4e0d\u7ba1\u5185\u5230\u5916\u8fd8\u662f\u5916\u5230\u5185\uff0c\u6211\u4eec\u5728\u8fd9\u91cc\u4f9d\u7136\u4e0d\u8ba8\u8bba\u90a3\u4e2a\u786e\u8ba4\u5305\u548c\u5173\u8054\u5305\u7684\u95ee\u9898\uff0c\u6211\u4eec\u4e0d\u7528\u8003\u8651\u4ed6\u7684\u95ee\u9898\uff0c\u4e0b\u9762\u6211\u4f1a\u8be6\u7ec6\u8bf4\u4e00\u4e0b\u8fd9\u4e2a\u4e1c\u897f\uff0c\u90a3\u4e48\u5982\u4f55\u8ba9\u672c\u4f8b\u53ef\u4ee5\u6210\u529f\u5462\uff1f\u52a0\u5165\u4e0b\u9762\u7684\u89c4\u5219\u3002 iptables -A FORWARD -d 10.1.1.1 -p tcp --dport 80 -j ACCEPT iptables -A FORWARD -d 10.1.1.2 -p tcp --dport 21 -j ACCEPT \u6709\u6ca1\u6709\u89c9\u5f97\u6709\u4e00\u4e9b\u6655\uff1f\u4e3a\u4ec0\u4e48\u76ee\u7684\u5730\u5740\u662f10.xxx\u800c\u4e0d\u662f60.xxx\u4eba\u5bb6internet\u7528\u6237\u4e0d\u662f\u8bbf\u95ee\u768460.xxx\u5417\uff1f\u5475\u5475\uff0c\u56de\u5230\u4e0a\u9762\u770b\u770b\u90a3\u4e2a\u56fe\u5427\uff0c FORWARD\u94fe\u5728\u4ec0\u4e48\u4f4d\u7f6e\u4e0a\uff0c\u5b83\u662f\u5728PREROUTING\u4e4b\u540e\uff0c\u4e5f\u5c31\u662f\u8bf4\u5f53\u8fd9\u4e2a\u5305\u5230\u8fbeFORWARD\u94fe\u7684\u65f6\u5019\uff0c\u76ee\u7684\u5730\u5740\u5df2\u7ecf\u53d8\u621010.xxx\u4e86\uff0c\u5047\u5982 internet\u7528\u6237\u7684\u8bf7\u6c42\u662f\u8fd9\u6837202.1.1.1:1333-->60.1.1.1:80\uff0c\u5728\u7ecf\u8fc7\u4e86\u6211\u4eec\u7684PREROUTING\u94fe\u4e4b\u540e\u5c06\u53d8\u6210 202.1.1.1:1333-->10.1.1.1:80,\u8fd9\u4e2a\u65f6\u5019\u5982\u679c\u4f60\u8bbe\u7f6e\u4e00\u4e2a\u76ee\u7684\u5730\u5740\u4e3a60.xxx\u7684\u89c4\u5219\u6709\u7528\u5417\uff1f\u5475\u5475\uff0c\u8fd9\u662f\u95ee\u9898\u4e00\u3002\u8fd9\u4e2a\u65f6\u5019\u5e94\u8be5\u53ef\u4ee5\u5b8c\u6210\u7aef\u53e3\u8f6c\u53d1\u7684\u8bbf\u95ee\u4e86\uff0c\u4f46\u662f\u6709\u4e00\u4e9b\u65f6\u5019\u8fd8\u662f\u4e0d\u884c\uff1f\u4e3a\u4ec0\u4e48\uff1f\u770b\u95ee\u9898\u4e8c\u3002 \u7b2c\u4e8c\uff0c\u5185\u7f51server\u7684ip\u914d\u7f6e\u95ee\u9898\uff0c\u8fd9\u91cc\u6211\u4eec\u4ee5web server\u4e3a\u4f8b\u8bf4\u660e\u4e00\u4e0b\uff08ftp\u60c5\u51b5\u6709\u4e00\u4e9b\u7279\u6b8a\uff0c\u4e0b\u9762\u6211\u4eec\u518d\u8be6\u7ec6\u8ba8\u8bba\uff0c\u8bf4\u786e\u8ba4\u5305\u548c\u5173\u8054\u5305\u7684\u65f6\u5019\u8ba8\u8bba\u8fd9\u4e2a\u95ee\u9898\uff09\uff0c\u4e0a\u9762\u8bf4\u5230\uff0c\u6709\u7684\u65f6\u5019\u53ef\u4ee5\u8bbf\u95ee\u4e86\uff0c\u6709\u7684\u65f6\u5019\u5374\u4e0d\u884c\uff0c\u5c31\u662f\u8fd9\u4e2aweb server\u7684ip\u8bbe\u7f6e\u95ee\u9898\u4e86\uff0c\u5982\u679cweb server\u6ca1\u6709\u6307\u5b9a\u9ed8\u8ba4\u7684\u7f51\u5173\uff0c\u90a3\u4e48\u5728\u4f5c\u4e86\u4e0a\u9762\u7684\u914d\u7f6e\u4e4b\u540e\uff0cweb server\u4f1a\u6536\u5230internet\u7684\u8bf7\u6c42\uff0c\u4f46\u662f\uff0c\u4ed6\u4e0d\u77e5\u9053\u5f80\u54ea\u91cc\u56de\u554a\uff0c\u4eba\u5bb6\u7684\u672c\u5730\u8def\u7531\u8868\u4e0d\u77e5\u9053\u4f60\u90a3\u4e2ainternet\u7684ip,202.1.1.1\u8be5\u600e\u4e48\u8d70\u3002\u5982\u679c\u4f60\u4f7f\u7528\u622a\u5305\u5de5\u5177\u5728web server\u4e0a\u9762\u5bdf\u770b\uff0c\u4f60\u4f1a\u53d1\u73b0server\u6536\u5230\u4e86\u6765\u81ea202.1.1.1:1333-->10.1.1.1:80\u7684\u8bf7\u6c42\uff0c\u7531\u4e8e\u4f60\u6ca1\u6709\u7ed9web server\u914d\u7f6e\u9ed8\u8ba4\u7f51\u5173\uff0c\u5b83\u4e0d\u77e5\u9053\u600e\u4e48\u56de\u53bb\uff0c\u6240\u4ee5\u5c31\u51fa\u73b0\u4e86\u4e0d\u901a\u7684\u60c5\u51b5\u3002\u600e\u4e48\u529e\u5462\uff1f\u4e24\u4e2a\u89e3\u51b3\u65b9\u6cd5\uff1a\u4e00\u5c31\u662f\u7ed9\u8fd9\u4e2aserver\u914d\u7f6e\u4e00\u4e2a\u9ed8\u8ba4\u7f51\u5173\uff0c\u5f53\u7136\u8981\u6307\u5411\u8fd9\u4e2a\u914d\u7f6e\u7aef\u53e3\u8f6c\u53d1\u7684linux,\u672c\u4f8b\u662f10.1.1.254,\u914d\u7f6e\u597d\u4e86\uff0c\u5c31\u4e00\u5b9a\u80fd\u8bbf\u95ee\u4e86\u3002\u6709\u4e00\u4e2a\u7591\u95ee\uff1f\u96be\u9053\u4e0d\u9700\u8981\u5728FORWARD\u94fe\u4e0a\u9762\u8bbe\u7f6e\u4e00\u4e2a\u5141\u8bb8 web server\u7684ip\u5730\u5740\u8bbf\u95ee\u5916\u7f51\u7684\u89c4\u5219\u5417\uff1f\u5b83\u7684\u5305\u80fd\u51fa\u53bb\uff1f\u7b54\u6848\u662f\u80af\u5b9a\u7684\uff0c\u80fd\u51fa\u53bb\u3002\u56e0\u4e3a\u6211\u4eec\u90a3\u4e00\u6761\u5141\u8bb8\u786e\u8ba4\u5305\u4e0e\u5173\u8054\u5305\u7684\u89c4\u5219\uff0c\u5426\u5219\u5b83\u662f\u51fa\u4e0d\u53bb\u7684\u3002\u7b2c\u4e8c\u79cd\u65b9\u6cd5\uff0c\u6bd4\u8f83\u9ebb\u70e6\u4e00\u4e9b\uff0c\u4f46\u662f\u5bf9\u670d\u52a1\u5668\u6765\u8bf4\u8fd9\u6837\u4f3c\u4e4e\u66f4\u5b89\u5168\u4e00\u4e9b\u3002\u65b9\u6cd5\u5c31\u662f\u5bf9\u8fd9\u4e2a\u5305\u518d\u4f5c\u4e00\u6b21SNAT\uff0c\u4e5f\u5c31\u662f\u5728POSTROUTING\u94fe\u4e0a\u6dfb\u52a0\u89c4\u5219\u3002\u547d\u4ee4\u5982\u4e0b\uff1a iptables -t nat -A POSTROUTING -d 10.1.1.1 -p tcp --dport 80 -j SNAT --to 10.1.1.254 ftp\u7684\u65b9\u6cd5\u76f8\u540c\u3002\u8fd9\u6761\u547d\u4ee4\u4e0d\u592a\u597d\u61c2\uff1f\uff1f\u5176\u5b9e\u5f88\u7b80\u5355\uff0c\u5982\u679c\u4f7f\u7528\u8fd9\u6761\u547d\u4ee4\uff0c\u90a3\u4e48\u4f60\u7684web server\u4e0d\u9700\u8981\u518d\u8bbe\u7f6e\u9ed8\u8ba4\u7f51\u5173\uff0c\u5c31\u80fd\u6536\u5230\u8fd9\u4e2a\u8bf7\u6c42\uff0c\u53ea\u8981\u4ed6\u548clinux\u7684lan ip\u5730\u5740\u662f\u80fd\u4e92\u8bbf\u7684\uff08\u4e5f\u5c31\u662f\u8bf4web server\u548cLinux\u7684Lan ip\u5728\u4e00\u4e2a\u5e7f\u64ad\u57df\uff09\uff0c\u6211\u4eec\u5728\u6839\u636e\u4e0a\u9762\u7684netfilter\u6d41\u7a0b\u56fe\u6765\u5206\u6790\u8fd9\u4e2a\u5305\u5230\u5e95\u88ab\u6211\u4eec\u600e\u4e48\u6837\u4e86\uff0c\u9996\u5148\u4e00\u4e2a\u8bf7\u6c42202.1.1.1:1333--> 60.1.1.1:80\u88ablinux\u6536\u5230\u4e86\uff0c\u8fdb\u5165PREROUTING,\u53d1\u73b0\u4e00\u4e2a\u89c4\u5219\uff08iptables -t nat -A PREROUTING -d 60.1.1.1 -p tcp --dport 80 -j DNAT --to 10.1.1.1:80\uff09\u7b26\u5408\uff0c\u597d\u4e86\uff0c\u6539\u4f60\u7684\u76ee\u7684\u5730\u5740\uff0c\u4e8e\u662f\u8fd9\u4e2a\u5305\u53d8\u6210\u4e86202.1.1.1:1333-->10.1.1.1:80\uff0c\u7ee7\u7eed\u5f80\u524d\u8d70\uff0c\u8fdb\u5165FORWARD\u94fe\uff0cokay,\u4e5f\u6709\u4e00\u6761\u89c4\u5219\u5141\u8bb8\u901a\u8fc7(iptables -A FORWARD -d 10.1.1.1 -p tcp --dport 80 -j ACCEPT)\uff0c\u8fdb\u5165route box\u9009\u8def\uff0c\u627e\u5230\u5408\u9002\u7684\u8def\u5f84\u4e86\uff0c\u7ee7\u7eed\u8fdb\u5165POSTROUTING\u94fe\uff0c\u8036\uff1f\u53c8\u53d1\u73b0\u4e00\u4e2a\u7b26\u5408\u7684\u89c4\u5219(iptables -t nat -A POSTROUTING -d 10.1.1.1 -p tcp --dport 80 -j SNAT --to 10.1.1.254),\u539f\u6765\u662f\u4e00\u4e2aSNAT,\u6539\u4f60\u7684\u6e90\u5730\u5740\uff0c\u4e8e\u662f\u8fd9\u4e2a\u5305\u53d8\u6210\u4e8610.1.1.254:xxxx-->10.1.1.1:80\u3002\u4e3a\u4ec0\u4e48\u7528xxxx\u4e86\uff0c\u8fd9\u91cc\u7684\u7aef\u53e3\u662f\u968f\u673a\u7684\uff0c\u6211\u4e5f\u4e0d\u77e5\u9053\u4f1a\u662f\u4ec0\u4e48\u3002\u800c\u6574\u4e2a\u7684\u4e24\u6b21\u53d8\u5316\u7684\u8fc7\u7a0b\u90fd\u4f1a\u8bb0\u5f55\u5728linux\u7684ip_conntrack\u4e2d\uff0c\u5f53web server\u6536\u5230\u8fd9\u4e2a\u5305\u7684\u65f6\u5019\uff0c\u53d1\u73b0\uff0c\u539f\u6765\u662f\u4e00\u4e2a\u5185\u7f51\u81ea\u5df1\u5144\u5f1f\u6765\u7684\u8bf7\u6c42\u963f\uff0c\u53c8\u5728\u4e00\u4e2a\u5e7f\u64ad\u57df\uff0c\u4e0d\u7528\u627e\u7f51\u5173\uff0c\u628a\u8fd4\u56de\u5305\u76f4\u63a5\u6254\u7ed9\u4ea4\u6362\u673a\u4e86\uff0clinux\u5728\u6536\u5230\u8fd4\u56de\u5305\u4e4b\u540e\uff0c\u4f1a\u6839\u636e\u4ed6\u7684ip_conntrack\u4e2d\u7684\u6761\u76ee\u8fdb\u884c\u4e24\u6b21\u53d8\u6362\uff0c\u8fd4\u56de\u771f\u6b63\u7684internet\u7528\u6237\uff0c\u4e8e\u662f\u5b8c\u6210\u8fd9\u4e00\u6b21\u7684\u8bbf\u95ee\u3002 \u770b\u4e86\u4e0a\u9762\u7684\u4e24\u4e2a\u4f8b\u5b50\uff0c\u4e0d\u77e5\u9053\u5927\u5bb6\u662f\u5426\u6e05\u695a\u4e86iptables\u7684\u8f6c\u53d1\u6d41\u7a0b\uff0c\u5e0c\u671b\u5bf9\u5927\u5bb6\u6709\u6240\u5e2e\u52a9\uff0c\u4e0b\u9762\u6211\u4eec\u5c31\u8bf4\u8bf4\u6211\u4e00\u76f4\u5728\u4e0a\u9762\u63d0\u5230\u7684\u5173\u4e8e\u90a3\u4e2a ESTABLISHED,RELATED\u7684\u89c4\u5219\u662f\u600e\u4e48\u56de\u4e8b\uff0c\u5230\u5e95\u6709\u4ec0\u4e48\u7528\u5904\u3002\u8bf4\u8fd9\u4e2a\u4e1c\u897f\u5c31\u8981\u7b80\u5355\u8bf4\u4e00\u4e0b\u7f51\u7edc\u7684\u6570\u636e\u901a\u8baf\u7684\u65b9\u5f0f\uff0c\u6211\u4eec\u77e5\u9053\uff0c\u7f51\u7edc\u7684\u8bbf\u95ee\u662f\u53cc\u5411\u7684\uff0c\u4e5f\u5c31\u662f\u8bf4\u4e00\u4e2aClient\u4e0eServer\u4e4b\u95f4\u5b8c\u6210\u6570\u636e\u4ea4\u6362\u9700\u8981\u53cc\u65b9\u7684\u53d1\u5305\u4e0e\u6536\u5305\u3002\u5728netfilter\u4e2d\uff0c\u6709\u51e0\u79cd\u72b6\u6001\uff0c\u4e5f\u5c31\u662fnew, established,related,invalid\u3002\u5f53\u4e00\u4e2a\u5ba2\u6237\u7aef\uff0c\u5728\u672c\u6587\u4f8b\u4e00\u4e2d\uff0c\u5185\u7f51\u7684\u4e00\u53f0\u673a\u5668\u8bbf\u95ee\u5916\u7f51\uff0c\u6211\u4eec\u8bbe\u7f6e\u4e86\u89c4\u5219\u5141\u8bb8\u4ed6\u51fa\u53bb\uff0c\u4f46\u662f\u6ca1\u6709\u8bbe\u7f6e\u5141\u8bb8\u56de\u6765\u7684\u89c4\u5219\u963f\uff0c\u600e\u4e48\u5b8c\u6210\u8bbf\u95ee\u5462\uff1f\u8fd9\u5c31\u662fnetfilter\u7684\u72b6\u6001\u673a\u5236\uff0c\u5f53\u4e00\u4e2alan\u7528\u6237\u901a\u8fc7\u8fd9\u4e2alinux\u8bbf\u95ee\u5916\u7f51\u7684\u65f6\u5019\uff0c\u5b83\u53d1\u9001\u4e86\u4e00\u4e2a\u8bf7\u6c42\u5305\uff0c\u8fd9\u4e2a\u5305\u7684\u72b6\u6001\u662fnew,\u5f53\u5916\u7f51\u56de\u5305\u7684\u65f6\u5019\u4ed6\u7684\u72b6\u6001\u5c31\u662festablished,\u6240\u4ee5\uff0clinux\u77e5\u9053\uff0c\u54e6\uff0c\u8fd9\u4e2a\u5305\u662f\u6211\u7684\u5185\u7f51\u7684\u4e00\u53f0\u673a\u5668\u53d1\u51fa\u53bb\u7684\u5e94\u7b54\u5305\uff0c\u4ed6\u5c31\u653e\u884c\u4e86\u3002\u800c\u5916\u7f51\u8bd5\u56fe\u5bf9\u5185\u53d1\u8d77\u4e00\u4e2a\u65b0\u7684\u8fde\u63a5\u7684\u65f6\u5019\uff0c\u4ed6\u7684\u72b6\u6001\u662fnew,\u6240\u4ee5linux\u538b\u6839\u4e0d\u53bb\u7406\u4f1a\u5b83\u3002\u8fd9\u5c31\u662f\u6211\u4eec\u4e3a\u4ec0\u4e48\u8981\u52a0\u8fd9\u4e00\u53e5\u7684\u539f\u56e0\u3002\u8fd8\u6709\u90a3\u4e2a related,\u4ed6\u662f\u4e00\u4e2a\u5173\u8054\u72b6\u6001\uff0c\u4ec0\u4e48\u4f1a\u7528\u5230\u5462\uff1ftftp,ftp\u90fd\u4f1a\u7528\u5230\uff0c\u56e0\u4e3a\u4ed6\u4eec\u7684\u4f20\u8f93\u673a\u5236\u51b3\u5b9a\u4e86\uff0c\u5b83\u4e0d\u50cfhttp\u8bbf\u95ee\u90a3\u6837\uff0cClient_IP: port-->server:80 \u7136\u540eserver:80-->Client_IP:port,ftp\u4f7f\u7528tcp21\u5efa\u7acb\u8fde\u63a5\uff0c\u4f7f\u752820\u7aef\u53e3\u53d1\u9001\u6570\u636e\uff0c\u5176\u4e2d\u53c8\u6709\u4e24\u79cd\u65b9\u5f0f\uff0c\u4e00\u79cd\u4e3b\u52a8 active mode,\u4e00\u79cd\u88ab\u52a8passive mode,\u4e3b\u52a8\u6a21\u5f0f\u4e0b\uff0cclient\u4f7f\u7528port\u547d\u4ee4\u544a\u8bc9server\u6211\u7528\u54ea\u4e00\u4e2a\u7aef\u53e3\u63a5\u53d7\u6570\u636e\uff0c\u7136\u540eserver\u4e3b\u52a8\u53d1\u8d77\u5bf9\u8fd9\u4e2a\u7aef\u53e3\u7684\u8bf7\u6c42\u3002\u88ab\u52a8\u6a21\u5f0f\u4e0b\uff0c server\u4f7f\u7528port\u547d\u4ee4\u544a\u8bc9\u5ba2\u6237\u7aef\uff0c\u5b83\u7528\u90a3\u4e2a\u7aef\u53e3\u76d1\u542c\uff0c\u7136\u540e\u5ba2\u6237\u7aef\u53d1\u8d77\u5bf9\u4ed6\u7684\u6570\u636e\u4f20\u8f93\uff0c\u6240\u4ee5\u8fd9\u5bf9\u4e8e\u4e00\u4e2a\u9632\u706b\u5899\u6765\u8bf4\u5c31\u662f\u6bd4\u8f83\u9ebb\u70e6\u7684\u4e8b\u60c5\uff0c\u56e0\u4e3a\u6709\u53ef\u80fd\u4f1a\u6709new\u72b6\u6001\u7684\u6570\u636e\u5305\uff0c\u4f46\u662f\u5b83\u53c8\u662f\u5408\u7406\u7684\u8bf7\u6c42\uff0c\u8fd9\u4e2a\u65f6\u5019\u5c31\u7528\u5230\u8fd9\u4e2arelated\u72b6\u6001\u4e86\uff0c\u4ed6\u5c31\u662f\u4e00\u79cd\u5173\u8054\uff0c\u5728linux\u4e2d\uff0c\u6709\u4e2a\u53eb ftp_conntrack\u7684\u6a21\u5757\uff0c\u5b83\u80fd\u8bc6\u522bport\u547d\u4ee4\uff0c\u7136\u540e\u5bf9\u76f8\u5e94\u7684\u7aef\u53e3\u8fdb\u884c\u653e\u884c\u3002 \u4e00\u53e3\u6c14\u5199\u4e86\u8fd9\u4e48\u591a\u4e1c\u897f\uff0c\u4e0d\u77e5\u9053\u8d28\u91cf\u5982\u4f55\uff0c\u5927\u5bb6\u51d1\u548c\u7740\u770b\u5427\uff0c\u5e0c\u671b\u591a\u591a\u4ea4\u6d41\u5171\u540c\u8fdb\u6b65\uff0c\u6211\u8fd8\u662f\u4e00\u4e2alinux\u7684\u521d\u5b66\u8005\uff0c\u96be\u514d\u5f88\u591a\u8c2c\u8bef\uff0c\u5e0c\u671b\u9ad8\u624b\u8d50\u6559\u6307\u6b63\uff0c\u4ee5\u671f\u4e0d\u65ad\u8fdb\u6b65\u3002 \u5bf9\u4e86\uff0c\u8fd8\u6709\u51e0\u4e2a\u5728\u5b9e\u9645\u4e2d\u6bd4\u8f83\u5b9e\u7528\uff08\u4e5f\u6bd4\u8f83\u53d7\u7528:-)\uff09\u7684\u547d\u4ee4\u53c2\u6570\uff0c\u5199\u51fa\u6765\u4f9b\u5927\u5bb6\u53c2\u8003 iptables -L -n \u8fd9\u6837\u7684\u5217\u8868\u4f1a\u8df3\u8fc7linux\u7684domain lookup,\u6709\u7684\u65f6\u5019\u4f7f\u7528iptables -L\u4f1a\u6bd4\u8f83\u6162\uff0c\u56e0\u4e3alinux\u4f1a\u5c1d\u8bd5\u89e3\u6790ip\u7684\u57df\u540d\uff0c\u771f\u662f\u7f57\u55e6\uff0c\u5982\u679c\u4f60\u7684dns server\u6bd4\u8f83\u4e0d\u723d\u7684\u8bdd\uff0ciptables -L\u5c31\u4f1a\u8ba9\u4f60\u5f88\u4e0d\u723d\uff0c\u52a0\u4e00\u4e2a-n\u53c2\u6570\u5c31\u597d\u4e86\u3002\u5217\u8868\u5237\u7684\u5c31\u51fa\u6765\u3002\u5f53\u7136\u4e86\uff0c\u5982\u679c\u4f60\u7684linux\u5c31\u662f\u505a\u9632\u706b\u5899\uff0c\u5efa\u8bae\u628anameserver\u53bb\u6389\uff0c\u5728 /etc/resolve.conf\u91cc\u9762\uff0c\u56e0\u4e3a\u6709\u65f6\u5019\u4f7f\u7528route\u547d\u4ee4\u4e5f\u4f1a\u6bd4\u8f83\u6162\u5217\u51fa\u6765\uff0c\u5f88\u662f\u4e0d\u723d\u3002 iptables -L -v \u8fd9\u4e2a\u547d\u4ee4\u4f1a\u663e\u793a\u94fe\u4e2d\u89c4\u5219\u7684\u5305\u548c\u6d41\u91cf\u8ba1\u6570\uff0c\u563f\u563f\uff0c\u770b\u770b\u54ea\u4e9b\u5c0f\u5b50\u7528\u7684\u6d41\u91cf\u90a3\u4e48\u591a\uff0c\u7528tc\u9650\u4e86\u4ed6\u3002 cat /proc/net/ip_conntrack \u67e5\u770b\u76ee\u524d\u7684conntrack\uff0c\u53ef\u80fd\u4f1a\u6bd4\u8f83\u591a\u54e6\uff0c\u6700\u597d\u52a0\u4e00\u4e2a|grep \"\u5173\u952e\u5b57\"\uff0c\u770b\u770b\u4f60\u611f\u5174\u8da3\u7684\u94fe\u63a5\u8ddf\u8e2a wc -l /proc/net/ip_conntrack \u770b\u770b\u603b\u94fe\u63a5\u6709\u591a\u5c11\u6761\u3002 iptables-save >/etc/iptables \u628a\u5f53\u524d\u7684\u6240\u6709\u94fe\u5907\u4efd\u4e00\u4e0b\uff0c\u4e4b\u6240\u4ee5\u653e\u5230/etc\u4e0b\u9762\u53ebiptables,\u56e0\u4e3a\u8fd9\u6837\u91cd\u8d77\u673a\u5668\u7684\u65f6\u5019\u4f1a\u81ea\u52a8\u52a0\u8f7d\u6240\u6709\u7684\u94fe\uff0c\u7ecf\u5e38\u5730\u5907\u4efd\u4e00\u4e0b\u5427\uff0c\u5426\u5219\u5982\u679c\u94fe\u591a\uff0c\u4e07\u4e00\u6389\u7535\u91cd\u542f\uff0c\u4f60\u8fd8\u662f\u4f1a\u6bd4\u8f83\u75db\u82e6\u3002 \u6458\u81ea\u300ehttp://blog.csdn.net/huguohu2006/article/details/6453522\u300f","title":"iptables\u7aef\u53e3\u6620\u5c04\u8be6\u89e3"},{"location":"UTILITIES/2015-11-29-myiptables-iptables%25e5%25b8%25b8%25e7%2594%25a8%25e9%2585%258d%25e7%25bd%25ae.html/","tags":["iptables"],"text":"#!/bin/bash # myiptables.sh iptables -F iptables -P INPUT DROP iptables -P FORWARD DROP iptables -P OUTPUT DROP # DNS iptables -A OUTPUT -p udp --dport 53 -j ACCEPT iptables -A INPUT -p udp --sport 53 -j ACCEPT # \u5141\u8bb8\u5305\u4ece22\u7aef\u53e3\u8fdb\u5165 iptables -A INPUT -p tcp --dport 22 -j ACCEPT # \u5141\u8bb8\u4ece22\u7aef\u53e3\u8fdb\u5165\u7684\u5305\u8fd4\u56de iptables -A OUTPUT -p tcp --sport 22 -m state --state ESTABLISHED -j ACCEPT # \u5141\u8bb8\u672c\u673a\u8bbf\u95ee\u672c\u673a iptables -A INPUT -i lo -j ACCEPT # \u5141\u8bb8\u6240\u6709IP\u8bbf\u95ee80\u7aef\u53e3 iptables -A INPUT -p tcp -s 0/0 --dport 80 -j ACCEPT iptables -A OUTPUT -p tcp --sport 80 -m state --state ESTABLISHED -j ACCEPT # \u4fdd\u5b58\u914d\u7f6e \u6216\u8005\u4f7f\u7528\u547d\u4ee4 service iptables save iptables-save > /etc/sysconfig/iptables iptables -L \u6ce8 \uff1a\u4ec5\u4ec5\u5c4f\u853d\u5916\u7f51(eth1) iptables -P INPUT ACCEPT iptables -A INPUT -p tcp -i eth1 --dport 8080 -j DROP \u9644 \uff1a/etc/sysconfig/iptables \u5b9e\u4f8b # Firewall configuration written by system-config-firewall # Manual customization of this file is not recommended. *filter :INPUT ACCEPT [0:0] :FORWARD ACCEPT [0:0] :OUTPUT ACCEPT [0:0] -A INPUT -m state --state ESTABLISHED,RELATED -j ACCEPT -A INPUT -p icmp -j ACCEPT -A INPUT -i lo -j ACCEPT -A INPUT -m state --state NEW -m tcp -p tcp --dport 22 -j ACCEPT -A INPUT -m state --state NEW -m tcp -p tcp --dport 8161 -j ACCEPT -A INPUT -m state --state NEW -m tcp -p tcp --dport 6379 -j ACCEPT -A INPUT -j REJECT --reject-with icmp-host-prohibited -A FORWARD -j REJECT --reject-with icmp-host-prohibited COMMIT","title":"myiptables: iptables\u5e38\u7528\u914d\u7f6e"},{"location":"UTILITIES/2015-12-09-mac-finder-%25e6%2598%25be%25e7%25a4%25ba%25e9%259a%2590%25e8%2597%258f%25e6%2596%2587%25e4%25bb%25b6.html/","tags":["finder"],"text":"defaults write com.apple.finder AppleShowAllFiles -bool true","title":"mac finder \u663e\u793a\u9690\u85cf\u6587\u4ef6"},{"location":"UTILITIES/2015-12-09-mac-vi-%25e8%25af%25ad%25e6%25b3%2595%25e9%25ab%2598%25e4%25ba%25ae.html/","tags":["vi"],"text":"$ cat .vimrc \" Configuration file for vim set modelines=0 \" CVE-2007-2438 \" Normally we use vim-extensions. If you want true vi-compatibility \" remove change the following statements set nocompatible \" Use Vim defaults instead of 100% vi compatibility set backspace=2 \" more powerful backspacing syntax on set nu! set cindent set ruler \" Don't write backup file if vim is being called by \"crontab -e\" au BufWrite /private/tmp/crontab.* set nowritebackup nobackup \" Don't write backup file if vim is being called by \"chpass\" au BufWrite /private/etc/pw.* set nowritebackup nobackup","title":"mac vi \u8bed\u6cd5\u9ad8\u4eae"},{"location":"UTILITIES/2015-12-09-rc-local-in-osx-yosemite.html/","tags":["rc.local"],"text":"I created /Library/LaunchDaemons/local.localhost.startup.plist containing the code below. It runs the rc.local script once at start up. <?xml version=\"1.0\" encoding=\"UTF-8\"?> <!DOCTYPE plist PUBLIC \"-//Apple Computer//DTD PLIST 1.0//EN\" \"http://www.apple.com/DTDs/PropertyList-1.0.dtd\"> <plist version= \"1.0\" > <dict> <key> Label </key> <string> local.localhost.startup </string> <key> Disabled </key> <false/> <key> RunAtLoad </key> <true/> <key> KeepAlive </key> <false/> <key> LaunchOnlyOnce </key> <true/> <key> ProgramArguments </key> <array> <string> /etc/rc.local </string> </array> </dict> </plist> \u6458\u81ea\u300ehttp://apple.stackexchange.com/questions/153387/problem-with-startup-script-rc-local-in-os-x-10-10-yosemite-running-bootcamp-in\u300f","title":"rc.local in osx-yosemite"},{"location":"UTILITIES/2015-12-09-tcpip%25e5%259b%259b%25e5%25b1%2582%25e6%25a8%25a1%25e5%259e%258b.html/","tags":["tcp/ip","\u7f51\u7edc"],"text":"TCP/IP\u53c2\u8003\u6a21\u578b \u3000\u3000ISO\u5236\u5b9a\u7684OSI\u53c2\u8003\u6a21\u578b\u7684\u8fc7\u4e8e\u5e9e\u5927\u3001\u590d\u6742\u62db\u81f4\u4e86\u8bb8\u591a\u6279\u8bc4\u3002\u4e0e\u6b64\u5bf9\u7167\uff0c\u7531\u6280\u672f\u4eba\u5458\u81ea\u5df1\u5f00\u53d1\u7684TCP/IP\u534f\u8bae\u6808\u83b7\u5f97\u4e86\u66f4\u4e3a\u5e7f\u6cdb\u7684\u5e94\u7528\u3002\u5982\u56fe2-1\u6240\u793a\uff0c\u662fTCP/IP\u53c2\u8003\u6a21\u578b\u548cOSI\u53c2\u8003\u6a21\u578b\u7684\u5bf9\u6bd4\u793a\u610f\u56fe\u3002 \u56fe2-1\u3000 TCP/IP\u53c2\u8003\u6a21\u578b 2.1\u3000TCP/IP\u53c2\u8003\u6a21\u578b\u7684\u5c42\u6b21\u7ed3\u6784 TCP/IP\u534f\u8bae\u6808\u662f\u7f8e\u56fd\u56fd\u9632\u90e8\u9ad8\u7ea7\u7814\u7a76\u8ba1\u5212\u5c40\u8ba1\u7b97\u673a\u7f51\uff08Advanced Research Projects Agency Network\uff0cARPANET\uff09\u548c\u5176\u540e\u7ee7\u56e0\u7279\u7f51\u4f7f\u7528\u7684\u53c2\u8003\u6a21\u578b\u3002ARPANET\u662f\u7531\u7f8e\u56fd\u56fd\u9632\u90e8\uff08U.S\uff0eDepartment of Defense\uff0cDoD\uff09\u8d5e\u52a9\u7684\u7814\u7a76\u7f51\u7edc\u3002\u6700\u521d\uff0c\u5b83\u53ea\u8fde\u63a5\u4e86\u7f8e\u56fd\u5883\u5185\u7684\u56db\u6240\u5927\u5b66\u3002\u968f\u540e\u7684\u51e0\u5e74\u4e2d\uff0c\u5b83\u901a\u8fc7\u79df\u7528\u7684\u7535\u8bdd\u7ebf\u8fde\u63a5\u4e86\u6570\u767e\u6240\u5927\u5b66\u548c\u653f\u5e9c\u90e8\u95e8\u3002\u6700\u7ec8ARPANET\u53d1\u5c55\u6210\u4e3a\u5168\u7403\u89c4\u6a21\u6700\u5927\u7684\u4e92\u8fde\u7f51\u7edc-\u56e0\u7279\u7f51\u3002\u6700\u521d\u7684ARPANET\u4e8e1990\u5e74\u6c38\u4e45\u6027\u5730\u5173\u95ed\u3002 TCP/IP\u53c2\u8003\u6a21\u578b\u5206\u4e3a\u56db\u4e2a\u5c42\u6b21\uff1a\u5e94\u7528\u5c42\u3001\u4f20\u8f93\u5c42\u3001\u7f51\u7edc\u4e92\u8fde\u5c42\u548c\u4e3b\u673a\u5230\u7f51\u7edc\u5c42\u3002\u5982\u56fe2-2\u6240\u793a\u3002 \u56fe2-2\u3000 TCP/IP\u53c2\u8003\u6a21\u578b\u7684\u5c42\u6b21\u7ed3\u6784 \u5728TCP/IP\u53c2\u8003\u6a21\u578b\u4e2d\uff0c\u53bb\u6389\u4e86OSI\u53c2\u8003\u6a21\u578b\u4e2d\u7684\u4f1a\u8bdd\u5c42\u548c\u8868\u793a\u5c42\uff08\u8fd9\u4e24\u5c42\u7684\u529f\u80fd\u88ab\u5408\u5e76\u5230\u5e94\u7528\u5c42\u5b9e\u73b0\uff09\u3002\u540c\u65f6\u5c06OSI\u53c2\u8003\u6a21\u578b\u4e2d\u7684\u6570\u636e\u94fe\u8def\u5c42\u548c\u7269\u7406\u5c42\u5408\u5e76\u4e3a\u4e3b\u673a\u5230\u7f51\u7edc\u5c42\u3002\u4e0b\u9762\uff0c\u5206\u522b\u4ecb\u7ecd\u5404\u5c42\u7684\u4e3b\u8981\u529f\u80fd\u3002 1\u3001\u4e3b\u673a\u5230\u7f51\u7edc\u5c42 \u5b9e\u9645\u4e0aTCP/IP\u53c2\u8003\u6a21\u578b\u6ca1\u6709\u771f\u6b63\u63cf\u8ff0\u8fd9\u4e00\u5c42\u7684\u5b9e\u73b0\uff0c\u53ea\u662f\u8981\u6c42\u80fd\u591f\u63d0\u4f9b\u7ed9\u5176\u4e0a\u5c42-\u7f51\u7edc\u4e92\u8fde\u5c42\u4e00\u4e2a\u8bbf\u95ee\u63a5\u53e3\uff0c\u4ee5\u4fbf\u5728\u5176\u4e0a\u4f20\u9012IP\u5206\u7ec4\u3002\u7531\u4e8e\u8fd9\u4e00\u5c42\u6b21\u672a\u88ab\u5b9a\u4e49\uff0c\u6240\u4ee5\u5176\u5177\u4f53\u7684\u5b9e\u73b0\u65b9\u6cd5\u5c06\u968f\u7740\u7f51\u7edc\u7c7b\u578b\u7684\u4e0d\u540c\u800c\u4e0d\u540c\u3002 2\u3001\u7f51\u7edc\u4e92\u8fde\u5c42 \u7f51\u7edc\u4e92\u8fde\u5c42\u662f\u6574\u4e2aTCP/IP\u534f\u8bae\u6808\u7684\u6838\u5fc3\u3002\u5b83\u7684\u529f\u80fd\u662f\u628a\u5206\u7ec4\u53d1\u5f80\u76ee\u6807\u7f51\u7edc\u6216\u4e3b\u673a\u3002\u540c\u65f6\uff0c\u4e3a\u4e86\u5c3d\u5feb\u5730\u53d1\u9001\u5206\u7ec4\uff0c\u53ef\u80fd\u9700\u8981\u6cbf\u4e0d\u540c\u7684\u8def\u5f84\u540c\u65f6\u8fdb\u884c\u5206\u7ec4\u4f20\u9012\u3002\u56e0\u6b64\uff0c\u5206\u7ec4\u5230\u8fbe\u7684\u987a\u5e8f\u548c\u53d1\u9001\u7684\u987a\u5e8f\u53ef\u80fd\u4e0d\u540c\uff0c\u8fd9\u5c31\u9700\u8981\u4e0a\u5c42\u5fc5\u987b\u5bf9\u5206\u7ec4\u8fdb\u884c\u6392\u5e8f\u3002 \u7f51\u7edc\u4e92\u8fde\u5c42\u5b9a\u4e49\u4e86\u5206\u7ec4\u683c\u5f0f\u548c\u534f\u8bae\uff0c\u5373IP\u534f\u8bae\uff08Internet Protocol\uff09\u3002 \u7f51\u7edc\u4e92\u8fde\u5c42\u9664\u4e86\u9700\u8981\u5b8c\u6210\u8def\u7531\u7684\u529f\u80fd\u5916\uff0c\u4e5f\u53ef\u4ee5\u5b8c\u6210\u5c06\u4e0d\u540c\u7c7b\u578b\u7684\u7f51\u7edc\uff08\u5f02\u6784\u7f51\uff09\u4e92\u8fde\u7684\u4efb\u52a1\u3002\u9664\u6b64\u4e4b\u5916\uff0c\u7f51\u7edc\u4e92\u8fde\u5c42\u8fd8\u9700\u8981\u5b8c\u6210\u62e5\u585e\u63a7\u5236\u7684\u529f\u80fd\u3002 3\u3001\u4f20\u8f93\u5c42 \u5728TCP/IP\u6a21\u578b\u4e2d\uff0c\u4f20\u8f93\u5c42\u7684\u529f\u80fd\u662f\u4f7f\u6e90\u7aef\u4e3b\u673a\u548c\u76ee\u6807\u7aef\u4e3b\u673a\u4e0a\u7684\u5bf9\u7b49\u5b9e\u4f53\u53ef\u4ee5\u8fdb\u884c\u4f1a\u8bdd\u3002\u5728\u4f20\u8f93\u5c42\u5b9a\u4e49\u4e86\u4e24\u79cd\u670d\u52a1\u8d28\u91cf\u4e0d\u540c\u7684\u534f\u8bae\u3002\u5373\uff1a\u4f20\u8f93\u63a7\u5236\u534f\u8baeTCP\uff08transmission control protocol\uff09\u548c\u7528\u6237\u6570\u636e\u62a5\u534f\u8baeUDP\uff08user datagram protocol\uff09\u3002 TCP\u534f\u8bae\u662f\u4e00\u4e2a\u9762\u5411\u8fde\u63a5\u7684\u3001\u53ef\u9760\u7684\u534f\u8bae\u3002\u5b83\u5c06\u4e00\u53f0\u4e3b\u673a\u53d1\u51fa\u7684\u5b57\u8282\u6d41\u65e0\u5dee\u9519\u5730\u53d1\u5f80\u4e92\u8054\u7f51\u4e0a\u7684\u5176\u4ed6\u4e3b\u673a\u3002\u5728\u53d1\u9001\u7aef\uff0c\u5b83\u8d1f\u8d23\u628a\u4e0a\u5c42\u4f20\u9001\u4e0b\u6765\u7684\u5b57\u8282\u6d41\u5206\u6210\u62a5\u6587\u6bb5\u5e76\u4f20\u9012\u7ed9\u4e0b\u5c42\u3002\u5728\u63a5\u6536\u7aef\uff0c\u5b83\u8d1f\u8d23\u628a\u6536\u5230\u7684\u62a5\u6587\u8fdb\u884c\u91cd\u7ec4\u540e\u9012\u4ea4\u7ed9\u4e0a\u5c42\u3002TCP\u534f\u8bae\u8fd8\u8981\u5904\u7406\u7aef\u5230\u7aef\u7684\u6d41\u91cf\u63a7\u5236\uff0c\u4ee5\u907f\u514d\u7f13\u6162\u63a5\u6536\u7684\u63a5\u6536\u65b9\u6ca1\u6709\u8db3\u591f\u7684\u7f13\u51b2\u533a\u63a5\u6536\u53d1\u9001\u65b9\u53d1\u9001\u7684\u5927\u91cf\u6570\u636e\u3002 UDP\u534f\u8bae\u662f\u4e00\u4e2a\u4e0d\u53ef\u9760\u7684\u3001\u65e0\u8fde\u63a5\u534f\u8bae\uff0c\u4e3b\u8981\u9002\u7528\u4e8e\u4e0d\u9700\u8981\u5bf9\u62a5\u6587\u8fdb\u884c\u6392\u5e8f\u548c\u6d41\u91cf\u63a7\u5236\u7684\u573a\u5408\u3002 4\u3001\u5e94\u7528\u5c42 TCP/IP\u6a21\u578b\u5c06OSI\u53c2\u8003\u6a21\u578b\u4e2d\u7684\u4f1a\u8bdd\u5c42\u548c\u8868\u793a\u5c42\u7684\u529f\u80fd\u5408\u5e76\u5230\u5e94\u7528\u5c42\u5b9e\u73b0\u3002 \u5e94\u7528\u5c42\u9762\u5411\u4e0d\u540c\u7684\u7f51\u7edc\u5e94\u7528\u5f15\u5165\u4e86\u4e0d\u540c\u7684\u5e94\u7528\u5c42\u534f\u8bae\u3002\u5176\u4e2d\uff0c\u6709\u57fa\u4e8eTCP\u534f\u8bae\u7684\uff0c\u5982\u6587\u4ef6\u4f20\u8f93\u534f\u8bae\uff08File Transfer Protocol\uff0cFTP\uff09\u3001\u865a\u62df\u7ec8\u7aef\u534f\u8bae\uff08TELNET\uff09\u3001\u8d85\u6587\u672c\u94fe\u63a5\u534f\u8bae\uff08Hyper Text Transfer Protocol\uff0cHTTP\uff09\uff0c\u4e5f\u6709\u57fa\u4e8eUDP\u534f\u8bae\u7684\u3002 2.2\u3000TCP/IP\u62a5\u6587\u683c\u5f0f 1\u3001IP\u62a5\u6587\u683c\u5f0f IP\u534f\u8bae\u662fTCP/IP\u534f\u8bae\u65cf\u4e2d\u6700\u4e3a\u6838\u5fc3\u7684\u534f\u8bae\u3002\u5b83\u63d0\u4f9b\u4e0d\u53ef\u9760\u3001\u65e0\u8fde\u63a5\u7684\u670d\u52a1\uff0c\u4e5f\u5373\u4f9d\u8d56\u5176\u4ed6\u5c42\u7684\u534f\u8bae\u8fdb\u884c\u5dee\u9519\u63a7\u5236\u3002\u5728\u5c40\u57df\u7f51\u73af\u5883\uff0cIP\u534f\u8bae\u5f80\u5f80\u88ab\u5c01\u88c5\u5728\u4ee5\u592a\u7f51\u5e27\u4e2d\u4f20\u9001\u3002\u800c\u6240\u6709\u7684TCP\u3001UDP\u3001ICMP\u3001IGMP\u6570\u636e\u90fd\u88ab\u5c01\u88c5\u5728IP\u6570\u636e\u62a5\u4e2d\u4f20\u9001\u3002\u5982\u56fe2-3\u6240\u793a\uff1a \u56fe2-3\u3000 TCP/IP\u62a5\u6587\u5c01\u88c5 \u56fe2-4\u662fIP\u5934\u90e8\uff08\u62a5\u5934\uff09\u683c\u5f0f\uff1a\uff08RFC 791\uff09\u3002 \u56fe2-4\u3000 IP\u5934\u90e8\u683c\u5f0f \u5176\u4e2d\uff1a \u25cf\u7248\u672c\uff08Version\uff09\u5b57\u6bb5\uff1a\u53604\u6bd4\u7279\u3002\u7528\u6765\u8868\u660eIP\u534f\u8bae\u5b9e\u73b0\u7684\u7248\u672c\u53f7\uff0c\u5f53\u524d\u4e00\u822c\u4e3aIPv4\uff0c\u53730100\u3002 \u25cf\u62a5\u5934\u957f\u5ea6\uff08Internet Header Length\uff0cIHL\uff09\u5b57\u6bb5\uff1a\u53604\u6bd4\u7279\u3002\u662f\u5934\u90e8\u536032\u6bd4\u7279\u7684\u6570\u5b57\uff0c\u5305\u62ec\u53ef\u9009\u9879\u3002\u666e\u901aIP\u6570\u636e\u62a5\uff08\u6ca1\u6709\u4efb\u4f55\u9009\u9879\uff09\uff0c\u8be5\u5b57\u6bb5\u7684\u503c\u662f5\uff0c\u5373160\u6bd4\u7279=20\u5b57\u8282\u3002\u6b64\u5b57\u6bb5\u6700\u5927\u503c\u4e3a60\u5b57\u8282\u3002 \u25cf\u670d\u52a1\u7c7b\u578b\uff08Type of Service \uff0cTOS\uff09\u5b57\u6bb5\uff1a\u53608\u6bd4\u7279\u3002\u5176\u4e2d\u524d3\u6bd4\u7279\u4e3a\u4f18\u5148\u6743\u5b50\u5b57\u6bb5\uff08Precedence\uff0c\u73b0\u5df2\u88ab\u5ffd\u7565\uff09\u3002\u7b2c8\u6bd4\u7279\u4fdd\u7559\u672a\u7528\u3002\u7b2c4\u81f3\u7b2c7\u6bd4\u7279\u5206\u522b\u4ee3\u8868\u5ef6\u8fdf\u3001\u541e\u5410\u91cf\u3001\u53ef\u9760\u6027\u548c\u82b1\u8d39\u3002\u5f53\u5b83\u4eec\u53d6\u503c\u4e3a1\u65f6\u5206\u522b\u4ee3\u8868\u8981\u6c42\u6700\u5c0f\u65f6\u5ef6\u3001\u6700\u5927\u541e\u5410\u91cf\u3001\u6700\u9ad8\u53ef\u9760\u6027\u548c\u6700\u5c0f\u8d39\u7528\u3002\u8fd94\u6bd4\u7279\u7684\u670d\u52a1\u7c7b\u578b\u4e2d\u53ea\u80fd\u7f6e\u5176\u4e2d1\u6bd4\u7279\u4e3a1\u3002\u53ef\u4ee5\u5168\u4e3a0\uff0c\u82e5\u5168\u4e3a0\u5219\u8868\u793a\u4e00\u822c\u670d\u52a1\u3002\u670d\u52a1\u7c7b\u578b\u5b57\u6bb5\u58f0\u660e\u4e86\u6570\u636e\u62a5\u88ab\u7f51\u7edc\u7cfb\u7edf\u4f20\u8f93\u65f6\u53ef\u4ee5\u88ab\u600e\u6837\u5904\u7406\u3002\u4f8b\u5982\uff1aTELNET\u534f\u8bae\u53ef\u80fd\u8981\u6c42\u6709\u6700\u5c0f\u7684\u5ef6\u8fdf\uff0cFTP\u534f\u8bae\uff08\u6570\u636e\uff09\u53ef\u80fd\u8981\u6c42\u6709\u6700\u5927\u541e\u5410\u91cf\uff0cSNMP\u534f\u8bae\u53ef\u80fd\u8981\u6c42\u6709\u6700\u9ad8\u53ef\u9760\u6027\uff0cNNTP\uff08Network News Transfer Protocol\uff0c\u7f51\u7edc\u65b0\u95fb\u4f20\u8f93\u534f\u8bae\uff09\u53ef\u80fd\u8981\u6c42\u6700\u5c0f\u8d39\u7528\uff0c\u800cICMP\u534f\u8bae\u53ef\u80fd\u65e0\u7279\u6b8a\u8981\u6c42\uff084\u6bd4\u7279\u5168\u4e3a0\uff09\u3002\u5b9e\u9645\u4e0a\uff0c\u5927\u90e8\u5206\u4e3b\u673a\u4f1a\u5ffd\u7565\u8fd9\u4e2a\u5b57\u6bb5\uff0c\u4f46\u4e00\u4e9b\u52a8\u6001\u8def\u7531\u534f\u8bae\u5982OSPF\uff08Open Shortest Path First Protocol\uff09\u3001IS-IS\uff08Intermediate System to Intermediate System Protocol\uff09\u53ef\u4ee5\u6839\u636e\u8fd9\u4e9b\u5b57\u6bb5\u7684\u503c\u8fdb\u884c\u8def\u7531\u51b3\u7b56\u3002 \u25cf\u603b\u957f\u5ea6\u5b57\u6bb5\uff1a\u536016\u6bd4\u7279\u3002\u6307\u660e\u6574\u4e2a\u6570\u636e\u62a5\u7684\u957f\u5ea6\uff08\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\uff09\u3002\u6700\u5927\u957f\u5ea6\u4e3a65535\u5b57\u8282\u3002 \u25cf\u6807\u5fd7\u5b57\u6bb5\uff1a\u536016\u6bd4\u7279\u3002\u7528\u6765\u552f\u4e00\u5730\u6807\u8bc6\u4e3b\u673a\u53d1\u9001\u7684\u6bcf\u4e00\u4efd\u6570\u636e\u62a5\u3002\u901a\u5e38\u6bcf\u53d1\u4e00\u4efd\u62a5\u6587\uff0c\u5b83\u7684\u503c\u4f1a\u52a01\u3002 \u25cf\u6807\u5fd7\u4f4d\u5b57\u6bb5\uff1a\u53603\u6bd4\u7279\u3002\u6807\u5fd7\u4e00\u4efd\u6570\u636e\u62a5\u662f\u5426\u8981\u6c42\u5206\u6bb5\u3002 \u25cf\u6bb5\u504f\u79fb\u5b57\u6bb5\uff1a\u536013\u6bd4\u7279\u3002\u5982\u679c\u4e00\u4efd\u6570\u636e\u62a5\u8981\u6c42\u5206\u6bb5\u7684\u8bdd\uff0c\u6b64\u5b57\u6bb5\u6307\u660e\u8be5\u6bb5\u504f\u79fb\u8ddd\u539f\u59cb\u6570\u636e\u62a5\u5f00\u59cb\u7684\u4f4d\u7f6e\u3002 \u25cf\u751f\u5b58\u671f\uff08TTL\uff1aTime to Live\uff09\u5b57\u6bb5\uff1a\u53608\u6bd4\u7279\u3002\u7528\u6765\u8bbe\u7f6e\u6570\u636e\u62a5\u6700\u591a\u53ef\u4ee5\u7ecf\u8fc7\u7684\u8def\u7531\u5668\u6570\u3002\u7531\u53d1\u9001\u6570\u636e\u7684\u6e90\u4e3b\u673a\u8bbe\u7f6e\uff0c\u901a\u5e38\u4e3a32\u300164\u3001128\u7b49\u3002\u6bcf\u7ecf\u8fc7\u4e00\u4e2a\u8def\u7531\u5668\uff0c\u5176\u503c\u51cf1\uff0c\u76f4\u52300\u65f6\u8be5\u6570\u636e\u62a5\u88ab\u4e22\u5f03\u3002 \u25cf\u534f\u8bae\u5b57\u6bb5\uff1a\u53608\u6bd4\u7279\u3002\u6307\u660eIP\u5c42\u6240\u5c01\u88c5\u7684\u4e0a\u5c42\u534f\u8bae\u7c7b\u578b\uff0c\u5982ICMP\uff081\uff09\u3001IGMP\uff082\uff09 \u3001TCP\uff086\uff09\u3001UDP\uff0817\uff09\u7b49\u3002 \u25cf\u5934\u90e8\u6821\u9a8c\u548c\u5b57\u6bb5\uff1a\u536016\u6bd4\u7279\u3002\u5185\u5bb9\u662f\u6839\u636eIP\u5934\u90e8\u8ba1\u7b97\u5f97\u5230\u7684\u6821\u9a8c\u548c\u7801\u3002\u8ba1\u7b97\u65b9\u6cd5\u662f\uff1a\u5bf9\u5934\u90e8\u4e2d\u6bcf\u4e2a16\u6bd4\u7279\u8fdb\u884c\u4e8c\u8fdb\u5236\u53cd\u7801\u6c42\u548c\u3002\uff08\u548cICMP\u3001IGMP\u3001TCP\u3001UDP\u4e0d\u540c\uff0cIP\u4e0d\u5bf9\u5934\u90e8\u540e\u7684\u6570\u636e\u8fdb\u884c\u6821\u9a8c\uff09\u3002 \u25cf\u6e90IP\u5730\u5740\u3001\u76ee\u6807IP\u5730\u5740\u5b57\u6bb5\uff1a\u5404\u536032\u6bd4\u7279\u3002\u7528\u6765\u6807\u660e\u53d1\u9001IP\u6570\u636e\u62a5\u6587\u7684\u6e90\u4e3b\u673a\u5730\u5740\u548c\u63a5\u6536IP\u62a5\u6587\u7684\u76ee\u6807\u4e3b\u673a\u5730\u5740\u3002 \u53ef\u9009\u9879\u5b57\u6bb5\uff1a\u536032\u6bd4\u7279\u3002\u7528\u6765\u5b9a\u4e49\u4e00\u4e9b\u4efb\u9009\u9879\uff1a\u5982\u8bb0\u5f55\u8def\u5f84\u3001\u65f6\u95f4\u6233\u7b49\u3002\u8fd9\u4e9b\u9009\u9879\u5f88\u5c11\u88ab\u4f7f\u7528\uff0c\u540c\u65f6\u5e76\u4e0d\u662f\u6240\u6709\u4e3b\u673a\u548c\u8def\u7531\u5668\u90fd\u652f\u6301\u8fd9\u4e9b\u9009\u9879\u3002\u53ef\u9009\u9879\u5b57\u6bb5\u7684\u957f\u5ea6\u5fc5\u987b\u662f32\u6bd4\u7279\u7684\u6574\u6570\u500d\uff0c\u5982\u679c\u4e0d\u8db3\uff0c\u5fc5\u987b\u586b\u51450\u4ee5\u8fbe\u5230\u6b64\u957f\u5ea6\u8981\u6c42\u3002 2\u3001TCP\u6570\u636e\u6bb5\u683c\u5f0f TCP\u662f\u4e00\u79cd\u53ef\u9760\u7684\u3001\u9762\u5411\u8fde\u63a5\u7684\u5b57\u8282\u6d41\u670d\u52a1\u3002\u6e90\u4e3b\u673a\u5728\u4f20\u9001\u6570\u636e\u524d\u9700\u8981\u5148\u548c\u76ee\u6807\u4e3b\u673a\u5efa\u7acb\u8fde\u63a5\u3002\u7136\u540e\uff0c\u5728\u6b64\u8fde\u63a5\u4e0a\uff0c\u88ab\u7f16\u53f7\u7684\u6570\u636e\u6bb5\u6309\u5e8f\u6536\u53d1\u3002\u540c\u65f6\uff0c\u8981\u6c42\u5bf9\u6bcf\u4e2a\u6570\u636e\u6bb5\u8fdb\u884c\u786e\u8ba4\uff0c\u4fdd\u8bc1\u4e86\u53ef\u9760\u6027\u3002\u5982\u679c\u5728\u6307\u5b9a\u7684\u65f6\u95f4\u5185\u6ca1\u6709\u6536\u5230\u76ee\u6807\u4e3b\u673a\u5bf9\u6240\u53d1\u6570\u636e\u6bb5\u7684\u786e\u8ba4\uff0c\u6e90\u4e3b\u673a\u5c06\u518d\u6b21\u53d1\u9001\u8be5\u6570\u636e\u6bb5\u3002 \u5982\u56fe2-5\u6240\u793a\uff0c\u662fTCP\u5934\u90e8\u7ed3\u6784\uff08RFC 793\u30011323\uff09\u3002 \u56fe2-5\u3000 TCP\u5934\u90e8\u7ed3\u6784 \u25cf\u6e90\u3001\u76ee\u6807\u7aef\u53e3\u53f7\u5b57\u6bb5\uff1a\u536016\u6bd4\u7279\u3002TCP\u534f\u8bae\u901a\u8fc7\u4f7f\u7528\"\u7aef\u53e3\"\u6765\u6807\u8bc6\u6e90\u7aef\u548c\u76ee\u6807\u7aef\u7684\u5e94\u7528\u8fdb\u7a0b\u3002\u7aef\u53e3\u53f7\u53ef\u4ee5\u4f7f\u75280\u523065535\u4e4b\u95f4\u7684\u4efb\u4f55\u6570\u5b57\u3002\u5728\u6536\u5230\u670d\u52a1\u8bf7\u6c42\u65f6\uff0c\u64cd\u4f5c\u7cfb\u7edf\u52a8\u6001\u5730\u4e3a\u5ba2\u6237\u7aef\u7684\u5e94\u7528\u7a0b\u5e8f\u5206\u914d\u7aef\u53e3\u53f7\u3002\u5728\u670d\u52a1\u5668\u7aef\uff0c\u6bcf\u79cd\u670d\u52a1\u5728\"\u4f17\u6240\u5468\u77e5\u7684\u7aef\u53e3\"\uff08Well-Know Port\uff09\u4e3a\u7528\u6237\u63d0\u4f9b\u670d\u52a1\u3002 \u25cf\u987a\u5e8f\u53f7\u5b57\u6bb5\uff1a\u536032\u6bd4\u7279\u3002\u7528\u6765\u6807\u8bc6\u4eceTCP\u6e90\u7aef\u5411TCP\u76ee\u6807\u7aef\u53d1\u9001\u7684\u6570\u636e\u5b57\u8282\u6d41\uff0c\u5b83\u8868\u793a\u5728\u8fd9\u4e2a\u62a5\u6587\u6bb5\u4e2d\u7684\u7b2c\u4e00\u4e2a\u6570\u636e\u5b57\u8282\u3002 \u25cf\u786e\u8ba4\u53f7\u5b57\u6bb5\uff1a\u536032\u6bd4\u7279\u3002\u53ea\u6709ACK\u6807\u5fd7\u4e3a1\u65f6\uff0c\u786e\u8ba4\u53f7\u5b57\u6bb5\u624d\u6709\u6548\u3002\u5b83\u5305\u542b\u76ee\u6807\u7aef\u6240\u671f\u671b\u6536\u5230\u6e90\u7aef\u7684\u4e0b\u4e00\u4e2a\u6570\u636e\u5b57\u8282\u3002 \u25cf\u5934\u90e8\u957f\u5ea6\u5b57\u6bb5\uff1a\u53604\u6bd4\u7279\u3002\u7ed9\u51fa\u5934\u90e8\u536032\u6bd4\u7279\u7684\u6570\u76ee\u3002\u6ca1\u6709\u4efb\u4f55\u9009\u9879\u5b57\u6bb5\u7684TCP\u5934\u90e8\u957f\u5ea6\u4e3a20\u5b57\u8282\uff1b\u6700\u591a\u53ef\u4ee5\u670960\u5b57\u8282\u7684TCP\u5934\u90e8\u3002 \u25cf\u6807\u5fd7\u4f4d\u5b57\u6bb5\uff08U\u3001A\u3001P\u3001R\u3001S\u3001F\uff09\uff1a\u53606\u6bd4\u7279\u3002\u5404\u6bd4\u7279\u7684\u542b\u4e49\u5982\u4e0b\uff1a \u25c6URG\uff1a\u7d27\u6025\u6307\u9488\uff08urgent pointer\uff09\u6709\u6548\u3002 \u25c6ACK\uff1a\u786e\u8ba4\u5e8f\u53f7\u6709\u6548\u3002 \u25c6PSH\uff1a\u63a5\u6536\u65b9\u5e94\u8be5\u5c3d\u5feb\u5c06\u8fd9\u4e2a\u62a5\u6587\u6bb5\u4ea4\u7ed9\u5e94\u7528\u5c42\u3002 \u25c6RST\uff1a\u91cd\u5efa\u8fde\u63a5\u3002 \u25c6SYN\uff1a\u53d1\u8d77\u4e00\u4e2a\u8fde\u63a5\u3002 \u25c6FIN\uff1a\u91ca\u653e\u4e00\u4e2a\u8fde\u63a5\u3002 \u25cf\u7a97\u53e3\u5927\u5c0f\u5b57\u6bb5\uff1a\u536016\u6bd4\u7279\u3002\u6b64\u5b57\u6bb5\u7528\u6765\u8fdb\u884c\u6d41\u91cf\u63a7\u5236\u3002\u5355\u4f4d\u4e3a\u5b57\u8282\u6570\uff0c\u8fd9\u4e2a\u503c\u662f\u672c\u673a\u671f\u671b\u4e00\u6b21\u63a5\u6536\u7684\u5b57\u8282\u6570\u3002 \u25cfTCP\u6821\u9a8c\u548c\u5b57\u6bb5\uff1a\u536016\u6bd4\u7279\u3002\u5bf9\u6574\u4e2aTCP\u62a5\u6587\u6bb5\uff0c\u5373TCP\u5934\u90e8\u548cTCP\u6570\u636e\u8fdb\u884c\u6821\u9a8c\u548c\u8ba1\u7b97\uff0c\u5e76\u7531\u76ee\u6807\u7aef\u8fdb\u884c\u9a8c\u8bc1\u3002 \u25cf\u7d27\u6025\u6307\u9488\u5b57\u6bb5\uff1a\u536016\u6bd4\u7279\u3002\u5b83\u662f\u4e00\u4e2a\u504f\u79fb\u91cf\uff0c\u548c\u5e8f\u53f7\u5b57\u6bb5\u4e2d\u7684\u503c\u76f8\u52a0\u8868\u793a\u7d27\u6025\u6570\u636e\u6700\u540e\u4e00\u4e2a\u5b57\u8282\u7684\u5e8f\u53f7\u3002 \u25cf\u9009\u9879\u5b57\u6bb5\uff1a\u536032\u6bd4\u7279\u3002\u53ef\u80fd\u5305\u62ec\"\u7a97\u53e3\u6269\u5927\u56e0\u5b50\"\u3001\"\u65f6\u95f4\u6233\"\u7b49\u9009\u9879\u3002 3\u3001UDP\u6570\u636e\u6bb5\u683c\u5f0f UDP\u662f\u4e00\u79cd\u4e0d\u53ef\u9760\u7684\u3001\u65e0\u8fde\u63a5\u7684\u6570\u636e\u62a5\u670d\u52a1\u3002\u6e90\u4e3b\u673a\u5728\u4f20\u9001\u6570\u636e\u524d\u4e0d\u9700\u8981\u548c\u76ee\u6807\u4e3b\u673a\u5efa\u7acb\u8fde\u63a5\u3002\u6570\u636e\u88ab\u51a0\u4ee5\u6e90\u3001\u76ee\u6807\u7aef\u53e3\u53f7\u7b49UDP\u62a5\u5934\u5b57\u6bb5\u540e\u76f4\u63a5\u53d1\u5f80\u76ee\u7684\u4e3b\u673a\u3002\u8fd9\u65f6\uff0c\u6bcf\u4e2a\u6570\u636e\u6bb5\u7684\u53ef\u9760\u6027\u4f9d\u9760\u4e0a\u5c42\u534f\u8bae\u6765\u4fdd\u8bc1\u3002\u5728\u4f20\u9001\u6570\u636e\u8f83\u5c11\u3001\u8f83\u5c0f\u7684\u60c5\u51b5\u4e0b\uff0cUDP\u6bd4TCP\u66f4\u52a0\u9ad8\u6548\u3002 \u5982\u56fe2-6\u6240\u793a\uff0c\u662fUDP\u5934\u90e8\u7ed3\u6784\uff08RFC 793\u30011323\uff09\uff1a \u25cf\u6e90\u3001\u76ee\u6807\u7aef\u53e3\u53f7\u5b57\u6bb5\uff1a\u536016\u6bd4\u7279\u3002\u4f5c\u7528\u4e0eTCP\u6570\u636e\u6bb5\u4e2d\u7684\u7aef\u53e3\u53f7\u5b57\u6bb5\u76f8\u540c\uff0c\u7528\u6765\u6807\u8bc6\u6e90\u7aef\u548c\u76ee\u6807\u7aef\u7684\u5e94\u7528\u8fdb\u7a0b\u3002 \u25cf\u957f\u5ea6\u5b57\u6bb5\uff1a\u536016\u6bd4\u7279\u3002\u6807\u660eUDP\u5934\u90e8\u548cUDP\u6570\u636e\u7684\u603b\u957f\u5ea6\u5b57\u8282\u3002 \u25cf\u6821\u9a8c\u548c\u5b57\u6bb5\uff1a\u536016\u6bd4\u7279\u3002\u7528\u6765\u5bf9UDP\u5934\u90e8\u548cUDP\u6570\u636e\u8fdb\u884c\u6821\u9a8c\u3002\u548cTCP\u4e0d\u540c\u7684\u662f\uff0c\u5bf9UDP\u6765\u8bf4\uff0c\u6b64\u5b57\u6bb5\u662f\u53ef\u9009\u9879\uff0c\u800cTCP\u6570\u636e\u6bb5\u4e2d\u7684\u6821\u9a8c\u548c\u5b57\u6bb5\u662f\u5fc5\u987b\u6709\u7684\u3002 2.3\u3000\u5957\u63a5\u5b57 \u5728\u6bcf\u4e2aTCP\u3001UDP\u6570\u636e\u6bb5\u4e2d\u90fd\u5305\u542b\u6e90\u7aef\u53e3\u548c\u76ee\u6807\u7aef\u53e3\u5b57\u6bb5\u3002\u6709\u65f6\uff0c\u6211\u4eec\u628a\u4e00\u4e2aIP\u5730\u5740\u548c\u4e00\u4e2a\u7aef\u53e3\u53f7\u5408\u79f0\u4e3a\u4e00\u4e2a\u5957\u63a5\u5b57\uff08Socket\uff09\uff0c\u800c\u4e00\u4e2a\u5957\u63a5\u5b57\u5bf9\uff08Socket pair\uff09\u53ef\u4ee5\u552f\u4e00\u5730\u786e\u5b9a\u4e92\u8fde\u7f51\u7edc\u4e2d\u6bcf\u4e2aTCP\u8fde\u63a5\u7684\u53cc\u65b9\uff08\u5ba2\u6237IP\u5730\u5740\u3001\u5ba2\u6237\u7aef\u53e3\u53f7\u3001\u670d\u52a1\u5668IP\u5730\u5740\u3001\u670d\u52a1\u5668\u7aef\u53e3\u53f7\uff09\u3002 \u5982\u56fe2-7\u6240\u793a\uff0c\u662f\u5e38\u89c1\u7684\u4e00\u4e9b\u534f\u8bae\u548c\u5b83\u4eec\u5bf9\u5e94\u7684\u670d\u52a1\u7aef\u53e3\u53f7\u3002 \u56fe2-7\u3000 \u5e38\u89c1\u534f\u8bae\u548c\u5bf9\u5e94\u7684\u7aef\u53e3\u53f7 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u4e0d\u540c\u7684\u5e94\u7528\u5c42\u534f\u8bae\u53ef\u80fd\u57fa\u4e8e\u4e0d\u540c\u7684\u4f20\u8f93\u5c42\u534f\u8bae\uff0c\u5982FTP\u3001TELNET\u3001SMTP\u534f\u8bae\u57fa\u4e8e\u53ef\u9760\u7684TCP\u534f\u8bae\u3002TFTP\u3001SNMP\u3001RIP\u57fa\u4e8e\u4e0d\u53ef\u9760\u7684UDP\u534f\u8bae\u3002 \u540c\u65f6\uff0c\u6709\u4e9b\u5e94\u7528\u5c42\u534f\u8bae\u5360\u7528\u4e86\u4e24\u4e2a\u4e0d\u540c\u7684\u7aef\u53e3\u53f7\uff0c\u5982FTP\u768420\u300121\u7aef\u53e3\uff0cSNMP\u7684161\u3001162\u7aef\u53e3\u3002\u8fd9\u4e9b\u5e94\u7528\u5c42\u534f\u8bae\u5728\u4e0d\u540c\u7684\u7aef\u53e3\u63d0\u4f9b\u4e0d\u540c\u7684\u529f\u80fd\u3002\u5982FTP\u768421\u7aef\u53e3\u7528\u6765\u4fa6\u542c\u7528\u6237\u7684\u8fde\u63a5\u8bf7\u6c42\uff0c\u800c20\u7aef\u53e3\u7528\u6765\u4f20\u9001\u7528\u6237\u7684\u6587\u4ef6\u6570\u636e\u3002\u518d\u5982\uff0cSNMP\u7684161\u7aef\u53e3\u7528\u4e8eSNMP\u7ba1\u7406\u8fdb\u7a0b\u83b7\u53d6SNMP\u4ee3\u7406\u7684\u6570\u636e\uff0c\u800c162\u7aef\u53e3\u7528\u4e8eSNMP\u4ee3\u7406\u4e3b\u52a8\u5411SNMP\u7ba1\u7406\u8fdb\u7a0b\u53d1\u9001\u6570\u636e\u3002 \u8fd8\u6709\u4e00\u4e9b\u534f\u8bae\u4f7f\u7528\u4e86\u4f20\u8f93\u5c42\u7684\u4e0d\u540c\u534f\u8bae\u63d0\u4f9b\u7684\u670d\u52a1\u3002\u5982DNS\u534f\u8bae\u540c\u65f6\u4f7f\u7528\u4e86TCP 53\u7aef\u53e3\u548cUDP 53\u7aef\u53e3\u3002DNS\u534f\u8bae\u5728UDP\u768453\u7aef\u53e3\u63d0\u4f9b\u57df\u540d\u89e3\u6790\u670d\u52a1\uff0c\u5728TCP\u768453\u7aef\u53e3\u63d0\u4f9bDNS\u533a\u57df\u6587\u4ef6\u4f20\u8f93\u670d\u52a1\u3002 2.4\u3000TCP\u8fde\u63a5\u5efa\u7acb\u3001\u91ca\u653e\u65f6\u7684\u63e1\u624b\u8fc7\u7a0b 1\u3001TCP\u5efa\u7acb\u8fde\u63a5\u7684\u4e09\u6b21\u63e1\u624b\u8fc7\u7a0b TCP\u4f1a\u8bdd\u901a\u8fc7\u4e09\u6b21\u63e1\u624b\u6765\u521d\u59cb\u5316\u3002\u4e09\u6b21\u63e1\u624b\u7684\u76ee\u6807\u662f\u4f7f\u6570\u636e\u6bb5\u7684\u53d1\u9001\u548c\u63a5\u6536\u540c\u6b65\u3002\u540c\u65f6\u4e5f\u5411\u5176\u4ed6\u4e3b\u673a\u8868\u660e\u5176\u4e00\u6b21\u53ef\u63a5\u6536\u7684\u6570\u636e\u91cf\uff08\u7a97\u53e3\u5927\u5c0f\uff09\uff0c\u5e76\u5efa\u7acb\u903b\u8f91\u8fde\u63a5\u3002\u8fd9\u4e09\u6b21\u63e1\u624b\u7684\u8fc7\u7a0b\u53ef\u4ee5\u7b80\u8ff0\u5982\u4e0b\uff1a \u25cf\u6e90\u4e3b\u673a\u53d1\u9001\u4e00\u4e2a\u540c\u6b65\u6807\u5fd7\u4f4d\uff08SYN\uff09\u7f6e1\u7684TCP\u6570\u636e\u6bb5\u3002\u6b64\u6bb5\u4e2d\u540c\u65f6\u6807\u660e\u521d\u59cb\u5e8f\u53f7\uff08Initial Sequence Number\uff0cISN\uff09\u3002ISN\u662f\u4e00\u4e2a\u968f\u65f6\u95f4\u53d8\u5316\u7684\u968f\u673a\u503c\u3002 \u25cf\u76ee\u6807\u4e3b\u673a\u53d1\u56de\u786e\u8ba4\u6570\u636e\u6bb5\uff0c\u6b64\u6bb5\u4e2d\u7684\u540c\u6b65\u6807\u5fd7\u4f4d\uff08SYN\uff09\u540c\u6837\u88ab\u7f6e1\uff0c\u4e14\u786e\u8ba4\u6807\u5fd7\u4f4d\uff08ACK\uff09\u4e5f\u7f6e1\uff0c\u540c\u65f6\u5728\u786e\u8ba4\u5e8f\u53f7\u5b57\u6bb5\u8868\u660e\u76ee\u6807\u4e3b\u673a\u671f\u5f85\u6536\u5230\u6e90\u4e3b\u673a\u4e0b\u4e00\u4e2a\u6570\u636e\u6bb5\u7684\u5e8f\u53f7\uff08\u5373\u8868\u660e\u524d\u4e00\u4e2a\u6570\u636e\u6bb5\u5df2\u6536\u5230\u5e76\u4e14\u6ca1\u6709\u9519\u8bef\uff09\u3002\u6b64\u5916\uff0c\u6b64\u6bb5\u4e2d\u8fd8\u5305\u542b\u76ee\u6807\u4e3b\u673a\u7684\u6bb5\u521d\u59cb\u5e8f\u53f7\u3002 \u25cf\u6e90\u4e3b\u673a\u518d\u56de\u9001\u4e00\u4e2a\u6570\u636e\u6bb5\uff0c\u540c\u6837\u5e26\u6709\u9012\u589e\u7684\u53d1\u9001\u5e8f\u53f7\u548c\u786e\u8ba4\u5e8f\u53f7\u3002 \u81f3\u6b64\u4e3a\u6b62\uff0cTCP\u4f1a\u8bdd\u7684\u4e09\u6b21\u63e1\u624b\u5b8c\u6210\u3002\u63a5\u4e0b\u6765\uff0c\u6e90\u4e3b\u673a\u548c\u76ee\u6807\u4e3b\u673a\u53ef\u4ee5\u4e92\u76f8\u6536\u53d1\u6570\u636e\u3002\u6574\u4e2a\u8fc7\u7a0b\u53ef\u7528\u56fe2-8\u8868\u793a\u3002 2\u3001TCP\u91ca\u653e\u8fde\u63a5\u7684\u56db\u6b21\u63e1\u624b\u8fc7\u7a0b \u6458\u81ea\u300ehttp://www.cnblogs.com/BlueTzar/articles/811160.html\u300f","title":"TCP/IP\u56db\u5c42\u6a21\u578b"},{"location":"UTILITIES/2015-12-11-centos7-%25e4%25bd%25bf%25e7%2594%25a8systemctl%25e8%25bf%259b%25e8%25a1%258c%25e9%2585%258d%25e7%25bd%25ae.html/","tags":["centos","systemctl","service"],"text":"1\uff0ccentos7 \u4f7f\u7528 systemctl \u66ff\u6362\u4e86 service\u547d\u4ee4 \u53c2\u8003\uff1aredhat\u6587\u6863\uff1a https://access.redhat.com/documentation/en-US/Red_Hat_Enterprise_Linux/7/html/System_Administrators_Guide/sect-Managing_Services_with_systemd-Services.html#sect-Managing_Services_with_systemd-Services-List \u67e5\u770b\u5168\u90e8\u670d\u52a1\u547d\u4ee4\uff1a systemctl list-unit-files --type service \u67e5\u770b\u670d\u52a1 systemctl status name.service \u542f\u52a8\u670d\u52a1 systemctl start name.service \u505c\u6b62\u670d\u52a1 systemctl stop name.service \u91cd\u542f\u670d\u52a1 systemctl restart name.service\u589e\u52a0\u5f00\u673a\u542f\u52a8 systemctl enable name.service \u5220\u9664\u5f00\u673a\u542f\u52a8 systemctl disable name.service \u5176\u4e2d.service \u53ef\u4ee5\u7701\u7565\u3002 2\uff0ctomcat\u589e\u52a0\u542f\u52a8\u53c2\u6570 tomcat \u9700\u8981\u589e\u52a0\u4e00\u4e2apid\u6587\u4ef6 \u5728tomca/bin \u76ee\u5f55\u4e0b\u9762\uff0c\u589e\u52a0 setenv.sh \u914d\u7f6e\uff0ccatalina.sh\u542f\u52a8\u7684\u65f6\u5019\u4f1a\u8c03\u7528\uff0c\u540c\u65f6\u914d\u7f6ejava\u5185\u5b58\u53c2\u6570\u3002 [plain] view plain copy print ? #add tomcat pid CATALINA_PID=\"$CATALINA_BASE/tomcat.pid\" #add java opts JAVA_OPTS=\"-server -XX:PermSize=256M -XX:MaxPermSize=1024m -Xms512M -Xmx1024M -XX:MaxNewSize=256m\" 3\uff0c\u589e\u52a0tomcat.service \u5728/usr/lib/systemd/system\u76ee\u5f55\u4e0b\u589e\u52a0tomcat.service\uff0c\u76ee\u5f55\u5fc5\u987b\u662f\u7edd\u5bf9\u76ee\u5f55\u3002 [plain] view plain copy print ? [Unit] Description=Tomcat After=syslog.target network.target remote-fs.target nss-lookup.target [Service] Type=forking PIDFile=/data/tomcat/tomcat.pid ExecStart=/data/tomcat/bin/startup.sh ExecReload=/bin/kill -s HUP $MAINPID ExecStop=/bin/kill -s QUIT $MAINPID PrivateTmp=true [Install] WantedBy=multi-user.target [unit]\u914d\u7f6e\u4e86\u670d\u52a1\u7684\u63cf\u8ff0\uff0c\u89c4\u5b9a\u4e86\u5728network\u542f\u52a8\u4e4b\u540e\u6267\u884c\u3002[service]\u914d\u7f6e\u670d\u52a1\u7684pid\uff0c\u670d\u52a1\u7684\u542f\u52a8\uff0c\u505c\u6b62\uff0c\u91cd\u542f\u3002[install]\u914d\u7f6e\u4e86\u4f7f\u7528\u7528\u6237\u3002 4\uff0c\u4f7f\u7528tomcat.service \u914d\u7f6e\u5f00\u673a\u542f\u52a8 systemctl enable tomcat \u542f\u52a8tomcat systemctl start tomcat \u505c\u6b62tomcat systemctl stop tomcat \u91cd\u542ftomcat systemctl restart tomcat \u56e0\u4e3a\u914d\u7f6epid\uff0c\u5728\u542f\u52a8\u7684\u65f6\u5019\u4f1a\u518dtomcat\u6839\u76ee\u5f55\u751f\u6210tomcat.pid\u6587\u4ef6\uff0c\u505c\u6b62\u4e4b\u540e\u5220\u9664\u3002 \u540c\u65f6tomcat\u5728\u542f\u52a8\u65f6\u5019\uff0c\u6267\u884cstart\u4e0d\u4f1a\u542f\u52a8\u4e24\u4e2atomcat\uff0c\u4fdd\u8bc1\u59cb\u7ec8\u53ea\u6709\u4e00\u4e2atomcat\u670d\u52a1\u5728\u8fd0\u884c\u3002 \u591a\u4e2atomcat\u53ef\u4ee5\u914d\u7f6e\u5728\u591a\u4e2a\u76ee\u5f55\u4e0b\uff0c\u4e92\u4e0d\u5f71\u54cd\u3002 \u6458\u81ea\u300ehttp://blog.csdn.net/freewebsys/article/details/41646081\u300f","title":"CentOS7 \u4f7f\u7528systemctl\u8fdb\u884c\u914d\u7f6e"},{"location":"UTILITIES/2015-12-17-ascii%25e8%25a1%25a8.html/","tags":["ASCII"],"text":"ASCII\u63a7\u5236\u5b57\u7b26 \u4e8c\u8fdb\u5236 \u5341\u8fdb\u5236 \u5341\u516d\u8fdb\u5236 \u7f29\u5199 \u53ef\u4ee5\u663e\u793a\u7684\u8868\u793a\u6cd5 \u540d\u79f0/\u610f\u4e49 0000 0000 0 00 NUL \u2400 \u7a7a\u5b57\u7b26\uff08Null\uff09 0000 0001 1 01 SOH \u2401 \u6807\u9898\u5f00\u59cb 0000 0010 2 02 STX \u2402 \u672c\u6587\u5f00\u59cb 0000 0011 3 03 ETX \u2403 \u672c\u6587\u7ed3\u675f 0000 0100 4 04 EOT \u2404 \u4f20\u8f93\u7ed3\u675f 0000 0101 5 05 ENQ \u2405 \u8bf7\u6c42 0000 0110 6 06 ACK \u2406 \u786e\u8ba4\u56de\u5e94 0000 0111 7 07 BEL \u2407 \u54cd\u94c3 0000 1000 8 08 BS \u2408 \u9000\u683c 0000 1001 9 09 HT \u2409 \u6c34\u5e73\u5b9a\u4f4d\u7b26\u53f7 0000 1010 10 0A LF \u240a \u6362\u884c\u952e 0000 1011 11 0B VT \u240b \u5782\u76f4\u5b9a\u4f4d\u7b26\u53f7 0000 1100 12 0C FF \u240c \u6362\u9875\u952e 0000 1101 13 0D CR \u240d \u5f52\u4f4d\u952e 0000 1110 14 0E SO \u240e \u53d6\u6d88\u53d8\u6362\uff08Shift out\uff09 0000 1111 15 0F SI \u240f \u542f\u7528\u53d8\u6362\uff08Shift in\uff09 0001 0000 16 10 DLE \u2410 \u8df3\u51fa\u6570\u636e\u901a\u8baf 0001 0001 17 11 DC1 \u2411 \u8bbe\u5907\u63a7\u5236\u4e00\uff08XON \u542f\u7528\u8f6f\u4ef6\u901f\u5ea6\u63a7\u5236\uff09 0001 0010 18 12 DC2 \u2412 \u8bbe\u5907\u63a7\u5236\u4e8c 0001 0011 19 13 DC3 \u2413 \u8bbe\u5907\u63a7\u5236\u4e09\uff08XOFF \u505c\u7528\u8f6f\u4ef6\u901f\u5ea6\u63a7\u5236\uff09 0001 0100 20 14 DC4 \u2414 \u8bbe\u5907\u63a7\u5236\u56db 0001 0101 21 15 NAK \u2415 \u786e\u8ba4\u5931\u8d25\u56de\u5e94 0001 0110 22 16 SYN \u2416 \u540c\u6b65\u7528\u6682\u505c 0001 0111 23 17 ETB \u2417 \u533a\u5757\u4f20\u8f93\u7ed3\u675f 0001 1000 24 18 CAN \u2418 \u53d6\u6d88 0001 1001 25 19 EM \u2419 \u8fde\u63a5\u4ecb\u8d28\u4e2d\u65ad 0001 1010 26 1A SUB \u241a \u66ff\u6362 0001 1011 27 1B ESC \u241b \u8df3\u51fa 0001 1100 28 1C FS \u241c \u6587\u4ef6\u5206\u5272\u7b26 0001 1101 29 1D GS \u241d \u7ec4\u7fa4\u5206\u9694\u7b26 0001 1110 30 1E RS \u241e \u8bb0\u5f55\u5206\u9694\u7b26 0001 1111 31 1F US \u241f \u5355\u5143\u5206\u9694\u7b26 0111 1111 127 7F DEL \u2421 \u5220\u9664 ASCII\u53ef\u663e\u793a\u5b57\u7b26 \u4e8c\u8fdb\u5236 \u5341\u8fdb\u5236 \u5341\u516d\u8fdb\u5236 \u56fe\u5f62 0010 0000 32 20 \uff08\u7a7a\u683c\uff09(\u2420) 0010 0001 33 21 ! 0010 0010 34 22 \" 0010 0011 35 23 # 0010 0100 36 24 $ 0010 0101 37 25 % 0010 0110 38 26 & 0010 0111 39 27 ' 0010 1000 40 28 ( 0010 1001 41 29 ) 0010 1010 42 2A * 0010 1011 43 2B + 0010 1100 44 2C , 0010 1101 45 2D - 0010 1110 46 2E . 0010 1111 47 2F / 0011 0000 48 30 0 0011 0001 49 31 1 0011 0010 50 32 2 0011 0011 51 33 3 0011 0100 52 34 4 0011 0101 53 35 5 0011 0110 54 36 6 0011 0111 55 37 7 0011 1000 56 38 8 0011 1001 57 39 9 0011 1010 58 3A : 0011 1011 59 3B ; 0011 1100 60 3C < 0011 1101 61 3D = 0011 1110 62 3E > 0011 1111 63 3F ? \u4e8c\u8fdb\u5236 \u5341\u8fdb\u5236 \u5341\u516d\u8fdb\u5236 \u56fe\u5f62 0100 0000 64 40 @ 0100 0001 65 41 A 0100 0010 66 42 B 0100 0011 67 43 C 0100 0100 68 44 D 0100 0101 69 45 E 0100 0110 70 46 F 0100 0111 71 47 G 0100 1000 72 48 H 0100 1001 73 49 I 0100 1010 74 4A J 0100 1011 75 4B K 0100 1100 76 4C L 0100 1101 77 4D M 0100 1110 78 4E N 0100 1111 79 4F O 0101 0000 80 50 P 0101 0001 81 51 Q 0101 0010 82 52 R 0101 0011 83 53 S 0101 0100 84 54 T 0101 0101 85 55 U 0101 0110 86 56 V 0101 0111 87 57 W 0101 1000 88 58 X 0101 1001 89 59 Y 0101 1010 90 5A Z 0101 1011 91 5B [ 0101 1100 92 5C \\ 0101 1101 93 5D ] 0101 1110 94 5E ^ 0101 1111 95 5F _ \u4e8c\u8fdb\u5236 \u5341\u8fdb\u5236 \u5341\u516d\u8fdb\u5236 \u56fe\u5f62 0110 0000 96 60 ` 0110 0001 97 61 a 0110 0010 98 62 b 0110 0011 99 63 c 0110 0100 100 64 d 0110 0101 101 65 e 0110 0110 102 66 f 0110 0111 103 67 g 0110 1000 104 68 h 0110 1001 105 69 i 0110 1010 106 6A j 0110 1011 107 6B k 0110 1100 108 6C l 0110 1101 109 6D m 0110 1110 110 6E n 0110 1111 111 6F o 0111 0000 112 70 p 0111 0001 113 71 q 0111 0010 114 72 r 0111 0011 115 73 s 0111 0100 116 74 t 0111 0101 117 75 u 0111 0110 118 76 v 0111 0111 119 77 w 0111 1000 120 78 x 0111 1001 121 79 y 0111 1010 122 7A z 0111 1011 123 7B { 0111 1100 124 7C | 0111 1101 125 7D } 0111 1110 126 7E ~","title":"ASCII\u7801\u5bf9\u7167\u8868"},{"location":"UTILITIES/2015-12-17-grep%25e5%2591%25bd%25e4%25bb%25a4%25e7%259a%2584or%25ef%25bc%258cand%25ef%25bc%258cnot%25e6%2593%258d%25e4%25bd%259c%25e7%25a4%25ba%25e4%25be%258b.html/","tags":["grep"],"text":"\u5728Linux\u7684grep\u547d\u4ee4\u4e2d\u5982\u4f55\u4f7f\u7528OR\uff0cAND\uff0cNOT\u64cd\u4f5c\u7b26\u5462\uff1f \u5176\u5b9e\uff0c\u5728grep\u547d\u4ee4\u4e2d\uff0c\u6709OR\u548cNOT\u64cd\u4f5c\u7b26\u7684\u7b49\u4ef7\u9009\u9879\uff0c\u4f46\u662f\u5e76\u6ca1\u6709grep AND\u8fd9\u79cd\u64cd\u4f5c\u7b26\u3002\u4e0d\u8fc7\u5462\uff0c\u53ef\u4ee5\u4f7f\u7528patterns\u6765\u6a21\u62dfAND\u64cd\u4f5c\u7684\u3002\u4e0b\u9762\u4f1a\u4e3e\u4e00\u4e9b\u4f8b\u5b50\u6765\u8bf4\u660e\u5728Linux\u7684grep\u547d\u4ee4\u4e2d\u5982\u4f55\u4f7f\u7528OR\uff0cAND\uff0cNOT\u3002 \u5728\u4e0b\u9762\u7684\u4f8b\u5b50\u4e2d\uff0c\u4f1a\u7528\u5230\u8fd9\u4e2aemployee.txt\u6587\u4ef6\uff0c\u5982\u4e0b\uff1a [plain] view plain copy $ cat employee.txt 100 Thomas Manager Sales $5,000 200 Jason Developer Technology $5,500 300 Raj Sysadmin Technology $7,000 400 Nisha Manager Marketing $9,500 500 Randy Manager Sales $6,000 \uff08\u4e00\uff09Grep OR \u64cd\u4f5c\u7b26 \u4ee5\u4e0b\u56db\u79cd\u65b9\u6cd5\u5747\u80fd\u5b9e\u73b0grep OR\u7684\u64cd\u4f5c\u3002\u4e2a\u4eba\u63a8\u8350\u65b9\u6cd53. 1.\u4f7f\u7528 \\| \u5982\u679c\u4e0d\u4f7f\u7528grep\u547d\u4ee4\u7684\u4efb\u4f55\u9009\u9879\uff0c\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528 '\\|' \u6765\u5206\u5272\u591a\u4e2apattern\uff0c\u4ee5\u6b64\u5b9e\u73b0OR\u7684\u64cd\u4f5c\u3002 [plain] view plain copy grep 'pattern1\\|pattern2' filename \u4f8b\u5b50\u5982\u4e0b\uff1a [plain] view plain copy $ grep 'Tech\\|Sales' employee.txt 100 Thomas Manager Sales $5,000 200 Jason Developer Technology $5,500 300 Raj Sysadmin Technology $7,000 500 Randy Manager Sales $6,000 2.\u4f7f\u7528\u9009\u9879 -E grep -E \u9009\u9879\u53ef\u4ee5\u7528\u6765\u6269\u5c55\u9009\u9879\u4e3a\u6b63\u5219\u8868\u8fbe\u5f0f\u3002 \u5982\u679c\u4f7f\u7528\u4e86grep \u547d\u4ee4\u7684\u9009\u9879-E\uff0c\u5219\u5e94\u8be5\u4f7f\u7528 | \u6765\u5206\u5272\u591a\u4e2apattern\uff0c\u4ee5\u6b64\u5b9e\u73b0OR\u64cd\u4f5c\u3002 [plain] view plain copy grep -E 'pattern1|pattern2' filename \u4f8b\u5b50\u5982\u4e0b\uff1a [plain] view plain copy $ grep -E 'Tech|Sales' employee.txt 100 Thomas Manager Sales $5,000 200 Jason Developer Technology $5,500 300 Raj Sysadmin Technology $7,000 500 Randy Manager Sales $6,000 3. \u4f7f\u7528 egrep egrep \u547d\u4ee4\u7b49\u540c\u4e8e\u2018grep -E\u2019\u3002\u56e0\u6b64\uff0c\u4f7f\u7528egrep (\u4e0d\u5e26\u4efb\u4f55\u9009\u9879)\u547d\u4ee4\uff0c\u4ee5\u6b64\u6839\u636e\u5206\u5272\u7684\u591a\u4e2aPattern\u6765\u5b9e\u73b0OR\u64cd\u4f5c. [plain] view plain copy egrep 'pattern1|pattern2' filename \u4f8b\u5b50\u5982\u4e0b\uff1a [plain] view plain copy $ egrep 'Tech|Sales' employee.txt 100 Thomas Manager Sales $5,000 200 Jason Developer Technology $5,500 300 Raj Sysadmin Technology $7,000 500 Randy Manager Sales $6,000 4. \u4f7f\u7528\u9009\u9879 -e \u4f7f\u7528grep -e \u9009\u9879\uff0c\u53ea\u80fd\u4f20\u9012\u4e00\u4e2a\u53c2\u6570\u3002\u5728\u5355\u6761\u547d\u4ee4\u4e2d\u4f7f\u7528\u591a\u4e2a -e \u9009\u9879\uff0c\u5f97\u5230\u591a\u4e2apattern\uff0c\u4ee5\u6b64\u5b9e\u73b0OR\u64cd\u4f5c\u3002 [plain] view plain copy grep -e pattern1 -e pattern2 filename \u4f8b\u5b50\u5982\u4e0b\uff1a [plain] view plain copy $ grep -e Tech -e Sales employee.txt 100 Thomas Manager Sales $5,000 200 Jason Developer Technology $5,500 300 Raj Sysadmin Technology $7,000 500 Randy Manager Sales $6,000 \uff08\u4e8c\uff09 Grep AND \u64cd\u4f5c 1. \u4f7f\u7528 -E 'pattern1.*pattern2' grep\u547d\u4ee4\u672c\u8eab\u4e0d\u63d0\u4f9bAND\u529f\u80fd\u3002\u4f46\u662f\uff0c\u4f7f\u7528 -E \u9009\u9879\u53ef\u4ee5\u5b9e\u73b0AND\u64cd\u4f5c\u3002 [plain] view plain copy grep -E 'pattern1.*pattern2' filename grep -E 'pattern1.*pattern2|pattern2.*pattern1' filename \u7b2c\u4e00\u4e2a\u4f8b\u5b50\u5982\u4e0b\uff1a\uff08\u5176\u4e2d\u4e24\u4e2apattern\u7684\u987a\u5e8f\u662f\u6307\u5b9a\u7684\uff09 [plain] view plain copy $ grep -E 'Dev.*Tech' employee.txt 200 Jason Developer Technology $5,500 \u7b2c\u4e8c\u4e2a\u4f8b\u5b50\uff1a\uff08\u4e24\u4e2apattern\u7684\u987a\u5e8f\u4e0d\u662f\u56fa\u5b9a\u7684\uff0c\u53ef\u4ee5\u662f\u4e71\u5e8f\u7684\uff09 [plain] view plain copy $ grep -E 'Manager.*Sales|Sales.*Manager' employee.txt 2. \u4f7f\u7528\u591a\u4e2agrep\u547d\u4ee4 \u53ef\u4ee5\u4f7f\u7528\u591a\u4e2a grep \u547d\u4ee4 \uff0c\u7531\u7ba1\u9053\u7b26\u5206\u5272\uff0c\u4ee5\u6b64\u6765\u5b9e\u73b0 AND \u8bed\u4e49\u3002 [plain] view plain copy grep -E 'pattern1' filename | grep -E 'pattern2' \u4f8b\u5b50\u5982\u4e0b\uff1a [plain] view plain copy $ grep Manager employee.txt | grep Sales 100 Thomas Manager Sales $5,000 500 Randy Manager Sales $6,000 \uff08\u4e09\uff09 Grep NOT\u64cd\u4f5c 1. \u4f7f\u7528\u9009\u9879 grep -v \u4f7f\u7528 grep -v \u53ef\u4ee5\u5b9e\u73b0 NOT \u64cd\u4f5c\u3002 -v \u9009\u9879\u7528\u6765\u5b9e\u73b0\u53cd\u9009\u5339\u914d\u7684\uff08 invert match\uff09\u3002\u5982\uff0c\u53ef\u5339\u914d\u5f97\u5230\u9664\u4e0b\u6307\u5b9apattern\u5916\u7684\u6240\u6709lines\u3002 [plain] view plain copy grep -v 'pattern1' filename \u4f8b\u5b50\u5982\u4e0b\uff1a [plain] view plain copy $ grep -v Sales employee.txt 200 Jason Developer Technology $5,500 300 Raj Sysadmin Technology $7,000 400 Nisha Manager Marketing $9,500 \u5f53\u7136\uff0c\u53ef\u4ee5\u5c06NOT\u64cd\u4f5c\u4e0e\u5176\u4ed6\u64cd\u4f5c\u8054\u5408\u8d77\u6765\uff0c\u4ee5\u6b64\u5b9e\u73b0\u66f4\u5f3a\u5927\u7684\u529f\u80fd \u7ec4\u5408\u3002 \u5982\uff0c\u8fd9\u4e2a\u4f8b\u5b50\u5c06\u5f97\u5230\uff1a\u2018Manager\u6216\u8005Developer\uff0c\u4f46\u662f\u4e0d\u662fSales\u2019\u7684\u7ed3\u679c\uff1a [plain] view plain copy $ egrep 'Manager|Developer' employee.txt | grep -v Sales 200 Jason Developer Technology $5,500 400 Nisha Manager Marketing $9,500 \u6458\u81ea\u300ehttp://blog.csdn.net/jackaduma/article/details/6900242\u300f","title":"grep\u547d\u4ee4\u7684or\uff0cand\uff0cnot\u64cd\u4f5c\u793a\u4f8b"},{"location":"UTILITIES/2015-12-27-linux-awk-%25e5%2586%2585%25e7%25bd%25ae%25e5%2587%25bd%25e6%2595%25b0%25e8%25af%25a6%25e7%25bb%2586%25e4%25bb%258b%25e7%25bb%258d%25ef%25bc%2588%25e5%25ae%259e%25e4%25be%258b%25ef%25bc%2589.html/","tags":["awk","linux","\u51fd\u6570"],"text":"\u8fd9\u8282\u8be6\u7ec6\u4ecb\u7ecdawk\u5185\u7f6e\u51fd\u6570\uff0c\u4e3b\u8981\u5206\u4ee5\u4e0b3\u79cd\u7c7b\u4f3c\uff1a\u7b97\u6570\u51fd\u6570\u3001\u5b57\u7b26\u4e32\u51fd\u6570\u3001\u5176\u5b83\u4e00\u822c\u51fd\u6570\u3001\u65f6\u95f4\u51fd\u6570 \u4e00\u3001\u7b97\u672f\u51fd\u6570: \u4ee5\u4e0b\u7b97\u672f\u51fd\u6570\u6267\u884c\u4e0e C \u8bed\u8a00\u4e2d\u540d\u79f0\u76f8\u540c\u7684\u5b50\u4f8b\u7a0b\u76f8\u540c\u7684\u64cd\u4f5c\uff1a \u51fd\u6570\u540d \u8bf4\u660e atan2( y, x ) \u8fd4\u56de y/x \u7684\u53cd\u6b63\u5207\u3002 cos( x ) \u8fd4\u56de x \u7684\u4f59\u5f26\uff1bx \u662f\u5f27\u5ea6\u3002 sin( x ) \u8fd4\u56de x \u7684\u6b63\u5f26\uff1bx \u662f\u5f27\u5ea6\u3002 exp( x ) \u8fd4\u56de x \u5e42\u51fd\u6570\u3002 log( x ) \u8fd4\u56de x \u7684\u81ea\u7136\u5bf9\u6570\u3002 sqrt( x ) \u8fd4\u56de x \u5e73\u65b9\u6839\u3002 int( x ) \u8fd4\u56de x \u7684\u622a\u65ad\u81f3\u6574\u6570\u7684\u503c\u3002 rand( ) \u8fd4\u56de\u4efb\u610f\u6570\u5b57 n\uff0c\u5176\u4e2d 0 < = n < 1\u3002 srand( [Expr] ) \u5c06 rand \u51fd\u6570\u7684\u79cd\u5b50\u503c\u8bbe\u7f6e\u4e3a Expr \u53c2\u6570\u7684\u503c\uff0c\u6216\u5982\u679c\u7701\u7565 Expr \u53c2\u6570\u5219\u4f7f\u7528\u67d0\u5929\u7684\u65f6\u95f4\u3002\u8fd4\u56de\u5148\u524d\u7684\u79cd\u5b50\u503c\u3002 \u4e3e\u4f8b\u8bf4\u660e\uff1a [chengmo@centos5 ~]$ awk 'BEGIN{OFMT=\"%.3f\";fs=sin(1);fe=exp(10);fl=log(10);fi=int(3.1415);print fs,fe,fl,fi;}' 0.841 22026.466 2.303 3 OFMT \u8bbe\u7f6e\u8f93\u51fa\u6570\u636e\u683c\u5f0f\u662f\u4fdd\u75593\u4f4d\u5c0f\u6570 \u83b7\u5f97\u968f\u673a\u6570\uff1a [chengmo@centos5 ~]$ awk 'BEGIN{srand();fr=int(100*rand());print fr;}' 78 [chengmo@centos5 ~]$ awk 'BEGIN{srand();fr=int(100*rand());print fr;}' 31 [chengmo@centos5 ~]$ awk 'BEGIN{srand();fr=int(100*rand());print fr;}' 41 \u4e8c\u3001\u5b57\u7b26\u4e32\u51fd\u6570\u662f\uff1a \u51fd\u6570 \u8bf4\u660e gsub( Ere, Repl, [ In ] ) \u9664\u4e86\u6b63\u5219\u8868\u8fbe\u5f0f\u6240\u6709\u5177\u4f53\u503c\u88ab\u66ff\u4ee3\u8fd9\u70b9\uff0c\u5b83\u548c sub \u51fd\u6570\u5b8c\u5168\u4e00\u6837\u5730\u6267\u884c\uff0c\u3002 sub( Ere, Repl, [ In ] ) \u7528 Repl \u53c2\u6570\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u66ff\u6362 In \u53c2\u6570\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u4e2d\u7684\u7531 Ere \u53c2\u6570\u6307\u5b9a\u7684\u6269\u5c55\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u7b2c\u4e00\u4e2a\u5177\u4f53\u503c\u3002sub \u51fd\u6570\u8fd4\u56de\u66ff\u6362\u7684\u6570\u91cf\u3002\u51fa\u73b0\u5728 Repl \u53c2\u6570\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u4e2d\u7684 &\uff08\u548c\u7b26\u53f7\uff09\u7531 In \u53c2\u6570\u6307\u5b9a\u7684\u4e0e Ere \u53c2\u6570\u7684\u6307\u5b9a\u7684\u6269\u5c55\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u7684\u5b57\u7b26\u4e32\u66ff\u6362\u3002\u5982\u679c\u672a\u6307\u5b9a In \u53c2\u6570\uff0c\u7f3a\u7701\u503c\u662f\u6574\u4e2a\u8bb0\u5f55\uff08$0 \u8bb0\u5f55\u53d8\u91cf\uff09\u3002 index( String1, String2 ) \u5728\u7531 String1 \u53c2\u6570\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\uff08\u5176\u4e2d\u6709\u51fa\u73b0 String2 \u6307\u5b9a\u7684\u53c2\u6570\uff09\u4e2d\uff0c\u8fd4\u56de\u4f4d\u7f6e\uff0c\u4ece 1 \u5f00\u59cb\u7f16\u53f7\u3002\u5982\u679c String2 \u53c2\u6570\u4e0d\u5728 String1 \u53c2\u6570\u4e2d\u51fa\u73b0\uff0c\u5219\u8fd4\u56de 0\uff08\u96f6\uff09\u3002 length [(String)] \u8fd4\u56de String \u53c2\u6570\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\uff08\u5b57\u7b26\u5f62\u5f0f\uff09\u3002\u5982\u679c\u672a\u7ed9\u51fa String \u53c2\u6570\uff0c\u5219\u8fd4\u56de\u6574\u4e2a\u8bb0\u5f55\u7684\u957f\u5ea6\uff08$0 \u8bb0\u5f55\u53d8\u91cf\uff09\u3002 blength [(String)] \u8fd4\u56de String \u53c2\u6570\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\uff08\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\uff09\u3002\u5982\u679c\u672a\u7ed9\u51fa String \u53c2\u6570\uff0c\u5219\u8fd4\u56de\u6574\u4e2a\u8bb0\u5f55\u7684\u957f\u5ea6\uff08$0 \u8bb0\u5f55\u53d8\u91cf\uff09\u3002 substr( String, M, [ N ] ) \u8fd4\u56de\u5177\u6709 N \u53c2\u6570\u6307\u5b9a\u7684\u5b57\u7b26\u6570\u91cf\u5b50\u4e32\u3002\u5b50\u4e32\u4ece String \u53c2\u6570\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\u53d6\u5f97\uff0c\u5176\u5b57\u7b26\u4ee5 M \u53c2\u6570\u6307\u5b9a\u7684\u4f4d\u7f6e\u5f00\u59cb\u3002M \u53c2\u6570\u6307\u5b9a\u4e3a\u5c06 String \u53c2\u6570\u4e2d\u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26\u4f5c\u4e3a\u7f16\u53f7 1\u3002\u5982\u679c\u672a\u6307\u5b9a N \u53c2\u6570\uff0c\u5219\u5b50\u4e32\u7684\u957f\u5ea6\u5c06\u662f M \u53c2\u6570\u6307\u5b9a\u7684\u4f4d\u7f6e\u5230 String \u53c2\u6570\u7684\u672b\u5c3e \u7684\u957f\u5ea6\u3002 match( String, Ere ) \u5728 String \u53c2\u6570\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\uff08Ere \u53c2\u6570\u6307\u5b9a\u7684\u6269\u5c55\u6b63\u5219\u8868\u8fbe\u5f0f\u51fa\u73b0\u5728\u5176\u4e2d\uff09\u4e2d\u8fd4\u56de\u4f4d\u7f6e\uff08\u5b57\u7b26\u5f62\u5f0f\uff09\uff0c\u4ece 1 \u5f00\u59cb\u7f16\u53f7\uff0c\u6216\u5982\u679c Ere \u53c2\u6570\u4e0d\u51fa\u73b0\uff0c\u5219\u8fd4\u56de 0\uff08\u96f6\uff09\u3002RSTART \u7279\u6b8a\u53d8\u91cf\u8bbe\u7f6e\u4e3a\u8fd4\u56de\u503c\u3002RLENGTH \u7279\u6b8a\u53d8\u91cf\u8bbe\u7f6e\u4e3a\u5339\u914d\u7684\u5b57\u7b26\u4e32\u7684\u957f\u5ea6\uff0c\u6216\u5982\u679c\u672a\u627e\u5230\u4efb\u4f55\u5339\u914d\uff0c\u5219\u8bbe\u7f6e\u4e3a -1\uff08\u8d1f\u4e00\uff09\u3002 split( String, A, [Ere] ) \u5c06 String \u53c2\u6570\u6307\u5b9a\u7684\u53c2\u6570\u5206\u5272\u4e3a\u6570\u7ec4\u5143\u7d20 A[1], A[2], . . ., A[n]\uff0c\u5e76\u8fd4\u56de n \u53d8\u91cf\u7684\u503c\u3002\u6b64\u5206\u9694\u53ef\u4ee5\u901a\u8fc7 Ere \u53c2\u6570\u6307\u5b9a\u7684\u6269\u5c55\u6b63\u5219\u8868\u8fbe\u5f0f\u8fdb\u884c\uff0c\u6216\u7528\u5f53\u524d\u5b57\u6bb5\u5206\u9694\u7b26\uff08FS \u7279\u6b8a\u53d8\u91cf\uff09\u6765\u8fdb\u884c\uff08\u5982\u679c\u6ca1\u6709\u7ed9\u51fa Ere \u53c2\u6570\uff09\u3002\u9664\u975e\u4e0a\u4e0b\u6587\u6307\u660e\u7279\u5b9a\u7684\u5143\u7d20\u8fd8\u5e94\u5177\u6709\u4e00\u4e2a\u6570\u5b57\u503c\uff0c\u5426\u5219 A \u6570\u7ec4\u4e2d\u7684\u5143\u7d20\u7528\u5b57\u7b26\u4e32\u503c\u6765\u521b\u5efa\u3002 tolower( String ) \u8fd4\u56de String \u53c2\u6570\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\uff0c\u5b57\u7b26\u4e32\u4e2d\u6bcf\u4e2a\u5927\u5199\u5b57\u7b26\u5c06\u66f4\u6539\u4e3a\u5c0f\u5199\u3002\u5927\u5199\u548c\u5c0f\u5199\u7684\u6620\u5c04\u7531\u5f53\u524d\u8bed\u8a00\u73af\u5883\u7684 LC_CTYPE \u8303\u7574\u5b9a\u4e49\u3002 toupper( String ) \u8fd4\u56de String \u53c2\u6570\u6307\u5b9a\u7684\u5b57\u7b26\u4e32\uff0c\u5b57\u7b26\u4e32\u4e2d\u6bcf\u4e2a\u5c0f\u5199\u5b57\u7b26\u5c06\u66f4\u6539\u4e3a\u5927\u5199\u3002\u5927\u5199\u548c\u5c0f\u5199\u7684\u6620\u5c04\u7531\u5f53\u524d\u8bed\u8a00\u73af\u5883\u7684 LC_CTYPE \u8303\u7574\u5b9a\u4e49\u3002 sprintf(Format, Expr, Expr, . . . ) \u6839\u636e Format \u53c2\u6570\u6307\u5b9a\u7684 printf \u5b50\u4f8b\u7a0b\u683c\u5f0f\u5b57\u7b26\u4e32\u6765\u683c\u5f0f\u5316 Expr \u53c2\u6570\u6307\u5b9a\u7684\u8868\u8fbe\u5f0f\u5e76\u8fd4\u56de\u6700\u540e\u751f\u6210\u7684\u5b57\u7b26\u4e32\u3002 Ere\u90fd\u53ef\u4ee5\u662f\u6b63\u5219\u8868\u8fbe\u5f0f gsub,sub\u4f7f\u7528 [chengmo@centos5 ~]$ awk 'BEGIN{info=\"this is a test2010test!\";gsub(/[0-9]+/,\"!\",info);print info}' this is a test!test! \u5728 info\u4e2d\u67e5\u627e\u6ee1\u8db3\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c/[0-9]+/ \u7528\u201d\u201d\u66ff\u6362\uff0c\u5e76\u4e14\u66ff\u6362\u540e\u7684\u503c\uff0c\u8d4b\u503c\u7ed9info \u672a\u7ed9info\u503c\uff0c\u9ed8\u8ba4\u662f$0 \u67e5\u627e\u5b57\u7b26\u4e32\uff08index\u4f7f\u7528\uff09 [wangsl@centos5 ~]$ awk 'BEGIN{info=\"this is a test2010test!\";print index(info,\"test\")?\"ok\":\"no found\";}' ok \u672a\u627e\u5230\uff0c\u8fd4\u56de0 \u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\u67e5\u627e(match\u4f7f\u7528\uff09 [wangsl@centos5 ~]$ awk 'BEGIN{info=\"this is a test2010test!\";print match(info,/[0-9]+/)?\"ok\":\"no found\";}' ok \u622a\u53d6\u5b57\u7b26\u4e32(substr\u4f7f\u7528\uff09 [wangsl@centos5 ~]$ awk 'BEGIN{info=\"this is a test2010test!\";print substr(info,4,10);}' s is a tes \u4ece\u7b2c 4\u4e2a \u5b57\u7b26\u5f00\u59cb\uff0c\u622a\u53d610\u4e2a\u957f\u5ea6\u5b57\u7b26\u4e32 \u5b57\u7b26\u4e32\u5206\u5272\uff08split\u4f7f\u7528\uff09 [chengmo@centos5 ~]$ awk 'BEGIN{info=\"this is a test\";split(info,tA,\" \");print length(tA);for(k in tA){print k,tA[k];}}' 4 4 test 1 this 2 is 3 a \u5206\u5272info,\u52a8\u6001\u521b\u5efa\u6570\u7ec4tA,\u8fd9\u91cc\u6bd4\u8f83\u6709\u610f\u601d\uff0cawk for \u2026in \u5faa\u73af\uff0c\u662f\u4e00\u4e2a\u65e0\u5e8f\u7684\u5faa\u73af\u3002 \u5e76\u4e0d\u662f\u4ece\u6570\u7ec4\u4e0b\u68071\u2026n \uff0c\u56e0\u6b64\u4f7f\u7528\u65f6\u5019\u9700\u8981\u6ce8\u610f\u3002 \u683c\u5f0f\u5316\u5b57\u7b26\u4e32\u8f93\u51fa\uff08sprintf\u4f7f\u7528\uff09 \u683c\u5f0f\u5316\u5b57\u7b26\u4e32\u683c\u5f0f\uff1a \u5176\u4e2d\u683c\u5f0f\u5316\u5b57\u7b26\u4e32\u5305\u62ec\u4e24\u90e8\u5206\u5185\u5bb9: \u4e00\u90e8\u5206\u662f\u6b63\u5e38\u5b57\u7b26, \u8fd9\u4e9b\u5b57\u7b26\u5c06\u6309\u539f\u6837\u8f93\u51fa; \u53e6\u4e00\u90e8\u5206\u662f\u683c\u5f0f\u5316\u89c4\u5b9a\u5b57\u7b26, \u4ee5\"%\"\u5f00\u59cb, \u540e\u8ddf\u4e00\u4e2a\u6216\u51e0\u4e2a\u89c4\u5b9a\u5b57\u7b26,\u7528\u6765\u786e\u5b9a\u8f93\u51fa\u5185\u5bb9\u683c\u5f0f\u3002 \u683c\u5f0f\u7b26 \u8bf4\u660e %d \u5341\u8fdb\u5236\u6709\u7b26\u53f7\u6574\u6570 %u \u5341\u8fdb\u5236\u65e0\u7b26\u53f7\u6574\u6570 %f \u6d6e\u70b9\u6570 %s \u5b57\u7b26\u4e32 %c \u5355\u4e2a\u5b57\u7b26 %p \u6307\u9488\u7684\u503c %e \u6307\u6570\u5f62\u5f0f\u7684\u6d6e\u70b9\u6570 %x %X \u65e0\u7b26\u53f7\u4ee5\u5341\u516d\u8fdb\u5236\u8868\u793a\u7684\u6574\u6570 %o \u65e0\u7b26\u53f7\u4ee5\u516b\u8fdb\u5236\u8868\u793a\u7684\u6574\u6570 %g \u81ea\u52a8\u9009\u62e9\u5408\u9002\u7684\u8868\u793a\u6cd5 [chengmo@centos5 ~]$ awk 'BEGIN{n1=124.113;n2=-1.224;n3=1.2345; printf(\"%.2f,%.2u,%.2g,%X,%o\\n\",n1,n2,n3,n1,n1);}' 124.11,18446744073709551615,1.2,7C,174 \u4e09\u3001\u4e00\u822c\u51fd\u6570\u662f\uff1a \u51fd\u6570 \u8bf4\u660e close( Expression ) \u7528\u540c\u4e00\u4e2a\u5e26\u5b57\u7b26\u4e32\u503c\u7684 Expression \u53c2\u6570\u6765\u5173\u95ed\u7531 print \u6216 printf \u8bed\u53e5\u6253\u5f00\u7684\u6216\u8c03\u7528 getline \u51fd\u6570\u6253\u5f00\u7684\u6587\u4ef6\u6216\u7ba1\u9053\u3002\u5982\u679c\u6587\u4ef6\u6216\u7ba1\u9053\u6210\u529f\u5173\u95ed\uff0c\u5219\u8fd4\u56de 0\uff1b\u5176\u5b83\u60c5\u51b5\u4e0b\u8fd4\u56de\u975e\u96f6\u503c\u3002\u5982\u679c\u6253\u7b97\u5199\u4e00\u4e2a\u6587\u4ef6\uff0c\u5e76\u7a0d\u540e\u5728\u540c\u4e00\u4e2a\u7a0b\u5e8f\u4e2d\u8bfb\u53d6\u6587\u4ef6\uff0c\u5219 close \u8bed\u53e5\u662f\u5fc5\u9700\u7684\u3002 system(Command ) \u6267\u884c Command \u53c2\u6570\u6307\u5b9a\u7684\u547d\u4ee4\uff0c\u5e76\u8fd4\u56de\u9000\u51fa\u72b6\u6001\u3002\u7b49\u540c\u4e8e system \u5b50\u4f8b\u7a0b\u3002 Expression | getline [ Variable ] \u4ece\u6765\u81ea Expression \u53c2\u6570\u6307\u5b9a\u7684\u547d\u4ee4\u7684\u8f93\u51fa\u4e2d\u901a\u8fc7\u7ba1\u9053\u4f20\u9001\u7684\u6d41\u4e2d\u8bfb\u53d6\u4e00\u4e2a\u8f93\u5165\u8bb0\u5f55\uff0c\u5e76\u5c06\u8be5\u8bb0\u5f55\u7684\u503c\u6307\u5b9a\u7ed9 Variable \u53c2\u6570\u6307\u5b9a\u7684\u53d8\u91cf\u3002\u5982\u679c\u5f53\u524d\u672a\u6253\u5f00\u5c06 Expression \u53c2\u6570\u7684\u503c\u4f5c\u4e3a\u5176\u547d\u4ee4\u540d\u79f0\u7684\u6d41\uff0c\u5219\u521b\u5efa\u6d41\u3002\u521b\u5efa\u7684\u6d41\u7b49\u540c\u4e8e\u8c03\u7528 popen \u5b50\u4f8b\u7a0b\uff0c\u6b64\u65f6 Command \u53c2\u6570\u53d6 Expression \u53c2\u6570\u7684\u503c\u4e14 Mode \u53c2\u6570\u8bbe\u7f6e\u4e3a\u4e00\u4e2a\u662f r \u7684\u503c\u3002\u53ea\u8981\u6d41\u4fdd\u7559\u6253\u5f00\u4e14 Expression \u53c2\u6570\u6c42\u5f97\u540c\u4e00\u4e2a\u5b57\u7b26\u4e32\uff0c\u5219\u5bf9 getline \u51fd\u6570\u7684\u6bcf\u6b21\u540e\u7eed\u8c03\u7528\u8bfb\u53d6\u53e6\u4e00\u4e2a\u8bb0\u5f55\u3002\u5982\u679c\u672a\u6307\u5b9a Variable \u53c2\u6570\uff0c\u5219 $0 \u8bb0\u5f55\u53d8\u91cf\u548c NF \u7279\u6b8a\u53d8\u91cf\u8bbe\u7f6e\u4e3a\u4ece\u6d41\u8bfb\u53d6\u7684\u8bb0\u5f55\u3002 getline [ Variable ] < Expression \u4ece Expression \u53c2\u6570\u6307\u5b9a\u7684\u6587\u4ef6\u8bfb\u53d6\u8f93\u5165\u7684\u4e0b\u4e00\u4e2a\u8bb0\u5f55\uff0c\u5e76\u5c06 Variable \u53c2\u6570\u6307\u5b9a\u7684\u53d8\u91cf\u8bbe\u7f6e\u4e3a\u8be5\u8bb0\u5f55\u7684\u503c\u3002\u53ea\u8981\u6d41\u4fdd\u7559\u6253\u5f00\u4e14 Expression \u53c2\u6570\u5bf9\u540c\u4e00\u4e2a\u5b57\u7b26\u4e32\u6c42\u503c\uff0c\u5219\u5bf9 getline \u51fd\u6570\u7684\u6bcf\u6b21\u540e\u7eed\u8c03\u7528\u8bfb\u53d6\u53e6\u4e00\u4e2a\u8bb0\u5f55\u3002\u5982\u679c\u672a\u6307\u5b9a Variable \u53c2\u6570\uff0c\u5219 $0 \u8bb0\u5f55\u53d8\u91cf\u548c NF \u7279\u6b8a\u53d8\u91cf\u8bbe\u7f6e\u4e3a\u4ece\u6d41\u8bfb\u53d6\u7684\u8bb0\u5f55\u3002 getline [ Variable ] \u5c06 Variable \u53c2\u6570\u6307\u5b9a\u7684\u53d8\u91cf\u8bbe\u7f6e\u4e3a\u4ece\u5f53\u524d\u8f93\u5165\u6587\u4ef6\u8bfb\u53d6\u7684\u4e0b\u4e00\u4e2a\u8f93\u5165\u8bb0\u5f55\u3002\u5982\u679c\u672a\u6307\u5b9a Variable \u53c2\u6570\uff0c\u5219 $0 \u8bb0\u5f55\u53d8\u91cf\u8bbe\u7f6e\u4e3a\u8be5\u8bb0\u5f55\u7684\u503c\uff0c\u8fd8\u5c06\u8bbe\u7f6e NF\u3001NR \u548c FNR \u7279\u6b8a\u53d8\u91cf\u3002 \u6253\u5f00\u5916\u90e8\u6587\u4ef6\uff08close\u7528\u6cd5\uff09 [chengmo@centos5 ~]$ awk 'BEGIN{while(\"cat /etc/passwd\"|getline){print $0;};close(\"/etc/passwd\");}' root:x:0:0:root:/root:/bin/bash bin:x:1:1:bin:/bin:/sbin/nologin daemon:x:2:2:daemon:/sbin:/sbin/nologin \u9010\u884c\u8bfb\u53d6\u5916\u90e8\u6587\u4ef6(getline\u4f7f\u7528\u65b9\u6cd5\uff09 [chengmo@centos5 ~]$ awk 'BEGIN{while(getline < \"/etc/passwd\"){print $0;};close(\"/etc/passwd\");}' root:x:0:0:root:/root:/bin/bash bin:x:1:1:bin:/bin:/sbin/nologin daemon:x:2:2:daemon:/sbin:/sbin/nologin [chengmo@centos5 ~]$ awk 'BEGIN{print \"Enter your name:\";getline name;print name;}' Enter your name: chengmo chengmo \u8c03\u7528\u5916\u90e8\u5e94\u7528\u7a0b\u5e8f(system\u4f7f\u7528\u65b9\u6cd5\uff09 [chengmo@centos5 ~]$ awk 'BEGIN{b=system(\"ls -al\");print b;}' total 42092 drwxr-xr-x 14 chengmo chengmo 4096 09-30 17:47 . drwxr-xr-x 95 root root 4096 10-08 14:01 .. b\u8fd4\u56de\u503c\uff0c\u662f\u6267\u884c\u7ed3\u679c\u3002 \u56db\u3001\u65f6\u95f4\u51fd\u6570 \u51fd\u6570\u540d \u8bf4\u660e mktime( YYYY MM DD HH MM SS[ DST]) \u751f\u6210\u65f6\u95f4\u683c\u5f0f strftime([format [, timestamp]]) \u683c\u5f0f\u5316\u65f6\u95f4\u8f93\u51fa\uff0c\u5c06\u65f6\u95f4\u6233\u8f6c\u4e3a\u65f6\u95f4\u5b57\u7b26\u4e32 \u5177\u4f53\u683c\u5f0f\uff0c\u89c1\u4e0b\u8868. systime() \u5f97\u5230\u65f6\u95f4\u6233,\u8fd4\u56de\u4ece1970\u5e741\u67081\u65e5\u5f00\u59cb\u5230\u5f53\u524d\u65f6\u95f4(\u4e0d\u8ba1\u95f0\u5e74)\u7684\u6574\u79d2\u6570 \u521b\u5efa\u6307\u5b9a\u65f6\u95f4(mktime\u4f7f\u7528\uff09 [chengmo@centos5 ~]$ awk 'BEGIN{tstamp=mktime(\"2001 01 01 12 12 12\");print strftime(\"%c\",tstamp);}' 2001\u5e7401\u670801\u65e5 \u661f\u671f\u4e00 12\u65f612\u520612\u79d2 [chengmo@centos5 ~]$ awk 'BEGIN{tstamp1=mktime(\"2001 01 01 12 12 12\");tstamp2=mktime(\"2001 02 01 0 0 0\");print tstamp2-tstamp1;}' 2634468 \u6c422\u4e2a\u65f6\u95f4\u6bb5\u4e2d\u95f4\u65f6\u95f4\u5dee,\u4ecb\u7ecd\u4e86strftime\u4f7f\u7528\u65b9\u6cd5 [chengmo@centos5 ~]$ awk 'BEGIN{tstamp1=mktime(\"2001 01 01 12 12 12\");tstamp2=systime();print tstamp2-tstamp1;}' 308201392 strftime\u65e5\u671f\u548c\u65f6\u95f4\u683c\u5f0f\u8bf4\u660e\u7b26 \u683c\u5f0f \u63cf\u8ff0 %a \u661f\u671f\u51e0\u7684\u7f29\u5199(Sun) %A \u661f\u671f\u51e0\u7684\u5b8c\u6574\u5199\u6cd5(Sunday) %b \u6708\u540d\u7684\u7f29\u5199(Oct) %B \u6708\u540d\u7684\u5b8c\u6574\u5199\u6cd5(October) %c \u672c\u5730\u65e5\u671f\u548c\u65f6\u95f4 %d \u5341\u8fdb\u5236\u65e5\u671f %D \u65e5\u671f 08/20/99 %e \u65e5\u671f\uff0c\u5982\u679c\u53ea\u6709\u4e00\u4f4d\u4f1a\u8865\u4e0a\u4e00\u4e2a\u7a7a\u683c %H \u7528\u5341\u8fdb\u5236\u8868\u793a24\u5c0f\u65f6\u683c\u5f0f\u7684\u5c0f\u65f6 %I \u7528\u5341\u8fdb\u5236\u8868\u793a12\u5c0f\u65f6\u683c\u5f0f\u7684\u5c0f\u65f6 %j \u4ece1\u67081\u65e5\u8d77\u4e00\u5e74\u4e2d\u7684\u7b2c\u51e0\u5929 %m \u5341\u8fdb\u5236\u8868\u793a\u7684\u6708\u4efd %M \u5341\u8fdb\u5236\u8868\u793a\u7684\u5206\u949f %p 12\u5c0f\u65f6\u8868\u793a\u6cd5(AM/PM) %S \u5341\u8fdb\u5236\u8868\u793a\u7684\u79d2 %U \u5341\u8fdb\u5236\u8868\u793a\u7684\u4e00\u5e74\u4e2d\u7684\u7b2c\u51e0\u4e2a\u661f\u671f(\u661f\u671f\u5929\u4f5c\u4e3a\u4e00\u4e2a\u661f\u671f\u7684\u5f00\u59cb) %w \u5341\u8fdb\u5236\u8868\u793a\u7684\u661f\u671f\u51e0(\u661f\u671f\u5929\u662f0) %W \u5341\u8fdb\u5236\u8868\u793a\u7684\u4e00\u5e74\u4e2d\u7684\u7b2c\u51e0\u4e2a\u661f\u671f(\u661f\u671f\u4e00\u4f5c\u4e3a\u4e00\u4e2a\u661f\u671f\u7684\u5f00\u59cb) %x \u91cd\u65b0\u8bbe\u7f6e\u672c\u5730\u65e5\u671f(08/20/99) %X \u91cd\u65b0\u8bbe\u7f6e\u672c\u5730\u65f6\u95f4(12\uff1a00\uff1a00) %y \u4e24\u4f4d\u6570\u5b57\u8868\u793a\u7684\u5e74(99) %Y \u5f53\u524d\u6708\u4efd %Z \u65f6\u533a(PDT) %% \u767e\u5206\u53f7(%) \u4ee5\u4e0a\u662fawk\u5e38\u89c1 \u5185\u7f6e\u51fd\u6570\u4f7f\u7528\u53ca\u8bf4\u660e\uff0c\u5e0c\u671b\u5bf9\u5927\u5bb6\u6709\u6240\u5e2e\u52a9\u3002 \u6458\u81ea\u300ehttp://www.cnblogs.com/chengmo/archive/2010/10/08/1845913.html\u300f","title":"linux awk \u5185\u7f6e\u51fd\u6570\u8be6\u7ec6\u4ecb\u7ecd\uff08\u5b9e\u4f8b\uff09"},{"location":"UTILITIES/2015-12-29-linux%25e4%25b8%258b%25e5%2588%25a9%25e7%2594%25a8nc%25e5%2591%25bd%25e4%25bb%25a4%25e6%259d%25a5%25e7%259b%2591%25e6%258e%25a7%25e6%25a3%2580%25e6%25b5%258b%25e6%259c%258d%25e5%258a%25a1%25e5%2599%25a8%25e7%259a%2584%25e7%25ab%25af%25e5%258f%25a3%25e4%25bd%25bf%25e7%2594%25a8%25e6%2583%2585%25e5%2586%25b5.html/","tags":["linux","nc","\u7aef\u53e3"],"text":"\u524d\u7aef\u7528apache htttpd\u8fdb\u884c\u53d1\u5e03\uff0880\u7aef\u53e3\uff09\uff0c\u901a\u8fc7\u53cc\u673a\u8d1f\u8f7d\u5747\u8861\u8f6c\u53d1\u5230\u540e\u7aef\u7684\u4e24\u4e2atomcat\u8fdb\u884c\u5904\u7406\uff088081\u548c8082\u7aef\u53e3\uff09\uff0c\u73b0\u5728\u9700\u8981\u968f\u65f6\u76d1\u63a7\u8fd9\u4e09\u4e2a\u7aef\u53e3\u7684\u60c5\u51b5\uff0c\u4e00\u65e6down\u6389\u9700\u8981\u80fd\u591f\u7acb\u5373\u544a\u8b66\u5904\u7406\u3002\u6279\u91cf\u7684\u7cfb\u7edf\u76d1\u63a7\u6bd4\u8f83\u597d\u7684\u662f\u7528nagios\u8f6f\u4ef6\u6765\u5b9e\u73b0\uff0c\u8fd9\u6837\u5c0f\u9879\u76ee\u4e13\u95e8\u88c5\u4e00\u4e2anagios\u8f6f\u4ef6\uff0c\u6709\u70b9\u7e41\u7410\u4e86\u3002\u5728\u7f51\u4e0a\u67e5\u4e86\u4e00\u4e9b\u8d44\u6599\uff0c\u603b\u7ed3\u5b9e\u9a8c\u4e86\u4e00\u4e0b\uff0c\u53ef\u4ee5\u7528\u7b80\u5355\u7684nc\u547d\u4ee4\u6765\u5b9e\u73b0\u3002 \u4e00\u3001nc\u547d\u4ee4\u68c0\u6d4b\u7aef\u53e3\u7684\u7528\u6cd5 # nc -v -w 10 %IP% -z %PORT% -v \u663e\u793a\u6307\u4ee4\u6267\u884c\u8fc7\u7a0b\u3002 -w < \u8d85\u65f6\u79d2\u6570> \u8bbe\u7f6e\u7b49\u5f85\u8fde\u7ebf\u7684\u65f6\u95f4\u3002 -u \u8868\u793a\u4f7f\u7528UDP\u534f\u8bae -z \u4f7f\u75280\u8f93\u5165/\u8f93\u51fa\u6a21\u5f0f\uff0c\u53ea\u5728\u626b\u63cf\u901a\u4fe1\u7aef\u53e3\u65f6\u4f7f\u7528\u3002 \u4f8b1\uff1a\u626b\u63cf\u6307\u5b9a\u76848080\u7aef\u53e3 # nc -v -w 10 -z 192.168.0.100 8080 Connection to 192.168.0.100 8080 port [tcp/http] succeeded! \u4f8b2\uff1a\u626b\u63cf20\u523025\u7684\u7aef\u53e3\u8303\u56f4\uff0c\u5e76\u8be6\u7ec6\u8f93\u51fa\u3002 # nc -v -w 2 -z 192.168.0.100 20-25 nc: connect to 192.168.0.100 port 20 (tcp) failed: Connection refused nc: connect to 192.168.0.100 port 21 (tcp) failed: Connection refused Connection to 192.168.0.100 22 port [tcp/ssh] succeeded! nc: connect to 192.168.0.100 port 23 (tcp) failed: Connection refused nc: connect to 192.168.0.100 port 24 (tcp) failed: Connection refused nc: connect to 192.168.0.100 port 25 (tcp) failed: Connection refused \u4f8b3\uff1a\u626b\u63cf1\u523065535\u7684\u7aef\u53e3\u8303\u56f4\uff0c\u53ea\u8f93\u51fa\u6253\u5f00\u7684\u7aef\u53e3\uff08\u53bb\u6389-v\u53c2\u6570\u5373\u53ef\uff09 # nc -w 1 -z 192.168.0.100 1-65535 Connection to 192.168.0.100 22 port [tcp/ssh] succeeded! Connection to 192.168.0.100 80 port [tcp/http] succeeded! Connection to 192.168.0.100 2121 port [tcp/scientia-ssdb] succeeded! Connection to 192.168.0.100 4004 port [tcp/pxc-roid] succeeded! Connection to 192.168.0.100 8081 port [tcp/tproxy] succeeded! Connection to 192.168.0.100 11211 port [tcp/*] succeeded! \u4e8c\u3001\u6279\u91cf\u68c0\u6d4b\u670d\u52a1\u5668\u6307\u5b9a\u7aef\u53e3\u5f00\u653e\u60c5\u51b5\uff1a 1\u3001\u5047\u5982\u6211\u4eec\u8981\u76d1\u63a7\u4e00\u5806\u6307\u5b9a\u7684IP\u548c\u7aef\u53e3\uff0c\u53ef\u65b0\u5efa\u4e00\u4e2a\u6587\u4ef6\uff08\u7b2c1\u5217\u670d\u52a1\u5668IP\uff0c\u7b2c2\u5217\u8981\u76d1\u63a7\u7684\u7aef\u53e3\uff09\u3002 # vim /scripts/ip-ports.txt 192.168.0.100 80 192.168.0.100 8081 192.168.0.101 8082 192.168.1.100 21 2\u3001\u6211\u4eec\u53ef\u4ee5\u5199\u8fd9\u6837\u4e00\u4e2a\u811a\u672c\u6765\u6279\u91cf\u68c0\u6d4b\u7aef\u53e3\u662f\u5426\u5f00\u653e\uff1a # vim /scripts/ncports.sh #!/bin/bash #\u68c0\u6d4b\u670d\u52a1\u5668\u7aef\u53e3\u662f\u5426\u5f00\u653e\uff0c\u6210\u529f\u4f1a\u8fd4\u56de0\u503c\u663e\u793aok\uff0c\u5931\u8d25\u4f1a\u8fd4\u56de1\u503c\u663e\u793afail cat /scripts/ip-ports.txt | while read line do nc -w 10 -z $line > /dev/null 2>&1 if [ $? -eq 0 ] then echo $line:ok else echo $line:fail fi done 3\u3001\u6267\u884c\u811a\u672c\u67e5\u770b\u8fd0\u884c\u7ed3\u679c\u5982\u4e0b\uff1a # chmod a+x /scripts/ncports.sh # /scripts/ncports.sh 192.168.0.100 80\uff1aok 192.168.0.100 8081\uff1aok 192.168.0.101 8082\uff1aok 192.168.1.100 21\uff1afail \u4e09\u3001\u7aef\u53e3\u4e0d\u901a\u65f6\u8bbe\u7f6e\u544a\u8b66\uff1a 1\u3001 \u90ae\u4ef6\u544a\u8b66\uff1a (1) \u5148\u5b89\u88c5linux\u4e0b\u9762\u7684\u90ae\u4ef6\u53d1\u9001\u7a0b\u5e8fmutt\uff08\u53c2\u89c1\u6211\u53e6\u4e00\u7bc7\u6587\u7ae0\u300aLinux\u4e0b\u9762\u5982\u4f55\u7528mutt\u547d\u4ee4\u53d1\u9001\u90ae\u4ef6\u300b (2) \u4fee\u6539\u4e0a\u9762\u7684ncports.sh\u68c0\u6d4b\u811a\u672c\uff0c\u5728\u663e\u793a\u5931\u8d25fail\u7684\u65f6\u5019\u589e\u52a0\u4e00\u884c\uff1a \u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026 echo $line :fail echo \u201c\u670d\u52a1\u5668 $line \u7aef\u53e3\u4e0d\u901a\uff0c\u8bf7\u5c3d\u5feb\u5904\u7406\uff01\u201d | mutt -s \u201c\u3010\u673a\u623f\u76d1\u63a7\u3011\u670d\u52a1\u5668$line\u7aef\u53e3\u4e0d\u901a\u201d test@139.com \u2026\u2026\u2026\u2026\u2026\u2026\u2026\u2026 (3) \u5982\u679c\u4e0a\u9762\u7684\u63a5\u6536\u90ae\u7bb1\u8bbe\u7f6e\u4e3a\u79fb\u52a8139\u90ae\u7bb1\uff0c\u5e76\u5f00\u542f\u63a5\u6536\u90ae\u4ef6\u77ed\u4fe1\u544a\u77e5\uff0c\u5373\u53ef\u5b9e\u73b0\u201c\u77ed\u4fe1\u544a\u8b66\u201d\u7684\u529f\u80fd\u3002 2\u3001 windows\u6d88\u606f\u5f39\u7a97\u544a\u8b66\uff1a (1) \u5148\u6253\u5f00\u63a5\u6536\u6d88\u606f\u5f39\u7a97windows\u5ba2\u6237\u673a\u7684\u201cMessenger\u201d\u670d\u52a1\uff0c\u8bbe\u7f6e\u4e3a\u201c\u542f\u52a8\u201d (2) \u5229\u7528smbclient\u547d\u4ee4\u6765\u53d1\u9001\u6d88\u606f\uff0cnet\u811a\u672c\u6587\u4ef6\u5982\u4e0b\uff1a # vim /scripts/net.sh #!/bin/bash #/scripts/net.sh case \u201d$1\u2033 in send) echo \u201d$3\u2033|smbclient -I \u201d$2\u2033 -M `nmblookup -A \u201d$2\u2033|sed -e \u20191d\u2019 -e \u20193,/*/d\u2019|cut -f2|cut -d\u2019 \u2019 -f1` ;; *) echo \u201dUsage:net send \u201d exit 1 esac # chmod a+x /scripts/net.sh (3) \u53d1\u9001\u6d88\u606f\u5f39\u7a97\u547d\u4ee4\u6d4b\u8bd5\uff1a\uff08\u53d1\u9001\u7ed9192.168.1.83\u8fd9\u53f0win xp\u673a\u5b50\uff0c\u53d1\u9001\u5185\u5bb9\u4e0d\u652f\u6301\u4e2d\u6587\uff09 # /scripts/net.sh send 192.168.1.83 \u201chello,nihao\u201d 3\u3001\u7aef\u53e3\u4e0d\u901a\u65f6\u53d1\u9001\u90ae\u4ef6\u5e76\u6d88\u606f\u5f39\u7a97\u544a\u8b66\u7684\u811a\u672c\u5982\u4e0b\uff1a # vim /scripts/ncports.sh #!/bin/bash #\u68c0\u6d4b\u670d\u52a1\u5668\u7aef\u53e3\u662f\u5426\u5f00\u653e\uff0c\u6210\u529f\u4f1a\u8fd4\u56de0\u503c\uff0c\u6253\u4e0d\u5f00\u4f1a\u8fd4\u56de1\u503c cat /scripts/ip-ports.txt | while read line do nc -w 10 -z $line > /dev/null 2>&1 if [ $? -eq 0 ] then echo $line:ok else echo $line:fail echo \u201d\u670d\u52a1\u5668 $line \u7aef\u53e3\u4e0d\u901a\uff0c\u8bf7\u5c3d\u5feb\u5904\u7406\uff01\u201d | mutt -s \u201d\u3010\u673a\u623f\u76d1\u63a7\u3011\u670d\u52a1\u5668$line\u7aef\u53e3\u4e0d\u901a\u201d test@139.com /scripts/net send 192.168.1.83 \u201dThe $line fail\u201d fi done 4\u3001\u52a0\u5165\u4efb\u52a1\u8ba1\u5212\u6bcf2\u5206\u949f\u6267\u884c\u4e00\u6b21 # crontab -e */2 * * * * /scripts/ncports.sh > /dev/null 2>&1 # service crond restart \u6458\u81ea\u300ehttp://blog.csdn.net/kobejayandy/article/details/13790289\u300f","title":"Linux\u4e0b\u5229\u7528nc\u547d\u4ee4\u6765\u76d1\u63a7\u68c0\u6d4b\u670d\u52a1\u5668\u7684\u7aef\u53e3\u4f7f\u7528\u60c5\u51b5"},{"location":"UTILITIES/2016-01-09-ubuntu-14-04-lts-%25e7%25b3%25bb%25e7%25bb%259f%25e8%25ae%25be%25e7%25bd%25ae%25e6%25ae%258b%25e7%25bc%25ba%25e7%259a%2584%25e9%2597%25ae%25e9%25a2%2598.html/","tags":["ubuntu"],"text":"\u6211\u4e0d\u5c31\u628aiBus\u7ed9\u5378\u8f7d\u4e86\u5417\uff1f\u4f60\u4f5c\u4e3a\u6297\u8bae\u8fde\u7cfb\u7edf\u8bbe\u7f6e\u90fd\u4e0d\u7ed9\u6211\u7528\u4e86\uff0c\u8fd9\u5c31\u6709\u70b9\u8fc7\u4e86\u5427\uff01 \u4e00\uff0c\u73b0\u72b6\u3002 \u5148\u8ba9\u5927\u5bb6\u770b\u4e00\u4e0b\u75c7\u72b6\uff0c\u540c\u65f6\u53ef\u4ee5\u5bf9\u6bd4\uff0c\u4ee5\u514d\u4ee5\u540e\u4f60\u7684Ubuntu\u53d8\u6210\u4e86\u8fd9\u6837\u4f60\u8fd8\u5230\u5904\u4e71\u6c42\u533b\u95ee\u836f\u7684\u3002 \u4e8c\uff0c\u6765\u7531\u3002 \u90a3\u5929\u6211\u770b\u5230\u5947\u4e11\u65e0\u6bd4\u7684iBus\u5c31\u679c\u65ad\u5730\u627eFcitx\u6765\u4ee3\u66ff\u5b83\u4e86\uff0c\u8c01\u6599\u8fd9\u8d27\u8d70\u4e4b\u524d\u5c3d\u7ed9\u6211\u4f7f\u4e9b\u574f\uff0c\u628a\u7cfb\u7edf\u8bbe\u7f6e\u7ed9\u5f04\u6b8b\u4e86\u3002 \u4f60\u4e0d\u4fe1\uff1f\u4f60\u53ef\u4ee5\u7ed9\u5b83\u4e0b\u8fd9\u6761\u547d\u4ee4\u8bd5\u8bd5 sudo apt-get remove ibus \u4e09\uff0c\u5bfb\u6839\u3002 \u6211\u5dee\u4e0d\u591a\u534a\u5929\u4e0d\u5f97\u5176\u89e3\u4e3a\u4ec0\u4e48\uff0c\u5947\u4e11\u65e0\u6bd4\u7684iBus\u8ddfUbuntu 14.04\u5173\u7cfb\u8fd9\u4e48\u7d27\u5bc6\uff0c\u6211\u8fd8\u52a8\u4f60\u4e0d\u5f97\u4e86\u3002\u771f\u60f3\u8ba9Ubuntu 14.04\u518d\u53bb\u6295\u80ce\u4e00\u6b21(\u91cd\u88c5\u7cfb\u7edf\u561b)\uff01\u4f46\u4f5c\u4e3a\u4e00\u4e2a\u4e13\u4e1a\u7684Ubuntu\u5bb6\u65cf\u533b\u751f\uff0c\u6211\u662f\u6709\u8d23\u4efb\u548c\u4e49\u52a1\u77e5\u9053\u5979\u7684\u53d1\u75c5\u539f\u7531\u7684\u597d\u5427\uff01\u7ec8\u4e8e\u5728Ubuntu 14.04\u7684\u4ea4\u5f80\u8bb0\u5f55\u4e2d\u6211\u53d1\u73b0\u4e86\u4e00\u4e2a\u79d8\u5bc6\uff0cUbuntu 14.04\u8ddfiBus\u4e4b\u95f4\u7684\u90a3\u70b9\u5173\u7cfb\u662f\u4e07\u4e07\u4e0d\u80fd\u65ad\u7684\u3002\u5982\u4e0b\u56fe\uff0c\u660e\u4e86\u4e86\u5427\uff1a \u4e09\uff0c\u5f97\u89e3\u3002 \u660e\u663e\u6211\u77e5\u9053\u662fUbuntu 14.04\u548ciBus\u4e4b\u95f4\u7684\u5173\u7cfb\u5f15\u8d77\u7684\uff0c\u4f46\u6211\u5c1d\u8bd5\u628aiBus\u8bf7\u56de\u6765\u4e4b\u540e\u95ee\u9898\u4f9d\u65e7\u3002\u6700\u540e\u6211\u53ea\u80fd\u8ddf\u636e\u8bb0\u5f55\u4e00\u4e2a\u4e2a\u6765\u6062\u590d\u4e86\uff0c\u53d1\u73b0\u6b63\u89e3\u5982\u4e0b\uff1a sudo apt-get install ubuntu-desktop \u8fd9\u4e2a\u4f1a\u628aamazon\u5e7f\u544a\u4e5f\u7ed9\u91cd\u65b0\u5b89\u88c5\u4e0a\uff0c\u6240\u4ee5\u4f60\u53ef\u4ee5\u5148\u5b89\u88c5\u518d\u5378\u8f7d\uff0c\u6216\u8005\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u4e00\u6b21\u6027\u89e3\u51b3\uff1a sudo apt-get install ibus-pinyin unity-control-center unity-control-center-signon webaccounts-extension-common xul-ext-webaccounts \u6458\u81ea [ http://jingyan.baidu.com/article/375c8e19985a2125f2a229cb.html ]","title":"Ubuntu 14.04 LTS \u7cfb\u7edf\u8bbe\u7f6e\u6b8b\u7f3a\u7684\u95ee\u9898"},{"location":"UTILITIES/2016-02-26-ubuntu-%25e4%25bd%25bf%25e7%2594%25a8-playonlinux-%25e5%25ae%2589%25e8%25a3%2585-tm2013.html/","tags":[],"text":"\u4e00\u3001\u5b89\u88c5wine 1. \u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u6dfb\u52a0 Wine PPA sudo add-apt-repository ppa:ubuntu-wine/ppa 2. \u4f7f\u7528\u5982\u4e0b\u547d\u4ee4\u66f4\u65b0\u548c\u5b89\u88c5wine sudo apt-get update; sudo apt-get install wine \u4e8c\u3001\u5b89\u88c5PlayOnLinux wget -q \"http://deb.playonlinux.com/public.gpg\" -O- | sudo apt-key add - sudo wget http://deb.playonlinux.com/playonlinux_trusty.list -O /etc/apt/sources.list.d/playonlinux.list sudo apt-get update sudo apt-get install playonlinux \u4e09\u3001\u5b89\u88c5TM2013 playonlinux\u5b89\u88c5\u7a0b\u5e8f\uff0c\u4e00\u822c\u7ecf\u8fc77\u4e2a\u6b65\u9aa4\uff1a 1. \u70b9\u51fbinstall 2. \u70b9\u51fbinstall a non-listed program 3. \u70b9\u51fbinstall a program in a new virtual drive\uff08\u521b\u5efa\u4e00\u4e2a\u65b0\u7684\u5bb9\u5668\u5b89\u88c5\u7a0b\u5e8f\uff09 4. \u8f93\u5165\u65b0\u5bb9\u5668\u7684\u540d\u79f0 5. \u5728\u4e09\u4e2a\u9879\u76ee\u4e0a\u6253\u52fe\u52fe\uff0c \u7b2c\u4e00\u9879\u662f\u9009\u62e9wine\u7684\u7248\u672c \u7b2c\u4e8c\u9879\u662f\u914d\u7f6ewine \u7b2c\u4e09\u9879\u662f\u5b89\u88c5\u4e00\u4e9bdll\u7684\u8f6f\u4ef6\u5305 6. \u9009\u62e9\u6240\u9700\u8981\u7684exe\u6587\u4ef6\u5b89\u88c5 7. \u7ed9\u7a0b\u5e8f\u8bbe\u5b9a\u542f\u52a8\u56fe\u6807 //////////////////////// \u4ee5\u4e0b\u662f\u4e00\u4e9b\u5e38\u7528\u7a0b\u5e8f\u9700\u8981\u7684dll\u3002 TM2013 ====== riched20 msxml6 ie8 vcrun2008 \u4f7f\u7528\u6ca1\u95ee\u9898\u3002 \u5173\u95ed\u7a0b\u5e8f\uff0c\u8fdb\u7a0b\u8fd8\u5728\u3002 \u9664\u975e\u4f7f\u7528playonlinux\u7684close this application\u53ef\u4ee5\u5173\u95ed\u8fdb\u7a0b\uff0c \u4e0d\u7136\u4e0d\u80fd\u8fde\u7eed\u767b\u5f55\u3002 QQ\u6e38\u620f\u5927\u5385 ========= fontsmooth-gray fontsmooth-rgb fontsmooth-bgr mfc40 mfc42 msxml3 msxml4 msxml6 riched30 vbrun6 vcrun6 vcrun2005 vcrun2008 ie6 \u4f7f\u7528\u6ca1\u95ee\u9898\u3002 \u53c2\u8003 1. http://www.linuxidc.com/Linux/2014-08/105091.htm 2. https://www.playonlinux.com/en/download.html 3. http://forum.ubuntu.com.cn/viewtopic.php?f=121&t=452861","title":"Ubuntu \u4f7f\u7528 PlayOnLinux \u5b89\u88c5 TM2013"},{"location":"UTILITIES/2016-03-02-virtualbox-%25e8%2599%259a%25e6%258b%259f%25e6%259c%25ba%25e5%2585%258b%25e9%259a%2586.html/","tags":["\u865a\u62df\u673a"],"text":"Virtualbox\u867d\u7136\u5728\u56fe\u5f62\u754c\u9762\u4e0b\u6ca1\u6709\u4e3b\u673a\u514b\u9686\u7684\u529f\u80fd\uff0c\u4f46\u662f\u5728\u547d\u4ee4\u884c\u4e0b\u8fd8\u662f\u63d0\u4f9b\u8fd9\u4e2a\u529f\u80fd\u7684\uff0c\u5728virtualbox\u7684\u5b89\u88c5\u76ee\u5f55\u4e0b\u6267\u884c\"VBoxManage clonevdi\"\u547d\u4ee4\u3002 Virtualbox\u514b\u9686\u547d\u4ee4\u683c\u5f0f VBoxManage clonevdi \u539f\u59cbVDI\u6587\u4ef6\u540d \u65b0\u7684VDI\u6587\u4ef6\u540d \u793a\u4f8b\uff1a $ VBoxManage clonevdi centos.vdi centos3p.vdi 0%...10%...20%...30%...40%...50%...60%...70%...80%...90%...100% Clone medium created in format 'VDI'. UUID: a108550f-c62a-4550-9a92-768036e2ea8b \u6267\u884c\u5b8cVBoxManage clonevdi \u547d\u4ee4\u540e\u4f1a\u5728Virtualbox\u7684\u9ed8\u8ba4\u865a\u62df\u78c1\u76d8\u76ee\u5f55\u4e0b\u751f\u6210\u4e00\u4e2a\u65b0\u7684vdi\u6587\u4ef6\uff0c\u65b0\u5efa\u4e00\u4e2a\u865a\u62df\u673a\u4f7f\u7528\u8be5\u865a\u62df\u78c1\u76d8\u5c31\u53ef\u4ee5\u5b9e\u73b0\u865a\u62df\u673a\u7684\u514b\u9686\u3002 \u6458\u81ea\u300chttp://www.liusuping.com/xunihua/virtualbox-guestos-clone.html\u300d \u9644\uff1a \u5728\u514b\u9686\u51fa\u6765\u7684CentOS Linux\u3002 ifconfig...\u6ca1\u6709\u770b\u5230eth0.\u3002\u7136\u540e\u91cd\u542f\u7f51\u5361\u53c8\u62a5\u4e0b\u9762\u9519\u8bef\u3002 \u6545\u969c\u73b0\u8c61\uff1a Device eth0 does not seem to be present,delaying initialization. [FAILED] \u89e3\u51b3\u529e\u6cd5\uff1a \u9996\u5148\uff0c\u6253\u5f00/etc/udev/rules.d/70-persistent-net.rules\u5185\u5bb9\u5982\u4e0b\u9762\u4f8b\u5b50\u6240\u793a\uff1a # vi /etc/udev/rules.d/70-persistent-net.rules # This file was automatically generated by the /lib/udev/write_net_rules # program, run by the persistent-net-generator.rules rules file. # # You can modify it, as long as you keep each rule on a single # line, and change only the value of the NAME= key. # PCI device 0x1022:0x2000 (pcnet32) SUBSYSTEM==\"net\", ACTION==\"add\", DRIVERS==\"?*\", ATTR{address}==\"00:0c:29:8f:89:9 7\", ATTR{type}==\"1\", KERNEL==\"eth*\", NAME=\"eth0\" # PCI device 0x1022:0x2000 (pcnet32) SUBSYSTEM==\"net\", ACTION==\"add\", DRIVERS==\"?*\", ATTR{address}==\"00:0c:29:50:bd:1 7\", ATTR{type}==\"1\", KERNEL==\"eth*\", NAME=\"eth1\" \u8bb0\u5f55\u4e0b\uff0ceth1\u7f51\u5361\u7684mac\u5730\u574000:0c:29:50:bd:17 \u63a5\u4e0b\u6765\uff0c # vi /etc/sysconfig/network-scripts/ifcfg-eth0 \u5c06 DEVICE=\"eth0\" \u6539\u6210 DEVICE=\"eth1\" , \u5c06 HWADDR=\"00:0c:29:8f:89:97\" \u6539\u6210\u4e0a\u9762\u7684mac\u5730\u5740 HWADDR=\"00:0c:29:50:bd:17\" \u6700\u540e\uff0c\u91cd\u542f\u7f51\u7edc # service network restart \u6216\u8005 # /etc/init.d/network restart \u6b63\u5e38\u4e86\u3002 \u6458\u81ea\u300chttp://www.linuxidc.com/Linux/2012-12/76248.htm\u300d","title":"virtualbox \u865a\u62df\u673a\u514b\u9686"},{"location":"UTILITIES/2016-06-19-centos-6-x-%25e5%25ae%2589%25e8%25a3%2585nvidia%25e6%2598%25be%25e5%258d%25a1%25e9%25a9%25b1%25e5%258a%25a8%25e5%258f%258a%25e5%25b1%258f%25e5%25b9%2595%25e4%25ba%25ae%25e5%25ba%25a6%25e9%2597%25ae%25e9%25a2%2598.html/","tags":["centos","nvidia","\u663e\u5361","\u9a71\u52a8"],"text":"\u4e00\u3001\u51c6\u5907 1 \u6839\u636envidia\u663e\u5361\u7684\u5177\u4f53\u578b\u53f7\uff0c\u4ece\u5b98\u65b9\u7f51\u7ad9\u4e0b\u8f7d\u9a71\u52a8\uff0c\u6bd4\u5982 NVIDIA-Linux-x86_64-340.96.run \u300c\u624b\u52a8\u641c\u7d22\u9a71\u52a8\u7a0b\u5e8f\u300d http://www.geforce.cn/drivers#start-search 2 \u5b89\u88c5\u7f16\u8bd1\u73af\u5883\uff1agcc\u3001kernel\u3001kernel-devel\u3001kernel-headers [root@localhost ~]# yum -y install gcc kernel kernel-devel kernel-headers 3 \u4fee\u6539/etc/modprobe.d/blacklist.conf \u6587\u4ef6\uff0c\u4ee5\u963b\u6b62 nouveau \u6a21\u5757\u7684\u52a0\u8f7d \u65b9\u6cd5\uff1a \u6dfb\u52a0blacklist nouveau\uff0c\u6ce8\u91ca\u6389blacklist nvidiafb 4 \u91cd\u65b0\u5efa\u7acbinitramfs image\u6587\u4ef6 [root@localhost ~]# mv /boot/initramfs-$(uname -r).img /boot/initramfs-$(uname -r).img.bak [root@localhost ~]# dracut /boot/initramfs-$(uname -r).img $(uname -r) 5 \u4fee\u6539/etc/inittab\uff0c\u4f7f\u7cfb\u7edf\u5f00\u673a\u8fdb\u5165init 3\u6587\u672c\u6a21\u5f0f: \u5c06\u6700\u540e\u4e00\u884c\u201cid:5:initdefault:\u201d\u4fee\u6539\u6210\u201cid:3:initdefault:\u201d\uff08\u4e0d\u5305\u542b\u5f15\u53f7\uff09 \u6ce8\u91ca\uff1a5\u4ee3\u8868\u7cfb\u7edf\u542f\u52a8\u65f6\u9ed8\u8ba4\u8fdb\u5165x-window\u56fe\u5f62\u754c\u9762\uff0c3\u4ee3\u8868\u9ed8\u8ba4\u8fdb\u5165\u7ec8\u7aef\u6a21\u5f0f\u3002 6 \u91cd\u542f [root@localhost ~]# reboot \u4e8c\u3001\u5b89\u88c5NVIDIA\u9a71\u52a8 1 \u8f93\u5165root\u548cpassword\uff0c\u8fdb\u5165\u6839\u7528\u6237\u6a21\u5f0f\u4e0b,\u786e\u4fddnouveau kernel driver\u6ca1\u6709\u88ab\u52a0\u8f7d [root@localhost ~]# lsmod | grep nouveau 2 \u8fdb\u5165\u9a71\u52a8\u7a0b\u5e8f\u6240\u5728\u76ee\u5f55,\u5f00\u59cb\u5b89\u88c5 [root@localhost ~]# chmod +x NVIDIA-Linux-x86_64-340.96.run [root@localhost ~]# ./NVIDIA-Linux-x86_64-340.96.run \u5b89\u88c5\u8fc7\u7a0b\u4e2d\uff0c\u6839\u636e\u63d0\u793a\u9009\u62e9accept\uff0cyes \u6216 OK\uff0c\u5373\u53ef\u5b8c\u6210\u5b89\u88c5\u3002 3 \u4fee\u6539/etc/inittab\uff0c\u4f7f\u7cfb\u7edf\u5f00\u673a\u8fdb\u5165init 5\u56fe\u5f62\u754c\u9762\u6a21\u5f0f \u5c06\u6700\u540e\u4e00\u884c\u201cid:3:initdefault:\u201d\u4fee\u6539\u6210\u201cid:5:initdefault:\u201d 4 \u91cd\u542f [root@localhost ~]#reboot \u5f53\u770b\u5230Nvidia\u7684logo\u540e\uff0c\u5b89\u88c5\u6210\u529f,\u767b\u9646\u540e\u5728\u7cfb\u7edf- \u9996\u9009\u9879\u91cc\u53ef\u4ee5\u770b\u5230NVIDIA X Server Settings\u83dc\u5355\uff0c\u53ef\u4ee5\u67e5\u770b\u57fa\u672c\u4fe1\u606f\u53ca\u8fdb\u884c\u4e00\u4e9b\u8bbe\u7f6e \u4e09\u3001 \u5c4f\u5e55\u4eae\u5ea6\u4e0d\u53ef\u8c03\u7684\u89e3\u51b3\u65b9\u6cd5 \u89e3\u51b3\u529e\u6cd5\uff1a\u4fee\u6539/etc/X11/xorg.con\u6587\u4ef6\uff0c\u627eSection \"Device\"\uff0c\u7136\u540e\u5728\u76f8\u5e94\u7684EndSection\u4e4b\u524d\u6dfb\u52a0\u4e00\u884c Option \"RegistryDwords\" \"EnableBrightnessControl=1\" \u4fdd\u5b58\u5e76\u91cd\u542f\u7535\u8111\u3002 \u53c2\u8003 http://jingyan.baidu.com/article/9f63fb91d7e6b5c8400f0e0c.html http://my.oschina.net/hevakelcj/blog/176129","title":"CentOS 6.x \u5b89\u88c5nvidia\u663e\u5361\u9a71\u52a8\u53ca\u5c4f\u5e55\u4eae\u5ea6\u95ee\u9898"},{"location":"UTILITIES/2016-11-08-%25e6%259f%25a5%25e7%259c%258b%25e6%2596%2587%25e4%25bb%25b6%25e7%259a%2584-md5-sha1-sha256.html/","tags":[],"text":"\u67e5\u770b\u6587\u4ef6MD5\uff1a md5 \u67e5\u770b\u6587\u4ef6SHA1: openssl dgst -sha1 \u67e5\u770b\u6587\u4ef6SHA256\uff1a openssl dgst -sha256","title":"\u67e5\u770b\u6587\u4ef6\u7684 md5 sha1 sha256"},{"location":"UTILITIES/2016-11-24-mac-%25e4%25bd%25bf%25e7%2594%25a8-nfs-%25e8%25bf%259e%25e6%258e%25a5-centos-%25e4%25b8%258a%25e7%259a%2584%25e5%2585%25b1%25e4%25ba%25ab%25e6%2596%2587%25e4%25bb%25b6%25e5%25a4%25b9.html/","tags":["nfs"],"text":"Centos\u7aef\u914d\u7f6e rpm - qa | grep nfs \u68c0\u6d4b\u662f\u5426\u5df2\u5b89\u88c5NFS [root@localhost ~]# rpm - qa | grep nfs nfs-utils-lib- 1.0 . 8 - 7.2 .z2 nfs-utils- 1.0 . 9 - 40 .el5 system -config-nfs- 1.3 . 23 - 1 .el5 \u5219\u5df2\u5b89\u88c5\u4e86nfs\u8f6f\u4ef6\u5305\u3002\u82e5\u672a\u5b89\u88c5\u5219\u9700\u624b\u52a8\u5b89\u88c5\u540e\u7ee7\u7eed \u63a5\u7740\u914d\u7f6e /etc/exports \u6587\u4ef6\uff1a / var /www 192 .168 .100 .222 (rw,sync,no_root_squash,insecure) [ \u8981\u5171\u4eab\u7684\u76ee\u5f55 ] [ \u5171\u4eab\u7ed9\u5ba2\u6237\u7aefIP ( \u9009\u9879 )] [ \u5ba2\u6237\u7aef2 ... \u914d\u7f6e\u6587\u4ef6\u7684\u8be6\u7ec6\u4f7f\u7528\u8bf4\u660e\u8bf7\u53c2\u89c1\uff1a \u8fd9\u91cc \u5982\u679c\u8fde\u63a5\u65f6 Centos \u7aef\u63d0\u793a nfsd: request from insecure port (192.168.7.130:49232)! \u5219\u5c06'\u9009\u9879'\u914d\u7f6e\u6210 (rw,async,insecure) \u5373\u53ef \u542f\u52a8(\u6216\u91cd\u542f)NFS\u670d\u52a1\u5668\uff08\u5148 portmap \uff0c\u540e nfs \u4e24\u4e2a\u670d\u52a1\u3002\u505c\u6b62\u65f6\u5019\u505c nfs \u5c31\u597d\uff0cportmap \u53ef\u80fd\u4f1a\u88ab\u5176\u4ed6\u670d\u52a1\u6240\u9700\u8981\uff09 service nfs start( restart ) \u8bbe\u7f6e\u4e24\u4e2a\u670d\u52a1\u5f00\u673a\u81ea\u52a8\u542f\u52a8\u3002 chkconfig --level 35 nfs on \u6839\u636e\u5b9e\u9645\u9700\u8981\u66f4\u6539\u4e0b\u8981\u5171\u4eab\u7684\u6587\u4ef6\u5939\u7684\u6743\u9650 chmod -R 777 /var/www Mac\u7aef\u914d\u7f6e showmount -e IP\\Domain \u6765\u67e5\u770b Centos \u4e3b\u673a\u7684\u5171\u4eab\u72b6\u6001 $ sudo mount -o rw -t nfs 192.168 . 100.222 :/var/www /private/nfs \u6ce8:\u5982\u679c\u9700\u8981\u5199\u6743\u9650\uff0c\u5728sever\u7684\u76f8\u5e94\u76ee\u5f55\u4e0a\u6267\u884c chmod o+w \u6458\u81ea\u300ehttp://www.tuicool.com/articles/Av6Nn2\u300f","title":"Mac \u4f7f\u7528 NFS \u8fde\u63a5 Centos \u4e0a\u7684\u5171\u4eab\u6587\u4ef6\u5939"},{"location":"UTILITIES/2016-12-13-mac-%25e9%2587%258d%25e5%2590%25af-finder.html/","tags":[],"text":"\u91cd\u542fFinder: \u65b9\u6cd5\u662f\u6309\u4f4fOption\u952e\uff0c\u300e\u5355\u51fbDock\u4e0a\u7684Finder\u56fe\u6807\u4e0d\u653e\uff0c\u5927\u69822\u79d2\u540e\u300f(\u6216\u53cc\u6307\u70b9\u89e6/\u9f20\u6807\u53f3\u952e)\u5c06\u5728Finder\u56fe\u6807\u4e0a\u51fa\u73b0\u4e00\u4e2a\u83dc\u5355\uff0c\u5355\u51fb\u300e\u91cd\u65b0\u542f\u52a8\u300f see more: http://blog.csdn.net/aaa1117a8w5s6d/article/details/8589259","title":"mac \u91cd\u542f finder"},{"location":"UTILITIES/2016-12-17-linux-%25e6%258c%2582%25e8%25bd%25bd-ntfs.html/","tags":[],"text":"# yum install ntfs-3g # mount -t ntfs-3g /dev/sdb2 /mnt/_odata_dev/","title":"linux \u6302\u8f7d ntfs"},{"location":"UTILITIES/2017-01-01-ubuntu-linuxmint%25e4%25b8%258b%25e8%2587%25aa%25e5%258a%25a8%25e5%25ae%2589%25e8%25a3%2585%25e9%259b%2585%25e9%25bb%2591%25e5%25ad%2597%25e4%25bd%2593%25e8%2584%259a%25e6%259c%25ac-%25e8%25bd%25ac.html/","tags":["ubuntu","linuxmint"],"text":"\u5b89\u88c5ubuntu\u7684\u65f6\u5019\uff0c\u603b\u662f\u9700\u8981\u7f8e\u5316\u4e2d\u6587\u5b57\u4f53\u3002 \u5fae\u8f6f\u96c5\u9ed1\u662f\u6bd4\u8f83\u597d\u7684\u4e2d\u6587\u5b57\u4f53\u7f8e\u5316\u65b9\u6848\u3002 \u4e0b\u9762\u7684\u8fd9\u4e2a\u811a\u672c\u53ef\u4ee5\u5e2e\u52a9\u5927\u5bb6\u81ea\u52a8\u6765\u7f8e\u5316\u4e2d\u6587\u5b57\u4f53\u3002 wget -O get-fonts.sh.zip http://files.cnblogs.com/DengYangjun/get-fonts.sh.zip unzip -o get-fonts.sh.zip 1>/dev/null chmod a+x get-fonts.sh ./get-fonts.sh \u5220\u9664\u4e0b\u8f7d\u7684\u5b57\u4f53\u5b89\u88c5\u811a\u672c\u6587\u4ef6\uff1a rm get-fonts.sh get-fonts.sh.zip 2>/dev/null \u6062\u590d\u4ee5\u524d\u7684\u5b57\u4f53\u8bbe\u7f6e\uff1a cd /etc/fonts/conf.avail sudo mv 51-local.conf.old 51-local.conf 2>/dev/null sudo mv 69-language-selector-zh-cn.conf.old 69-language-selector-zh-cn.conf 2>/dev/null sudo rm -f -r /usr/share/fonts/truetype/myfonts 2>/dev/null cd - \u4fee\u6b63\u8bb0\u5f55\uff1a 1.\u6dfb\u52a0\u4e86\u6700\u65b0\u7684Windows 7\u7684\u5fae\u8f6f\u96c5\u9ed1\u5b57\u4f53\u3002\uff08\u9644\u4ef6\u5927\u5c0f\u9650\u5236\uff0c\u672a\u5b9e\u73b0\uff09 2.\u4fee\u6b63\u4e86CRT\u6e32\u67d3\u7684\u914d\u7f6e\u6587\u4ef6\u7684\u94fe\u63a5\u9519\u8bef\u3002 3.\u6dfb\u52a0\u5b57\u4f53\uff1aAgency FB 4.\u6dfb\u52a0\u5b57\u4f53\u8bbe\u7f6e\u6062\u590d\u529f\u80fd\u3002 via http://blog.prosight.me/blogs/722/ \u8f6c\u81ea\uff1a http://blog.sae.sina.com.cn/archives/1280 \u9644\uff1a get-fonts.sh #!/bin/bash #dir define myfonts_dir=/usr/share/fonts/truetype/myfonts remote_dir=http://files.cnblogs.com/DengYangjun #fonts define monaco=monaco-linux.ttf lucida=lucida-console.ttf msyh=msyh.ttf msyhbd=msyhbd.ttf agencyr=agencyr.ttf agencyrb=agencyrb.ttf screen=0 sudo mkdir $myfonts_dir 2>/dev/null echo \"Ubuntu\u5b57\u4f53\u81ea\u52a8\u5b89\u88c5\u5de5\u5177\" echo \"(C)2008-2009 Deng.Yangjun@Gmail.com\" echo \"\u5b89\u88c5\u7b49\u5bbd\u82f1\u6587\u53f0\u5b57\u4f53:Monaco\" wget -O $monaco.zip $remote_dir/$monaco.zip unzip -o $monaco.zip 1>/dev/null sudo mv $monaco $myfonts_dir rm $monaco.zip echo \"\u5b89\u88c5\u7b49\u5bbd\u82f1\u6587\u5b57\u4f53:Lucida Console\" wget -O $lucida.zip $remote_dir/$lucida.zip unzip -o $lucida.zip 1>/dev/null sudo mv $lucida $myfonts_dir rm $lucida.zip echo \"\u5b89\u88c5\u82f1\u6587\u5b57\u4f53:Agency FB\" wget -O $agencyr.zip $remote_dir/$agencyr.zip unzip -o $agencyr.zip 1>/dev/null sudo mv $agencyr $myfonts_dir rm $agencyr.zip wget -O $agencyrb.zip $remote_dir/$agencyrb.zip unzip -o $agencyrb.zip 1>/dev/null sudo mv $agencyrb $myfonts_dir rm $agencyrb.zip echo \"\u5b89\u88c5\u5b57\u4f53:\u5fae\u8f6f\u96c5\u9ed1\" wget -O $msyh.zip $remote_dir/$msyh.zip unzip -o $msyh.zip 1>/dev/null sudo mv $msyh $myfonts_dir rm $msyh.zip wget -O $msyhbd.zip $remote_dir/$msyhbd.zip unzip -o $msyhbd.zip 1>/dev/null sudo mv $msyhbd $myfonts_dir rm $msyhbd.zip #Ubuntu 7.10 #wget http://www.cnblogs.com/Files/DengYangjun/language-selector.conf.zip #unzip -o language-selector.conf.zip #sudo mv language-selector.conf /etc/fonts #rm language-selector.conf.zip #Ubuntu 8.04 echo \"\u8bf7\u9009\u62e9\u663e\u793a\u5668\u7c7b\u578b(1-2)\uff1a1-LED 2-CRT\" read screen case $screen in 1) wget -O local.conf.zip $remote_dir/local.conf.led.zip ;; 2) wget -O local.conf.zip $remote_dir/local.conf.crt.zip ;; ?) echo \"\u65e0\u6548\u9009\u62e9\uff0c\u9000\u51fa\u5b89\u88c5\uff0c\u5b89\u88c5\u672a\u5b8c\u6210\u3002\" exit 1; esac unzip -o local.conf.zip 1>/dev/null sudo mv /etc/fonts/conf.avail/51-local.conf /etc/fonts/conf.avail/51-local.conf.old sudo mv local.conf /etc/fonts/conf.avail/51-local.conf rm local.conf.zip cd /etc/fonts/conf.avail sudo mv 69-language-selector-zh-cn.conf 69-language-selector-zh-cn.conf.old 2>/dev/null echo \"\u8bf7\u7a0d\u7b49\uff0c\u6b63\u5728\u5237\u65b0\u7cfb\u7edf\u5b57\u4f53...\" cd $myfonts_dir sudo chmod 555 * sudo mkfontscale 1>/dev/null sudo mkfontdir 1>/dev/null sudo fc-cache -v 1>/dev/null echo \"\u5b89\u88c5\u5b57\u4f53\u7ed3\u675f\uff0c\u8c22\u8c22\u4f7f\u7528\u3002\u8bf7\u9000\u51faX-Server\uff0c\u91cd\u65b0\u767b\u5f55\uff0c\u67e5\u770b\u5b57\u4f53\u6548\u679c\u3002\" agencyr-ttf agencyrb-ttf local-conf lucida-console-ttf monaco-linux-ttf msyh-ttf msyhbd-ttf","title":"ubuntu linuxmint\u4e0b\u81ea\u52a8\u5b89\u88c5\u96c5\u9ed1\u5b57\u4f53\u811a\u672c -- \u8f6c"},{"location":"UTILITIES/2017-05-08-osx%25e7%25a6%2581%25e6%25ad%25a2mobilebackups%25e7%2589%25b9%25e6%2580%25a7timemachine%25e6%259c%25ac%25e5%259c%25b0%25e5%25a4%2587%25e4%25bb%25bd.html/","tags":[],"text":"MobileBackups\uff0c\u5373OS X\u4e0aTimeMachine\u7684\u672c\u5730\u5907\u4efd\u3002\u4f1a\u5360\u7528\u975e\u5e38\u5927\u5f97\u7a7a\u95f4\u3002 \u6211\u5728\u67e5\u770b\u786c\u76d8\u4f7f\u7528\u60c5\u51b5\u7684\u65f6\u5019\uff0c\u53d1\u73b0\u76ee\u5f55/Volumes/MobileBackups\u5360\u7528\u4e8620\u591aG\u7a7a\u95f4\uff0c\u8fd9\u662fTimeMachine\u7528\u6765\u505a\u5907\u4efd\u7684\u3002 \u6839\u636e\u5b98\u7f51\u7684\u4ecb\u7ecd\uff0c\u5728OS 10.7\u53ca\u4ee5\u540e\u7684\u7248\u672c\u4e2d\uff0c\u5f53\u4f60\u6ca1\u6709\u63d2\u5165\u5176\u4ed6\u786c\u76d8\u4f5c\u4e3aTimeMachine\u7684\u5907\u4efd\u786c\u76d8\u65f6\uff0cTimeMachine\u4f1a\u81ea\u52a8\u521b\u5efa/Volumes/MobileBackups\u7528\u4f5c\u5907\u4efd\u3002\u56e0\u4e3a\u5360\u7528\u7684\u7a7a\u95f4\u592a\u5927\u4e86\uff0c\u6240\u4ee5\u4e0d\u5f97\u4e0d\u7981\u6b62TimeMachine\u7684\u8fd9\u79cd\u884c\u4e3a\u3002 \u5728\u7ec8\u7aef\u4e0b\u6267\u884c\u547d\u4ee4\uff1a sudo tmutil disablelocal \u5c31\u53ef\u4ee5\u5173\u95ed\u672c\u5730\u5907\u4efd\u4e86\u3002\u4e0d\u8fc7\u8bb0\u5f97\u8981\u53ca\u65f6\u7684\u4f7f\u7528TimeMachine\u5907\u4efd\u8d44\u6599\u3002 \u6458\u81ea http://blog.xinspace.space/2015/08/14/osx-disable-mobilebackups/","title":"OSX\u7981\u6b62MobileBackups\u7279\u6027(TimeMachine\u672c\u5730\u5907\u4efd)"},{"location":"UTILITIES/2017-05-20-linux%25e7%25b3%25bb%25e7%25bb%259f%25e8%25ae%25be%25e7%25bd%25aeswap%25e5%2588%2586%25e5%258c%25ba%25e7%259a%2584%25e5%25a4%25a7%25e5%25b0%258f%25e4%25b8%25a4%25e7%25a7%258d%25e6%2596%25b9%25e6%25b3%2595.html/","tags":["linux","swap"],"text":"\u5728\u5b89\u88c5\u5b8cLinux\u7cfb\u7edf\u540e\uff0cswap\u5206\u533a\u592a\u5c0f\u600e\u4e48\u529e\uff0c\u600e\u4e48\u53ef\u4ee5\u6269\u5927Swap\u5206\u533a\u5462\uff1f\u6709\u4e24\u4e2a\u529e\u6cd5\uff0c\u4e00\u4e2a\u662f\u4ece\u65b0\u5efa\u7acbswap\u5206\u533a\uff0c\u4e00\u4e2a\u662f\u589e\u52a0swap\u5206\u533a\u3002\u4e0b\u9762\u4ecb\u7ecd\u8fd9\u4e24\u79cd\u65b9\u6cd5\uff1a \u7b2c\u4e00\u60a8\u5fc5\u987b\u6709root\u6743\u9650\uff0c\u8fc7\u7a0b\u4e2d\u4e00\u5b9a\u8981\u5f88\u5c0f\u5fc3\uff0c\u4e00\u4e0d\u5c0f\u5fc3\u5c31\u7834\u574f\u4e86\u6574\u4e2a\u786c\u76d8\u7684\u6570\u636e\uff0c\u6267\u884c\u4e0b\u9762\u7684\u8fc7\u7a0b\u4e4b\u524d\u60a8\u9700\u8981\u4e09\u601d\u800c\u884c\uff0c\u9519\u8bef\u64cd\u4f5c\u540e\u7684\u540e\u679c\u7531\u6267\u884c\u8005\u81ea\u5df1\u627f\u62c5\u3002 \u65b9\u6cd5\u4e00\uff1a\u65b0\u5efaswap\u5206\u533a\uff08\u614e\u7528\uff09 \u4ee5root\u8eab\u4efd\u8fdb\u5165\u63a7\u5236\u53f0\uff0c\u8f93\u5165 # swapoff -a #\u505c\u6b62\u4ea4\u6362\u5206\u533a \u7528fdisk\u547d\u4ee4\u52a0swap\u5206\u533a\u7684\u76d8\u7b26\uff0c\uff08\u4f8b\uff1a# fdisk /dev/sdb\uff09\u5254\u9664swap\u5206\u533a\uff0c\u8f93\u5165d\u5220\u9664swap\u5206\u533a\uff0c\u7136\u540e\u518dn\u6dfb\u52a0\u5206\u533a\uff08\u6dfb\u52a0\u65f6\u786c\u76d8\u5fc5\u987b\u8981\u6709\u53ef\u7528\u7a7a\u95f4\uff0c\u7136\u540e\u518d\u7528t\u5c06\u65b0\u6dfb\u7684\u5206\u533aid\u6539\u4e3a82\uff08linux swap\u7c7b\u578b\uff09\uff0c\u6700\u540e\u7528w\u5c06\u64cd\u4f5c\u5b9e\u9645\u5199\u5165\u786c\u76d8\uff08\u6ca1\u7528w\u4e4b\u524d\u7684\u64cd\u4f5c\u662f\u65e0\u6548\u7684\uff09\u3002 # mkswap /dev/sdb2 #\u683c\u5f0f\u5316swap\u5206\u533a\uff0c\u8fd9\u91cc\u7684sdb2\u8981\u770b\u60a8\u52a0\u5b8c\u540ep\u547d\u4ee4\u663e\u793a\u7684\u5b9e\u9645\u5206\u533a\u8bbe\u5907\u540d # swapon /dev/sdb2 #\u542f\u52a8\u65b0\u7684swap\u5206\u533a \u4e3a\u4e86\u8ba9\u7cfb\u7edf\u542f\u52a8\u65f6\u80fd\u81ea\u52a8\u542f\u7528\u4ea4\u6362\u5206\u533a\uff0c\u53ef\u4ee5\u7f16\u8f91/etc/fstab,\u52a0\u5165\u4e0b\u9762\u4e00\u884c /dev/sdb2 swap swap defaults 0 0 6.\u5b8c\u6210 \u65b9\u6cd5\u4e8c\uff1a\u589e\u52a0Swap\u5206\u533a 1.\u521b\u5efa\u4ea4\u6362\u5206\u533a\u7684\u6587\u4ef6:\u589e\u52a01G\u5927\u5c0f\u7684\u4ea4\u6362\u5206\u533a\uff0c\u5219\u547d\u4ee4\u5199\u6cd5\u5982\u4e0b\uff0c\u5176\u4e2d\u7684 count \u7b49\u4e8e\u60f3\u8981\u7684\u5757\u5927\u5c0f\u3002 # dd if=/dev/zero of=/home/swapfile bs=1M count=1024 2.\u8bbe\u7f6e\u4ea4\u6362\u5206\u533a\u6587\u4ef6: # mkswap /home/swapfile #\u5efa\u7acbswap\u7684\u6587\u4ef6\u7cfb\u7edf 3.\u7acb\u5373\u542f\u7528\u4ea4\u6362\u5206\u533a\u6587\u4ef6: # swapon /home/swapfile #\u542f\u7528swap\u6587\u4ef6 4.\u4f7f\u7cfb\u7edf\u5f00\u673a\u65f6\u81ea\u542f\u7528\uff0c\u5728\u6587\u4ef6/etc/fstab\u4e2d\u6dfb\u52a0\u4e00\u884c\uff1a /home/swapfile swap swap defaults 0 0 5.\u5b8c\u6210 \u672c\u6587\u51fa\u81ea \u201c hancj \u201d \u535a\u5ba2\uff0c\u8bf7\u52a1\u5fc5\u4fdd\u7559\u6b64\u51fa\u5904 http://hancj.blog.51cto.com/89070/197915","title":"Linux\u7cfb\u7edf\u8bbe\u7f6eSwap\u5206\u533a\u7684\u5927\u5c0f(\u4e24\u79cd\u65b9\u6cd5)"},{"location":"UTILITIES/2017-05-27-%25e8%25a7%25a3%25e6%25b1%25balinux%25e7%25b3%25bb%25e7%25b5%25b1%25e7%259a%2584%25e4%25b8%25ad%25e6%2596%2587%25e8%25ae%258a%25e6%2588%2590%25e7%25b4%25b0%25e6%2598%258e%25e9%25ab%2594%25e6%2588%2596%25e6%2598%25af%25e6%25a8%2599%25e6%25a5%25b7%25e9%25ab%2594%25e7%259a%2584%25e5%2595%258f%25e9%25a1%258c.html/","tags":["linuxmint","\u5b57\u4f53","\u6977\u4f53"],"text":"\u65e5\u671f\uff1a 2016 \u5e74 6 \u6708 11 \u65e5 | \u4f5c\u8005\uff1a Magic Len \u8a31\u591a Linux\u767c\u884c\u7248 \u6703\u5167\u5efa\u5e7e\u500b\u4e2d\u6587 \u5b57\u578b \uff0c\u4ee5\u4fbf\u9047\u5230\u4e2d\u6587\u5b57\u7684\u6642\u5019\u53ef\u4ee5\u5957\u7528\uff0c\u800c\u61c9\u7528\u7a0b\u5f0f\u6216 \u7db2\u9801 \u4e5f\u5e38\u6703\u4ee5\u512a\u5148\u9806\u5e8f\u7684\u65b9\u5f0f\u53bb\u9078\u64c7\u4e2d\u6587\u5b57\u9ad4\u4f86\u5957\u7528\uff0c\u4f8b\u5982\u50cf\u662f \u5fae\u8edf \u6a19\u6977\u9ad4 \u7684\u300c AR PL UKai \u300d\uff0c\u6216\u662f\u50cf\u662f \u5fae\u8edf \u7d30\u660e\u9ad4 \u7684\u300c AR PL UMing \u300d\uff0c\u90fd\u662f\u5f88\u5e38\u898b\u7684\u9810\u8a2d \u5b57\u578b \u3002\u7b46\u8005\u7fd2\u6163\u4f7f\u7528 \u300cNoto Sans CJK TC\u300d\u548c\u300c\u6587\u6cc9\u9a5b\u5fae\u7c73\u9ed1\u300d \uff0c\u6240\u4ee5\u6703\u628a\u9019\u5169\u7a2e \u5b57\u578b \u8a2d\u5b9a\u70ba\u9810\u8a2d\u7684 \u5b57\u578b \uff0c\u4f46\u901a\u5e38\u90fd\u6703\u6709\u5c11\u90e8\u4efd\u8edf\u9ad4\u7a0b\u5f0f\u7684 \u5b57\u578b \u7121\u6cd5\u5957\u7528\u9810\u8a2d\u7684\u8a2d\u5b9a\uff0c\u800c\u662f\u81ea\u884c\u5957\u7528\u4e86\u300c AR PL UKai \u300d\u6216\u662f\u300c AR PL UMing \u300d\u9019\u5169\u7a2e\u919c\u919c\u7684\u50b3\u7d71\u5370\u5237\u5b57\u3002 \u70ba\u4e86\u756b\u9762\u7684\u7f8e\u89c0\uff0c\u7b46\u8005\u6703\u5c07\u300c AR PL UKai \u300d\u548c\u300c AR PL UMing \u300d\u9019\u5169\u500b \u5b57\u578b \u5f9e\u7cfb\u7d71\u4e2d\u79fb\u9664\u3002\u5982\u679c\u662f\u4f7f\u7528 Ubuntu \u6216\u662f\u57fa\u65bc Ubuntu \u7684 Linux\u767c\u884c\u7248 \u7684\u8a71\uff0c\u53ef\u4ee5\u76f4\u63a5\u5728\u7d42\u7aef\u6a5f\u8f38\u5165\u4ee5\u4e0b\u6307\u4ee4\u4f86\u79fb\u9664\u5b83\u5011\uff1a sudo apt-get remove fonts-arphic-ukai fonts-arphic-uming \u6458\u81ea\uff1ahttps://magiclen.org/linux-font-remove-kai/","title":"\u89e3\u6c7aLinux\u7cfb\u7d71\u7684\u4e2d\u6587\u8b8a\u6210\u7d30\u660e\u9ad4\u6216\u662f\u6a19\u6977\u9ad4\u7684\u554f\u984c"},{"location":"UTILITIES/2017-06-13-centos-7-%25e4%25b8%258b-ifconfig-command-not-found-%25e8%25a7%25a3%25e5%2586%25b3%25e5%258a%259e%25e6%25b3%2595.html/","tags":["centos","ifconfig","redhat","net-tools"],"text":"1. \u67e5\u770bifconfig\u547d\u4ee4\u662f\u5426\u5b58\u5728 ls /sbin/ifconfig \u662f\u5426\u5b58\u5728 2. \u5982\u679cifconfig\u547d\u4ee4\u5b58\u5728\uff0c\u67e5\u770b\u73af\u5883\u53d8\u91cf\u8bbe\u7f6e #echo $PATH \u5982\u679c\u73af\u5883\u53d8\u91cf\u4e2d\u6ca1\u6709\u5305\u542bifconfig\u547d\u4ee4\u7684\u8def\u5f84 \u4e34\u65f6\u4fee\u6539\u73af\u5883\u53d8\u91cf\uff1a\u5728shell\u4e2d\u8f93\u5165 $export PATH = $PATH :/sbin \u7136\u540e\u518d\u8f93\u5165ifconfig\u547d\u4ee4\u5373\u53ef\uff0c\u4f46\u662f\u8fd9\u53ea\u662f\u4e34\u65f6\u66f4\u6539\u4e86shell\u4e2d\u7684PATH\uff0c\u5982\u679c\u5173\u95edshell\uff0c\u5219\u4fee\u6539\u6d88\u5931\uff0c\u4e0b\u6b21\u8fd8\u9700\u8981\u91cd\u590d\u5982\u4e0a\u64cd\u4f5c \u6c38\u4e45\u4fee\u6539PATH\u53d8\u91cf\u4f7f\u4e4b\u5305\u542b/sbin\u8def\u5f84\uff1a \u6253\u5f00/etc/profile\u6587\u4ef6\uff0c\u5728\u5176\u4e2d\u8f93\u5165export PATH=$PATH:/sbin\uff0c\u4fdd\u5b58\u5e76\u91cd\u542f\u5373\u53ef\uff0c\u8fd9\u6837\u4e00\u6765\uff0cPATH\u8def\u5f84\u6c38\u4e45\u4fee\u6539\u6210\u529f\uff0c\u4ee5\u540e\u4efb\u4f55\u65f6\u5019\u53ea\u8f93\u5165ifconfig\u547d\u4ee4\u5373\u53ef 3. \u5982\u679cifconfig\u547d\u4ee4\u4e0d\u5b58\u5728 yum upgrade yum install net-tools \u6458\u81ea\uff1ahttps://my.oschina.net/u/1428349/blog/288708","title":"CentOS 7 \u4e0b ifconfig command not found \u89e3\u51b3\u529e\u6cd5"},{"location":"UTILITIES/2017-07-20-encrypt-file-with-openssl-rsa.html/","tags":["openssl","rsa","encrypt"],"text":"\u751f\u6210\u4e00\u4e2a\u5bc6\u94a5\uff1a openssl genrsa -out test.key 1024 \u8fd9\u91cc-out\u6307\u5b9a\u751f\u6210\u6587\u4ef6\u7684\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\u8fd9\u4e2a\u6587\u4ef6\u5305\u542b\u4e86 \u516c\u94a5\u548c\u5bc6\u94a5\u4e24\u90e8\u5206 \uff0c\u4e5f\u5c31\u662f\u8bf4\u8fd9\u4e2a\u6587\u4ef6\u5373\u53ef\u7528\u6765\u52a0\u5bc6\u4e5f\u53ef\u4ee5\u7528\u6765\u89e3\u5bc6\u3002\u540e\u9762\u76841024\u662f\u751f\u6210\u5bc6\u94a5\u7684\u957f\u5ea6\u3002 openssl\u53ef\u4ee5\u5c06\u8fd9\u4e2a\u6587\u4ef6\u4e2d\u7684\u516c\u94a5\u63d0\u53d6\u51fa\u6765\uff1a openssl rsa -in test.key -pubout -out test_pub.key -in\u6307\u5b9a\u8f93\u5165\u6587\u4ef6\uff0c-out\u6307\u5b9a\u63d0\u53d6\u751f\u6210\u516c\u94a5\u7684\u6587\u4ef6\u540d\u3002\u81f3\u6b64\uff0c\u6211\u4eec\u624b\u4e0a\u5c31\u6709\u4e86\u4e00\u4e2a\u516c\u94a5\uff0c\u4e00\u4e2a\u79c1\u94a5\uff08\u5305\u542b\u516c\u94a5\uff09\u3002\u73b0\u5728\u53ef\u4ee5\u5c06\u7528\u516c\u94a5\u6765\u52a0\u5bc6\u6587\u4ef6\u4e86\u3002 \u6211\u5728\u76ee\u5f55\u4e2d\u521b\u5efa\u4e00\u4e2ahello\u7684\u6587\u672c\u6587\u4ef6\uff0c\u7136\u540e\u5229\u7528\u6b64\u524d \u751f\u6210\u7684\u516c\u94a5\u52a0\u5bc6\u6587\u4ef6 \uff1a openssl rsautl -encrypt -in hello -inkey test_pub.key -pubin -out hello.en -in\u6307\u5b9a\u8981\u52a0\u5bc6\u7684\u6587\u4ef6\uff0c-inkey\u6307\u5b9a\u5bc6\u94a5\uff0c-pubin\u8868\u660e\u662f\u7528\u7eaf\u516c\u94a5\u6587\u4ef6\u52a0\u5bc6\uff0c-out\u4e3a\u52a0\u5bc6\u540e\u7684\u6587\u4ef6\u3002 \u89e3\u5bc6\u6587\u4ef6\uff1a openssl rsautl -decrypt -in hello.en -inkey test.key -out hello.de -in\u6307\u5b9a\u88ab\u52a0\u5bc6\u7684\u6587\u4ef6\uff0c-inkey\u6307\u5b9a\u79c1\u94a5\u6587\u4ef6\uff0c-out\u4e3a\u89e3\u5bc6\u540e\u7684\u6587\u4ef6\u3002 Source: https://www.cnblogs.com/alittlebitcool/archive/2011/09/22/2185418.html","title":"Encrypt file with openssl RSA"},{"location":"UTILITIES/2017-10-02-%25e5%259c%25a8mac%25e4%25b8%258a%25e5%2588%25b6%25e4%25bd%259c-u%25e7%259b%2598-%25e5%2590%25af%25e5%258a%25a8%25e7%259b%2598/","tags":["linux","image","dmg","iso"],"text":"1. \u7528hdiutil\u5c06ISO\u8f6cdmg \u00b6 $ hdiutil convert -format UDRW -o CentOS-7-x86_64-DVD-1804 CentOS-7-x86_64-DVD-1804.iso Reading Master Boot Record ( MBR : 0 ) ... Reading CentOS 7 x86_64 & nbsp ; & nbsp ; & nbsp ; & nbsp ; & nbsp ; & nbsp ; & nbsp ; & nbsp ; & nbsp ; ( Apple_ISO : 1 ) ... Reading & nbsp ; ( Type EF : 2 ) ... Reading CentOS 7 x86_64 & nbsp ; & nbsp ; & nbsp ; & nbsp ; & nbsp ; & nbsp ; & nbsp ; & nbsp ; & nbsp ; ( Apple_ISO : 3 ) ... ......................................................................................... Elapsed Time: & nbsp ; 2m 55 .451s Speed: 24 .3Mbytes/sec Savings: 0 .0% created: /Volumes/data/software/CentOS-7-x86_64-DVD-1804.dmg \u8fd9\u4e2a\u65f6\u5019\u6211\u4eec\u5c31\u5f97\u5230\u4e86\u4e00\u4e2a.dmg\u786c\u76d8\u955c\u50cf\u6587\u4ef6\u3002 2. Unmount U\u76d8 \u00b6 \u67e5\u770bU\u76d8\uff0c\u8def\u5f84\u901a\u5e38\u4e3a/dev/diskN diskutil list Unmount U\u76d8 $ diskutil unmountDisk /dev/disk4 Unmount of all volumes on disk4 was successful 3. \u62f7\u5165\u955c\u50cf \u00b6 $ sudo dd if = CentOS-7-x86_64-DVD-1804.dmg of = /dev/disk4 bs = 1m 4262 +1 records in 4262 +1 records out 4469153792 bytes transferred in 2602 .575198 secs ( 1717204 bytes/sec ) 4. \u6700\u540e\u5f39\u51faU\u76d8 \u00b6 diskutil eject /dev/disk4","title":"\u5728mac\u4e0a\u5236\u4f5c U\u76d8 \u542f\u52a8\u76d8"},{"location":"UTILITIES/2017-10-02-%25e5%259c%25a8mac%25e4%25b8%258a%25e5%2588%25b6%25e4%25bd%259c-u%25e7%259b%2598-%25e5%2590%25af%25e5%258a%25a8%25e7%259b%2598/#1-hdiutilisodmg","text":"$ hdiutil convert -format UDRW -o CentOS-7-x86_64-DVD-1804 CentOS-7-x86_64-DVD-1804.iso Reading Master Boot Record ( MBR : 0 ) ... Reading CentOS 7 x86_64 & nbsp ; & nbsp ; & nbsp ; & nbsp ; & nbsp ; & nbsp ; & nbsp ; & nbsp ; & nbsp ; ( Apple_ISO : 1 ) ... Reading & nbsp ; ( Type EF : 2 ) ... Reading CentOS 7 x86_64 & nbsp ; & nbsp ; & nbsp ; & nbsp ; & nbsp ; & nbsp ; & nbsp ; & nbsp ; & nbsp ; ( Apple_ISO : 3 ) ... ......................................................................................... Elapsed Time: & nbsp ; 2m 55 .451s Speed: 24 .3Mbytes/sec Savings: 0 .0% created: /Volumes/data/software/CentOS-7-x86_64-DVD-1804.dmg \u8fd9\u4e2a\u65f6\u5019\u6211\u4eec\u5c31\u5f97\u5230\u4e86\u4e00\u4e2a.dmg\u786c\u76d8\u955c\u50cf\u6587\u4ef6\u3002","title":"1. \u7528hdiutil\u5c06ISO\u8f6cdmg"},{"location":"UTILITIES/2017-10-02-%25e5%259c%25a8mac%25e4%25b8%258a%25e5%2588%25b6%25e4%25bd%259c-u%25e7%259b%2598-%25e5%2590%25af%25e5%258a%25a8%25e7%259b%2598/#2-unmount-u","text":"\u67e5\u770bU\u76d8\uff0c\u8def\u5f84\u901a\u5e38\u4e3a/dev/diskN diskutil list Unmount U\u76d8 $ diskutil unmountDisk /dev/disk4 Unmount of all volumes on disk4 was successful","title":"2. Unmount U\u76d8"},{"location":"UTILITIES/2017-10-02-%25e5%259c%25a8mac%25e4%25b8%258a%25e5%2588%25b6%25e4%25bd%259c-u%25e7%259b%2598-%25e5%2590%25af%25e5%258a%25a8%25e7%259b%2598/#3","text":"$ sudo dd if = CentOS-7-x86_64-DVD-1804.dmg of = /dev/disk4 bs = 1m 4262 +1 records in 4262 +1 records out 4469153792 bytes transferred in 2602 .575198 secs ( 1717204 bytes/sec )","title":"3. \u62f7\u5165\u955c\u50cf"},{"location":"UTILITIES/2017-10-02-%25e5%259c%25a8mac%25e4%25b8%258a%25e5%2588%25b6%25e4%25bd%259c-u%25e7%259b%2598-%25e5%2590%25af%25e5%258a%25a8%25e7%259b%2598/#4-u","text":"diskutil eject /dev/disk4","title":"4. \u6700\u540e\u5f39\u51faU\u76d8"},{"location":"UTILITIES/2017-10-02-installing-fcitx-chinese-ime-arch-linux.html/","tags":["linux","arch"],"text":"Source : http://www.fanz.io/2015/10/10/fcitx-notes.html Oct 10, 2015 By Fan Zhang Arch Linux , Tools , Fcitx is a popular Chinese input method engine (IME) suggested by ArchWiki. Fcitx is awesome but every time I (re)install Arch Linux on my boxes, I had trouble getting fcitx to work out of the box -- pacman -Syu fcitx-im doesn't give you a working IME. I guess a major facet making the installation and configuration so tricky is that fcitx doesn't provide an all-in-one configuration tool (I guess for good reason though), so as an user you will have to manually put various configuration snippets at several different places. Moreover, before getting all of them right, fcitx just won't work, which makes debugging even more frustrating. So, this short note serves as a memo for myself and hopefully can help others run into the similar troubles. Prerequisites Before installing fcitx , you'll need proper fonts installed. ArchWiki (e.g. this page ) has a comprehensive guidance for doing this. Installation Once the necessary fonts are correctly installed, which can be verified by checking if your browser can render Chinese characters correctly when you go to renren.com or so on, we can proceed to the installation of fcitx. Okay, basically there are three pieces of software to be installed: the fcitx itself, one or more IMEs of your choices (e.g. I like fcitx-googlepinyin ) and a couple of input method engines for various toolkits (gtk2, gtk3, etc.). For convenience, they can be installed as a bundle by group fcitx-im . I also installed a GUI configuration tool ( fcitx-configtool ), which is not mandatory but makes my life a little bit easier. pacman -Syu fcitx fcitx-googlepinyin fcitx-im fcitx-configtool Configuration As I said, there are multiple pieces of configuration to be tweaked. Before getting all of them right, fcitx will not work. First, you need to register those input method modules before using them. Depending on you choice of display manager, add the following lines to your startup script file to. Use .xprofile if you are using KDM, GDM, LightDM or SDDM. Use .xinitrc if you are using startx or Slim. # .xprofile or .xinitrc export GTK_IM_MODULE = fcitx export QT_IM_MODULE = fcitx export XMODIFIERS = @im = fcitx Second, if your locale is en_US.UTF-8 , IME for Chinese will not be activated by default. You'll get a notice by fcitx-dianose command like this: ## Input Methods: 1. Found 1 enabled input methods: fcitx-keyboard-us 2. Default input methods: **You only have one input method enabled, please add a keyboard input method as the first one and your main input method as the second one.** In my case, I managed to add google-pinyin using fcitx-configtool . Simply launch the GUI program and add input methods as you like and re-login. Use fcitx Believe it or not, figuring out how to switch to Chinese input mode consumed the most of my time in this process. One correct way of doing this is to press Ctrl-Space while focusing on an input field. If a little widget shows up, you're all set. Otherwise, which is highly likely, please proceed to the next section :) Troubleshooting Fcitx provided nice tools for troubleshooting. However, before getting to the correct way of debugging, please be advised not to fall into the following pitfall as I did: If you're using a desktop environment that happens to a system tray, don't expect an icon there for fcitx (although many other IMEs do have system tray icons). For unknown reasons, fcitx doesn't display a system tray icon in my case, which confused me a lot because I expect that icon to appear to indicate fcitx is working properly. Long story short: never try to find a system tray icon. The most adorable thing from an user's point of view is fcitx-diagnose . This is a small diagnose program coming with fcitx package, which does not only provide informative diagnosis but also quick fix tips. Whenever you're not sure if you're doing things right (e.g. when you can't find a system tray icon), just run fcitx-diagnose and check out the red bold errors. Resources I found ArchWiki page on fcitx super informative.","title":"Installing fcitx (a Chinese IME) on Arch Linux"},{"location":"UTILITIES/2017-10-08-install-wps-office-manjaro-linux.html/","tags":["linux","wps","office","manjaro"],"text":"It's easy, just open terminal, input following commands: sudo pacman -S --needed base-devel sudo pacman -S yaourt yaourt -S wps-office ttf-wps-fonts","title":"Install wps office on Manjaro Linux"},{"location":"UTILITIES/2017-12-15-remote-x11-gui-linuxunix.html/","tags":["linux","X11"],"text":"Source : https://www.redwireservices.com/remote-x11-for-linux-unix The Problem One of my most feared questions from end users is \u201chow can I interact with an X11 GUI application on our remote Linux system if I have no access to the physical console, X11 isn\u2019t installed, and there is no VNC access?\u201d After hearing this many times at one site, I wrote a script to automate the server side process, but even that does not address the whole story. I\u2019m writing this post as a quick reference when I field this question in the future, and I hope it helps you, too. The problem is that most system administrators do not install X11, Xorg, or other GUI interfaces on Linux and Unix systems as this introduces more packages to manage and patch, more security bugs to fix/mitigate, and a larger install footprint (more used space). That last point may seem moot today, but with many environments deploying hundreds of virtual machines, 200-400MB of extra space per VM can really add up quickly (see my latest presentation on Open Source Data Deduplication for more ideas on saving space in these environments). If you consider the overhead of installing a modern desktop/windowing system such as Gnome or KDE , it could easily more than double the data size footprint of a Linux server. OK, many environments don\u2019t install the Linux/Unix GUI bits (also known as X11 or Xorg server), so who cares, I can just install everything via the command line, right? Well, yes, for the most part you can just install applications via the command line and forget this whole issue. However, there are a few vendor applications, notably including Oracle Database and Application Server products, that are difficult if not impossible to install without a GUI. The Solution The modern solution to the problem stated above is to tunnel X11 traffic over ssh (securely), and display it on your workstation, whether it be Windows, Mac OS X, or Linux. For sake of helping the most folks, we\u2019ll focus on Windows workstations here, but Linux and Mac OS X should work with only the server side changes we write here (just connect with the command line ssh -Y your_username@your_servername.com ). In certain circumstances, it may be advantageous to setup a VNC server to accomplish the same thing, but that requires more of X11 and an windowing environment be configured on the server side, and we\u2019d like to avoid as many server side changes as possible, as many users won\u2019t have access to make these changes themselves. PROCESS OVERVIEW In order to obtain the ability to interact with an X11 GUI remotely, we will follow these general steps: Ensure that the foundational X11 packages are installed Ensure that OpenSSH server is configured to forward X11 connections Configure a local X11 server on our workstation Configure our ssh application to forward X11 requests Test with a simple application Configured authentication if user changes are needed Move on with the task at hand 1) ENSURE THAT THE FOUNDATIONAL X11 PACKAGES ARE INSTALLED In order to use remote X11, you must have a few X11 packages installed on the server. In many cases these are already installed, but you may have to ask your System Administrator to install them for you, it\u2019s easy: RHEL/CentOS/Fedora (xterm is optional, but beneficial for testing): sudo yum install xorg-x11-xauth xterm sudo yum install libXext.x86_64 sudo yum install libXrender.x86_64 sudo yum install libXtst.x86_64 2) ENSURE THAT OPENSSH SERVER IS CONFIGURED TO FORWARD X11 CONNECTIONS On RHEL and related RedHat based servers, the file to check is /etc/ssh/sshd_config. Review this file for the following line: X11Forwarding yes If that line is preceded by a comment ( # ) or is set to no , update the file to match the above, and restart your ssh server daemon (be careful here \u2014 if you made an error you may lock yourself out of the server). sudo /etc/init.d/sshd restart 3) CONFIGURE A LOCAL X11 SERVER ON YOUR WORKSTATION Next we need to install and configure a local X11 server, Xming or Cygwin/X are popular Click Xming to start the Xming X11 Server on your Desktop/Workstation free choices for Windows. Simply download and follow the install instructions for these packages, Xming is by far easier to setup for beginners. After the install is complete, and you\u2019ve rebooted your workstation/desktop (if requested), start the X11 server application from the start menu. 4) CONFIGURE OUR SSH APPLICATION TO FORWARD X11 REQUESTS Next, we need to ensure that our ssh client is configured to forward X11 requests from the server. If you are using Cygwin/X, a Mac, or a Linux desktop, simple open up a terminal and preface your ssh command with -Y , for example: ssh -Y your_username@your_server.your_domain.com That will tell SSH to forward all X11 requests to your local desktop. For Windows, the most popular client is PuTTY . To achieve the same result in PuTTY, load the profile of the server you wish to connect to, or simply fill out the connection details. Next expand the Connection and SSH options on the left hand side. Under SSH and then X11, ensure that Enable X11 Forwarding is checked. PuTTY Configuration Window Show X11 Forwarding Enabled. Finally, click the Open button to connect to the remote server. 5) TEST WITH A SIMPLE APPLICATION If everything has gone according to plan you now have a server configured to allow X11 connections, an ssh client configured likewise, and you are ready to test. When connecting to the remote server (last step in part 4 above), you may see a message like this: /usr/bin/xauth: creating new authority file /home/ec2-user/.Xauthority This is a normal message, and in fact it tells us that part of our changes are working! This file contains an authentication token required to connect with the X11 server. Now to test, it\u2019s easy, just enter this command on the remote ssh session: xterm Wait just a few seconds depending on your internet/network connection speed, and you should see the following. xterm displayed on Windows from a remote Linux Server If you see something similar, congratulations! Remote X11 connections are working! 6) CONFIGURED AUTHENTICATION IF USER CHANGES ARE NEEDED X11 forwarding is working, great! These days, however, users are often not allowed to log in as root, which is great for security, but adds yet another step to our process. In step 5 we ran xterm as ourselves, which validates our setup is proper. Try running the same command as another user, though, via sudo and you\u2019ll likely see an error like the following. X11 Error from Improper Xauth Configuration The problem here is that a .Xauthority file is created automatically at log in time for our user, allowing our user access to our local X11 server (on our desktop). However, when root tries to access this connection it is denied without the proper permissions. To work around this, simply copy the .Xauthority file from your user directory to the user you want to work with (root for example). Note that this should be done from your user account, not as root: sudo cp ~/.Xauthority ~root/ sudo /bin/chown root ~root/.Xauthority Try running xterm again as root, it should work. sudo xterm 7) MOVE ON WITH THE TASK AT HAND There you have it, now that you can login remotely and still access a GUI as any user, you can move on to installing your GUI centric application such as Oracle. sudo cp ~/.Xauthority ~oracle/ sudo /bin/chown oracle ~oracle/.Xauthority sudo su - oracle ./runInstaller Enjoy! Gotchas When installing or configuring an application, like those from Oracle, keep in mind that a break in your internet connection or other problems with your link may cause the remote program to be closed! So while it may be tempting to let an X11 process run overnight, you may have better results sticking around until the process completes. If your installer/application stops to ask you a question and your link does fail, you will likely lose all the work completed to that point and have to start all over again. Save early, save often, as they say. Conclusion If this was helpful, please drop us a line at info at redwireservices.com, @RedWireServices on Twitter, or using the contact page. If you have additional tips to add, please add a comment below and I will update the post accordingly to help as many as possible. Finally, if you or your company are in need of IT disaster recovery planning , backup system assistance , storage , or archival help , give us a ring at (206) 829-8621 .","title":"Remote X11 GUI For Linux/Unix"},{"location":"UTILITIES/2017-12-23-encrypt-large-file-openssl-using-public-key.html/","tags":["openssl","encrypt"],"text":"See: https://stackoverflow.com/questions/7143514/how-to-encrypt-a-large-file-in-openssl-using-public-key Generate a symmetric key because you can encrypt large files with it openssl rand -base64 32 > key.bin Encrypt the large file using the symmetric key openssl enc -aes-256-cbc -salt -in myLargeFile.xml \\ -out myLargeFile.xml.enc -pass file:./key.bin Encrypt the symmetric key so you can safely send it to the other person openssl rsautl -encrypt -inkey public.pem -pubin -in key.bin -out key.bin.enc Destroy the un-encrypted symmetric key so nobody finds it shred -u key.bin or: gshred -u key.bin At this point, you send the encrypted symmetric key ( key.bin.enc ) and the encrypted large file ( myLargeFile.xml.enc ) to the other person The other person can then decrypt the symmetric key with their private key using openssl rsautl -decrypt -inkey private.pem -in key.bin.enc -out key.bin Now they can use the symmetric key to decrypt the file openssl enc -d -aes-256-cbc -in myLargeFile.xml.enc \\ -out myLargeFile.xml -pass file:./key.bin And you're done. The other person has the decrypted file and it was safely sent.","title":"How to encrypt a large file in openssl using public key"},{"location":"UTILITIES/2018-01-24-mac-retina-%25e5%2590%2588%25e7%259b%2596%25e5%2590%258e%25e6%2589%2593%25e5%25bc%2580%25e7%25aa%2581%25e7%2584%25b6%25e9%25bb%2591%25e5%25b1%258f%25ef%25bc%258c%25e9%2595%25bf%25e6%258c%2589%25e5%25bc%2580%25e6%259c%25ba%25e9%2594%25ae%25e6%2597%25a0%25e5%258f%258d%25e5%25ba%2594.html/","tags":["mac","\u9ed1\u5c4f"],"text":"1\u3001\u5f85\u673a\u706d\u5c4f\u540e\uff0c\u6572\u51fb\u952e\u76d8\u65e0\u6cd5\u5524\u8d77\uff0c\u5408\u4e0a\u7535\u8111\u540e\u91cd\u65b0\u6253\u5f00\uff0c\u770b\u673a\u4f1a\uff0c4\u30015\u6b21\u4e4b\u95f4\u6709\u6210\u529f\u7684\u673a\u4f1a\uff1b 2\u3001\u4f7f\u7528\u4e2d\u5ffd\u7136\u706d\u5c4f\uff0c\u7528\u4e0a\u8ff0\u65b9\u6cd5\u91cd\u65b0\u6253\u5f00\uff1b \u95ee\u4e86\u8d2d\u4e70\u5546\u5bb6\uff0c\u7528\u4e86\u4e0b\u9762\u7b2c\u4e8c\u79cd\u65b9\u6cd5\uff0c\u75c7\u72b6\u51cf\u8f7b\u4e86\uff0c\u8fd8\u662f\u4f1a\u51fa\u73b0\u70b9\u4e0d\u4eae\u6216\u706d\u5c4f\u7684\u60c5\u51b5\uff0c\u6240\u4ee5\u503e\u5411\u6000\u7591\u662f\u8f6f\u4ef6\u95ee\u9898\u3002\u5e76\u4e14\u662f\u57282\u5468\u524d\u66f4\u65b0\u4e86\u7cfb\u7edf\u540e\u53d1\u751f\u7684\u3002 \u65b9\u6cd5\u4e00\uff1a\u7535\u8111\u5173\u673a\uff0c\u63a5\u4e0a\u7535\u6e90\uff0c\u6309\u4f4f\u4ee5\u4e0b4\u4e2a\u6309\u952e\uff0c\u957f\u630930\u79d2\uff1ashift+option+control+\u5f00\u673a\u952e\u3002 \u65b9\u6cd5\u4e8c\uff1a\u7535\u8111\u5173\u673a\uff0c\u8fd9\u6b65\u63a5\u4e0d\u63a5\u7535\u6e90\u90fd\u53ef\u4ee5\uff0c\u6309\u7167\u4ee5\u4e0b\u64cd\u4f5c\uff1a\u957f\u6309command+option+P+R\uff0c\u5f00\u673a\u952e\u6309\u4e00\u4e0b\uff0c\u5207\u8bb0\uff0c\u90a3\u56db\u4e2a\u6309\u952e\u662f\u957f\u6309\u4e00\u76f4\u4e0d\u653e\uff0c\u7b49\u5230\u7cfb\u7edf\u81ea\u52a8\u91cd\u542f\u7b2c\u56db\u58f0\u7684\u65f6\u5019\u6240\u6709\u6309\u952e\u653e\u5f00\uff0c\u800c\u5f00\u673a\u952e\u53ea\u8981\u6309\u4e00\u4e0b\u5c31\u53ef\u4ee5\uff0c\u4e0d\u7528\u957f\u6309\u3002 \u6301\u7eed\u8ddf\u8fdb\u8fd9\u4e2a\u8bdd\u9898\uff0c\u4e00\u4e9b\u540c\u6837\u7684\u7ecf\u9a8c\uff0c\u4f9b\u5927\u5bb6\u53c2\u8003\u3002 \u4f5c\u8005\uff1a\u997f\u8001\u4e09 \u94fe\u63a5\uff1ahttps://www.zhihu.com/question/23015698/answer/188982637 \u6765\u6e90\uff1a\u77e5\u4e4e \u8457\u4f5c\u6743\u5f52\u4f5c\u8005\u6240\u6709\u3002\u5546\u4e1a\u8f6c\u8f7d\u8bf7\u8054\u7cfb\u4f5c\u8005\u83b7\u5f97\u6388\u6743\uff0c\u975e\u5546\u4e1a\u8f6c\u8f7d\u8bf7\u6ce8\u660e\u51fa\u5904\u3002","title":"Mac Retina \u5408\u76d6\u540e\u6253\u5f00\u7a81\u7136\u9ed1\u5c4f\uff0c\u957f\u6309\u5f00\u673a\u952e\u65e0\u53cd\u5e94?"},{"location":"UTILITIES/2018-01-27-sublime-text-%25e6%2594%25af%25e6%258c%2581gbk%25ef%25bc%2588%25e8%25a7%25a3%25e5%2586%25b3%25e4%25b8%25ad%25e6%2596%2587%25e4%25b9%25b1%25e7%25a0%2581%25ef%25bc%2589.html/","tags":["Sublime","\u4e71\u7801","GBK"],"text":"Sublime Text \u662f\u4e00\u6b3e\u65e2\u7b80\u6d01\u53c8\u5f3a\u5927\u7684\u6587\u672c\u7f16\u8f91\u5668\uff0c\u7136\u800c\u5176\u9ed8\u8ba4\u91c7\u7528UTF8\u7f16\u7801\uff0c\u8fd9\u5c31\u9020\u6210\u4e86\u8bb8\u591a\u91c7\u7528GBK\u7f16\u7801\u7684\u6587\u4ef6\u91cc\u7684\u4e2d\u6587\u663e\u793a\u4e3a\u4e71\u7801\u3002\u8fd8\u597d\u6709\u4e00\u4e2a\u4e13\u95e8\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u7684\u63d2\u4ef6\uff1aConvertToUTF8 \u3002 \u5b89\u88c5\u65b9\u6cd5\u5982\u4e0b\uff1a \u6253\u5f00Sublime Text\uff0c\u6309Ctrl + ~\u6253\u5f00\u63a7\u5236\u53f0\uff0c\u5728 https://packagecontrol.io/installation \u6839\u636e\u4f60\u7684 Sublime Text \u7248\u672c\u9009\u62e9\u5bf9\u5e94\u7684\u5b89\u88c5\u4ee3\u7801\uff0c\u5c06\u4ee3\u7801\u8f93\u5165\u63a7\u5236\u53f0\u540e\u56de\u8f66\uff0c\u4e4b\u540e\u4fbf\u4f1a\u81ea\u52a8\u4e0b\u8f7d\u5e76\u5b89\u88c5 Package Control\uff0c\u5b89\u88c5\u5b8c\u6210\u540e\u9700\u8981\u91cd\u542fSublime Text \u3002 \u6309Ctrl + Shift + P\u6253\u5f00\u4e07\u80fd\u641c\u7d22\u6846\uff0c\u7136\u540e\u8f93\u5165install package\u56de\u8f66\uff0c\u8fd9\u65f6\u5019\u4f1a\u52a0\u8f7d\u6240\u6709\u7684packages\u5217\u8868\u3002\u770b\u5230\u5217\u8868\u4e4b\u540e\u518d\u8f93\u5165ConvertToUTF8\u56de\u8f66\uff0c\u5c31\u4f1a\u4e0b\u8f7d\u5b89\u88c5\u8fd9\u4e2a\u5305\u4e86 \u540c\u6837\u7684\u65b9\u5f0f\u5b89\u88c5Codecs33 \u53c2\u8003\uff1ahttp://blog.csdn.net/jackeriss/article/details/44115813","title":"Sublime Text \u652f\u6301GBK\uff08\u89e3\u51b3\u4e2d\u6587\u4e71\u7801\uff09"},{"location":"UTILITIES/2018-05-05-using-vi-hex-editor.html/","tags":["vi","hex","editor"],"text":"Source: http://www.kevssite.com/using-vi-as-a-hex-editor/ Written on April 21, 2009 by Kev Sometimes I find it useful to switch to hex mode when editing a file in vi. The command for switching is not very obvious so thought I\u2019d share\u2026 So, open a file in vi as usual. To switch into hex mode hit escape and type: :%!xxd And when your done and want to exit from hex mode hit escape again and type: :%!xxd -r Okay, so this isn\u2019t actaully switching to vi\u2019s \u2018hex mode\u2019; vi doesn\u2019t have one. What the above actually does is to stream vi\u2019s buffer through the external program \u2018xxd\u2019.","title":"Using vi as a hex editor"},{"location":"UTILITIES/2018-11-17-install-skype-4-5-centos-7.html/","tags":["linux","centos","Skype"],"text":"$ wget https://repo.skype.com/latest/skypeforlinux-64-alpha.rpm $ sudo yum install skypeforlinux-64-alpha.rpm Reference https://www.techspot.com/downloads/4985-skype-for-linux.html https://www.centos.org/forums/viewtopic.php?t=47069","title":"Install Skype for Linux 4.5 on CentOS 7"},{"location":"UTILITIES/2018-12-01-install-fcitx-cloudpinyin-centos-7-5.html/","tags":["centos","input","fcitx","pinyin"],"text":"1. \u5378\u8f7dibus yum remove ibus imsettings 2. \u5b89\u88c5\u62fc\u97f3\u8f93\u5165\u6cd5 yum install imsettings fcitx yum install fcitx-cloudpinyin fcitx-configtool imsettings-switch fcitx 3. \u914d\u7f6eFcitx \u5728~/.bashrc\u4e2d\u6dfb\u52a0\u5982\u4e0b\u5185\u5bb9 export GTK_IM_MODULE=fcitx export QT_IM_MODULE=fcitx export XMODIFIERS=\u201d@im=fcitx\u201d \u6253\u5f00fcitx\u7684\u914d\u7f6e\u5de5\u5177\uff0c\u9009\u62e9\u8f93\u5165\u6cd5\u6807\u7b7e\u70b9\u201d+\u201d\u53ef\u4ee5\u641c\u7d22\u5e76\u6dfb\u52a0\u8f93\u5165\u6cd5 4. Logout & Login Reference https://blog.csdn.net/maokexu123/article/details/44495395","title":"Install fcitx-cloudpinyin on CentOS 7.5"},{"location":"UTILITIES/2019-01-18-change-default-font-linux.html/","tags":[],"text":"You'll need to edit/create the file ~/.fonts.conf . The file does not exist by default. However, if you've used things like Font Manager, then there might be a placeholder file at ~/.fonts.conf telling you to use ~/.config/font-manager/local.conf instead, in which case you should create the latter. You should first open ~/.fonts.conf to check. To check if the file exists, a simple way would be to open the file manager, go to \"Home\", check \"View->Show Hidden Files\" and see if you can find .fonts.conf . Once you've created the file, put the following code in it: sans-serif Droid Sans WenQuanYi Micro Hei Mono What it does is create a font resolution fallback list. When a program is requesting a sans-serif font (most GUI fonts are sans-serif by default), the system would try to use the first font (Droid Sans) for a character. If the font does not support that character, the second (UKai) will be used. I'm not sure if specifying Droid Sans as the first preference has any significance, but you might as well keep it, just to be safe. Note also that you'll need to logout of your account and login again to see the effect. From https://askubuntu.com/questions/73721/how-do-i-change-the-default-chinese-font","title":"How to change the default font of Linux"},{"location":"UTILITIES/2019-07-06-centos7-4%25e5%25ae%2589%25e8%25a3%2585%25e7%25bd%2591%25e6%2598%2593%25e4%25ba%2591%25e9%259f%25b3%25e4%25b9%2590.html/","tags":["centos","\u7f51\u6613\u4e91\u97f3\u4e50"],"text":"\u8f6c\u81ea\u300chttp://tieba.baidu.com/p/5593470159\u300d \u6b65\u9aa4\u5982\u4e0b\uff1a 1. \u524d\u5f80\u7f51\u6613\u4e91\u97f3\u4e50\u4e0b\u8f7d\u5730\u5740 http://music.163.com/#/download \uff0c\u4e0b\u8f7d\u4e4c\u73ed\u56fe64\u4f4d\u7248\u672c\u5b89\u88c5\u7a0b\u5e8f\uff0c\u4f8b\u5982netease-cloud-music_1.1.0_amd64_ubuntu.deb\u3002 2. \u89e3\u538bnetease-cloud-music_1.1.0_amd64_ubuntu.deb\u6587\u4ef6\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a sudo ar -vx netease-cloud-music_1.1.0_amd64_ubuntu.deb \u5f97\u5230\u5982\u4e0b\u4e09\u4e2a\u6587\u4ef6\uff1a x - debian-binary x - control.tar.gz x - data.tar.xz \u7ee7\u7eed\u89e3\u538bdata.tar.xz\u6587\u4ef6\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a sudo xz -dk data.tar.xz sudo tar -xvf data.tar \u89e3\u538b\u540e\u5f97\u5230\u7684usr\u76ee\u5f55\uff0c\u76ee\u5f55\u4e2d\u5305\u542bbin\u3001lib\u3001share\u4e09\u4e2a\u6587\u4ef6\u5939\u3002 3. \u5c06\u8fd9\u4e2ausr\u6587\u4ef6\u5939\u653e\u5165\u5230CentOS7\u4e2d\u7684/usr\u76ee\u5f55\u4e0b\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a sudo cp -r usr/* /usr/ 4. \u5b89\u88c5vlc\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a sudo rpm -Uvh http://li.nux.ro/download/nux/dextop/el7/x86_64/nux-dextop-release-0-1.el7.nux.noarch.rpm sudo yum update sudo yum install vlc 5. \u5b89\u88c5libXScrnSaver\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a sudo yum install libXScrnSaver 6. \u5b89\u88c5Anaconda\uff0c\u524d\u5f80 https://www.anaconda.com/download/#download \u7f51\u7ad9\uff0c\u4e0b\u8f7dPython 3.6 version * \u201c64-Bit (x86) Installer (551 MB)\u201d\u6587\u4ef6\uff0c\u4f8b\u5982\u201cAnaconda3-5.1.0-Linux-x86_64.sh\u201d\uff0c\u4e0b\u8f7d\u5b8c\u6210\u540e\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a sudo sh Anaconda3-5.1.0-Linux-x86_64.sh \u7136\u540e\u4e00\u8defyes\uff0c\u76f4\u81f3\u5b89\u88c5\u7ed3\u675f\u3002 7. \u67e5\u770b\u672c\u673alibgcc\u5e93\u4fe1\u606f\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a sudo strings /usr/lib64/libstdc++.so.6 | grep GLIBC \u53ef\u80fd\u4f1a\u663e\u793a\u5982\u4e0b\u4fe1\u606f\uff0c\u89c6\u5404\u4eba\u673a\u5668\u60c5\u51b5\uff1a GLIBCXX_3.4 GLIBCXX_3.4.1 GLIBCXX_3.4.2 GLIBCXX_3.4.3 GLIBCXX_3.4.4 GLIBCXX_3.4.5 GLIBCXX_3.4.6 GLIBCXX_3.4.7 GLIBCXX_3.4.8 GLIBCXX_3.4.9 GLIBCXX_3.4.10 GLIBCXX_3.4.11 GLIBCXX_3.4.12 GLIBCXX_3.4.13 GLIBCXX_FORCE_NEW GLIBCXX_DEBUG_MESSAGE_LENGTH \u4ee5\u4e0a\u4fe1\u606f\u53ef\u4ee5\u770b\u51fa\uff0cgcc\u7684\u52a8\u6001\u5e93\u8fd8\u662f\u65e7\u7248\u672c\u7684\uff0c\u8fd9\u4e2a\u4f1a\u5bfc\u81f4\u4e0d\u80fd\u6b63\u5e38\u5f00\u542f\u7f51\u6613\u4e91\u97f3\u4e50\u7a0b\u5e8f\u3002 8. \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u67e5\u627e\u672c\u673agcc\u7684\u6700\u65b0\u52a8\u6001\u5e93\uff1a find / -name \"libstdc++.so*\" \u6267\u884c\u5b8c\u4e0a\u9762\u547d\u4ee4\uff0c\u4f1a\u663e\u793a\u4e00\u5806\u672c\u673agcc\u52a8\u6001\u5e93\u4fe1\u606f\uff0c\u4ece\u4e2d\u627e\u5230\u5982\u4e0b\u4fe1\u606f\uff1a /root/anaconda3/lib/libstdc++.so.6.0.24 \u53ef\u4ee5\u770b\u51faanaconda3\u4e3a\u7b2c6\u6b65\u5b89\u88c5\u6240\u5f97\uff0c\u5c06libstdc++.so.6.0.24\u6587\u4ef6\u590d\u5236\u5230/usr/lib64\u76ee\u5f55\u4e0b\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a sudo cp /root/anaconda3/lib/libstdc++.so.6.0.24 /usr/lib64 \u5207\u6362\u5de5\u4f5c\u76ee\u5f55\u81f3/usr/lib64\uff0c\u6267\u884c\u547d\u4ee4\uff1a cd /usr/lib64 \u5220\u9664\u539f\u6765\u8f6f\u8fde\u63a5\uff0c\u6267\u884c\u547d\u4ee4\uff1a sudo rm -rf libstdc++.so.6 \u5c06\u9ed8\u8ba4\u5e93\u7684\u8f6f\u8fde\u63a5\u6307\u5411\u6700\u65b0\u52a8\u6001\u5e93\uff0c\u6267\u884c\u547d\u4ee4\uff1a ln -s libstdc++.so.6.0.24 libstdc++.so.6 \u518d\u4e00\u6b21\u6267\u884c\u547d\u4ee4\u68c0\u67e5gcc\u52a8\u6001\u5e93\u60c5\u51b5\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a strings /usr/lib64/libstdc++.so.6 | grep GLIBC \u663e\u793a\u5185\u5bb9\u5305\u542b\u5982\u4e0b\u4fe1\u606f\uff0c\u5219\u4ee3\u8868\u6700\u65b0gcc\u52a8\u6001\u5e93\u5df2\u7ecf\u5f15\u5165\uff1a GLIBCXX_3.4.12 GLIBCXX_3.4.13 GLIBCXX_3.4.14 GLIBCXX_3.4.15 GLIBCXX_3.4.16 GLIBCXX_3.4.17 GLIBCXX_3.4.18 GLIBCXX_3.4.19 GLIBCXX_3.4.20 GLIBCXX_3.4.21 GLIBCXX_3.4.22 GLIBCXX_3.4.23 GLIBCXX_3.4.24 9. \u901a\u8fc7\u540e\u53f0\u65b9\u5f0f\u542f\u52a8\u7f51\u6613\u4e91\u97f3\u4e50\u7a0b\u5e8f\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a sudo /usr/bin/netease-cloud-music 10. \u901a\u8fc7\u5feb\u6377\u65b9\u5f0f\u56fe\u6807\u542f\u52a8\u7f51\u6613\u4e91\u97f3\u4e50\u7a0b\u5e8f\uff0c\u53c2\u7167\u5982\u4e0b\u6b65\u9aa4\uff1a \u6267\u884c\u547d\u4ee4\uff1a sudo find / -name netease-cloud-music.svg \u5f97\u5230netease-cloud-music.svg\u6587\u4ef6\u8def\u5f84\u4fe1\u606f\uff0c\u5982\uff1a/usr/share/icons/hicolor/scalable/apps/netease-cloud-music.svg \u6267\u884c\u547d\u4ee4\uff1a sudo vim /usr/share/applications/netease-cloud-music.desktop \u4fee\u6539Icon\u56fe\u6807\u8def\u5f84\uff0c\u548cExec\u53ef\u6267\u884c\u547d\u4ee4\u8def\u5f84\uff0c\u5982\u4e0b\uff1a Icon=/usr/share/icons/hicolor/scalable/apps/netease-cloud-music.svg Exec=/usr/bin/netease-cloud-music %U \u4fee\u6539\u684c\u9762\u5feb\u6377\u65b9\u5f0f\u6743\u9650\uff0c\u6267\u884c\u5982\u4e0b\u547d\u4ee4\uff1a sudo chmod u=rw,g=r,o=r /usr/share/applications/netease-cloud-music.desktop \u5b8c\u6210\u4ee5\u540e\uff0c\u5c06\u4f1a\u5728\u201c\u5e94\u7528\u7a0b\u5e8f\u201d-\u300b\u201c\u5f71\u97f3\u201d\u83dc\u5355\u4e2d\u770b\u5230\u201c\u7f51\u6613\u4e91\u97f3\u4e50\u201d\u56fe\u6807\uff0c\u70b9\u51fb\u5373\u53ef\u5f00\u542f\u7f51\u6613\u4e91\u97f3\u4e50\u7a0b\u5e8f\u3002","title":"Centos7.4\u5b89\u88c5\u7f51\u6613\u4e91\u97f3\u4e50"},{"location":"UTILITIES/2020-01-10-how-to-mount-exfat-on-centos.html/","tags":["centos","exFAT"],"text":"sudo yum install fuse-exfat exfat-utils","title":"How to mount exFAT on centos"},{"location":"UTILITIES/2021-09-19-pretty-git-log-in-one-line/","tags":["git"],"text":"TL;DR; git config --global alias.logline \"log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr) %C(bold blue)<%an>%Creset' --abbrev-commit\" git logline See https://ma.ttias.be/pretty-git-log-in-one-line/","title":"Pretty git log in one line"},{"location":"UTILITIES/2021-12-18-shell-script-to-put-file-in-a-ftp-server/","tags":["ftp"],"text":"TL;DR; #!/bin/bash # The 3 variables below store server and login details HOST = \"192.168.0.104\" USER = \"user1\" PASSWORD = \"1234\" # $1 is the first argument to the script # We are using it as upload directory path # If it is '.', file is uploaded to current directory. DESTINATION = $1 # Rest of the arguments are a list of files to be uploaded. # ${@:2} is an array of arguments without first one. ALL_FILES = \" ${ @: 2 } \" # FTP login and upload is explained in paragraph below ftp -inv $HOST <<EOF user $USER $PASSWORD cd $DESTINATION mput $ALL_FILES bye EOF The above script requires the following data: Server\u2019s hostname Server user\u2019s login details The directory in which to upload files on the server (passed as an argument to the script) The list of files to be uploaded to the server (passed as an argument to script) The options -inv can also be written as -i -n -v and their functions are explained in the below table: Option Meaning -i Disable interactive mode, so that FTP will not ask for confirmation of each file while using mput command etc. We are using this for convenience while uploading or downloading files -n Disable auto-login. We have to do this, so we can manually log in using \u201cuser\u201d command inside the script -v Enables verbose mode. This helps us to see the server responses after executing each FTP command To execute the script supply the upload directory and also a list of files: ./script_name.sh path_to_upload file1 file2 file3 See https://www.geeksforgeeks.org/shell-script-to-put-file-in-a-ftp-server/","title":"Shell Script to Put File in a FTP Server"},{"location":"UTILITIES/2021-12-27-how-to-configure-docker-tls-certs/","tags":["docker","cert","tls"],"text":"1. Generating the certs \u00b6 Refer to the comment from BMitch 1 , I wrote the shell script make-certs for generating the certs for both client and server sides. curl -sSL -o make-certs https://raw.githubusercontent.com/cloudecho/util-script/master/cert/make-certs chmod +x make-certs Use the script to generate the certs. Let's say the server dns name is echoyun.demo , and the server ip is 192.168.10.3 ./make-certs -d3650 -J/CN = echoyun.demo -Sechoyun.demo -H192.168.10.3 2. Configuration of the client-side \u00b6 cd echoyun.demo mkdir -p ~/.docker/certs sudo cp client-cert.pem ~/.docker/certs/cert.pem sudo cp client-key.pem ~/.docker/certs/key.pem sudo cp ca.pem ~/.docker/certs/ca.pem Configure the envrionment variables by editing ~/.bash_profile or ~/.profile export DOCKER_TLS_VERIFY = \"1\" export COMPOSE_TLS_VERSION = TLSv1_2 export DOCKER_HOST = \"tcp://echoyun.demo:2376\" configure /etc/hosts if need 192.168.10.3 echoyun.demo 3. Configuration of the server-side \u00b6 Copy the three files to the server which the docker daemon is runing on ca.pem server-cert.pem server-key.pem and put them under a diretory e.g. /var/lib/docker/certs/ Then configure the docker daemon: sudo mkdir -p /etc/systemd/system/docker.service.d cat <<EOF | sudo tee /etc/systemd/system/docker.service.d/docker.conf [Service] ExecStart= ExecStart=/usr/bin/dockerd --containerd=/run/containerd/containerd.sock EOF cat <<EOF | sudo tee /etc/docker/daemon.json { \"tls\": true, \"tlscacert\": \"/var/lib/docker/certs/ca.pem\", \"tlscert\": \"/var/lib/docker/certs/server-cert.pem\", \"tlskey\": \"/var/lib/docker/certs/server-key.pem\", \"hosts\": [\"fd://\", \"tcp://0.0.0.0:2376\"] } EOF Remember to enable and start containerd if it hasn't been started: sudo systemctl enable containerd sudo systemctl start containerd systemctl status containerd Finally, restart docker daemon: sudo systemctl daemon-reload sudo systemctl restart docker systemctl status docker 4. Testing on the client \u00b6 $ docker info ... ... Server: Containers: 0 Running: 0 Paused: 0 Stopped: 0 Images: 15 Server Version: 20 .10.11 ... ... Reference \u00b6 https://stackoverflow.com/questions/38286564/docker-tls-verify-docker-host-and-docker-cert-path-on-ubuntu https://blog.cadena-it.com/linux-tips-how-to/configuring-ssl-requests-with-subjectaltname-with-openssl/","title":"How to configure docker TLS certs"},{"location":"UTILITIES/2021-12-27-how-to-configure-docker-tls-certs/#1-generating-the-certs","text":"Refer to the comment from BMitch 1 , I wrote the shell script make-certs for generating the certs for both client and server sides. curl -sSL -o make-certs https://raw.githubusercontent.com/cloudecho/util-script/master/cert/make-certs chmod +x make-certs Use the script to generate the certs. Let's say the server dns name is echoyun.demo , and the server ip is 192.168.10.3 ./make-certs -d3650 -J/CN = echoyun.demo -Sechoyun.demo -H192.168.10.3","title":"1. Generating the certs"},{"location":"UTILITIES/2021-12-27-how-to-configure-docker-tls-certs/#2-configuration-of-the-client-side","text":"cd echoyun.demo mkdir -p ~/.docker/certs sudo cp client-cert.pem ~/.docker/certs/cert.pem sudo cp client-key.pem ~/.docker/certs/key.pem sudo cp ca.pem ~/.docker/certs/ca.pem Configure the envrionment variables by editing ~/.bash_profile or ~/.profile export DOCKER_TLS_VERIFY = \"1\" export COMPOSE_TLS_VERSION = TLSv1_2 export DOCKER_HOST = \"tcp://echoyun.demo:2376\" configure /etc/hosts if need 192.168.10.3 echoyun.demo","title":"2. Configuration of the client-side"},{"location":"UTILITIES/2021-12-27-how-to-configure-docker-tls-certs/#3-configuration-of-the-server-side","text":"Copy the three files to the server which the docker daemon is runing on ca.pem server-cert.pem server-key.pem and put them under a diretory e.g. /var/lib/docker/certs/ Then configure the docker daemon: sudo mkdir -p /etc/systemd/system/docker.service.d cat <<EOF | sudo tee /etc/systemd/system/docker.service.d/docker.conf [Service] ExecStart= ExecStart=/usr/bin/dockerd --containerd=/run/containerd/containerd.sock EOF cat <<EOF | sudo tee /etc/docker/daemon.json { \"tls\": true, \"tlscacert\": \"/var/lib/docker/certs/ca.pem\", \"tlscert\": \"/var/lib/docker/certs/server-cert.pem\", \"tlskey\": \"/var/lib/docker/certs/server-key.pem\", \"hosts\": [\"fd://\", \"tcp://0.0.0.0:2376\"] } EOF Remember to enable and start containerd if it hasn't been started: sudo systemctl enable containerd sudo systemctl start containerd systemctl status containerd Finally, restart docker daemon: sudo systemctl daemon-reload sudo systemctl restart docker systemctl status docker","title":"3. Configuration of the server-side"},{"location":"UTILITIES/2021-12-27-how-to-configure-docker-tls-certs/#4-testing-on-the-client","text":"$ docker info ... ... Server: Containers: 0 Running: 0 Paused: 0 Stopped: 0 Images: 15 Server Version: 20 .10.11 ... ...","title":"4. Testing on the client"},{"location":"UTILITIES/2021-12-27-how-to-configure-docker-tls-certs/#reference","text":"https://stackoverflow.com/questions/38286564/docker-tls-verify-docker-host-and-docker-cert-path-on-ubuntu https://blog.cadena-it.com/linux-tips-how-to/configuring-ssl-requests-with-subjectaltname-with-openssl/","title":"Reference"}]}